String.prototype.trim=function(){return this.replace(/(^\s+)|(\s+$)/g,"")},String.prototype.isEmpty=function(){return 0==this.length||!1},String.prototype.toBool=function(){return"1"===this.valueOf()||"TRUE"===this.valueOf().toUpperCase()||!1},String.prototype.toInt=function(){return 0==this.length?0:parseInt(this)},String.prototype.toFloat=function(){return 0==this.length?0:parseFloat(this)},String.prototype.insert=function(pos,str){for(var newStr="",i=0;this.length;i+=pos)newStr+=this.substring(i,i+pos)+str;return newStr},String.prototype.push=function(str){return this.concat(this,str)},CanvasRenderingContext2D.prototype.transform2=function(mat){this.transform(mat._a,mat._b,mat._c,mat._d,mat._tx,mat._ty)},Number.prototype.round=function(e){for(var t=1;0<e;t*=10,e--);for(;e<0;t/=10,e++);return Math.round(this*t)/t};var g_gus_blur_mul=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],g_gus_blur_shr=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],ed_clr=function(){this.a=this.b=this.g=this.r=0},blurBitmap=function(image,radius){var stack_pix_ptr,rx=radius,ry=rx,w=image.width,h=image.height,wm=w-1,hm=h-1,linew=4*image.width,pixels=image.data,x=0,y=0,xp=0,yp=0,i=0,stack_ptr=0,stack_start=0,sum_r=0,sum_g=0,sum_b=0,sum_a=0,sum_in_r=0,sum_in_g=0,sum_in_b=0,sum_in_a=0,sum_out_r=0,sum_out_g=0,sum_out_b=0,sum_out_a=0,div=0,mul_sum=0,shr_sum=0,clr_stack=[];if(0<rx){for(var div=2*(rx=254<rx?254:rx)+1,mul_sum=g_gus_blur_mul[rx],shr_sum=g_gus_blur_shr[rx],j=0;j<div;j++)clr_stack.push(new ed_clr);for(var pixel_idx=0,cx=0,dx=0,y=0;y<h;y++){for(cx=pixel_idx,i=sum_out_a=sum_out_b=sum_out_g=sum_out_r=sum_in_a=sum_in_b=sum_in_g=sum_in_r=sum_a=sum_b=sum_g=sum_r=0;i<=rx;i++)(stack_pix_ptr=clr_stack[i]).r=pixels[cx],stack_pix_ptr.g=pixels[cx+1],stack_pix_ptr.b=pixels[cx+2],stack_pix_ptr.a=pixels[cx+3],sum_a+=stack_pix_ptr.a*(i+1),sum_r+=stack_pix_ptr.r*(i+1),sum_g+=stack_pix_ptr.g*(i+1),sum_b+=stack_pix_ptr.b*(i+1),sum_out_a+=stack_pix_ptr.a,sum_out_r+=stack_pix_ptr.r,sum_out_g+=stack_pix_ptr.g,sum_out_b+=stack_pix_ptr.b;for(i=1;i<=rx;i++)i<=wm&&(cx+=4),(stack_pix_ptr=clr_stack[i+rx]).r=pixels[cx],stack_pix_ptr.g=pixels[cx+1],stack_pix_ptr.b=pixels[cx+2],stack_pix_ptr.a=pixels[cx+3],sum_a+=stack_pix_ptr.a*(rx+1-i),sum_r+=stack_pix_ptr.r*(rx+1-i),sum_g+=stack_pix_ptr.g*(rx+1-i),sum_b+=stack_pix_ptr.b*(rx+1-i),sum_in_a+=stack_pix_ptr.a,sum_in_r+=stack_pix_ptr.r,sum_in_g+=stack_pix_ptr.g,sum_in_b+=stack_pix_ptr.b;for(cx=pixel_idx+4*(xp=wm<(xp=stack_ptr=rx)?wm:xp),dx=pixel_idx,x=0;x<w;x++)pixels[dx]=sum_r*mul_sum>>shr_sum,pixels[dx+1]=sum_g*mul_sum>>shr_sum,pixels[dx+2]=sum_b*mul_sum>>shr_sum,pixels[dx+3]=sum_a*mul_sum>>shr_sum,dx+=4,sum_r-=sum_out_r,sum_g-=sum_out_g,sum_b-=sum_out_b,sum_a-=sum_out_a,div<=(stack_start=stack_ptr+div-rx)&&(stack_start-=div),sum_out_a-=(stack_pix_ptr=clr_stack[stack_start]).a,sum_out_r-=stack_pix_ptr.r,sum_out_g-=stack_pix_ptr.g,sum_out_b-=stack_pix_ptr.b,xp<wm&&(cx+=4,++xp),stack_pix_ptr.r=pixels[cx],stack_pix_ptr.g=pixels[cx+1],stack_pix_ptr.b=pixels[cx+2],stack_pix_ptr.a=pixels[cx+3],sum_a+=sum_in_a+=stack_pix_ptr.a,sum_r+=sum_in_r+=stack_pix_ptr.r,sum_g+=sum_in_g+=stack_pix_ptr.g,sum_b+=sum_in_b+=stack_pix_ptr.b,sum_out_a+=(stack_pix_ptr=clr_stack[stack_ptr=div<=++stack_ptr?0:stack_ptr]).a,sum_out_r+=stack_pix_ptr.r,sum_out_g+=stack_pix_ptr.g,sum_out_b+=stack_pix_ptr.b,sum_in_a-=stack_pix_ptr.a,sum_in_r-=stack_pix_ptr.r,sum_in_g-=stack_pix_ptr.g,sum_in_b-=stack_pix_ptr.b;pixel_idx+=linew}clr_stack=[]}if(0<ry){div=2*(ry=254<ry?254:ry)+1,mul_sum=g_gus_blur_mul[ry],shr_sum=g_gus_blur_shr[ry];for(j=0;j<div;j++)clr_stack.push(new ed_clr);for(var pixel_x=0,cx=0,dx=0,x=0;x<w;x++){for(cx=pixel_x,i=sum_out_a=sum_out_b=sum_out_g=sum_out_r=sum_in_a=sum_in_b=sum_in_g=sum_in_r=sum_a=sum_b=sum_g=sum_r=0;i<=ry;i++)(stack_pix_ptr=clr_stack[i]).r=pixels[cx],stack_pix_ptr.g=pixels[cx+1],stack_pix_ptr.b=pixels[cx+2],stack_pix_ptr.a=pixels[cx+3],sum_a+=stack_pix_ptr.a*(i+1),sum_r+=stack_pix_ptr.r*(i+1),sum_g+=stack_pix_ptr.g*(i+1),sum_b+=stack_pix_ptr.b*(i+1),sum_out_a+=stack_pix_ptr.a,sum_out_r+=stack_pix_ptr.r,sum_out_g+=stack_pix_ptr.g,sum_out_b+=stack_pix_ptr.b;for(i=1;i<=ry;i++)i<=hm&&(cx+=linew),(stack_pix_ptr=clr_stack[i+ry]).r=pixels[cx],stack_pix_ptr.g=pixels[cx+1],stack_pix_ptr.b=pixels[cx+2],stack_pix_ptr.a=pixels[cx+3],sum_a+=stack_pix_ptr.a*(ry+1-i),sum_r+=stack_pix_ptr.r*(ry+1-i),sum_g+=stack_pix_ptr.g*(ry+1-i),sum_b+=stack_pix_ptr.b*(ry+1-i),sum_in_a+=stack_pix_ptr.a,sum_in_r+=stack_pix_ptr.r,sum_in_g+=stack_pix_ptr.g,sum_in_b+=stack_pix_ptr.b;for(cx=pixel_x+(yp=hm<(yp=stack_ptr=ry)?hm:yp)*linew,dx=pixel_x,y=0;y<h;y++)pixels[dx]=sum_r*mul_sum>>shr_sum,pixels[dx+1]=sum_g*mul_sum>>shr_sum,pixels[dx+2]=sum_b*mul_sum>>shr_sum,pixels[dx+3]=sum_a*mul_sum>>shr_sum,dx+=linew,sum_a-=sum_out_a,sum_r-=sum_out_r,sum_g-=sum_out_g,sum_b-=sum_out_b,div<=(stack_start=stack_ptr+div-ry)&&(stack_start-=div),sum_out_a-=(stack_pix_ptr=clr_stack[stack_start]).a,sum_out_r-=stack_pix_ptr.r,sum_out_g-=stack_pix_ptr.g,sum_out_b-=stack_pix_ptr.b,yp<hm&&(cx+=linew,++yp),stack_pix_ptr.r=pixels[cx],stack_pix_ptr.g=pixels[cx+1],stack_pix_ptr.b=pixels[cx+2],stack_pix_ptr.a=pixels[cx+3],sum_a+=sum_in_a+=stack_pix_ptr.a,sum_r+=sum_in_r+=stack_pix_ptr.r,sum_g+=sum_in_g+=stack_pix_ptr.g,sum_b+=sum_in_b+=stack_pix_ptr.b,sum_out_a+=(stack_pix_ptr=clr_stack[stack_ptr=div<=++stack_ptr?0:stack_ptr]).a,sum_out_r+=stack_pix_ptr.r,sum_out_g+=stack_pix_ptr.g,sum_out_b+=stack_pix_ptr.b,sum_in_a-=stack_pix_ptr.a,sum_in_r-=stack_pix_ptr.r,sum_in_g-=stack_pix_ptr.g,sum_in_b-=stack_pix_ptr.b;pixel_x+=4}}},EDQuark=function(){function EDQuark(){}return EDQuark.quarkNumber=function(name){EDQuark.init();name=EDQuark._map[name];return name||0},EDQuark.quarkStr=function(key){return EDQuark.init(),0<=key&&key<EDQuark._names.length?EDQuark._names[key]:""},EDQuark.init=function(){EDQuark._init||(EDQuark._map.Invalid=0,EDQuark._map[STR4_Unit_Page]=1,EDQuark._map[STR4_Unit_Real]=2,EDQuark._map[STR4_Unit_Int]=3,EDQuark._map[STR4_Unit_Bool]=4,EDQuark._map[STR4_Unit_Str]=5,EDQuark._map[STR4_Unit_Point]=6,EDQuark._map[STR4_Unit_Color]=7,EDQuark._map[STR4_Unit_Guid]=8,EDQuark._names.push("Invalid"),EDQuark._names.push(STR4_Unit_Page),EDQuark._names.push(STR4_Unit_Real),EDQuark._names.push(STR4_Unit_Int),EDQuark._names.push(STR4_Unit_Bool),EDQuark._names.push(STR4_Unit_Str),EDQuark._names.push(STR4_Unit_Point),EDQuark._names.push(STR4_Unit_Color),EDQuark._names.push(STR4_Unit_Guid),EDQuark._init=!0)},EDQuark._init=!1,EDQuark._map=new Object,EDQuark._names=[],EDQuark}(),EDXmlHelper=function(){function EDXmlHelper(){}return EDXmlHelper.simNodeNum=function(node,name,value){name=node.ownerDocument.createElement(name);name.setAttribute("V",value.toString()),node.appendChild(name)},EDXmlHelper.simNodeStr=function(node,name,value){name=node.ownerDocument.createElement(name);name.setAttribute("V",value),node.appendChild(name)},EDXmlHelper.simNodeBool=function(node,name,value){name=node.ownerDocument.createElement(name);name.setAttribute("V",value?"TRUE":"FALSE"),node.appendChild(name)},EDXmlHelper}(),EDMap=function(){function EDMap(){this._data=new Object}return EDMap.prototype.get=function(key){return this._data[key.toString()]},EDMap.prototype.set=function(key,value){""!=key.toString().trim()&&(this._data[key.toString()]=value)},EDMap.prototype.clear=function(){this._data=new Object},EDMap.prototype.remove=function(key){key.toString()in this._data&&delete this._data[key]},EDMap.prototype.size=function(){var key,num=0;for(key in this._data)++num;return num},EDMap.prototype.isEmpty=function(){for(var key in this._data)return!1;return!0},EDMap.prototype.keys=function(){var key,keys=[];for(key in this._data)keys.push(key);return keys},EDMap.prototype.values=function(){var key,values=[];for(key in this._data)values.push(this._data[key]);return values},EDMap.prototype.contains=function(key){for(var keyl in this._data)if(keyl===key)return!0;return!1},EDMap}(),EDPair=function(){function EDPair(f,s){f instanceof EDPair&&void 0===s?(this._first=f.clone().first,this._second=f.clone().second):(this._first=f,this._second=s)}return Object.defineProperty(EDPair.prototype,"first",{get:function(){return this._first},set:function(f){this._first=f},enumerable:!0,configurable:!0}),Object.defineProperty(EDPair.prototype,"second",{get:function(){return this._second},set:function(s){this._second=s},enumerable:!0,configurable:!0}),EDPair.prototype.clone=function(){return new EDPair(this.first,this.second)},EDPair.prototype.swap=function(other){var f=this.first,s=this.second;this.first=other.first,this.second=other.second,other.first=f,other.second=s},EDPair.prototype.assign=function(other){this.first=other._first,this.second=other._second},EDPair}();function adpatBrowser(event){var pt=new egPoint,ua=window.navigator.userAgent;return-1<ua.indexOf("Edge")||(!window.hasOwnProperty("chrome")&&-1<ua.indexOf("Firefox")?(pt.x=event.layerX,pt.y=event.layerY):(pt.x=event.offsetX,pt.y=event.offsetY)),pt}Array.prototype.insert=function(i,e){-1<=i&&this.splice(i,0,e)},Array.prototype.remove=function(e){e=this.indexOf(e);-1<=e&&this.splice(e,1)},Array.prototype.removeAt=function(i){-1<=i&&this.splice(i,1)},Array.prototype.contains=function(e){return-1!=this.indexOf(e)},Array.prototype.first=function(){return 0<this.length&&this[0]||null},Array.prototype.last=function(){return 0<this.length&&this[this.length-1]||null},Array.prototype.clear=function(){this.length=0},Array.prototype.move=function(pos1,pos2){var i,tmp;if((pos1=parseInt(pos1,10))!==(pos2=parseInt(pos2,10))&&0<=pos1&&pos1<=this.length&&0<=pos2&&pos2<=this.length){if(tmp=this[pos1],pos1<pos2)for(i=pos1;i<pos2;i++)this[i]=this[i+1];else for(i=pos1;pos2<i;i--)this[i]=this[i-1];this[pos2]=tmp}},Element.prototype.clearChilds=function(){for(;this.lastChild;)this.lastChild=null,this.removeChild(this.lastChild)};var EDTextType,EDMathMlNodeType,EDMmlFormulaIndex,EDMmlNodeLayoutType,MathVariant,FormType,ColAlign,RowAlign,FrameType,SymbolType,StretchDir,ChildSpec,MmlFont,EDRendAdjustBits,EdrawMathDate,EdrawMath,__read=this&&this.__read||function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||0<n--)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__spread=this&&this.__spread||function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar},egMath=function(){function egMath(){}return egMath.log2=function(x){return Math.log(x)*Math.LOG2E},egMath.clamp=function(value,min,max){return value<min?min:max<value?max:value},egMath.ellipsePoint=function(box,angle){box.height<.1&&(box.height=.1),(360<angle||angle<-360)&&(angle-=360*Math.floor(angle/360)),angle<-180&&(angle+=360),180<angle&&(angle-=360),angle=angle*Math.PI/180;var pt=new egPoint,realAngle=Math.atan(Math.tan(angle)*box.width/box.height);return angle<0&&0<realAngle?realAngle-=Math.PI:0<angle&&realAngle<0&&(realAngle+=Math.PI),pt.x=.5*box.width*Math.cos(realAngle)+box.x+.5*box.width,pt.y=.5*box.height*Math.sin(realAngle)+box.y+.5*box.height,pt},egMath.integrate=function(f,a,b,n){for(var x=egMath.abscissas[n-2],w=egMath.weights[n-2],A=.5*(b-a),B=A+a,i=0,m=n+1>>1,sum=1&n?w[i++]*f(B):0;i<m;){var Ax=A*x[i];sum+=w[i++]*(f(B+Ax)+f(B-Ax))}return A*sum},egMath.solveCubic=function(a,b,c,d,roots,min,max){var x,b1,c2,qd,q,f=egMath.getNormalizationFactor(Math.abs(a),Math.abs(b),Math.abs(c),Math.abs(d));function evaluate(x0){x0=a*(x=x0);qd=(x0+(b1=x0+b))*x+(c2=b1*x+c),q=c2*x+d}if(f&&(a*=f,b*=f,c*=f,d*=f),Math.abs(a)<egMath.EPSILON)a=b,b1=c,c2=d,x=1/0;else if(Math.abs(d)<egMath.EPSILON)b1=b,c2=c,x=0;else{evaluate(-b/a/3);var f=q/a,r=Math.pow(Math.abs(f),1/3),s=f<0?-1:1,f=-qd/a,f=0<f?1.324717957244746*Math.max(r,Math.sqrt(f)):r,x0=x-s*f;if(x0!==x){for(;evaluate(x0),s*x<s*(x0=0===qd?x:x-q/qd/(1+egMath.MACHINE_EPSILON)););Math.abs(a)*x*x>Math.abs(d/x)&&(b1=((c2=-d/x)-c)/x)}}r=egMath.solveQuadratic(a,b1,c2,roots,min,max),f=null==min;return isFinite(x)&&(0===r||0<r&&x!==roots[0]&&x!==roots[1])&&(f||min-egMath.EPSILON<x&&x<max+egMath.EPSILON)&&(roots[r++]=f?x:egMath.clamp(x,min,max)),r},egMath.solveQuadratic=function(a,b,c,roots,min,max){var x1,x2=1/0;if(Math.abs(a)<egMath.EPSILON){if(Math.abs(b)<egMath.EPSILON)return Math.abs(c)<egMath.EPSILON?-1:0;x1=-c/b}else{var D=egMath.getDiscriminant(a,b*=-.5,c);D&&Math.abs(D)<egMath.MACHINE_EPSILON&&(f=egMath.getNormalizationFactor(Math.abs(a),Math.abs(b),Math.abs(c)))&&(D=egMath.getDiscriminant(a*=f,b*=f,c*=f)),-egMath.MACHINE_EPSILON<=D&&(f=D<0?0:Math.sqrt(D),x2=0===(D=b+(b<0?-f:f))?-(x1=c/a):(x1=D/a,c/D))}var b=0,f=null==min,a=min-egMath.EPSILON,c=max+egMath.EPSILON;return isFinite(x1)&&(f||a<x1&&x1<c)&&(roots[b++]=f?x1:egMath.clamp(x1,min,max)),x2!==x1&&isFinite(x2)&&(f||a<x2&&x2<c)&&(roots[b++]=f?x2:egMath.clamp(x2,min,max)),b},egMath.getDiscriminant=function(a,b,c){function split(v){var x=134217729*v,x=v-x+x;return[x,v-x]}var bd,cd,D=b*b-a*c,E=b*b+a*c;return 3*Math.abs(D)<E&&(E=split(a),bd=split(b),cd=split(c),D=(b=b*b)-(a=a*c)+(bd[0]*bd[0]-b+2*bd[0]*bd[1]+bd[1]*bd[1]-(E[0]*cd[0]-a+E[0]*cd[1]+E[1]*cd[0]+E[1]*cd[1]))),D},egMath.findRoot=function(f,df,x,a,b,n,tolerance){for(var i=0;i<n;i++){var fx=f(x),dx=fx/df(x),nx=x-dx;if(Math.abs(dx)<tolerance)return nx;x=0<fx?(b=x,nx<=a?.5*(a+b):nx):(a=x,b<=nx?.5*(a+b):nx)}return x},egMath.getNormalizationFactor=function(){for(var vals=[],_i=0;_i<arguments.length;_i++)vals[_i]=arguments[_i];var norm=Math.max.apply(Math,__spread(vals));return norm&&(norm<1e-8||1e8<norm)?Math.pow(2,-Math.round(egMath.log2(norm))):0},egMath.isZero=function(val){return-egMath.EPSILON<=val&&val<=egMath.EPSILON},egMath.pointEqual1=function(ptf1,ptf2){return Math.abs(ptf1.x-ptf2.x)<1&&Math.abs(ptf1.y-ptf2.y)<1},egMath.distance=function(ptf1,ptf2){return Math.sqrt((ptf1.x-ptf2.x)*(ptf1.x-ptf2.x)+(ptf1.y-ptf2.y)*(ptf1.y-ptf2.y))},egMath.intNoise_1D=function(x){return 1-((x^=x<<13)*(x*x*15731+789221)+1376312589&2147483647)/1073741824},egMath.smoothNoise_1D=function(x){return egMath.intNoise_1D(x)},egMath.cosineInterpolate_1D=function(a,b,x){x=.5*(1-Math.cos(3.1415927*x));return a*(1-x)+b*x},egMath.cubicInterpolate_1D=function(v0,v1,v2,v3,x){v3=v3-v2-(v0-v1);return v3*x*x*x+(v0-v1-v3)*x*x+(v2-v0)*x+v1},egMath.interpolateNoise_1D=function(x){var integerX=Math.floor(x),x=x-integerX,v1=egMath.smoothNoise_1D(integerX),integerX=egMath.smoothNoise_1D(integerX+1);return egMath.cosineInterpolate_1D(v1,integerX,x)},egMath.perlinNoise_1D=function(x){for(var total=0,i=0;i<4;i++){var frequency=Math.pow(2,i),amplitude=Math.pow(.1,i);total+=egMath.interpolateNoise_1D(x*frequency)*amplitude}return total},egMath.abscissas=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],egMath.weights=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],egMath.TOLERANCE=1e-6,egMath.EPSILON=1e-12,egMath.MACHINE_EPSILON=112e-18,egMath.CURVETIME_EPSILON=4e-7,egMath.GEOMETRIC_EPSILON=2e-7,egMath.WINDING_EPSILON=2e-7,egMath.TRIGONOMETRIC_EPSILON=1e-7,egMath.CLIPPING_EPSILON=1e-7,egMath.KAPPA=4*(Math.sqrt(2)-1)/3,egMath}(),egFormatter=function(){function egFormatter(preci){this._precision=preci=void 0===preci?5:preci,this._multiplier=Math.pow(10,this._precision)}return egFormatter.prototype.number=function(val){return Math.round(val*this._multiplier)/this._multiplier},egFormatter.prototype.pair=function(val1,val2,separator){return this.number(val1)+(separator||",")+this.number(val2)},egFormatter.prototype.point=function(pt,separator){return this.number(pt.x)+(separator||",")+this.number(pt.y)},egFormatter.prototype.size=function(sz,separator){return this.number(sz.width)+(separator||",")+this.number(sz.height)},egFormatter.prototype.rect=function(rect,separator){return this.number(rect.x)+(separator||",")+this.number(rect.y)+(separator||",")+this.number(rect.width)+(separator||",")+this.number(rect.height)},egFormatter}(),egRect=(egFormatter.inst=new egFormatter(5),function(){function egRect(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var minx,maxx,miny,maxy,count=args.length;1===count&&args[0]instanceof egRect?this.setRect(args[0]):2==count&&args[0]instanceof egPoint?(minx=Math.min(args[0].x,args[1].x),maxx=Math.max(args[0].x,args[1].x),miny=Math.min(args[0].y,args[1].y),maxy=Math.max(args[0].y,args[1].y),this._x=minx,this._y=miny,this._width=maxx-minx,this._height=maxy-miny):4===count?(this._x=args[0],this._y=args[1],this._width=args[2],this._height=args[3]):this.reset()}return Object.defineProperty(egRect.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x},enumerable:!0,configurable:!0}),Object.defineProperty(egRect.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y},enumerable:!0,configurable:!0}),Object.defineProperty(egRect.prototype,"width",{get:function(){return this._width},set:function(w){this._width=w},enumerable:!0,configurable:!0}),Object.defineProperty(egRect.prototype,"height",{get:function(){return this._height},set:function(h){this._height=h},enumerable:!0,configurable:!0}),egRect.prototype.top=function(){return this._y},egRect.prototype.left=function(){return this._x},egRect.prototype.moveLeft=function(x){this.x=x},egRect.prototype.moveRight=function(x){this.x=x-this._width},egRect.prototype.moveTop=function(x){this.y=x},egRect.prototype.moveTopLeft=function(pt){this.x=pt.x,this.y=pt.y},egRect.prototype.set=function(x,y,width,height){return this._x=x,this._y=y,this._width=width,this._height=height,this},egRect.prototype.setRect=function(rect){return this._x=rect.x,this._y=rect.y,this._width=rect.width,this._height=rect.height,this},egRect.prototype.assign=function(rect){this.x=rect.x,this.y=rect.y,this.width=rect.width,this.height=rect.height},egRect.prototype.clone=function(){return new egRect(this.x,this.y,this.width,this.height)},egRect.prototype.equals=function(rc){return rc===this||rc&&edFloatEqual(this.x,rc.x)&&edFloatEqual(this.y,rc.y)&&edFloatEqual(this.width,rc.width)&&edFloatEqual(this.height,rc.height)||!1},egRect.prototype.toString=function(){var f=egFormatter.inst;return"{ x: "+f.number(this.x)+", y: "+f.number(this.y)+", width: "+f.number(this.width)+", height: "+f.number(this.height)+" }"},egRect.prototype.toSvg=function(){var res="";return(res+="M"+Math.round(this.left())+","+Math.round(this.top()))+("L"+Math.round(this.right())+","+Math.round(this.top()))+("L"+Math.round(this.right())+","+Math.round(this.bottom()))+("L"+Math.round(this.left())+","+Math.round(this.bottom()))+"Z"},egRect.prototype.isEmpty=function(){return this._width<1e-12||this._height<1e-12||!1},egRect.prototype.getArea=function(){return this.width*this.height},egRect.prototype.reset=function(){this._x=this._y=this._width=this._height=0},egRect.prototype.right=function(){return this._x+this._width},egRect.prototype.bottom=function(){return this._y+this._height},egRect.prototype.containsPt=function(pt){return pt.x>=this._x&&pt.x<=this._x+this._width&&pt.y>=this._y&&pt.y<=this._y+this._height},egRect.prototype.containsRect=function(rect){return rect.x>=this.x&&rect.y>=this.y&&rect.x+rect.width<=this.x+this.width&&rect.y+rect.height<=this.y+this.height},egRect.prototype.intersect=function(rect){var x1=Math.max(this.x,rect.x),y1=Math.max(this.y,rect.y);return new egRect(x1,y1,Math.min(this.x+this.width,rect.x+rect.width)-x1,Math.min(this.y+this.height,rect.y+rect.height)-y1)},egRect.prototype.intersects=function(rect){return rect.x+rect.width>this.x&&rect.y+rect.height>this.y&&rect.x<this.x+this.width&&rect.y<this.y+this.height},egRect.prototype.touches=function(rect){return rect.x+rect.width>=this.x&&rect.y+rect.height>=this.y&&rect.x<=this.x+this.width&&rect.y<=this.y+this.height},egRect.prototype.unite=function(rect){var x1,y1;return rect.width<=0||rect.height<=0?new egRect(this):this.width<=0||this.height<=0?new egRect(rect):new egRect(x1=Math.min(this.x,rect.x),y1=Math.min(this.y,rect.y),Math.max(this.x+this.width,rect.x+rect.width)-x1,Math.max(this.y+this.height,rect.y+rect.height)-y1)},egRect.prototype.united=function(rect){if(!(rect.width<=0||rect.height<=0)){if(this.width<=0||this.height<=0)return this.setRect(rect);var x1=Math.min(this.x,rect.x),y1=Math.min(this.y,rect.y),x2=Math.max(this.x+this.width,rect.x+rect.width),rect=Math.max(this.y+this.height,rect.y+rect.height);this.x=x1,this.y=y1,this.width=x2-x1,this.height=rect-y1}},egRect.prototype.include=function(pt){var x1=Math.min(this.x,pt.x),y1=Math.min(this.y,pt.y);return new egRect(x1,y1,Math.max(this.x+this.width,pt.x)-x1,Math.max(this.y+this.height,pt.y)-y1)},egRect.prototype.expand=function(arg){var hor=0,ver=0;return"number"==typeof arg?hor=ver=arg:arg instanceof egSize&&(hor=arg.width,ver=arg.height),new egRect(this.x-hor/2,this.y-ver/2,this.width+hor,this.height+ver)},egRect.prototype.adjust=function(x1,y1,x2,y2){return this.x+=x1,this.y+=y1,this.width+=x2-x1,this.height+=y2-y1,this},egRect.prototype.translate=function(offx,offy){this.x+=offx,this.y+=offy},egRect.prototype.zoom=function(rate){return new egRect(this._x*rate,this._y*rate,this._width*rate,this._height*rate)},egRect.prototype.round=function(){return new egRect(Math.round(this._x),Math.round(this._y),Math.round(this._x+this._width)-Math.round(this._x),Math.round(this._y+this._height)-Math.round(this._y))},egRect.prototype.topLeft=function(){return new egPoint(this.x,this.y)},egRect.prototype.topRight=function(){return new egPoint(this.x+this._width,this.y)},egRect.prototype.bottomLeft=function(){return new egPoint(this.x,this.y+this._height)},egRect.prototype.bottomRight=function(){return new egPoint(this.x+this._width,this.y+this._height)},egRect.prototype.center=function(){return new egPoint(this._x+.5*this._width,this._y+.5*this._height)},egRect.prototype.size=function(){return new egSize(this._width,this._height)},egRect.prototype.moveCenter=function(pt){return this._x=pt.x-.5*this._width,this._y=pt.y-.5*this._height,this},egRect.prototype.pin=function(){return new egPoint(this.x+this.width/2,this.y+this.height/2)},egRect.prototype.toPath=function(){var path=new EDPath;return path.moveTo(this.x,this.y),path.lineTo(this.x+this.width,this.y),path.lineTo(this.x+this.width,this.y+this.height),path.lineTo(this.x,this.y+this.height),path.closeSubpath(),path},egRect}()),egSize=function(){function egSize(arg0,arg1){"number"==typeof arg0?(this._width=arg0,this._height="number"==typeof arg1?arg1:arg0):Array.isArray(arg0)&&(this._width=arg0[0],this._height=1<arg0.length?arg0[1]:arg0[0])}return Object.defineProperty(egSize.prototype,"width",{get:function(){return this._width},set:function(w){this._width=w},enumerable:!0,configurable:!0}),Object.defineProperty(egSize.prototype,"height",{get:function(){return this._height},set:function(h){this._height=h},enumerable:!0,configurable:!0}),egSize.prototype.set=function(width,height){return this._width=width,this._height=height,this},egSize.prototype.isEmpty=function(){return this.width<1||this.height<1},egSize.prototype.equals=function(size){return size===this||size&&(this.width===size.width&&this.height===size.height||Array.isArray(size)&&this.width===size[0]&&this.height===size[1])||!1},egSize.prototype.clone=function(){return new egSize(this.width,this.height)},egSize.prototype.add=function(arg){return arg instanceof egSize?new egSize(this.width+arg.width,this.height+arg.height):"number"==typeof arg?new egSize(this.width+arg,this.height+arg):void 0},egSize.prototype.divide=function(arg){return arg instanceof egSize?new egSize(this.width/arg.width,this.height/arg.height):"number"==typeof arg?new egSize(this.width/arg,this.height/arg):void 0},egSize.prototype.multiply=function(arg){return arg instanceof egSize?new egSize(this.width*arg.width,this.height*arg.height):"number"==typeof arg?new egSize(this.width*arg,this.height*arg):void 0},egSize}(),egMargin=function(){function egMargin(left,top,right,bottom){this._left=left,this._top=top,this._right=right,this._bottom=bottom}return Object.defineProperty(egMargin.prototype,"left",{get:function(){return this._left},set:function(v){this._left=v},enumerable:!0,configurable:!0}),Object.defineProperty(egMargin.prototype,"right",{get:function(){return this._right},set:function(v){this._right=v},enumerable:!0,configurable:!0}),Object.defineProperty(egMargin.prototype,"top",{get:function(){return this._top},set:function(v){this._top=v},enumerable:!0,configurable:!0}),Object.defineProperty(egMargin.prototype,"bottom",{get:function(){return this._bottom},set:function(v){this._bottom=v},enumerable:!0,configurable:!0}),egMargin.prototype.set=function(left,top,right,bottom){this._left=left,this._top=top,this.right=right,this._bottom=bottom},egMargin.prototype.assign=function(other){this.left=other.left,this.top=other.top,this.right=other.right,this.bottom=other.bottom},egMargin.prototype.isEmpty=function(){return 0==this._left&&0==this._right&&0==this._top&&0==this._bottom},egMargin.prototype.clone=function(){return new egMargin(this._left,this._top,this._right,this._bottom)},egMargin}(),egPoint=function(){function egPoint(x,y){x instanceof egPoint?(this._x=x.x,this._y=x.y):(this._x=x||0,this._y=y||0)}return egPoint.prototype.assign=function(pt){this.x=pt.x,this.y=pt.y},Object.defineProperty(egPoint.prototype,"x",{get:function(){return this._x},set:function(x){this._x=x},enumerable:!0,configurable:!0}),Object.defineProperty(egPoint.prototype,"y",{get:function(){return this._y},set:function(y){this._y=y},enumerable:!0,configurable:!0}),egPoint.prototype.reset=function(){this._x=0,this._y=0},egPoint.prototype.set=function(x,y){return this._x=x,this._y=y,this},egPoint.prototype.setPt=function(pt){return this.x=pt.x,this.y=pt.y,this},egPoint.prototype.equals=function(pt){return this===pt||pt&&(this.x===pt.x&&this.y===pt.y||Array.isArray(pt)&&this.x===pt[0]&&this.y===pt[1])||!1},egPoint.prototype.equals2=function(pt,tolerance){return void 0===tolerance&&(tolerance=1e-5),this===pt||pt&&Math.abs(pt.x-this.x)<tolerance&&Math.abs(pt.y-this.y)<tolerance||!1},egPoint.prototype.clone=function(){return new egPoint(this.x,this.y)},egPoint.prototype.toString=function(){return egFormatter.inst.point(this)},egPoint.prototype.getLength=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},egPoint.prototype.setLength=function(length){length/=this.getLength();this.set(this.x*length,this.y*length)},egPoint.prototype.getAngle=function(pt){return 180*this.getAngleInRadians.apply(this,pt)/Math.PI},egPoint.prototype.setAngle=function(angle){this.setAngleInRadians.call(this,angle*Math.PI/180)},egPoint.prototype.getAngleInRadians=function(pt){var div;return pt?(div=this.getLength()*pt.getLength(),egMath.isZero(div)?NaN:(pt=this.dot(pt)/div,Math.acos(pt<-1?-1:1<pt?1:pt))):this.isZero()?0:Math.atan2(this.y,this.x)},egPoint.prototype.setAngleInRadians=function(angle){var length;this.isZero()||(length=this.getLength(),this.set(Math.cos(angle)*length,Math.sin(angle)*length))},egPoint.prototype.getQuadrant=function(){return 0<=this.x?0<=this.y?1:4:0<=this.y?2:3},egPoint.prototype.getDirectedAngle=function(pt){return 180*Math.atan2(this.cross(pt),this.dot(pt))/Math.PI},egPoint.prototype.getDistance=function(pt,squared){var x=pt.x-this.x,pt=pt.y-this.y,x=x*x+pt*pt;return squared?x:Math.sqrt(x)},egPoint.prototype.normalize=function(length){void 0===length&&(length=1);var current=this.getLength(),length=0!==current?length/current:0;return new egPoint(this.x*length,this.y*length)},egPoint.prototype.rotate=function(angle,center){if(0===angle)return this.clone();angle=angle*Math.PI/180;var point=center?this.subtract(center):this,sin=Math.sin(angle),angle=Math.cos(angle),point=new egPoint(point.x*angle-point.y*sin,point.x*sin+point.y*angle);return center?point.add(center):point},egPoint.prototype.translated=function(x,y){this.x+=x,this.y+=y},egPoint.prototype.transform=function(mx){return mx?mx.transformPoint(this):this},egPoint.prototype.add=function(pt){return new egPoint(this.x+pt.x,this.y+pt.y)},egPoint.prototype.subtract=function(pt){return new egPoint(this.x-pt.x,this.y-pt.y)},egPoint.prototype.multiply=function(v){return v instanceof egPoint?new egPoint(this.x*v.x,this.y*v.y):new egPoint(this.x*v,this.y*v)},egPoint.prototype.divide=function(v){return v instanceof egPoint?new egPoint(this.x/v.x,this.y/v.y):v instanceof egSize?new egPoint(this.x/v.width,this.y/v.height):new egPoint(this.x/v,this.y/v)},egPoint.prototype.modulo=function(v){return v instanceof egPoint?new egPoint(this.x%v.x,this.y%v.y):new egPoint(this.x%v,this.y%v)},egPoint.prototype.negate=function(){return new egPoint(-this.x,-this.y)},egPoint.prototype.isInside=function(rc){return rc.containsPt(this)},egPoint.prototype.isClose=function(pt,tolerance){return void 0===tolerance&&(tolerance=.1),this.getDistance(pt)<tolerance},egPoint.prototype.isCollinear=function(pt){return egPoint.isCollinear(this.x,this.y,pt.x,pt.y)},egPoint.prototype.isOrthogonal=function(pt){return egPoint.isOrthogonal(this.x,this.y,pt.x,pt.y)},egPoint.prototype.isZero=function(){return egMath.isZero(this.x)&&egMath.isZero(this.y)},egPoint.prototype.isNaN=function(){return isNaN(this.x)||isNaN(this.y)},egPoint.prototype.dot=function(pt){return this._x*pt._x+this._y*pt._y},egPoint.prototype.cross=function(pt){return this._x*pt._y-this._y*pt._x},egPoint.prototype.project=function(pt){var scale=pt.isZero()?0:this.dot(pt)/pt.dot(pt);return new egPoint(pt.x*scale,pt.y*scale)},egPoint.min=function(pt1,pt2){return new egPoint(Math.min(pt1.x,pt2.x),Math.min(pt1.y,pt2.y))},egPoint.max=function(pt1,pt2){return new egPoint(Math.max(pt1.x,pt2.x),Math.max(pt1.y,pt2.y))},egPoint.prototype.random=function(){return new egPoint(Math.random(),Math.random())},egPoint.isCollinear=function(x1,y1,x2,y2){return Math.abs(x1*y2-y1*x2)<=1e-7*Math.sqrt((x1*x1+y1*y1)*(x2*x2+y2*y2))},egPoint.isOrthogonal=function(x1,y1,x2,y2){return Math.abs(x1*x2+y1*y2)<=1e-7*Math.sqrt((x1*x1+y1*y1)*(x2*x2+y2*y2))},egPoint.prototype.round=function(){return new egPoint(Math.round(this.x),Math.round(this.y))},egPoint.prototype.manhattanLength=function(){return qAbs(this.x)+qAbs(this.y)},egPoint}(),egMatrix=function(){function egMatrix(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var count=args.length;1===count?args[0]instanceof egMatrix&&this.set(args[0]._a,args[0]._b,args[0]._c,args[0]._d,args[0]._tx,args[0]._ty):6===count?this.set(args[0],args[1],args[2],args[3],args[4],args[5]):this.reset()}return egMatrix.prototype.reset=function(){this._a=this._d=1,this._b=this._c=this._tx=this._ty=0},egMatrix.prototype.set=function(a,b,c,d,tx,ty){this._a=a,this._b=b,this._c=c,this._d=d,this._tx=tx,this._ty=ty},egMatrix.prototype.clone=function(){return new egMatrix(this)},egMatrix.prototype.equals=function(max){return max===this||max&&this._a===max._a&&this._b===max._b&&this._c===max._c&&this._d===max._d&&this._tx===max._tx&&this._ty===max._ty||!1},egMatrix.prototype.toString=function(){var f=egFormatter.inst;return"[["+[f.number(this._a),f.number(this._c),f.number(this._tx)].join(", ")+"], ["+[f.number(this._b),f.number(this._d),f.number(this._ty)].join(", ")+"]]"},egMatrix.prototype.toCSSString=function(){return"matrix("+this._a+","+this._b+","+this._c+","+this._d+","+this._tx+","+this._ty+")"},egMatrix.prototype.translate=function(x,y){var tx,x=tx instanceof egPoint?(tx=x.x,x.y):(tx=x,y);return this._tx+=tx*this._a+x*this._c,this._ty+=tx*this._b+x*this._d,this},egMatrix.prototype.translated=function(x,y){return this.clone().translate(x,y)},egMatrix.prototype.scale=function(sx,sy,cpt){return cpt&&this.translate(cpt),this._a*=sx,this._b*=sx,this._c*=sy,this._d*=sy,cpt&&this.translate(cpt.negate()),this},egMatrix.prototype.scaled=function(sx,sy,cpt){return this.clone().scale(sx,sy,cpt)},egMatrix.prototype.rotate=function(angle){angle*=Math.PI/180;var cos=Math.cos(angle),angle=Math.sin(angle),a=this._a,b=this._b,c=this._c,d=this._d;return this._a=cos*a+angle*c,this._b=cos*b+angle*d,this._c=-angle*a+cos*c,this._d=-angle*b+cos*d,this._a=Math.abs(this._a)<EmZeroDist?0:this._a,this._b=Math.abs(this._b)<EmZeroDist?0:this._b,this._c=Math.abs(this._c)<EmZeroDist?0:this._c,this._d=Math.abs(this._d)<EmZeroDist?0:this._d,this},egMatrix.prototype.rotateAt=function(angle,cpt){return this.translate(-cpt.x,-cpt.y).rotate(angle).translate(cpt.x,cpt.y)},egMatrix.prototype.shear=function(x,y,cpt){cpt&&this.translate(cpt);var a=this._a,b=this._b;return this._a+=y*this._c,this._b+=y*this._d,this._c+=x*a,this._d+=x*b,cpt&&this.translate(cpt.negate()),this},egMatrix.prototype.skew=function(x,y,cpt){var toRadians=Math.PI/180,x=Math.tan(x*toRadians),y=Math.tan(y*toRadians);return this.shear(x,y,cpt)},egMatrix.prototype.prepend=function(mx){var a1,b1,c1,d1,a2,b2,c2,d2,tx2;return mx&&(a1=this._a,b1=this._b,c1=this._c,d1=this._d,a2=mx._a,b2=mx._c,c2=mx._b,d2=mx._d,tx2=mx._tx,mx=mx._ty,this._a=a2*a1+c2*c1,this._c=b2*a1+d2*c1,this._b=a2*b1+c2*d1,this._d=b2*b1+d2*d1,this._tx+=tx2*a1+mx*c1,this._ty+=tx2*b1+mx*d1),this},egMatrix.prototype.append=function(mx){var a1,b1,c1,d1,tx1,ty1,a2,b2,c2,d2,tx2;return mx&&(a1=this._a,b1=this._b,c1=this._c,d1=this._d,tx1=this._tx,ty1=this._ty,a2=mx._a,b2=mx._c,c2=mx._b,d2=mx._d,tx2=mx._tx,mx=mx._ty,this._a=a2*a1+b2*b1,this._c=a2*c1+b2*d1,this._b=c2*a1+d2*b1,this._d=c2*c1+d2*d1,this._tx=a2*tx1+b2*ty1+tx2,this._ty=c2*tx1+d2*ty1+mx),this},egMatrix.prototype.appended=function(mx){return this.clone().append(mx)},egMatrix.prototype.prepended=function(mx){return this.clone().prepend(mx)},egMatrix.prototype.invert=function(){var a=this._a,b=this._b,c=this._c,d=this._d,tx=this._tx,ty=this._ty,det=a*d-b*c,res=null;return det&&!isNaN(det)&&isFinite(tx)&&isFinite(ty)&&(this._a=d/det,this._b=-b/det,this._c=-c/det,this._d=a/det,this._tx=(c*ty-d*tx)/det,this._ty=(b*tx-a*ty)/det,res=this),res},egMatrix.prototype.inverted=function(){return this.clone().invert()},egMatrix.prototype._shiftless=function(){return new egMatrix(this._a,this._b,this._c,this._d,0,0)},egMatrix.prototype._orNullIfIdentity=function(){return this.isIdentity()?null:this},egMatrix.prototype.isIdentity=function(){return 1===this._a&&0===this._b&&0===this._c&&1===this._d&&0===this._tx&&0===this._ty},egMatrix.prototype.isInvertible=function(){var det=this._a*this._d-this._c*this._b;return det&&!isNaN(det)&&isFinite(this._tx)&&isFinite(this._ty)},egMatrix.prototype.isSingular=function(){return!this.isInvertible()},egMatrix.prototype.transformPoint=function(pt){var x=pt.x*this._a+pt.y*this._c+this._tx,pt=pt.x*this._b+pt.y*this._d+this._ty;return new egPoint(x,pt)},egMatrix.prototype.transformPoints=function(pts){for(var x,y,i=0,l=pts.length;i<l;i++)x=pts[i].x*this._a+pts[i].y*this._c+this._tx,y=pts[i].x*this._b+pts[i].y*this._d+this._ty,pts[i].x=x,pts[i].y=y;return pts},egMatrix.prototype.transformXY=function(x,y){var x1=x*this._a+y*this._c+this._tx,x=x*this._b+y*this._d+this._ty;return new Array(x1,x)},egMatrix.prototype.transformCoords=function(src,dst,count){for(var i=0,max=2*count;i<max;i+=2){var x=src[i],y=src[i+1];dst[i]=x*this._a+y*this._c+this._tx,dst[i+1]=x*this._b+y*this._d+this._ty}return dst},egMatrix.prototype._transformCorners=function(rect){var x1=rect.x,y1=rect.y,x2=x1+rect.width,rect=y1+rect.height,y1=[x1,y1,x2,y1,x2,rect,x1,rect];return this.transformCoords(y1,y1,4)},egMatrix.prototype.transformBounds=function(bounds){for(var coords=this._transformCorners(bounds),min=coords.slice(0,2),max=min.slice(),i=2;i<8;i++){var val=coords[i],j=1&i;val<min[j]?min[j]=val:val>max[j]&&(max[j]=val)}return(new egRect).set(min[0],min[1],max[0]-min[0],max[1]-min[1])},egMatrix}(),egBezier=function(){function egBezier(arg,pt2,pt3,pt4){this._x1=this._y1=this._x2=this._y2=this._x3=this._y3=this._x4=this._y4=0,arg&&(arg instanceof egBezier?(this._x1=arg._x1,this._y1=arg._y1,this._x2=arg._x2,this._y2=arg._y2,this._x3=arg._x3,this._y3=arg._y3,this._x4=arg._x4,this._y4=arg._y4):arg instanceof egPoint&&(this._x1=arg.x,this._y1=arg.y,this._x2=pt2.x,this._y2=pt2.y,this._x3=pt3.x,this._y3=pt3.y,this._x4=pt4.x,this._y4=pt4.y))}return egBezier.prototype.pt1=function(){return new egPoint(this._x1,this._y1)},egBezier.prototype.pt2=function(){return new egPoint(this._x2,this._y2)},egBezier.prototype.pt3=function(){return new egPoint(this._x3,this._y3)},egBezier.prototype.pt4=function(){return new egPoint(this._x4,this._y4)},egBezier.prototype.parameterSplitLeft=function(t){var left=new egBezier;return left._x1=this._x1,left._y1=this._y1,left._x2=this._x1+t*(this._x2-this._x1),left._y2=this._y1+t*(this._y2-this._y1),left._x3=this._x2+t*(this._x3-this._x2),left._y3=this._y2+t*(this._y3-this._y2),this._x3=this._x3+t*(this._x4-this._x3),this._y3=this._y3+t*(this._y4-this._y3),this._x2=left._x3+t*(this._x3-left._x3),this._y2=left._y3+t*(this._y3-left._y3),left._x3=left._x2+t*(left._x3-left._x2),left._y3=left._y2+t*(left._y3-left._y2),left._x4=this._x1=left._x3+t*(this._x2-left._x3),left._y4=this._y1=left._y3+t*(this._y2-left._y3),left},egBezier.prototype.bezierOnInterval=function(t0,t1){var bezier=new egBezier(this);return 0==t0&&1==t1?bezier:(bezier.parameterSplitLeft(t0),bezier.parameterSplitLeft((t1-t0)/(1-t0)))},egBezier.arcToBezier=function(rect,startAngle,sweepLength,curves){if(isNaN(rect.x)||isNaN(rect.y)||isNaN(rect.width)||isNaN(rect.height)||isNaN(startAngle)||isNaN(sweepLength))return new egPoint;if(rect.isEmpty())return new egPoint;var x=rect.x,y=rect.y,w=rect.width,w2=.5*rect.width,w2k=w2*egMath.KAPPA,h=rect.height,h2=.5*rect.height,h2k=h2*egMath.KAPPA,points=[new egPoint(x+w,y+h2),new egPoint(x+w,y+h2+h2k),new egPoint(x+w2+w2k,y+h),new egPoint(x+w2,y+h),new egPoint(x+w2-w2k,y+h),new egPoint(x,y+h2+h2k),new egPoint(x,y+h2),new egPoint(x,y+h2-h2k),new egPoint(x+w2-w2k,y),new egPoint(x+w2,y),new egPoint(x+w2+w2k,y),new egPoint(x+w,y+h2-h2k),new egPoint(x+w,y+h2)];if(360<sweepLength?sweepLength=360:sweepLength<-360&&(sweepLength=-360),0==startAngle){if(360==sweepLength){for(var i=11;0<=i;--i)curves.push(points[i]);return points[12]}if(-360==sweepLength){for(i=1;i<=12;++i)curves.push(points[i]);return points[0]}}var startSegment=Math.floor(startAngle/90),endSegment=Math.floor((startAngle+sweepLength)/90),startT=(startAngle-90*startSegment)/90,endT=(startAngle+sweepLength-90*endSegment)/90,delta=0<sweepLength?1:-1,splitAtStart=(delta<0&&(startT=1-startT,endT=1-endT),egMath.isZero(startT-1)&&(startT=0,startSegment+=delta),egMath.isZero(endT)&&(endT=1,endSegment-=delta),startT=egBezier.arcAngle(90*startT),endT=egBezier.arcAngle(90*endT),!egMath.isZero(startT)),splitAtEnd=!egMath.isZero(endT-1),end=endSegment+delta;if(startSegment==end)return j=3*(3-(startSegment%4+4)%4),0<delta?points[j+3]:points[j];for(var startPoint=egMath.ellipsePoint(rect,-startAngle),h=egMath.ellipsePoint(rect,-startAngle-sweepLength),i=startSegment;i!=end;i+=delta){var j=3*(3-(i%4+4)%4),b=void 0,b=0<delta?new egBezier(points[j+3],points[j+2],points[j+1],points[j]):new egBezier(points[j],points[j+1],points[j+2],points[j+3]);if(startSegment==endSegment&&egMath.isZero(startT-endT))return startPoint;i==startSegment?i==endSegment&&splitAtEnd?b=b.bezierOnInterval(startT,endT):splitAtStart&&(b=b.bezierOnInterval(startT,1)):i==endSegment&&splitAtEnd&&(b=b.bezierOnInterval(0,endT)),curves.push(b.pt2()),curves.push(b.pt3()),curves.push(b.pt4())}return 0<curves.length&&(curves[curves.length-1]=h),startPoint},egBezier.arcAngle=function(angle){var radians,cosAngle;return egMath.isZero(angle)?0:egMath.isZero(angle-90)?1:(radians=Math.PI*angle/180,cosAngle=Math.cos(radians),radians=Math.sin(radians),angle=angle/90,cosAngle=angle=(angle-=(((2-3*egMath.KAPPA)*angle+3*(egMath.KAPPA-1))*angle*angle+1-cosAngle)/(((6-9*egMath.KAPPA)*angle+6*(egMath.KAPPA-1))*angle))-(((2-3*egMath.KAPPA)*angle+3*(egMath.KAPPA-1))*angle*angle+1-cosAngle)/(((6-9*egMath.KAPPA)*angle+6*(egMath.KAPPA-1))*angle),.5*(angle+(cosAngle=(cosAngle-=((((3*egMath.KAPPA-2)*cosAngle-6*egMath.KAPPA+3)*cosAngle+3*egMath.KAPPA)*cosAngle-radians)/(((9*egMath.KAPPA-6)*cosAngle+12*egMath.KAPPA-6)*cosAngle+3*egMath.KAPPA))-((((3*egMath.KAPPA-2)*cosAngle-6*egMath.KAPPA+3)*cosAngle+3*egMath.KAPPA)*cosAngle-radians)/(((9*egMath.KAPPA-6)*cosAngle+12*egMath.KAPPA-6)*cosAngle+3*egMath.KAPPA))))},egBezier}(),egLine=function(){function egLine(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];(4<=args.length?(this._px=args[0],this._py=args[1],this._vx=args[2],this._vy=args[3],args[4]):(this._px=args[0].x,this._py=args[0].y,this._vx=args[1].x,this._vy=args[1].y,args[2]))||(this._vx-=this._px,this._vy-=this._py)}return egLine.prototype.getPoint=function(){return new egPoint(this._px,this._py)},egLine.prototype.getVector=function(){return new egPoint(this._vx,this._vy)},egLine.prototype.getLength=function(){return this.getVector().getLength()},egLine.prototype.intersect=function(line,isInfinite){return egLine.intersect(this._px,this._py,this._vx,this._vy,line._px,line._py,line._vx,line._vy,!0,isInfinite)},egLine.prototype.getSide=function(point,isInfinite){return egLine.getSide(this._px,this._py,this._vx,this._vy,point.x,point.y,!0,isInfinite)},egLine.prototype.getDistance=function(point){return Math.abs(egLine.getSignedDistance(this._px,this._py,this._vx,this._vy,point.x,point.y,!0))},egLine.prototype.isCollinear=function(line){return egPoint.isCollinear(this._vx,this._vy,line._vx,line._vy)},egLine.prototype.isOrthogonal=function(line){return egPoint.isOrthogonal(this._vx,this._vy,line._vx,line._vy)},egLine.intersect=function(p1x,p1y,v1x,v1y,p2x,p2y,v2x,v2y,asVector,isInfinite){asVector||(v1x-=p1x,v1y-=p1y,v2x-=p2x,v2y-=p2y);asVector=v1x*v2y-v1y*v2x;if(!egMath.isZero(asVector)){p2x=p1x-p2x,p2y=p1y-p2y,v2x=(v2x*p2y-v2y*p2x)/asVector,v2y=(v1x*p2y-v1y*p2x)/asVector;if(isInfinite||-1e-12<v2x&&v2x<1+1e-12&&-1e-12<v2y&&v2y<1+1e-12)return new egPoint(p1x+(v2x=isInfinite?v2x:v2x<=0?0:1<=v2x?1:v2x)*v1x,p1y+v2x*v1y)}},egLine.getSide=function(px,py,vx,vy,x,y,asVector,isInfinite){asVector||(vx-=px,vy-=py);asVector=x-px,x=asVector*vy-(y-py)*vx;return 0!==x||isInfinite||0<=(x=(asVector*vx+asVector*vx)/(vx*vx+vy*vy))&&x<=1&&(x=0),x<0?-1:0<x?1:0},egLine.getSignedDistance=function(px,py,vx,vy,x,y,asVector){return asVector||(vx-=px,vy-=py),0===vx?0<vy?x-px:px-x:0===vy?vx<0?y-py:py-y:((x-px)*vy-(y-py)*vx)/Math.sqrt(vx*vx+vy*vy)},egLine}(),egSegment=function(){function egSegment(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var count=args.length;1===count&&args[0]instanceof egSegment||2===count&&"number"==typeof args[0]?(this._point=new egPoint(args[0],args[1]),this._handleIn=new egPoint,this._handleOut=new egPoint):count<=3?(this._point=new egPoint(args[0]||null),this._handleIn=new egPoint(args[1]||null),this._handleOut=new egPoint(args[2]||null)):6===count&&"number"==typeof args[0]?(this._point=new egPoint(args[0],args[1]),this._handleIn=new egPoint(args[2],args[3]),this._handleOut=new egPoint(args[4],args[5])):(this._point=new egPoint,this._handleIn=new egPoint,this._handleOut=new egPoint),this._visited=!1,this._contour=!1,this._state=0,this._index=0,this._path=null,this._intersection=null}return egSegment.prototype.clone=function(){return new egSegment(this._point,this._handleIn,this._handleOut)},egSegment.prototype.getPoint=function(){return this._point},egSegment.prototype.setPoint=function(pt){this._point.set(pt.x,pt.y)},egSegment.prototype.getHandleIn=function(){return this._handleIn},egSegment.prototype.setHandleIn=function(pt){this._handleIn.set(pt.x,pt.y)},egSegment.prototype.getHandleOut=function(){return this._handleOut},egSegment.prototype.setHandleOut=function(pt){this._handleOut.set(pt.x,pt.y)},egSegment.prototype.hasHandles=function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},egSegment.prototype.clearHandles=function(){this._handleIn.set(0,0),this._handleOut.set(0,0)},egSegment.prototype.getIndex=function(){return void 0!==this._index?this._index:-1},egSegment.prototype.getPath=function(){return this._path||null},egSegment.prototype.getCurve=function(){var path=this._path,index=this._index;return path&&(0<index&&!path._closed&&index===path._segments.length-1&&index--,path.getCurves()[index])||null},egSegment.prototype.getLocation=function(){var curve=this.getCurve();return curve?new egCurveLocation(curve,this===curve._segment1?0:1):null},egSegment.prototype.getNext=function(){var segments=this._path&&this._path._segments;return segments&&(segments[this._index+1]||this._path._closed&&segments[0])||null},egSegment.prototype.getPrevious=function(){var segments=this._path&&this._path._segments;return segments&&(segments[this._index-1]||this._path._closed&&segments[segments.length-1])||null},egSegment.prototype.smooth=function(_first,_last,type,factor){var k,t,A,N,prev=this.getPrevious(),next=this.getNext(),p0=(prev||this)._point,p1=this._point,p2=(next||this)._point,d1=p0.getDistance(p1),d2=p1.getDistance(p2);type&&1!==type?2===type&&prev&&next&&(type=p0.subtract(p2),k=(t=void 0===factor?.4:factor)*d1/(d1+d2),_first||this.setHandleIn(type.multiply(k)),_last||this.setHandleOut(type.multiply(k-t))):(type=void 0===factor?.5:factor,t=(k=Math.pow(d1,type))*k,d1=(factor=Math.pow(d2,type))*factor,!_first&&prev&&(A=2*d1+3*factor*k+t,this.setHandleIn(0!==(N=3*factor*(factor+k))?new egPoint((d1*p0._x+A*p1._x-t*p2._x)/N-p1._x,(d1*p0._y+A*p1._y-t*p2._y)/N-p1._y):new egPoint)),!_last&&next&&(A=2*t+3*k*factor+d1,this.setHandleOut(0!==(N=3*k*(k+factor))?new egPoint((t*p2._x+A*p1._x-d1*p0._x)/N-p1._x,(t*p2._y+A*p1._y-d1*p0._y)/N-p1._y):new egPoint)))},egSegment.prototype.isFirst=function(){return 0===this._index},egSegment.prototype.isLast=function(){var path=this._path;return path&&this._index===path._segments.length-1||!1},egSegment.prototype.reverse=function(){var tmpIn=this._handleIn.clone();this._handleIn.setPt(this._handleOut),this._handleOut.setPt(tmpIn)},egSegment.prototype.reversed=function(){return new egSegment(this._point,this._handleOut,this._handleIn)},egSegment.prototype.remove=function(){return!!this._path&&!!this._path.removeSegment(this._index)},egSegment.prototype.equals=function(segment){return segment===this||segment&&this._point.equals(segment._point)&&this._handleIn.equals(segment._handleIn)&&this._handleOut.equals(segment._handleOut)||!1},egSegment.prototype.toString=function(){var parts=["point: "+this._point];return this._handleIn.isZero()||parts.push("handleIn: "+this._handleIn),this._handleOut.isZero()||parts.push("handleOut: "+this._handleOut),"{ "+parts.join(", ")+" }"},egSegment.prototype.transform=function(matrix){this._transformCoordinates(matrix,new Array(6),!0)},egSegment.prototype.interpolate=function(from,to,factor){var u=1-factor,point1=from._point,point2=to._point,handleIn1=from._handleIn,handleIn2=to._handleIn,to=to._handleOut,from=from._handleOut;this._point.set(u*point1._x+factor*point2._x,u*point1._y+factor*point2._y),this._handleIn.set(u*handleIn1._x+factor*handleIn2._x,u*handleIn1._y+factor*handleIn2._y),this._handleOut.set(u*from._x+factor*to._x,u*from._y+factor*to._y)},egSegment.prototype._transformCoordinates=function(matrix,coords,change){var point=this._point,handleIn=change&&this._handleIn.isZero()?null:this._handleIn,handleOut=change&&this._handleOut.isZero()?null:this._handleOut,x=point._x,y=point._y,i=2;return coords[0]=x,coords[1]=y,handleIn&&(coords[i++]=handleIn._x+x,coords[i++]=handleIn._y+y),handleOut&&(coords[i++]=handleOut._x+x,coords[i++]=handleOut._y+y),matrix&&(matrix.transformCoords(coords,coords,i/2),x=coords[0],y=coords[1],change?(point._x=x,point._y=y,i=2,handleIn&&(handleIn._x=coords[i++]-x,handleIn._y=coords[i++]-y),handleOut&&(handleOut._x=coords[i++]-x,handleOut._y=coords[i++]-y)):(handleIn||(coords[i++]=x,coords[i++]=y),handleOut||(coords[i++]=x,coords[i++]=y))),coords},egSegment.segsEquals=function(segs1,segs2){if(segs1!==segs2){if(segs1.length!==segs2.length)return!1;for(var i=0;i<segs1.length;i++)if(!segs1[i].equals(segs2[i]))return!1}return!0},egSegment}(),egCurve=function(){function egCurve(arg0,arg1,arg2,arg3,arg4,arg5,arg6,arg7){var seg1,seg2,point1,point2,handle1,handle2,count=arguments.length;3===count?(this._path=arg0,seg1=arg1,seg2=arg2):0===count?(seg1=new egSegment,seg2=new egSegment):1===count?"segment1"in arg0?(seg1=new egSegment(arg0.segment1),seg2=new egSegment(arg0.segment2)):"point1"in arg0?(point1=arg0.point1,handle1=arg0.handle1,handle2=arg0.handle2,point2=arg0.point2):Array.isArray(arg0)&&(point1=[arg0[0],arg0[1]],point2=[arg0[6],arg0[7]],handle1=[arg0[2]-arg0[0],arg0[3]-arg0[1]],handle2=[arg0[4]-arg0[6],arg0[5]-arg0[7]]):2===count?(seg1=new egSegment(arg0),seg2=new egSegment(arg1)):4===count?(point1=arg0,handle1=arg1,handle2=arg2,point2=arg3):8===count&&(point1=[arg0,arg1],point2=[arg6,arg7],handle1=[arg2-arg0,arg3-arg1],handle2=[arg4-arg6,arg5-arg7]),this._segment1=seg1||new egSegment(point1,null,handle1),this._segment2=seg2||new egSegment(point2,handle2,null)}return egCurve.prototype._changed=function(){this._length=this._bounds=void 0},egCurve.prototype.clone=function(){return new egCurve(this._segment1,this._segment2)},egCurve.prototype.toString=function(){var parts=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||parts.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||parts.push("handle2: "+this._segment2._handleIn),parts.push("point2: "+this._segment2._point),"{ "+parts.join(", ")+" }"},egCurve.prototype.remove=function(){var segment2,handleOut,removed=!1;return this._path&&(handleOut=(segment2=this._segment2)._handleOut,removed=segment2.remove())&&this._segment1._handleOut.set(handleOut.x,handleOut.y),removed},egCurve.prototype.getPoint1=function(){return this._segment1._point},egCurve.prototype.setPoint1=function(pt){this._segment1._point.set(pt.x,pt.y)},egCurve.prototype.getPoint2=function(){return this._segment2._point},egCurve.prototype.setPoint2=function(pt){this._segment2._point.set(pt.x,pt.y)},egCurve.prototype.getHandle1=function(){return this._segment1._handleOut},egCurve.prototype.setHandle1=function(pt){this._segment1._handleOut.set(pt.x,pt.y)},egCurve.prototype.getHandle2=function(){return this._segment2._handleIn},egCurve.prototype.setHandle2=function(pt){this._segment2._handleIn.set(pt.x,pt.y)},egCurve.prototype.getPath=function(){return this._path},egCurve.prototype.getIndex=function(){return this._segment1._index},egCurve.prototype.getNext=function(){var curves=this._path&&this._path._curves;return curves&&(curves[this._segment1._index+1]||this._path._closed&&curves[0])||null},egCurve.prototype.getPrevious=function(){var curves=this._path&&this._path._curves;return curves&&(curves[this._segment1._index-1]||this._path._closed&&curves[curves.length-1])||null},egCurve.prototype.isFirst=function(){return 0===this._segment1._index},egCurve.prototype.isLast=function(){var path=this._path;return path&&this._segment1._index===path._curves.length-1||!1},egCurve.prototype.getValues=function(matrix){return egCurve.getValues(this._segment1,this._segment2,matrix)},egCurve.prototype.getPoints=function(){for(var coords=this.getValues(),points=[],i=0;i<8;i+=2)points.push(new egPoint(coords[i],coords[i+1]));return points},egCurve.prototype.getLength=function(){return null==this._length&&(this._length=egCurve.getLength(this.getValues(),0,1)),this._length},egCurve.prototype.getArea=function(){return egCurve.getArea(this.getValues())},egCurve.prototype.getLine=function(){return new egLine(this._segment1._point,this._segment2._point)},egCurve.prototype.getPart=function(from,to){return new egCurve(egCurve.getPart(this.getValues(),from,to))},egCurve.prototype.getPartLength=function(from,to){return egCurve.getLength(this.getValues(),from,to)},egCurve.prototype.getIntersectionscurve=function(curve){return egCurve._getIntersections(this.getValues(),curve&&curve!==this?curve.getValues():null,this,curve,[],{})},egCurve.prototype.divideAt=function(location){return this.divideAtTime(location&&location._curve===this?location._time:location)},egCurve.prototype.divideAtTime=function(time,_setHandles){var segment1,segment2,path,x,y,left,res=null;return 4e-7<=time&&time<=1-4e-7&&(left=(time=egCurve.subdivide(this.getValues(),time))[0],time=time[1],_setHandles=_setHandles||this.hasHandles(),segment1=this._segment1,segment2=this._segment2,path=this._path,_setHandles&&(segment1._handleOut.set(left[2]-left[0],left[3]-left[1]),segment2._handleIn.set(time[4]-time[6],time[5]-time[7])),x=left[6],y=left[7],left=new egSegment(new egPoint(x,y),_setHandles&&new egPoint(left[4]-x,left[5]-y),_setHandles&&new egPoint(time[2]-x,time[3]-y)),res=path?(path.insert(segment1._index+1,left),this.getNext()):(this._segment2=left,this._changed(),new egCurve(left,segment2))),res},egCurve.prototype.splitAt=function(location){return this._path?this._path.splitAt(location):null},egCurve.prototype.splitAtTime=function(t){return this.splitAt(this.getLocationAtTime(t))},egCurve.prototype.divide=function(offset,isTime){return this.divideAtTime(void 0===offset?.5:isTime?offset:this.getTimeAt(offset))},egCurve.prototype.split=function(offset,isTime){return this.splitAtTime(void 0===offset?.5:isTime?offset:this.getTimeAt(offset))},egCurve.prototype.reversed=function(){return new egCurve(this._segment2.reversed(),this._segment1.reversed())},egCurve.prototype.clearHandles=function(){this._segment1._handleOut.set(0,0),this._segment2._handleIn.set(0,0)},egCurve.getValues=function(seg1,seg2,matrix){var p1=seg1._point,seg1=seg1._handleOut,p2=seg2._point,seg2=seg2._handleIn,p1=[p1._x,p1._y,p1._x+seg1._x,p1._y+seg1._y,p2._x+seg2._x,p2._y+seg2._y,p2._x,p2._y];return matrix&&matrix.transformCoords(p1,p1,4),p1},egCurve.subdivide=function(v,t){var p1x=v[0],p1y=v[1],c1x=v[2],c1y=v[3],c2x=v[4],c2y=v[5],p2x=v[6],v=v[7],u=1-(t=void 0===t?.5:t),p3x=u*p1x+t*c1x,p3y=u*p1y+t*c1y,c1x=u*c1x+t*c2x,c1y=u*c1y+t*c2y,c2x=u*c2x+t*p2x,c2y=u*c2y+t*v,p6x=u*p3x+t*c1x,p6y=u*p3y+t*c1y,c1x=u*c1x+t*c2x,c1y=u*c1y+t*c2y,p8x=u*p6x+t*c1x,u=u*p6y+t*c1y;return[[p1x,p1y,p3x,p3y,p6x,p6y,p8x,u],[p8x,u,c1x,c1y,c2x,c2y,p2x,v]]},egCurve.solveCubic=function(v,coord,val,roots,min,max){var p1=v[coord],c1=v[coord+2],c2=v[coord+4],v=v[coord+6],coord=3*(c1-p1),c2=3*(c2-c1)-coord;return egMath.solveCubic(v-p1-coord-c2,c2,coord,p1-val,roots,min,max)},egCurve.getTimeOf=function(v,point){var p1=new egPoint(v[0],v[1]),p2=new egPoint(v[6],v[7]),t=point.isClose(p1,1e-12)?0:point.isClose(p2,1e-12)?1:null;if(null!==t)return t;for(var coords=[point.x,point.y],roots=[],c=0;c<2;c++)for(var count=egCurve.solveCubic(v,c,coords[c],roots,0,1),i=0;i<count;i++)if(point.isClose(egCurve.getPoint(v,t=roots[i]),2e-7))return t;return point.isClose(p1,2e-7)?0:point.isClose(p2,2e-7)?1:null},egCurve.getNearestTime=function(v,point){var p1x,p1y,vx,vy,det;if(egCurve.isStraight(v))return p1x=v[0],p1y=v[1],0==(det=(vx=v[6]-p1x)*vx+(vy=v[7]-p1y)*vy)||(det=((point.x-p1x)*vx+(point.y-p1y)*vy)/det)<1e-12?0:.999999999999<det?1:egCurve.getTimeOf(v,new egPoint(p1x+det*vx,p1y+det*vy));var minDist=1/0,minT=0;function refine(t){var dist;return 0<=t&&t<=1&&(dist=point.getDistance(egCurve.getPoint(v,t),!0))<minDist?(minDist=dist,minT=t,1):void 0}for(var i=0;i<=100;i++)refine(i/100);for(var step=.005;4e-7<step;)refine(minT-step)||refine(minT+step)||(step/=2);return minT},egCurve.getPart=function(v,from,to){var tmp,flip=to<from;return flip&&(tmp=from,from=to,to=tmp),0<from&&(v=egCurve.subdivide(v,from)[1]),to<1&&(v=egCurve.subdivide(v,(to-from)/(1-from))[0]),flip?[v[6],v[7],v[4],v[5],v[2],v[3],v[0],v[1]]:v},egCurve.isFlatEnough=function(v,flatness){var p1x=v[0],p1y=v[1],c1x=v[2],c1y=v[3],c2x=v[4],c2y=v[5],p2x=v[6],v=v[7],c1x=3*c1x-2*p1x-p2x,c1y=3*c1y-2*p1y-v,c2x=3*c2x-2*p2x-p1x,p2x=3*c2y-2*v-p1y;return Math.max(c1x*c1x,c2x*c2x)+Math.max(c1y*c1y,p2x*p2x)<=16*flatness*flatness},egCurve.getArea=function(v){var p1x=v[0],p1y=v[1],c1x=v[2],c1y=v[3],c2x=v[4],c2y=v[5],p2x=v[6],v=v[7];return 3*((v-p1y)*(c1x+c2x)-(p2x-p1x)*(c1y+c2y)+c1y*(p1x-c2x)-c1x*(p1y-c2y)+v*(c2x+p1x/3)-p2x*(c2y+p1y/3))/20},egCurve.getBounds=function(v){for(var min=v.slice(0,2),max=min.slice(),roots=[0,0],i=0;i<2;i++)egCurve._addBounds(v[i],v[i+2],v[i+4],v[i+6],i,0,min,max,roots);return new egRect(min[0],min[1],max[0]-min[0],max[1]-min[1])},egCurve._addBounds=function(v0,v1,v2,v3,coord,padding,min,max,roots){function add(value,padding){var left=value-padding,value=value+padding;left<min[coord]&&(min[coord]=left),value>max[coord]&&(max[coord]=value)}var minPad=min[coord]-(padding/=2),maxPad=max[coord]+padding;if(v0<minPad||v1<minPad||v2<minPad||v3<minPad||maxPad<v0||maxPad<v1||maxPad<v2||maxPad<v3)if(v1<v0!=v1<v3&&v2<v0!=v2<v3)add(v0,padding),add(v3,padding);else{var count=egMath.solveQuadratic(3*(v1-v2)-v0+v3,2*(v0+v2)-4*v1,v1-v0,roots);add(v3,0);for(var i=0;i<count;i++){var t=roots[i],u=1-t;4e-7<t&&t<1-4e-7&&add(u*u*u*v0+3*u*u*t*v1+3*u*t*t*v2+t*t*t*v3,padding)}}},egCurve._isStraight=function(l,h1,h2){var v;return!(!h1.isZero()||!h2.isZero())||!(v=l.getVector()).isZero()&&l.getDistance(h1)<2e-7&&l.getDistance(h2)<2e-7&&(l=v.dot(v),h1=v.dot(h1)/l,v=v.dot(h2)/l,0<=h1)&&h1<=1&&v<=0&&-1<=v},egCurve.isStraight=function(v){return egCurve._isStraight(new egLine(v[0],v[1],v[6],v[7]),new egPoint(v[2]-v[0],v[3]-v[1]),new egPoint(v[4]-v[6],v[5]-v[7]))},egCurve.prototype.isStraight=function(){var seg1=this._segment1,seg2=this._segment2;return egCurve._isStraight(new egLine(seg1._point,seg2._point),seg1._handleOut,seg2._handleIn)},egCurve._isLinear=function(l,h1,h2){l=l.getVector().divide(3);return h1.equals(l)&&h2.negate().equals(l)},egCurve.isLinear=function(v){v[0],v[1],v[6],v[7];return egCurve._isLinear(new egLine(v[0],v[1],v[6],v[7]),new egPoint(v[2]-v[0],v[3]-v[1]),new egPoint(v[4]-v[6],v[5]-v[7]))},egCurve.prototype.isLinear=function(){var seg1=this._segment1,seg2=this._segment2;return egCurve._isLinear(new egLine(seg1._point,seg2._point),seg1._handleOut,seg2._handleIn)},egCurve.hasHandles=function(v){var isZero=egMath.isZero;return!(isZero(v[0]-v[2])&&isZero(v[1]-v[3])&&isZero(v[4]-v[6])&&isZero(v[5]-v[7]))},egCurve.prototype.hasHandles=function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},egCurve.prototype.isCollinear=function(curve){return curve&&this.isStraight()&&curve.isStraight()&&this.getLine().isCollinear(curve.getLine())},egCurve.prototype.isHorizontal=function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-7},egCurve.prototype.isVertical=function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-7},egCurve.prototype.getLocationAt=function(offset,_isTime){return this.getLocationAtTime(_isTime?offset:this.getTimeAt(offset))},egCurve.prototype.getLocationAtTime=function(t){return null!=t&&0<=t&&t<=1?new egCurveLocation(this,t):null},egCurve.prototype.getTimeAt=function(offset,start){return egCurve.getTimeAt(this.getValues(),offset,start)},egCurve.prototype.getOffsetAtTime=function(t){return this.getPartLength(0,t)},egCurve.prototype.getLocationOf=function(pt){return this.getLocationAtTime(this.getTimeOf(pt))},egCurve.prototype.getOffsetOf=function(pt){pt=this.getLocationOf.apply(this,pt);return pt?pt.getOffset():null},egCurve.prototype.getTimeOf=function(pt){return egCurve.getTimeOf(this.getValues(),pt)},egCurve.prototype.getNearestLocation=function(point){var values=this.getValues(),t=egCurve.getNearestTime(values,point),values=egCurve.getPoint(values,t);return new egCurveLocation(this,t,values,null,point.getDistance(values))},egCurve.prototype.getNearestPoint=function(point){point=this.getNearestLocation.apply(this,point);return point&&point.getPoint()},egCurve.prototype.getPointAt=function(location,_isTime){var values=this.getValues();return egCurve.getPoint(values,_isTime?location:egCurve.getTimeAt(values,location))},egCurve.prototype.getTangentAt=function(location,_isTime){var values=this.getValues();return egCurve.getTangent(values,_isTime?location:egCurve.getTimeAt(values,location))},egCurve.prototype.getNormalAt=function(location,_isTime){var values=this.getValues();return egCurve.getNormal(values,_isTime?location:egCurve.getTimeAt(values,location))},egCurve.prototype.getWeightedTangentAt=function(location,_isTime){var values=this.getValues();return egCurve.getWeightedTangent(values,_isTime?location:egCurve.getTimeAt(values,location))},egCurve.prototype.getWeightedNormalAt=function(location,_isTime){var values=this.getValues();return egCurve.getWeightedNormal(values,_isTime?location:egCurve.getTimeAt(values,location))},egCurve.prototype.getCurvatureAt=function(location,_isTime){var values=this.getValues();return egCurve.getCurvature(values,_isTime?location:egCurve.getTimeAt(values,location))},egCurve.prototype.getPointAtTime=function(time){return egCurve.getPoint(this.getValues(),time)},egCurve.prototype.getTangentAtTime=function(time){return egCurve.getTangent(this.getValues(),time)},egCurve.prototype.getNormalAtTime=function(time){return egCurve.getNormal(this.getValues(),time)},egCurve.prototype.getWeightedTangentAtTime=function(time){return egCurve.getWeightedTangent(this.getValues(),time)},egCurve.prototype.getWeightedNormalAtTime=function(time){return egCurve.getWeightedNormal(this.getValues(),time)},egCurve.prototype.getCurvatureAtTime=function(time){return egCurve.getCurvature(this.getValues(),time)},egCurve._getLengthIntegrand=function(v){var p1x=v[0],p1y=v[1],c1x=v[2],c1y=v[3],c2x=v[4],c2y=v[5],p2x=v[6],v=v[7],ax=9*(c1x-c2x)+3*(p2x-p1x),bx=6*(p1x+c2x)-12*c1x,cx=3*(c1x-p1x),ay=9*(c1y-c2y)+3*(v-p1y),by=6*(p1y+c2y)-12*c1y,cy=3*(c1y-p1y);return function(t){var dx=(ax*t+bx)*t+cx,t=(ay*t+by)*t+cy;return Math.sqrt(dx*dx+t*t)}},egCurve._getIterations=function(a,b){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(b-a))))},egCurve._evaluate=function(v,t,type,normalized){var c1x,c1y,c2x,c2y,isZero,bx,ax,cy,by,ay,p1x,p1y,p2x,x,y;return null==t||t<0||1<t?null:(p1x=v[0],p1y=v[1],c1x=v[2],c1y=v[3],c2x=v[4],c2y=v[5],p2x=v[6],v=v[7],(isZero=egMath.isZero)(c1x-p1x)&&isZero(c1y-p1y)&&(c1x=p1x,c1y=p1y),isZero(c2x-p2x)&&isZero(c2y-v)&&(c2x=p2x,c2y=v),ax=p2x-p1x-(isZero=3*(c1x-p1x))-(bx=3*(c2x-c1x)-isZero),ay=v-p1y-(cy=3*(c1y-p1y))-(by=3*(c2y-c1y)-cy),0===type?(x=0===t?p1x:1===t?p2x:((ax*t+bx)*t+isZero)*t+p1x,y=0===t?p1y:1===t?v:((ay*t+by)*t+cy)*t+p1y):(0,y=t<4e-7?(x=isZero,cy):1-4e-7<t?(x=3*(p2x-c2x),3*(v-c2y)):(x=(3*ax*t+2*bx)*t+isZero,(3*ay*t+2*by)*t+cy),normalized&&(0===x&&0===y&&(t<4e-7||1-4e-7<t)&&(x=c2x-c1x,y=c2y-c1y),p1x=Math.sqrt(x*x+y*y))&&(x/=p1x,y/=p1x),3===type&&(p1y=6*ax*t+2*bx,p2x=6*ay*t+2*by,x=0!==(v=Math.pow(x*x+y*y,1.5))?(x*p2x-y*p1y)/v:0,y=0)),2===type?new egPoint(y,-x):new egPoint(x,y))},egCurve.getLength=function(v,a,b,ds){var dx,c;return void 0===a&&(a=0),void 0===b&&(b=1),egCurve.isStraight(v)?(c=v,b<1&&(c=egCurve.subdivide(c,b)[0],a/=b),dx=(c=0<a?egCurve.subdivide(c,a)[1]:c)[6]-c[0],c=c[7]-c[1],Math.sqrt(dx*dx+c*c)):egMath.integrate(ds||egCurve._getLengthIntegrand(v),a,b,egCurve._getIterations(a,b))},egCurve.getTimeAt=function(v,offset,start){var abs,forward,a,b,ds,diff,length;return void 0===start&&(start=offset<0?1:0),0===offset?start:(abs=Math.abs,a=(forward=0<offset)?start:0,b=forward?1:start,ds=egCurve._getLengthIntegrand(v),v=egCurve.getLength(v,a,b,ds),diff=abs(offset)-v,abs(diff)<1e-12?forward?b:a:1e-12<diff?null:(length=0,egMath.findRoot(function(t){return length+=egMath.integrate(ds,start,t,egCurve._getIterations(start,t)),start=t,length-offset},ds,start+offset/v,a,b,32,1e-12)))},egCurve.getPoint=function(v,t){return egCurve._evaluate(v,t,0,!1)},egCurve.getTangent=function(v,t){return egCurve._evaluate(v,t,1,!0)},egCurve.getWeightedTangent=function(v,t){return egCurve._evaluate(v,t,1,!1)},egCurve.getNormal=function(v,t){return egCurve._evaluate(v,t,2,!0)},egCurve.getWeightedNormal=function(v,t){return egCurve._evaluate(v,t,2,!1)},egCurve.getCurvature=function(v,t){return egCurve._evaluate(v,t,3,!1).x},egCurve._addLocation=function(locations,param,v1,c1,t1,p1,v2,c2,t2,p2,overlap){var excludeStart=!overlap&&param.excludeStart,excludeEnd=!overlap&&param.excludeEnd;null!==(t1=null==t1?egCurve.getTimeOf(v1,p1):t1)&&(excludeStart?4e-7:0)<=t1&&t1<=(excludeEnd?1-4e-7:1)&&null!==(t2=null==t2?egCurve.getTimeOf(v2,p2):t2)&&(excludeEnd?4e-7:0)<=t2&&t2<=(excludeStart?1-4e-7:1)&&((excludeEnd=param.renormalize)&&(t1=(excludeStart=excludeEnd(t1,t2))[0],t2=excludeStart[1]),excludeEnd=new egCurveLocation(c1,t1,p1||egCurve.getPoint(v1,t1),overlap),excludeStart=new egCurveLocation(c2,t2,p2||egCurve.getPoint(v2,t2),overlap),c1=excludeEnd.getPath()===excludeStart.getPath()&&excludeEnd.getIndex()>excludeStart.getIndex()?excludeStart:excludeEnd,p1=param.include,(excludeEnd._intersection=excludeStart)._intersection=excludeEnd,p1&&!p1(c1)||egCurveLocation.insert(locations,c1,!0))},egCurve._addCurveIntersections=function(v1,v2,c1,c2,locations,param,tMin,tMax,uMin,uMax,flip,recursion,calls){var dMin,factor,dp0,dp1,dp2,getSignedDistance,q0y,q3x,q3y,q0x,d1,d2,t,parts,u;return 48<=++recursion||4096<++calls||(q0x=v2[0],q0y=v2[1],q3x=v2[6],q3y=v2[7],dMin=(factor=0<(d1=(getSignedDistance=egLine.getSignedDistance)(q0x,q0y,q3x,q3y,v2[2],v2[3]))*(d2=getSignedDistance(q0x,q0y,q3x,q3y,v2[4],v2[5]))?.75:4/9)*Math.min(0,d1,d2),factor=factor*Math.max(0,d1,d2),dp0=getSignedDistance(q0x,q0y,q3x,q3y,v1[0],v1[1]),dp1=getSignedDistance(q0x,q0y,q3x,q3y,v1[2],v1[3]),dp2=getSignedDistance(q0x,q0y,q3x,q3y,v1[4],v1[5]),getSignedDistance=getSignedDistance(q0x,q0y,q3x,q3y,v1[6],v1[7]),q0y=(q0x=egCurve._getConvexHull(dp0,dp1,dp2,getSignedDistance))[0],q3x=q0x[1],0===d1&&0===d2&&0===dp0&&0===dp1&&0===dp2&&0===getSignedDistance)||null==(q3y=egCurve._clipConvexHull(q0y,q3x,dMin,factor))||null==(q0x=egCurve._clipConvexHull(q0y.reverse(),q3x.reverse(),dMin,factor))||(d1=tMin+(tMax-tMin)*q3y,d2=tMin+(tMax-tMin)*q0x,Math.max(uMax-uMin,d2-d1)<1e-9?(t=(d1+d2)/2,u=(uMin+uMax)/2,v1=c1.getValues(),v2=c2.getValues(),egCurve._addLocation(locations,param,flip?v2:v1,flip?c2:c1,flip?u:t,null,flip?v1:v2,flip?c1:c2,flip?t:u,null)):(v1=egCurve.getPart(v1,q3y,q0x),calls=.8<q0x-q3y?uMax-uMin<d2-d1?(parts=egCurve.subdivide(v1,.5),calls=egCurve._addCurveIntersections(v2,parts[0],c2,c1,locations,param,uMin,uMax,d1,t=(d1+d2)/2,!flip,recursion,calls),egCurve._addCurveIntersections(v2,parts[1],c2,c1,locations,param,uMin,uMax,t,d2,!flip,recursion,calls)):(parts=egCurve.subdivide(v2,.5),calls=egCurve._addCurveIntersections(parts[0],v1,c2,c1,locations,param,uMin,u=(uMin+uMax)/2,d1,d2,!flip,recursion,calls),egCurve._addCurveIntersections(parts[1],v1,c2,c1,locations,param,u,uMax,d1,d2,!flip,recursion,calls)):egCurve._addCurveIntersections(v2,v1,c2,c1,locations,param,uMin,uMax,d1,d2,!flip,recursion,calls))),calls},egCurve._getConvexHull=function(dq0,dq1,dq2,dq3){var p0=[0,dq0],p1=[1/3,dq1],p2=[2/3,dq2],p3=[1,dq3],dq1=dq1-(2*dq0+dq3)/3,dq2=dq2-(dq0+2*dq3)/3;return dq3=dq1*dq2<0?[[p0,p1,p3],[p0,p2,p3]]:[2<=(dq0=dq1/dq2)?[p0,p1,p3]:dq0<=.5?[p0,p2,p3]:[p0,p1,p2,p3],[p0,p3]],(dq1||dq2)<0?dq3.reverse():dq3},egCurve._clipConvexHull=function(hullTop,hullBottom,dMin,dMax){return hullTop[0][1]<dMin?egCurve._clipConvexHullPart(hullTop,!0,dMin):hullBottom[0][1]>dMax?egCurve._clipConvexHullPart(hullBottom,!1,dMax):hullTop[0][0]},egCurve._clipConvexHullPart=function(part,top,threshold){for(var px=part[0][0],py=part[0][1],i=1,l=part.length;i<l;i++){var qx=part[i][0],qy=part[i][1];if(top?threshold<=qy:qy<=threshold)return qy===threshold?qx:px+(threshold-py)*(qx-px)/(qy-py);px=qx,py=qy}return null},egCurve._addCurveLineIntersections=function(v1,v2,c1,c2,locations,param){for(var flip=egCurve.isStraight(v1),vc=flip?v2:v1,vl=flip?v1:v2,lx1=vl[0],ly1=vl[1],lx2=vl[6],ly2=vl[7],ly2=Math.atan2(-(ly2-ly1),lx2-lx1),sin=Math.sin(ly2),cos=Math.cos(ly2),rvc=[],i=0;i<8;i+=2){var x=vc[i]-lx1,y=vc[i+1]-ly1;rvc.push(x*cos-y*sin,x*sin+y*cos)}for(var roots=[],count=egCurve.solveCubic(rvc,1,0,roots,0,1),i=0;i<count;i++){var pl,t2,tc=roots[i],pc=egCurve.getPoint(vc,tc),tl=egCurve.getTimeOf(vl,pc);null!==tl&&(pl=egCurve.getPoint(vl,tl),t2=flip?tc:tl,!param.excludeEnd||t2>egMath.CURVETIME_EPSILON)&&egCurve._addLocation(locations,param,v1,c1,flip?tl:tc,flip?pl:pc,v2,c2,t2,flip?pc:pl)}},egCurve._addLineIntersection=function(v1,v2,c1,c2,locations,param){var pt=egLine.intersect(v1[0],v1[1],v1[6],v1[7],v2[0],v2[1],v2[6],v2[7]);pt&&egCurve._addLocation(locations,param,v1,c1,null,pt,v2,c2,null,pt)},egCurve._getIntersections=function(v1,v2,c1,c2,locations,param){if(!v2)return egCurve._getSelfIntersection(v1,c1,locations,param);var c1p1x=v1[0],c1p1y=v1[1],c1p2x=v1[6],c1p2y=v1[7],c2p1x=v2[0],c2p1y=v2[1],c2p2x=v2[6],c2p2y=v2[7],c1s1x=(3*v1[2]+c1p1x)/4,c1s1y=(3*v1[3]+c1p1y)/4,c1s2x=(3*v1[4]+c1p2x)/4,c1s2y=(3*v1[5]+c1p2y)/4,c2s1x=(3*v2[2]+c2p1x)/4,c2s1y=(3*v2[3]+c2p1y)/4,c2s2x=(3*v2[4]+c2p2x)/4,c2s2y=(3*v2[5]+c2p2y)/4,min=Math.min,max=Math.max;if(max(c1p1x,c1s1x,c1s2x,c1p2x)+2e-7>min(c2p1x,c2s1x,c2s2x,c2p2x)&&min(c1p1x,c1s1x,c1s2x,c1p2x)-2e-7<max(c2p1x,c2s1x,c2s2x,c2p2x)&&max(c1p1y,c1s1y,c1s2y,c1p2y)+2e-7>min(c2p1y,c2s1y,c2s2y,c2p2y)&&min(c1p1y,c1s1y,c1s2y,c1p2y)-2e-7<max(c2p1y,c2s1y,c2s2y,c2p2y)){var overlaps=egCurve.getOverlaps(v1,v2);if(overlaps)for(var i=0;i<2;i++){var overlap=overlaps[i];egCurve._addLocation(locations,param,v1,c1,overlap[0],null,v2,c2,overlap[1],null,!0)}else{c1s1x=egCurve.isStraight(v1),c1s2x=egCurve.isStraight(v2),c2s1x=c1s1x&&c1s2x,c2s2x=locations.length;c2s1x?egCurve._addLineIntersection(v1,v2,c1,c2,locations,param):c1s1x||c1s2x?egCurve._addCurveLineIntersections(v1,v2,c1,c2,locations,param):egCurve._addCurveIntersections(v1,v2,c1,c2,locations,param,0,1,0,1,!1,0,0),c2s1x&&locations.length>c2s2x||(min=new egPoint(c1p1x,c1p1y),c1s1y=new egPoint(c1p2x,c1p2y),c1s2y=new egPoint(c2p1x,c2p1y),max=new egPoint(c2p2x,c2p2y),min.isClose(c1s2y,2e-7)&&egCurve._addLocation(locations,param,v1,c1,0,min,v2,c2,0,c1s2y),!param.excludeStart&&min.isClose(max,2e-7)&&egCurve._addLocation(locations,param,v1,c1,0,min,v2,c2,1,max),!param.excludeEnd&&c1s1y.isClose(c1s2y,2e-7)&&egCurve._addLocation(locations,param,v1,c1,1,c1s1y,v2,c2,0,c1s2y),c1s1y.isClose(max,2e-7)&&egCurve._addLocation(locations,param,v1,c1,1,c1s1y,v2,c2,1,max))}}return locations},egCurve._getSelfIntersection=function(v1,c1,locations,param){var p1x=v1[0],p1y=v1[1],h1x=v1[2],h1y=v1[3],h2x=v1[4],h2y=v1[5],p2x=v1[6],p2y=v1[7],line=new egLine(p1x,p1y,p2x,p2y,!1),side1=line.getSide(new egPoint(h1x,h1y),!0),line=line.getSide(new egPoint(h2x,h2y),!0);if(side1===line&&0<((p1x-h2x)*(h1y-p2y)+(h1x-p2x)*(h2y-p1y))*side1)return locations;line=p2x-3*h2x+3*h1x-p1x,side1=h2x-2*h1x+p1x,p2x=h1x-p1x,h2x=p2y-3*h2y+3*h1y-p1y,h1x=h2y-2*h1y+p1y,p1x=h1y-p1y,p2y=h2x*p2x-line*p1x;if(p2y*p2y-4*(h2x*side1-line*h1x)*(h1x*p2x-side1*p1x)<0){var tSplit,roots=[],count=egMath.solveCubic(line*line+h2x*h2x,3*(line*side1+h2x*h1x),2*(side1*side1+h1x*h1x)+line*p2x+h2x*p1x,side1*p2x+h1x*p1x,roots,0,1);if(0<count){for(var i=0,maxCurvature=0;i<count;i++){var curvature=Math.abs(c1.getCurvatureAtTime(roots[i]));maxCurvature<curvature&&(maxCurvature=curvature,tSplit=roots[i])}h2y=egCurve.subdivide(v1,tSplit);param.excludeEnd=!0,param.renormalize=function(t1,t2){return[t1*tSplit,t2*(1-tSplit)+tSplit]},egCurve._getIntersections(h2y[0],h2y[1],c1,c1,locations,param)}}return locations},egCurve.getOverlaps=function(v1,v2){var abs=Math.abs,straight1=egCurve.isStraight(v1),straight2=egCurve.isStraight(v2),straightBoth=straight1&&straight2;function getSquaredLineLength(v){var x=v[6]-v[0],v=v[7]-v[1];return x*x+v*v}var flip=getSquaredLineLength(v1)<getSquaredLineLength(v2),l1=flip?v2:v1,flip=flip?v1:v2,line=new egLine(l1[0],l1[1],l1[6],l1[7]);if(line.getDistance(new egPoint(flip[0],flip[1]))<2e-7&&line.getDistance(new egPoint(flip[6],flip[7]))<2e-7)!straightBoth&&line.getDistance(new egPoint(l1[2],l1[3]))<2e-7&&line.getDistance(new egPoint(l1[4],l1[5]))<2e-7&&line.getDistance(new egPoint(flip[2],flip[3]))<2e-7&&line.getDistance(new egPoint(flip[4],flip[5]))<2e-7&&(straight1=straight2=straightBoth=!0);else if(straightBoth)return null;if(straight1!==straight2)return null;for(var v=[v1,v2],pairs=[],i=0,t1=0;i<2&&pairs.length<2;i+=0===t1?0:1,t1^=1){var t2=egCurve.getTimeOf(v[1^i],new egPoint(v[i][0===t1?0:6],v[i][0===t1?1:7]));if(null!=t2&&(t2=0===i?[t1,t2]:[t2,t1],0===pairs.length||4e-7<abs(t2[0]-pairs[0][0])&&4e-7<abs(t2[1]-pairs[0][1]))&&pairs.push(t2),1===i&&0===pairs.length)break}return pairs=2!==pairs.length||!straightBoth&&(l1=egCurve.getPart(v1,pairs[0][0],pairs[1][0]),2e-7<abs((line=egCurve.getPart(v2,pairs[0][1],pairs[1][1]))[2]-l1[2])||2e-7<abs(line[3]-l1[3])||2e-7<abs(line[4]-l1[4])||2e-7<abs(line[5]-l1[5]))?null:pairs},egCurve}(),egCurveLocation=function(){function egCurveLocation(curve,time,point,_overlap,_distance){var next;.9999996<time&&(next=curve.getNext())&&(time=0,curve=next),this._path=null,this._setCurve(curve),this._time=time,this._offset=null,this._point=point||curve.getPointAtTime(time),this._overlap=_overlap,this._distance=_distance,this._intersection=this._next=this._previous=null}return egCurveLocation.prototype._setCurve=function(curve){var path=curve._path;this._path=path,this._version=path?path._version:0,this._curve=curve,this._segment=null,this._segment1=curve._segment1,this._segment2=curve._segment2},egCurveLocation.prototype._setSegment=function(segment){this._setCurve(segment.getCurve()),this._segment=segment,this._time=segment===this._segment1?0:1,this._point=segment._point.clone()},egCurveLocation.prototype.getSegment=function(){var time,curve=this.getCurve(),segment=this._segment;return segment||(0===(time=this.getTime())?segment=curve._segment1:1===time?segment=curve._segment2:null!=time&&(segment=curve.getPartLength(0,time)<curve.getPartLength(time,1)?curve._segment1:curve._segment2),this._segment=segment),segment},egCurveLocation.prototype.getCurve=function(){var path=this._path,that=this;function trySegment(segment){var curve=segment&&segment.getCurve();if(curve&&null!=(that._time=curve.getTimeOf(that._point)))return that._setCurve(curve),that._segment=segment,curve}return path&&path._version!==this._version&&(this._time=this._curve=this._offset=null),this._curve||trySegment(this._segment)||trySegment(this._segment1)||trySegment(this._segment2.getPrevious())},egCurveLocation.prototype.getPath=function(){var curve=this.getCurve();return curve&&curve._path},egCurveLocation.prototype.getIndex=function(){var curve=this.getCurve();return curve&&curve.getIndex()},egCurveLocation.prototype.getTime=function(){var curve=this.getCurve(),time=this._time;return curve&&null==time?this._time=curve.getTimeOf(this._point):time},egCurveLocation.prototype.getOffset=function(){if(null==(offset=this._offset)){var offset=0,path=this.getPath(),index=this.getIndex();if(path&&null!=index)for(var curves=path.getCurves(),i=0;i<index;i++)offset+=curves[i].getLength();this._offset=offset+=this.getCurveOffset()}return offset},egCurveLocation.prototype.getCurveOffset=function(){var curve=this.getCurve(),time=this.getTime();return null!=time&&curve&&curve.getPartLength(0,time)},egCurveLocation.prototype.getIntersection=function(){return this._intersection},egCurveLocation.prototype.getDistance=function(){return this._distance},egCurveLocation.prototype.divide=function(){var curve=this.getCurve(),res=null;return curve&&(res=curve.divideAtTime(this.getTime()))&&this._setSegment(res._segment1),res},egCurveLocation.prototype.split=function(){var curve=this.getCurve();return curve?curve.splitAtTime(this.getTime()):null},egCurveLocation.prototype.equals=function(loc,_ignoreOther){var c2,abs,c1,res=this===loc;return!res&&loc instanceof egCurveLocation&&this.getPath()===loc.getPath()&&this.getPoint().isClose(loc.getPoint(),2e-7)&&(c1=this.getCurve(),c2=loc.getCurve(),res=((abs=Math.abs)((c1.isLast()&&c2.isFirst()?-1:c1.getIndex())+this.getTime()-((c2.isLast()&&c1.isFirst()?-1:c2.getIndex())+loc.getTime()))<4e-7||(c1=abs(this.getOffset()-loc.getOffset()))<2e-7||abs(this.getPath().getLength()-c1)<2e-7)&&(_ignoreOther||!this._intersection&&!loc._intersection||this._intersection&&this._intersection.equals(loc._intersection,!0))),res},egCurveLocation.prototype.toString=function(){var parts=[],point=this.getPoint(),f=egFormatter.inst,point=(point&&parts.push("point: "+point),this.getIndex()),point=(null!=point&&parts.push("index: "+point),this.getTime());return null!=point&&parts.push("time: "+f.number(point)),null!=this._distance&&parts.push("distance: "+f.number(this._distance)),"{ "+parts.join(", ")+" }"},egCurveLocation.prototype.isTouching=function(){var curve1,inter=this._intersection;return!(!inter||!this.getTangent().isCollinear(inter.getTangent())||(curve1=this.getCurve(),inter=inter.getCurve(),curve1.isStraight()&&inter.isStraight()&&curve1.getLine().intersect(inter.getLine())))},egCurveLocation.prototype.isCrossing=function(){var t1Inside,pt,t1,c2,c1,t2,t2Inside,c3,lenghts,inter=this._intersection;return!(!inter||(t1=this.getTime(),t2Inside=4e-7<(t2=inter.getTime())&&t2<1-4e-7,(t1Inside=4e-7<t1&&t1<1-4e-7)&&t2Inside?this.isTouching():(c2=this.getCurve(),c1=t1<=4e-7?c2.getPrevious():c2,inter=inter.getCurve(),c3=t2<=4e-7?inter.getPrevious():inter,1-4e-7<=t1&&(c2=c2.getNext()),1-4e-7<=t2&&(inter=inter.getNext()),!(c1&&c2&&c3&&inter&&(lenghts=[],t1Inside||lenghts.push(c1.getLength(),c2.getLength()),t2Inside||lenghts.push(c3.getLength(),inter.getLength()),pt=this.getPoint(),lenghts=Math.min.apply(Math,lenghts)/64,t1=t1Inside?c2.getTangentAtTime(t1):c2.getPointAt(lenghts).subtract(pt),c2=t1Inside?t1.negate():c1.getPointAt(-lenghts).subtract(pt),c1=t2Inside?inter.getTangentAtTime(t2):inter.getPointAt(lenghts).subtract(pt),t2=t2Inside?c1.negate():c3.getPointAt(-lenghts).subtract(pt),inter=c2.getAngle(),t2Inside=t1.getAngle(),c3=t2.getAngle(),lenghts=c1.getAngle(),t1Inside?isInRange(inter,c3,lenghts)!==isInRange(t2Inside,c3,lenghts)&&isInRange(inter,lenghts,c3)!==isInRange(t2Inside,lenghts,c3):isInRange(c3,inter,t2Inside)!==isInRange(lenghts,inter,t2Inside)&&isInRange(c3,t2Inside,inter)!==isInRange(lenghts,t2Inside,inter))))));function isInRange(angle,min,max){return min<max?min<angle&&angle<max:min<angle||angle<max}},egCurveLocation.prototype.hasOverlap=function(){return!!this._overlap},egCurveLocation.insert=function(locations,loc,merge){var length=locations.length,l=0,r=length-1;function search(index,dir){for(var i=index+dir;-1<=i&&i<=length;i+=dir){var loc2=locations[(i%length+length)%length];if(!loc.getPoint().isClose(loc2.getPoint(),2e-7))break;if(loc.equals(loc2))return loc2}return null}for(;l<=r;){var found,m=l+r>>>1,loc2=locations[m];if(merge&&(found=loc.equals(loc2)?loc2:search(m,-1)||search(m,1)))return loc._overlap&&(found._overlap=found._intersection._overlap=!0),found;(loc.getPath()===loc2.getPath()?loc.getIndex()+loc.getTime()-(loc2.getIndex()+loc2.getTime()):0)<0?r=m-1:l=1+m}return locations.splice(l,0,loc),loc},egCurveLocation.expand=function(locations){for(var expanded=locations.slice(),i=locations.length-1;0<=i;i--)egCurveLocation.insert(expanded,locations[i]._intersection,!1);return expanded},egCurveLocation.prototype.getPoint=function(){return this._point},egCurveLocation.prototype.getTangent=function(){var curve=this.getCurve(),time=this.getTime();return null!=time&&curve&&curve.getTangentAt(time,!0)},egCurveLocation.prototype.getNormal=function(){var curve=this.getCurve(),time=this.getTime();return null!=time&&curve&&curve.getNormalAt(time,!0)},egCurveLocation.prototype.getWeightedTangent=function(){var curve=this.getCurve(),time=this.getTime();return null!=time&&curve&&curve.getWeightedTangentAt(time,!0)},egCurveLocation.prototype.getWeightedNormal=function(){var curve=this.getCurve(),time=this.getTime();return null!=time&&curve&&curve.getWeightedNormalAt(time,!0)},egCurveLocation.prototype.getCurvature=function(){var curve=this.getCurve(),time=this.getTime();return null!=time&&curve&&curve.getCurvatureAt(time,!0)},egCurveLocation}(),egPathIt=function(path,flatness,maxRecursion,ignoreStraight,matrix){var segment2,curves=[],parts=[],length=0,minSpan=1/(maxRecursion||32),segments=path._segments,segment1=segments[0];function addCurve(segment1,segment2){segment2=egCurve.getValues(segment1,segment2,matrix);curves.push(segment2),function computeParts(curve,index,t1,t2){{var dy,dx;!(minSpan<t2-t1)||ignoreStraight&&egCurve.isStraight(curve)||egCurve.isFlatEnough(curve,flatness||.25)?(dx=curve[6]-curve[0],dy=curve[7]-curve[1],0<(dx=Math.sqrt(dx*dx+dy*dy))&&(length+=dx,parts.push({offset:length,curve:curve,index:index,time:t2}))):(dy=egCurve.subdivide(curve,.5),dx=(t1+t2)/2,computeParts(dy[0],index,t1,dx),computeParts(dy[1],index,dx,t2))}}(segment2,segment1._index,0,1)}for(var i=1,l=segments.length;i<l;i++)addCurve(segment1,segment2=segments[i]),segment1=segment2;path._closed&&addCurve(segment2,segments[0]),this.curves=curves,this.parts=parts,this.length=length,this.index=0},egPathFitter=function(){function egPathFitter(path){for(var prev,points=this.points=[],segments=path._segments,path=path._closed,i=0,l=segments.length;i<l;i++){var point=segments[i]._point;prev&&prev.equals(point)||points.push(prev=point.clone())}path&&(points.unshift(points[points.length-1]),points.push(points[1])),this.closed=path}return egPathFitter.prototype.fit=function(error){var points=this.points,length=points.length,segments=null;return 0<length&&(segments=[new egSegment(points[0])],1<length)&&(this.fitCubic(segments,error,0,length-1,points[1].subtract(points[0]),points[length-2].subtract(points[length-1])),this.closed)&&(segments.shift(),segments.pop()),segments},egPathFitter.prototype.fitCubic=function(segments,error,first,last,tan1,tan2){var pt2,dist,points=this.points;if(last-first==1)pt1=points[first],pt2=points[last],dist=pt1.getDistance(pt2)/3,this.addCurve(segments,[pt1,pt1.add(tan1.normalize(dist)),pt2.add(tan2.normalize(dist)),pt2]);else{for(var split,uPrime=this.chordLengthParameterize(first,last),maxError=Math.max(error,error*error),parametersInOrder=!0,i=0;i<=4;i++){var curve=this.generateBezier(first,last,uPrime,tan1,tan2),max=this.findMaxError(first,last,curve,uPrime);if(max.error<error&&parametersInOrder)return void this.addCurve(segments,curve);if(split=max.index,max.error>=maxError)break;parametersInOrder=this.reparameterize(first,last,uPrime,curve),maxError=max.error}var pt1=points[split-1].subtract(points[split+1]);this.fitCubic(segments,error,first,split,tan1,pt1),this.fitCubic(segments,error,split,last,pt1.negate(),tan2)}},egPathFitter.prototype.addCurve=function(segments,curve){segments[segments.length-1].setHandleOut(curve[1].subtract(curve[0])),segments.push(new egSegment(curve[3],curve[2].subtract(curve[3])))},egPathFitter.prototype.generateBezier=function(first,last,uPrime,tan1,tan2){for(var abs=Math.abs,points=this.points,pt1=points[first],pt2=points[last],C=[[0,0],[0,0]],X=[0,0],i=0,l=last-first+1;i<l;i++){var u=uPrime[i],t=1-u,b=3*u*t,b0=t*t*t,t=b*t,b=b*u,u=u*u*u,a1=tan1.normalize(t),a2=tan2.normalize(b),b0=points[first+i].subtract(pt1.multiply(b0+t)).subtract(pt2.multiply(b+u));C[0][0]+=a1.dot(a1),C[0][1]+=a1.dot(a2),C[1][0]=C[0][1],C[1][1]+=a2.dot(a2),X[0]+=a1.dot(b0),X[1]+=a2.dot(b0)}var alpha1,detC0X,c1,handle1,handle2,last=C[0][0]*C[1][1]-C[1][0]*C[0][1],last=(1e-12<abs(last)?(detC0X=C[0][0]*X[1]-C[1][0]*X[0],alpha1=(X[0]*C[1][1]-X[1]*C[0][1])/last,detC0X=detC0X/last):(last=C[0][0]+C[0][1],c1=C[1][0]+C[1][1],alpha1=detC0X=1e-12<abs(last)?X[0]/last:1e-12<abs(c1)?X[1]/c1:0),pt2.getDistance(pt1)),abs=1e-12*last;return alpha1<abs||detC0X<abs?alpha1=detC0X=last/3:(c1=pt2.subtract(pt1),handle1=tan1.normalize(alpha1),handle2=tan2.normalize(detC0X),handle1.dot(c1)-handle2.dot(c1)>last*last&&(alpha1=detC0X=last/3,handle1=handle2=null)),[pt1,pt1.add(handle1||tan1.normalize(alpha1)),pt2.add(handle2||tan2.normalize(detC0X)),pt2]},egPathFitter.prototype.reparameterize=function(first,last,u,curve){for(var i=first;i<=last;i++)u[i-first]=this.findRoot(curve,this.points[i],u[i-first]);for(var i=1,l=u.length;i<l;i++)if(u[i]<=u[i-1])return!1;return!0},egPathFitter.prototype.findRoot=function(curve,point,u){for(var curve1=[],curve2=[],i=0;i<=2;i++)curve1[i]=curve[i+1].subtract(curve[i]).multiply(3);for(i=0;i<=1;i++)curve2[i]=curve1[i+1].subtract(curve1[i]).multiply(2);var pt=this.evaluate(3,curve,u),pt1=this.evaluate(2,curve1,u),pt2=this.evaluate(1,curve2,u),pt=pt.subtract(point),point=pt1.dot(pt1)+pt.dot(pt2);return Math.abs(point)<1e-6?u:u-pt.dot(pt1)/point},egPathFitter.prototype.evaluate=function(degree,curve,t){for(var tmp=curve.slice(),i=1;i<=degree;i++)for(var j=0;j<=degree-i;j++)tmp[j]=tmp[j].multiply(1-t).add(tmp[j+1].multiply(t));return tmp[0]},egPathFitter.prototype.chordLengthParameterize=function(first,last){for(var u=[0],i=first+1;i<=last;i++)u[i-first]=u[i-first-1]+this.points[i].getDistance(this.points[i-1]);for(var i=1,m=last-first;i<=m;i++)u[i]/=u[m];return u},egPathFitter.prototype.findMaxError=function(first,last,curve,u){for(var index=Math.floor((last-first+1)/2),maxDist=0,i=first+1;i<last;i++){var v=this.evaluate(3,curve,u[i-first]).subtract(this.points[i]),v=v.x*v.x+v.y*v.y;maxDist<=v&&(maxDist=v,index=i)}return{error:maxDist,index:index}},egPathFitter}(),egHitResult=function(type,path,opts){this.type=type,path instanceof egPath?(this.xpath=path._parent,this.path=path):this.xpath=path,opts&&(opts.loc&&(this.loc=opts.loc),opts.point&&(this.point=opts.point),opts.seg)&&(this.seg=opts.seg)},egStyle=function(args){this.fill=args&&args.fillColor||!0,this.stroke=args&&args.strokeColor||!0,this.evenodd=args&&args.evenodd||!0,this.strokeWidth=args&&args.strokeWidth||1,this.strokeCap=args&&args.strokeCap||"butt",this.strokeJoin=args&&args.strokeJoin||"bevel",this.miterLimit=args&&args.miterLimit||10},egBoundOpt=function(stroke,fill,internal,handle){this._handle=void 0!==handle&&handle,this._stroke=void 0!==stroke&&stroke,this._fill=void 0===fill||fill,this._internal=void 0!==internal&&internal},egHitOpt=function(fill,stroke,curves,evenodd,tolerance){this._tolerance=tolerance,this._fill=fill,this._stroke=stroke,this._curves=curves,this._evenodd=evenodd},egPF={Clockwise:1,AntiClockwise:2,OverlapsOnly:4,ValidOverlap:8},XPath=function(){function XPath(){this._evenodd=!0,this._children=[],this._bounds=void 0}return XPath.prototype.assign=function(path){this._evenodd=path._evenodd,this._bounds=path._bounds&&path._bounds.clone()||void 0;for(var i=0;i<path._children.length;i++){var p=path._children[i].clone();p._parent=this,p._index=i,this._children.push(p)}},XPath.prototype.clone=function(){var copy=new XPath;return copy.assign(this),copy},XPath.prototype.isEmpty=function(){return 0===this._children.length},XPath.prototype.getFirstChild=function(){return this._children&&this._children[0]||null},XPath.prototype.getLastChild=function(){return this._children&&this._children[this._children.length-1]||null},XPath.prototype.removeChild=function(path){this._children.splice(path._index,1);for(var i=0;i<this._children.length;i++)this._children[i]._index=i,this._children[i].isFlags(egPF.Clockwise|egPF.AntiClockwise)&&this._children[i].isFlags(egPF.Clockwise)==(0===this._children[i]._index)||this._children[i].setClockwise(0===this._children[i]._index)},XPath.prototype.removeChildren=function(start,end){end=end||this._children.length,this._children.splice(start=start||0,end-start);for(var i=0;i<this._children.length;i++)this._children[i]._index=i,this._children[i].isFlags(egPF.Clockwise|egPF.AntiClockwise)&&this._children[i].isFlags(egPF.Clockwise)==(0===this._children[i]._index)||this._children[i].setClockwise(0===this._children[i]._index)},XPath.prototype.addChild=function(path,index){index=index||this._children.length,(path._parent=this)._children.splice(index,0,path);for(var i=0;i<this._children.length;i++)this._children[i]._index=i;path.isFlags(egPF.Clockwise|egPF.AntiClockwise)||path.setClockwise(0===path._index)},XPath.prototype.addChildren=function(paths,index){index=index||this._children.length;index=Array(index,0).concat(paths);this._children.splice.apply(this._children,index);for(var i=0;i<this._children.length;i++)this._children[i]._index=i,this._children[i]._parent=this;for(i=0;i<paths.length;i++)paths[i].isFlags(egPF.Clockwise|egPF.AntiClockwise)||paths[i].setClockwise(0===paths[i]._index)},XPath.prototype.setChildren=function(paths){this.removeChildren(),this.addChildren(paths)},XPath.prototype.getCurves=function(){for(var children=this._children,curves=[],i=0,l=children.length;i<l;i++)curves=curves.concat(children[i].getCurves());return curves},XPath.prototype.reduce=function(simplify){for(var children=this._children,i=children.length-1;0<=i;i--){var path=children[i].reduce(simplify);path.isEmpty()&&path.remove()}return this},XPath.prototype.reverse=function(){for(var i=0,l=this._children.length;i<l;i++)this._children[i].reverse()},XPath.prototype.flatten=function(flatness){for(var i=0,l=this._children.length;i<l;i++)this._children[i].flatten(flatness)},XPath.prototype.simplify=function(tolerance){for(var res=!1,i=0,l=this._children.length;i<l;i++)res=this._children[i].simplify(tolerance)||res;return res},XPath.prototype.smooth=function(xtype,xfactor,xfrom,xto){for(var i=0,l=this._children.length;i<l;i++)this._children[i].smooth(xtype,xfactor,xfrom,xto)},XPath.prototype.isClockwise=function(){var child=this.getFirstChild();return child&&child.isClockwise()},XPath.prototype.setClockwise=function(clockwise){this.isClockwise()!==clockwise&&this.reverse()},XPath.prototype.getBounds=function(opt,style,mx){for(var res=new egRect,st=style||new egStyle,i=0,l=this._children.length;i<l;i++)res=res.unite(this._children[i].getBounds(opt,st,null));return res},XPath.prototype.contains=function(point,evenodd){point=point.isInside(this.getBounds(new egBoundOpt(!1,!1,!0,!0)))&&this._getWinding(point);return!!(evenodd?1&point:point)},XPath.prototype.getIntersections=function(path,include,returnFirst){var self=this===path||!path;if(!self&&!this.getBounds().touches(path.getBounds()))return[];for(var pathx,curves1=this.getCurves(),curves2=self?curves1:path.getCurves(),length1=curves1.length,length2=self?length1:curves2.length,values2=[],arrays=[],i=0;i<length2;i++)values2[i]=curves2[i].getValues();for(i=0;i<length1;i++){var curve1=curves1[i],values1=self?values2[i]:curve1.getValues(),path1=curve1.getPath();path1!==pathx&&(pathx=path1,arrays.push(locations=[])),self&&egCurve._getSelfIntersection(values1,curve1,locations,{include:include,excludeStart:1===length1&&curve1.getPoint1().equals(curve1.getPoint2())});for(var j=self?i+1:0;j<length2;j++){if(returnFirst&&locations.length)return locations;var curve2=curves2[j];egCurve._getIntersections(values1,values2[j],curve1,curve2,locations,{include:include,excludeStart:self&&curve1.getPrevious()===curve2,excludeEnd:self&&curve1.getNext()===curve2})}}for(var locations=[],i=0,l=arrays.length;i<l;i++)locations.push.apply(locations,arrays[i]);return locations},XPath.prototype.getCrossings=function(path){return this.getIntersections(path,function(inter){return inter._overlap||inter.isCrossing()})},XPath.prototype.getNearestLocation=function(point){for(var curves=this.getCurves(),minDist=1/0,minLoc=null,i=0,l=curves.length;i<l;i++){var loc=curves[i].getNearestLocation(point);loc._distance<minDist&&(minDist=loc._distance,minLoc=loc)}return minLoc},XPath.prototype.getNearestPoint=function(point){point=this.getNearestLocation.apply(this,point);return point&&point.getPoint()},XPath.prototype.interpolate=function(from,to,factor){var itemsFrom=from._children,itemsTo=to._children,items=this._children;if(!itemsFrom||!itemsTo||itemsFrom.length!==itemsTo.length)throw new Error("Edraw Err 101");var from=items.length,length=itemsTo.length;if(from<length)for(var i=from;i<length;i++)this.addChild(new egPath);else length<from&&this.removeChildren(length,from);for(i=0;i<length;i++)items[i].interpolate(itemsFrom[i],itemsTo[i],factor)},XPath._preparePath=function(path,resolve){path=path.clone().reduce(!0);return resolve?path.resolveCrossings():path},XPath._createResult=function(paths,reduce,path1,path2){var result=new XPath;return result.addChildren(paths),result=reduce?result.reduce(!0):result},XPath._computeBoolean=function(path1,path2,operation){var operator=operation;if(1===path1._children.length&&!path1._children[0]._closed)return XPath._computeOpenBoolean(path1,path2,operator);var _path1=XPath._preparePath(path1,!0),_path2=path2&&path1!==path2&&XPath._preparePath(path2,!0),crossings=(_path2&&(3===operator||4===operator)!=(_path2.isClockwise()!==_path1.isClockwise())&&_path2.reverse(),XPath._divideLocations(egCurveLocation.expand(_path1.getCrossings(_path2)))),segments=[],monoCurves=[];function collect(paths){for(var i=0,l=paths.length;i<l;i++){var path=paths[i];segments.push.apply(segments,path._segments),monoCurves.push.apply(monoCurves,path._getMonoCurves()),path._overlapsOnly=path._validOverlapsOnly=!0}}collect(_path1._children||[_path1]),_path2&&collect(_path2._children||[_path2]);for(var i=0,l=crossings.length;i<l;i++)XPath._propagateWinding(crossings[i]._segment,_path1,_path2,monoCurves,operator);for(i=0,l=segments.length;i<l;i++){var segment=segments[i],inter=segment._intersection;null==segment._winding&&XPath._propagateWinding(segment,_path1,_path2,monoCurves,operator),inter&&inter._overlap||((inter=segment._path)._overlapsOnly=!1,(1===segment._winding&&1<operator||1===operator&&2===segment._winding)&&(inter._validOverlapsOnly=!1))}return XPath._createResult(XPath._tracePaths(segments,operator),!0,path1,path2)},XPath._computeOpenBoolean=function(path1,path2,operator){if(!path2||1===path2._children.length&&!path2._children[0]._closed||3!==operator&&1!==operator)return null;var _path1=XPath._preparePath(path1,!1),_path2=XPath._preparePath(path2,!1),crossings=_path1.getCrossings(_path2),sub=3===operator,paths=[];function addPath(path){return _path2.contains(path.getPointAt(path.getLength()/2),_path2._evenodd)!==sub&&(paths.unshift(path),1)}for(var path11=_path1._children[0],i=crossings.length-1;0<=i;i--){var path=crossings[i].split();path&&(addPath(path)&&path.getFirstSegment().setHandleIn(new egPoint(0,0)),path11.getLastSegment().setHandleOut(new egPoint(0,0)))}return addPath(path11),XPath._createResult(paths,!1,path1,path2)},XPath._linkIntersections=function(from,to){for(var prev=from;prev;){if(prev===to)return;prev=prev._previous}for(;from._next&&from._next!==to;)from=from._next;if(!from._next){for(;to._previous;)to=to._previous;(from._next=to)._previous=from}},XPath._divideLocations=function(locations,include){for(var prevCurve,prevTime,results=include&&[],noHandles=!1,clearCurves=[],i=locations.length-1;0<=i;i--){var loc=locations[i];if(include){if(!include(loc))continue;results.unshift(loc)}var curve=loc._curve,time=loc._time,origTime=time,inter=(curve!==prevCurve?noHandles=!curve.hasHandles():4e-7<=prevTime&&prevTime<=1-4e-7&&(time/=prevTime),time=time<4e-7?curve._segment1:1-4e-7<time?curve._segment2:(time=curve.divideAtTime(time,!0),noHandles&&clearCurves.push(curve,time),time._segment1),loc._setSegment(time),time._intersection),loc=loc._intersection;if(inter){XPath._linkIntersections(inter,loc);for(var other=inter;other;)XPath._linkIntersections(other._intersection,inter),other=other._next}else time._intersection=loc;prevCurve=curve,prevTime=origTime}for(var i=0,l=clearCurves.length;i<l;i++)clearCurves[i].clearHandles();return results||locations},XPath._getWinding=function(point,curves,horizontal){var px=point.x,py=point.y,windLeft=0,windRight=0,length=curves.length,roots=[],point=Math.abs;if(horizontal){for(var yTop=-1/0,yBottom=1/0,yBefore=py-2e-7,yAfter=py+2e-7,i=0;i<length;i++)for(var values=curves[i].values,j=egCurve.solveCubic(values,0,px,roots,0,1)-1;0<=j;j--){var y=egCurve.getPoint(values,roots[j]).y;y<yBefore&&yTop<y?yTop=y:yAfter<y&&y<yBottom&&(yBottom=y)}yBottom=(yBottom+py)/2,-1/0<(yTop=(yTop+py)/2)&&(windLeft=XPath._getWinding(new egPoint(px,yTop),curves).winding),yBottom<1/0&&(windRight=XPath._getWinding(new egPoint(px,yBottom),curves).winding)}else{for(var prevWinding,prevXEnd,xBefore=px-2e-7,xAfter=px+2e-7,windLeftOnCurve=0,windRightOnCurve=0,isOnCurve=!1,i=0;i<length;i++){var curve=curves[i],winding=curve.winding,yStart=(values=curve.values)[1],yEnd=values[7];curve.last&&(prevWinding=curve.last.winding,prevXEnd=curve.last.values[6],isOnCurve=!1),(yStart<=py&&py<=yEnd||yEnd<=py&&py<=yStart)&&(winding?(null!=(curve=py===yStart?values[0]:py===yEnd?values[6]:1===egCurve.solveCubic(values,1,py,roots,0,1)?egCurve.getPoint(values,roots[0]).x:null)&&(xBefore<=curve&&curve<=xAfter?isOnCurve=!0:py===yStart&&winding===prevWinding||py===yStart&&(px-curve)*(px-prevXEnd)<0||(curve<xBefore?windLeft+=winding:xAfter<curve&&(windRight+=winding))),prevWinding=winding,prevXEnd=values[6]):(px-values[0])*(px-values[6])<=0&&(isOnCurve=!0)),isOnCurve&&(length-1<=i||curves[i+1].last)&&(windLeftOnCurve+=1,--windRightOnCurve)}0===windLeft&&0===windRight&&(windLeft=windLeftOnCurve,windRight=windRightOnCurve)}return{winding:Math.max(point(windLeft),point(windRight)),contour:!windLeft!=!windRight}},XPath._propagateWinding=function(segment,path1,path2,monoCurves,operator){var chain=[],start=segment,totalLength=0;do{var curve1=segment.getCurve(),length=curve1.getLength()}while(chain.push({segment:segment,curve:curve1,length:length}),totalLength+=length,(segment=segment.getNext())&&!segment._intersection&&segment!==start);for(var length=totalLength/2,j=0,l=chain.length;j<l;j++){var entry=chain[j],curveLength=entry.length;if(length<=curveLength){var entry=entry.curve,parent=entry._path._parent,t=entry.getTimeAt(length),pt=entry.getPointAtTime(t),entry=Math.abs(entry.getTangentAtTime(t).y)<1e-7,t=parent,winding=3===operator&&path2&&(t===path1&&path2._getWinding(pt,entry)||t===path2&&!path1._getWinding(pt,entry))?{winding:0}:XPath._getWinding(pt,monoCurves,entry);break}length-=curveLength}for(j=chain.length-1;0<=j;j--){var seg=chain[j].segment;seg._winding=winding.winding,seg._contour=winding.contour}},XPath._tracePaths=function(segments,operator){var start,otherStart,paths=[];function isValid(seg,excludeContour){return!(!seg||seg._visited||!(!operator||1===operator&&2===seg._winding||1<operator&&1===seg._winding||!excludeContour&&2===operator&&seg._contour))}function isStart(seg){return seg===start||seg===otherStart}for(var i=0,l=segments.length;i<l;i++){var handleIn,path=null,finished=!1,seg=segments[i],inter=seg._intersection;if(!seg._visited&&seg._path._overlapsOnly){var path1=seg._path,path2=inter._segment._path,segments1=path1._segments,segments2=path2._segments;if(egSegment.segsEquals(segments1,segments2)){2!==operator&&1!==operator||!path1.getArea()||paths.push(path1.clone());for(var j=0,k=segments1.length;j<k;j++)segments1[j]._visited=segments2[j]._visited=!0}}if(isValid(seg,!0)&&(seg._path._validOverlapsOnly||!inter||!inter._overlap)){for(start=otherStart=null;;){var other=(inter=inter&&function(inter,exclude){if(!inter._next)return inter;for(;inter;){var seg=inter._segment,nextSeg=seg.getNext(),nextInter=nextSeg&&nextSeg._intersection;if(seg!==exclude&&(isStart(seg)||isStart(nextSeg)||!seg._visited&&!nextSeg._visited&&(!operator||isValid(seg)&&(isValid(nextSeg)||nextInter&&isValid(nextInter._segment)))))return inter;inter=inter._next}return null}(inter,seg)||inter)&&inter._segment;if(isStart(seg)?finished=!0:other&&(isStart(other)?(finished=!0,seg=other):isValid(other,isValid(seg,!0))&&(!operator||1!==operator&&3!==operator||(seg._visited=!0),seg=other)),finished||seg._visited){seg._visited=!0;break}if(seg._path._validOverlapsOnly&&!isValid(seg))break;path||(path=new egPath,start=seg,otherStart=other);other=seg.getNext();path.add(new egSegment(seg._point,handleIn,other&&seg._handleOut)),seg._visited=!0,seg=other||seg._path.getFirstSegment(),handleIn=other&&other._handleIn,inter=seg._intersection}finished?(path.getFirstSegment().setHandleIn(handleIn),path.setClosed(!0)):path&&(path2=path.getArea(!0),Math.abs(path2),path=null),path&&(8<path._segments.length||!egMath.isZero(path.getArea()))&&(paths.push(path),path=null)}}return paths},XPath.prototype._getWinding=function(point,horizontal){return XPath._getWinding(point,this._getMonoCurves(),horizontal).winding},XPath.prototype.unite=function(path){return XPath._computeBoolean(this,path,2)},XPath.prototype.intersect=function(path){return XPath._computeBoolean(this,path,1)},XPath.prototype.subtract=function(path){return XPath._computeBoolean(this,path,3)},XPath.prototype.exclude=function(path){return XPath._computeBoolean(this,path,4)},XPath.prototype.divide=function(path){return[this.subtract(path),this.intersect(path)]},XPath.prototype.resolveCrossings=function(){var children=this._children,paths=children;function hasOverlap(seg){seg=seg&&seg._intersection;return seg&&seg._overlap}var hasOverlaps=!1,hasCrossings=!1,intersections=this.getIntersections(null,function(inter){return inter._overlap?hasOverlaps=!0:inter.isCrossing()&&(hasCrossings=!0)}),intersections=egCurveLocation.expand(intersections);if(hasOverlaps)for(var overlaps=XPath._divideLocations(intersections,function(inter){return inter._overlap}),i=overlaps.length-1;0<=i;i--){var seg=overlaps[i]._segment,prev=seg.getPrevious(),next=seg.getNext();seg._path&&hasOverlap(prev)&&hasOverlap(next)&&(seg.remove(),prev._handleOut.set(0,0),next._handleIn.set(0,0),(seg=prev.getCurve()).isStraight())&&0===seg.getLength()&&prev.remove()}if(hasCrossings){XPath._divideLocations(intersections,hasOverlaps?function(inter){var curve1=inter.getCurve(),curve2=inter._intersection._curve,inter=inter._segment;if(curve1&&curve2&&curve1._path&&curve2._path)return!0;inter&&(inter._intersection=null)}:null);for(var tmpSegs=[],i=0;i<paths.length;i++)tmpSegs=tmpSegs.concat(paths[i]._segments);paths=XPath._tracePaths(tmpSegs,null)}var length=paths.length;if(1<length){var first=(paths=paths.slice().sort(function(a,b){return b.getBounds().getArea()-a.getBounds().getArea()}))[0],items=[first],excluded={},windings=[];if(!this._evenodd)for(var j=0;j<paths.length;j++)windings.push(paths[j].isClockwise()?1:-1);for(i=1;i<length;i++){for(var path=paths[i],point=path.getInteriorPoint(this._evenodd),isContained=!1,container=null,exclude=!1,j=i-1;0<=j&&!container;j--)if(paths[j].contains(point,this._evenodd)){if(!this._evenodd&&!isContained&&(windings[i]+=windings[j],windings[i])&&windings[j]){exclude=excluded[i]=!0;break}isContained=!0,container=!excluded[j]&&paths[j]}exclude||(path.setClockwise(container?!container.isClockwise():first.isClockwise()),items.push(path))}length=(paths=items).length}return paths!==children&&this.setChildren(paths),this},XPath.prototype._getMonoCurves=function(){for(var children=this._children,monoCurves=[],i=0,l=children.length;i<l;i++)monoCurves.push.apply(monoCurves,children[i]._getMonoCurves());return monoCurves},XPath.prototype._hitTestSelf=function(point,options){return options._fill&&this.contains(point,options._evenodd)?new egHitResult("fill",this):null},XPath.prototype._hitTestChildren=function(point,options,style){var res=null;options._fill=!1;for(var i=0,l=this._children.length;i<l&&!(res=this._children[i]._hitTestSelf(point,options,style));i++);return res},XPath.prototype.hitTest=function(point,options,style){var tolerance;return!this.isEmpty()&&(tolerance=Math.max(options._tolerance||.1,1e-5),tolerance=new egSize(egPath._getStrokePadding(tolerance)),point)&&(this._children||this.getBounds(new egBoundOpt(!0,!1,!0,!0)).expand(tolerance.multiply(2)).containsPt(point))&&(this._hitTestSelf(point,options)||this._hitTestChildren(point,options,style))||null},XPath.prototype.splitAt=function(offset){var length=0;if(offset<0){offset=-offset;for(var i=this._children.length-1;0<=i;i--)if(offset<(length+=this._children[i].getLength()))return this._children[i].splitAt(length-offset)}else for(i=0;i<this._children.length;i++)if(offset<(length+=this._children[i].getLength()))return this._children[i].splitAt(offset);return null},XPath.prototype.toCanvas=function(ctx){for(var k=0;k<this._children.length;k++){var path=this._children[k];if(1<path._segments.length){for(var seg2=seg1=path._segments[0],i=0,l=path._segments.length-1;i<l;i++){var seg1=seg2,seg2=path._segments[i+1],startPt=seg1._point,outPt=seg1._handleOut,endPt=seg2._point,inPt=seg2._handleIn;0===i&&ctx.moveTo(startPt.x,startPt.y),0!==outPt._x||0!==outPt._y||0!==inPt._x||0!==inPt._y?ctx.bezierCurveTo(startPt.x+outPt.x,startPt.y+outPt.y,endPt.x+inPt.x,endPt.y+inPt.y,endPt.x,endPt.y):ctx.lineTo(endPt.x,endPt.y)}path.isClosed()&&(seg1=seg2,seg2=path._segments[0],startPt=seg1._point,outPt=seg1._handleOut,endPt=seg2._point,inPt=seg2._handleIn,0!==outPt._x||0!==outPt._y||0!==inPt._x||0!==inPt._y?ctx.bezierCurveTo(startPt.x+outPt.x,startPt.y+outPt.y,endPt.x+inPt.x,endPt.y+inPt.y,endPt.x,endPt.y):ctx.lineTo(endPt.x,endPt.y),ctx.closePath())}}},XPath}(),egPath=function(){function egPath(arg){this._closed=!1,this._flags=0,this._overlapsOnly=void 0,this._validOverlapsOnly=void 0,this._version=0,this._index=0,this._area=void 0,this._parent=void 0,this._segments=[],this._curves=void 0,this._monoCurves=void 0,arg&&(arg.closed&&(this._closed=arg.closed),arg.parent)&&(this._parent=arg.parent)}return egPath.prototype.assign=function(path){if(path){this._closed=path._closed;for(var i=0;i<path._segments.length;i++){var seg=path._segments[i].clone();seg._path=this,seg._index=i,this._segments.push(seg)}}},egPath.prototype.clone=function(){var copy=new egPath;return copy.assign(this),copy},egPath.prototype.addFlags=function(flag){this._flags|=flag},egPath.prototype.removeFlags=function(flag){this._flags&=~flag},egPath.prototype.isFlags=function(flag){return 0!=(this._flags&flag)},egPath.prototype.contains=function(point,evenodd){point=point.isInside(this.getBounds(new egBoundOpt(!1,!1,!0,!0)))&&this._getWinding(point);return!!(evenodd?1&point:point)},egPath.prototype.getNearestLocation=function(point){for(var curves=this.getCurves(),minDist=1/0,minLoc=null,i=0,l=curves.length;i<l;i++){var loc=curves[i].getNearestLocation(point);loc._distance<minDist&&(minDist=loc._distance,minLoc=loc)}return minLoc},egPath.prototype.remove=function(){this._parent&&this._parent.removeChild(this)},egPath.prototype._getWinding=function(point,horizontal){return XPath._getWinding(point,this._getMonoCurves(),horizontal).winding},egPath.prototype.interpolate=function(from,to,factor){var itemsFrom=from._segments,itemsTo=to._segments,items=this._segments;if(!itemsFrom||!itemsTo||itemsFrom.length!==itemsTo.length)throw new Error("Edraw Err 102");var to=items.length,length=itemsTo.length;if(to<length)for(var i=to;i<length;i++)this.add(new egSegment);else length<to&&this.removeSegments(length,to);for(i=0;i<length;i++)items[i].interpolate(itemsFrom[i],itemsTo[i],factor);this.setClosed(from._closed)},egPath.prototype.equals=function(item){return this._closed===item._closed&&egSegment.segsEquals(this._segments,item._segments)},egPath.prototype.getSegments=function(){return this._segments},egPath.prototype.setSegments=function(segments){this._segments.length=0,this._curves=void 0,segments&&0<segments.length&&this._add(segments)},egPath.prototype.getFirstSegment=function(){return this._segments[0]},egPath.prototype.getLastSegment=function(){return this._segments[this._segments.length-1]},egPath.prototype.getCurves=function(){var curves=this._curves,segments=this._segments;if(!curves)for(var length=this._countCurves(),curves=this._curves=new Array(length),i=0;i<length;i++)curves[i]=new egCurve(this,segments[i],segments[i+1]||segments[0]);return curves},egPath.prototype.getFirstCurve=function(){return this.getCurves()[0]},egPath.prototype.getLastCurve=function(){var curves=this.getCurves();return curves[curves.length-1]},egPath.prototype.isClosed=function(){return this._closed},egPath.prototype.setClosed=function(closed){var length;this._closed!=(closed=!!closed)&&(this._closed=closed,this._curves)&&(length=this._curves.length=this._countCurves(),closed)&&(this._curves[length-1]=new egCurve(this,this._segments[length-1],this._segments[0]))},egPath.prototype.getPathData=function(_matrix,_precision){var curX,curY,prevX,prevY,inX,inY,outX,outY,segments=this._segments,length=segments.length,f=new egFormatter(_precision=void 0===_precision?5:_precision),coords=new Array(6),first=!0,parts=[];function addSegment(segment,skipLine){segment._transformCoordinates(_matrix,coords),curX=coords[0],curY=coords[1],first?(parts.push("M"+f.pair(curX,curY)),first=!1):(inX=coords[2],inY=coords[3],inX===curX&&inY===curY&&outX===prevX&&outY===prevY?skipLine||parts.push("l"+f.pair(curX-prevX,curY-prevY)):parts.push("c"+f.pair(outX-prevX,outY-prevY)+" "+f.pair(inX-prevX,inY-prevY)+" "+f.pair(curX-prevX,curY-prevY))),prevX=curX,prevY=curY,outX=coords[4],outY=coords[5]}if(0===length)return"";for(var i=0;i<length;i++)addSegment(segments[i]);return this._closed&&0<length&&(addSegment(segments[0],!0),parts.push("z")),parts.join("")},egPath.prototype.isEmpty=function(){return 0===this._segments.length},egPath.prototype._transformContent=function(matrix){for(var coords=new Array(6),i=0,l=this._segments.length;i<l;i++)this._segments[i]._transformCoordinates(matrix,coords,!0);return!0},egPath.prototype._add=function(segs,index){for(var segments=this._segments,curves=this._curves,amount=segs.length,append=null==index,index=append?segments.length:index,i=0;i<amount;i++){var segment=segs[i];(segment=segment._path?segs[i]=segment.clone():segment)._path=this,segment._index=index+i}if(append)segments.push.apply(segments,segs);else{segments.splice.apply(segments,Array(index,0).concat(segs));for(var i=index+amount,l=segments.length;i<l;i++)segments[i]._index=i}if(curves){for(var append=this._countCurves(),start=0<index&&index+amount-1===append?index-1:index,insert=start,end=Math.min(start+amount,append),i=insert;i<end;i++)curves.splice(i,0,new egCurve(this,null,null));this._adjustCurves(start,end)}return segs},egPath.prototype._adjustCurves=function(start,end){for(var curve,segments=this._segments,curves=this._curves,i=start;i<end;i++)(curve=curves[i])._path=this,curve._segment1=segments[i],curve._segment2=segments[i+1]||segments[0],curve._changed();(curve=curves[this._closed&&0===start?segments.length-1:start-1])&&(curve._segment2=segments[start]||segments[0],curve._changed()),(curve=curves[end])&&(curve._segment1=segments[end],curve._changed())},egPath.prototype._countCurves=function(){var length=this._segments.length;return!this._closed&&0<length?length-1:length},egPath.prototype.add=function(seg){return(Array.isArray(seg)?this._add(seg):this._add(new Array(seg)))[0]},egPath.prototype.addPoint=function(pt){pt=new egSegment(pt.x,pt.y);this._add(new Array(pt))[0]},egPath.prototype.insert=function(index,seg){return(Array.isArray(seg)?this._add(seg,index):this._add(new Array(seg),index))[0]},egPath.prototype.addSegment=function(seg){return this._add(new Array(seg))[0]},egPath.prototype.insertSegment=function(index,seg){return this._add(new Array(seg),index)[0]},egPath.prototype.addSegments=function(segs){return this._add(segs)},egPath.prototype.insertSegments=function(index,segs){return this._add(segs,index)},egPath.prototype.removeSegment=function(index){return this.removeSegments(index,index+1)[0]||null},egPath.prototype.removeSegments=function(start,end,_includeCurves){end=void 0!==end?end:this._segments.length;var segments=this._segments,curves=this._curves,count=segments.length,removed=segments.splice(start=start||0,end-start),amount=removed.length;if(amount){for(var i=0;i<amount;i++){var segment=removed[i];segment._index=segment._path=null}for(var i=start,l=segments.length;i<l;i++)segments[i]._index=i;if(curves){for(end=0<start&&end===count+(this._closed?1:0)?start-1:start,i=(curves=curves.splice(end,amount)).length-1;0<=i;i--)curves[i]._path=null;this._adjustCurves(end,end)}}return removed},egPath.prototype.hasHandles=function(){for(var segments=this._segments,i=0,l=segments.length;i<l;i++)if(segments[i].hasHandles())return!0;return!1},egPath.prototype.clearHandles=function(){for(var segments=this._segments,i=0,l=segments.length;i<l;i++)segments[i].clearHandles()},egPath.prototype.getLength=function(){if(null==this._length){for(var curves=this.getCurves(),length=0,i=0,l=curves.length;i<l;i++)length+=curves[i].getLength();this._length=length}return this._length},egPath.prototype.getArea=function(_closed){var cached=void 0===_closed,area=this._area;if(!cached||null==area){for(var segments=this._segments,count=segments.length,last=count-1,area=0,i=0,l=(cached?this._closed:_closed)?count:last;i<l;i++)area+=egCurve.getArea(egCurve.getValues(segments[i],segments[i<last?i+1:0]));cached&&(this._area=area)}return area},egPath.prototype.isClockwise=function(){return this.isFlags(egPF.Clockwise|egPF.AntiClockwise)?this.isFlags(egPF.Clockwise):0<=this.getArea()},egPath.prototype.setClockwise=function(clockwise){this._closed&&(this.isClockwise()!=(clockwise=!!clockwise)&&this.reverse(),this.addFlags(clockwise?egPF.Clockwise:egPF.AntiClockwise),this.removeFlags(clockwise?egPF.AntiClockwise:egPF.Clockwise))},egPath.prototype.splitAt=function(location){var path,location="number"==typeof location?this.getLocationAt(location):location,index=location&&location.getIndex(),location=location&&location._time,curves=(1-4e-7<=location&&(index++,location=0),this.getCurves());return 0<=index&&index<curves.length?(4e-7<=location&&curves[index++].divideAtTime(location),curves=this.removeSegments(index,this._segments.length,!0),this._closed?(this.setClosed(!1),path=this):(path=new egPath,this._parent.addChild(path,this._index+1),path._closed=this._closed,path._flags=this._flags),path._add(curves,0),this.addSegment(curves[0]),path):null},egPath.prototype.split=function(index,time){index=void 0===time?index:(index=this.getCurves()[index])&&index.getLocationAtTime(time);return null!=index?this.splitAt(index):null},egPath.prototype.join=function(path,tolerance){tolerance=tolerance||0;if(path&&path!==this){var segments=path._segments,last1=this.getLastSegment(),last2=path.getLastSegment();if(!last2)return this;last1&&last1._point.isClose(last2._point,tolerance)&&path.reverse();var first2=path.getFirstSegment();last1&&last1._point.isClose(first2._point,tolerance)?(last1.setHandleOut(first2._handleOut),this._add(segments.slice(1))):((last1=this.getFirstSegment())&&last1._point.isClose(first2._point,tolerance)&&path.reverse(),last2=path.getLastSegment(),last1&&last1._point.isClose(last2._point,tolerance)?(last1.setHandleIn(last2._handleIn),this._add(segments.slice(0,segments.length-1),0)):this._add(segments.slice())),path._closed&&this._add([segments[0]]),path.remove()}first2=this.getFirstSegment(),last1=this.getLastSegment();return first2!==last1&&first2._point.isClose(last1._point,tolerance)&&(first2.setHandleIn(last1._handleIn),last1.remove(),this.setClosed(!0)),this},egPath.prototype.reduce=function(simplify){for(var curves=this.getCurves(),tolerance=simplify?2e-7:0,i=curves.length-1;0<=i;i--){var curve=curves[i];!curve.hasHandles()&&(curve.getLength()<tolerance||simplify&&curve.isCollinear(curve.getNext()))&&curve.remove()}return this},egPath.prototype.reverse=function(){this._segments.reverse();for(var i=0,l=this._segments.length;i<l;i++){var segment=this._segments[i],handleIn=segment._handleIn;segment._handleIn=segment._handleOut,segment._handleOut=handleIn,segment._index=i}this._curves=null,this.isFlags(egPF.Clockwise)?(this.addFlags(egPF.AntiClockwise),this.removeFlags(egPF.Clockwise)):this.isFlags(egPF.AntiClockwise)&&(this.addFlags(egPF.Clockwise),this.removeFlags(egPF.AntiClockwise))},egPath.prototype.flatten=function(flatness){for(var parts=new egPathIt(this,flatness||.25,256,!0).parts,length=parts.length,segments=[],i=0;i<length;i++)segments.push(new egSegment(parts[i].curve.slice(0,2)));!this._closed&&0<length&&segments.push(new egSegment(parts[length-1].curve.slice(6))),this.setSegments(segments)},egPath.prototype.simplify=function(tolerance){tolerance=new egPathFitter(this).fit(tolerance||2.5);return tolerance&&this.setSegments(tolerance),!!tolerance},egPath.prototype.smooth=function(xtype,xfactor,xfrom,xto){var that=this,type=xtype||3,segments=this._segments,length=segments.length,closed=this._closed;function getIndex(value,_default){var index=value&&value._index;if(null!=index){var path=value._path;if(path&&path!==that)throw new Error("Edraw Err 105");_default&&value instanceof egCurve&&index++}else index="number"==typeof value?value:_default;return Math.min(index<0&&closed?index%length:index<0?index+length:index,length-1)}var loop=closed&&void 0===xfrom&&void 0===xto,from=getIndex(xfrom,0),to=getIndex(xto,length-1);if(to<from&&(closed?from-=length:(xfrom=from,from=to,to=xfrom)),3==type||4==type){var asymmetric=3===type,xto=Math.min,xfrom=to-from+1,n=xfrom-1,type=loop?xto(xfrom,4):1,paddingLeft=type,xfrom=type,knots=[];if(closed||(paddingLeft=xto(1,from),xfrom=xto(1,length-to-1)),!((n+=paddingLeft+xfrom)<=1)){for(var i=0,j=from-paddingLeft;i<=n;i++,j++)knots[i]=segments[(j<0?j+length:j)%length]._point;for(var n_1=n-1,rx=[x=knots[0]._x+2*knots[1]._x],ry=[y=knots[0]._y+2*knots[1]._y],rf=[f=2],px=[],py=[],i=1;i<n;i++)var internal=i<n_1,u=internal?4:asymmetric?3:8,v=internal?2:asymmetric?0:1,m=(internal||asymmetric?1:2)/f,f=rf[i]=(internal?4:asymmetric?2:7)-m,x=rx[i]=u*knots[i]._x+v*knots[i+1]._x-m*x,y=ry[i]=u*knots[i]._y+v*knots[i+1]._y-m*y;px[n_1]=rx[n_1]/rf[n_1],py[n_1]=ry[n_1]/rf[n_1];for(i=n-2;0<=i;i--)px[i]=(rx[i]-px[i+1])/rf[i],py[i]=(ry[i]-py[i+1])/rf[i];px[n]=(3*knots[n]._x-px[n_1])/2,py[n]=(3*knots[n]._y-py[n_1])/2;for(var i=paddingLeft,max=n-xfrom,j=from;i<=max;i++,j++){var segment=segments[j<0?j+length:j],pt=segment._point,hx=px[i]-pt._x,pt=py[i]-pt._y;(loop||i<max)&&segment.setHandleOut(new egPoint(hx,pt)),(loop||paddingLeft<i)&&segment.setHandleIn(new egPoint(-hx,-pt))}}}else for(i=from;i<=to;i++)segments[i<0?i+length:i].smooth(!loop&&i===from,!loop&&i===to,xtype,xfactor)},egPath.prototype._hitTestSelf=function(point,options,style){var area,loc,time,numSegments=this._segments.length,closed=this._closed,strokePadding=options._tolerance,hitStroke=options._stroke,hitFill=options._fill,fillRule=options._evenodd,hitCurves=options._curves,join=style?style.strokeJoin:"round",cap=style?style.strokeCap:"round",miterLimit=style?style.miterLimit:10,style=style?style.strokeWidth:1,style=hitStroke?.5*style:hitFill&&0<options._tolerance||hitCurves?0:null;function isCloseEnough(pt,padding){return point.subtract(pt).getLength()<=padding}function addToArea(point){point instanceof egPoint?area.addPoint(point):area.add(point)}return null!==style&&(0<style?(miterLimit*=style,strokePadding+=style):join=cap="round"),null!==style&&(loc=this.getNearestLocation(point))&&(0===(time=loc.getTime())||1===time&&1<numSegments?(time=loc.getSegment(),("round"===join&&"round"===cap||(area=new egPath({internal:!0,closed:!0}),closed||0<time._index&&time._index<numSegments-1?"round"!==join&&(time._handleIn.isZero()||time._handleOut.isZero())&&egPath._addBevelJoin(time,join,style,miterLimit,null,null,addToArea,!0):"round"!==cap&&egPath._addSquareCap(time,cap,style,null,null,addToArea,!0),area.isEmpty())?isCloseEnough(time._point,strokePadding):area.contains(point)||(time=area.getNearestLocation(point))&&isCloseEnough(time.getPoint(),options._tolerance))||(loc=null)):isCloseEnough(loc.getPoint(),strokePadding)||(loc=null)),!loc&&hitFill&&this.contains(point,fillRule)||loc&&!hitStroke&&!hitCurves?new egHitResult("fill",this):loc?new egHitResult(hitStroke?"stroke":"curve",this,{loc:loc,point:loc.getPoint()}):null},egPath.prototype.getLocationOf=function(pt){for(var curves=this.getCurves(),i=0,l=curves.length;i<l;i++){var loc=curves[i].getLocationOf(pt);if(loc)return loc}return null},egPath.prototype.getOffsetOf=function(pt){pt=this.getLocationOf.apply(this,pt);return pt?pt.getOffset():null},egPath.prototype.getLocationAt=function(offset){var curves=this.getCurves(),length=0;offset<0&&(offset+=this.getLength());for(var i=0,l=curves.length;i<l;i++){var start=length,curve=curves[i];if(offset<(length+=curve.getLength()))return curve.getLocationAt(offset-start)}return 0<curves.length&&offset<=this.getLength()?new egCurveLocation(curves[curves.length-1],1):null},egPath.prototype.getCurrentSegment=function(that){that=that._segments;if(0===that.length)throw new Error("Edraw Err 110");return that[that.length-1]},egPath.prototype.moveTo=function(pt){var segments=this._segments;1===segments.length&&this.removeSegment(0),segments.length||this._add([new egSegment(pt)])},egPath.prototype.moveToXY=function(x,y){var segments=this._segments;1===segments.length&&this.removeSegment(0),segments.length||this._add([new egSegment(x,y)])},egPath.prototype.lineTo=function(pt){this._add([new egSegment(pt)])},egPath.prototype.lineToXY=function(x,y){this._add([new egSegment(x,y)])},egPath.prototype.cubicCurveTo=function(handle1,handle2,pt){var current=this.getCurrentSegment(this);current.setHandleOut(handle1.subtract(current._point)),this._add([new egSegment(pt,handle2.subtract(pt))])},egPath.prototype.quadraticCurveTo=function(handle,pt){var current=this.getCurrentSegment(this)._point;this.cubicCurveTo(handle.add(current.subtract(handle).multiply(1/3)),handle.add(pt.subtract(handle).multiply(1/3)),pt)},egPath.prototype.curveTo=function(through,pt,t){var t1=1-(void 0===t?.5:t),current=this.getCurrentSegment(this)._point,through=through.subtract(current.multiply(t1*t1)).subtract(pt.multiply(t*t)).divide(2*t*t1);if(through.isNaN())throw new Error("Edraw Err 111");this.quadraticCurveTo(through,pt)},egPath.prototype.arcTo=function(to,radius,rotation,clockwise,large){var matrix,current=this.getCurrentSegment(this),from=current._point,middle=from.add(to).divide(2),through=middle.add(middle.subtract(from).rotate(clockwise?-90:90)),isZero=egMath.isZero;if(isZero(radius.width)||isZero(radius.height))return this.lineTo(to);var isZero=(pt=from.subtract(middle).rotate(-rotation)).x,y=pt.y,abs=Math.abs,rx=abs(radius.width),radius=abs(radius.height),rxSq=rx*rx,rySq=radius*radius,xSq=isZero*isZero,ySq=y*y,factor=Math.sqrt(xSq/rxSq+ySq/rySq);if(1<factor&&(rxSq=(rx*=factor)*rx,rySq=(radius*=factor)*radius),(factor=abs(factor=(rxSq*rySq-rxSq*ySq-rySq*xSq)/(rxSq*ySq+rySq*xSq))<1e-12?0:factor)<0)throw new Error("Edraw Err 112");if(center=new egPoint(rx*y/radius,-radius*isZero/rx).multiply((large===clockwise?-1:1)*Math.sqrt(factor)).rotate(rotation).add(middle),abs=(vector=(matrix=(new egMatrix).translate(center).rotate(rotation).scale(rx,radius))._inverseTransform(from)).getDirectedAngle(matrix._inverseTransform(to)),!clockwise&&0<abs?abs-=360:clockwise&&abs<0&&(abs+=360),through){var center,rxSq=new egLine(from.add(through).divide(2),through.subtract(from).rotate(90),!0),ySq=new egLine(through.add(to).divide(2),to.subtract(through).rotate(90),!0),rySq=new egLine(from,to),xSq=rySq.getSide(through);if(!(center=rxSq.intersect(ySq,!0))){if(xSq)throw new Error("Edraw Err 112");return this.lineTo(to)}var vector,abs=(vector=from.subtract(center)).getDirectedAngle(to.subtract(center)),y=rySq.getSide(center);0===y?abs=xSq*Math.abs(abs):xSq===y&&(abs+=abs<0?360:-360)}for(var isZero=Math.abs(abs),count=360<=isZero?4:Math.ceil(isZero/90),inc=abs/count,large=inc*Math.PI/360,z=4/3*Math.sin(large)/(1+Math.cos(large)),segments=[],i=0;i<=count;i++){var _in,pt=to,out=null;i<count&&(out=vector.rotate(90).multiply(z),matrix?(pt=matrix._transformPoint(vector),out=matrix._transformPoint(vector.add(out)).subtract(pt)):pt=center.add(vector)),0===i?current.setHandleOut(out):(_in=vector.rotate(-90).multiply(z),matrix&&(_in=matrix._transformPoint(vector.add(_in)).subtract(pt)),segments.push(new egSegment(pt,_in,out))),vector=vector.rotate(inc)}this._add(segments)},egPath.prototype.arcTo2=function(box,angle,degree){if(!box.isEmpty()){var vecPts=[],box=egBezier.arcToBezier(box,-angle,-degree,vecPts);0==this._segments.length?this.moveTo(box):box.isClose(this._segments[this._segments.length-1]._point)||this.lineTo(box);for(var i=0;i<vecPts.length;i+=3)this.cubicCurveTo(vecPts[i],vecPts[i+1],vecPts[i+2])}},egPath.prototype.ellipse=function(box){var ptStart;box.isEmpty()||(ptStart=egBezier.arcToBezier(box,0,-360,box=[]),12===box.length&&(1===this._segments.length&&this._segments.pop(),this.moveTo(ptStart),this.cubicCurveTo(box[0],box[1],box[2]),this.cubicCurveTo(box[3],box[4],box[5]),this.cubicCurveTo(box[6],box[7],box[8]),this.cubicCurveTo(box[9],box[10],box[11])))},egPath.prototype.lineBy=function(pt){var current=this.getCurrentSegment(this)._point;this.lineTo(current.add(pt))},egPath.prototype.curveBy=function(through,pt,t){var current=this.getCurrentSegment(this)._point;this.curveTo(current.add(through),current.add(pt),t)},egPath.prototype.cubicCurveBy=function(handle1,handle2,pt){var current=this.getCurrentSegment(this)._point;this.cubicCurveTo(current.add(handle1),current.add(handle2),current.add(pt))},egPath.prototype.quadraticCurveBy=function(handle,pt){var current=this.getCurrentSegment(this)._point;this.quadraticCurveTo(current.add(handle),current.add(pt))},egPath.prototype.arcBy=function(pt,radius,rotation,clockwise,large){var current=this.getCurrentSegment(this)._point;this.arcTo(current.add(pt),radius,rotation,clockwise,large)},egPath.prototype.closePath=function(tolerance){this.setClosed(!0),this.join(this,tolerance)},egPath.prototype.getBounds=function(opt,style,mx){return opt&&opt._handle?egPath._getHandleBounds(this._segments,this._closed,style,mx,opt):opt&&opt._stroke?egPath._getStrokeBounds(this._segments,this._closed,style,mx,opt):egPath._getBounds(this._segments,this._closed,style,mx)},egPath._getBounds=function(segments,closed,style,matrix,strokePadding){var first=segments[0];if(!first)return new egRect;var coords=new Array(6),prevCoords=first._transformCoordinates(matrix,new Array(6)),min=prevCoords.slice(0,2),max=min.slice(),roots=new Array(2);function processSegment(segment){segment._transformCoordinates(matrix,coords);for(var i=0;i<2;i++)egCurve._addBounds(prevCoords[i],prevCoords[i+4],coords[i+2],coords[i],i,strokePadding?strokePadding[i]:0,min,max,roots);segment=prevCoords;prevCoords=coords,coords=segment}for(var i=1,l=segments.length;i<l;i++)processSegment(segments[i]);closed&&processSegment(first);closed=new egRect(min[0],min[1],max[0]-min[0],max[1]-min[1]);return 0<closed.width&&0==closed.height&&(closed.height=1),0==closed.width&&0<closed.height&&(closed.width=1),closed},egPath._getStrokeBounds=function(segments,closed,style,matrix,opt){var stroke=style.stroke,strokeWidth=style.strokeWidth,strokeMatrix=stroke&&egPath._getStrokeMatrix(matrix,opt),opt=stroke&&egPath._getStrokePadding(strokeWidth,strokeMatrix),bounds=egPath._getBounds(segments,closed,style,matrix,opt);if(stroke){for(var strokeRadius=strokeWidth/2,join=style.strokeJoin,stroke=style.strokeCap,miterLimit=strokeRadius*style.miterLimit,joinBounds=new egRect(new egSize(opt)),length=segments.length-(closed?0:1),i=1;i<length;i++)addJoin(segments[i],join);closed?addJoin(segments[0],join):0<length&&(addCap(segments[0],stroke),addCap(segments[segments.length-1],stroke))}return bounds;function addPoint(point){bounds=bounds.include(point)}function addRound(segment){bounds=bounds.unite(joinBounds.moveCenter(segment._point.transform(matrix)))}function addJoin(segment,join){var handleIn=segment._handleIn,handleOut=segment._handleOut;"round"===join||!handleIn.isZero()&&!handleOut.isZero()&&handleIn.isCollinear(handleOut)?addRound(segment):egPath._addBevelJoin(segment,join,strokeRadius,miterLimit,matrix,strokeMatrix,addPoint)}function addCap(segment,cap){"round"===cap?addRound(segment):egPath._addSquareCap(segment,cap,strokeRadius,matrix,strokeMatrix,addPoint)}},egPath._getStrokePadding=function(radius,matrix){var hor,sin,cos,tx,phi;return matrix?(hor=new egPoint(radius,0).transform(matrix),matrix=new egPoint(0,radius).transform(matrix),phi=hor.getAngleInRadians(),hor=hor.getLength(),matrix=matrix.getLength(),sin=Math.sin(phi),cos=Math.cos(phi),phi=Math.tan(phi),tx=Math.atan2(matrix*phi,hor),phi=Math.atan2(matrix,phi*hor),[Math.abs(hor*Math.cos(tx)*cos+matrix*Math.sin(tx)*sin),Math.abs(matrix*Math.sin(phi)*cos+hor*Math.cos(phi)*sin)]):[radius,radius]},egPath._addBevelJoin=function(segment,join,radius,miterLimit,matrix,strokeMatrix,addPoint,isArea){var segment=segment.getCurve(),curve1=segment.getPrevious(),point=segment.getPointAtTime(0),curve1=curve1.getNormalAtTime(1),segment=segment.getNormalAtTime(0),radius=curve1.getDirectedAngle(segment)<0?-radius:radius;if(curve1.setLength(radius),segment.setLength(radius),matrix&&(point=matrix.transformPoint(point)),strokeMatrix&&(curve1=strokeMatrix.transformPoint(curve1),segment=strokeMatrix.transformPoint(segment)),isArea&&(addPoint(point),addPoint(point.add(curve1))),"miter"===join){radius=new egLine(point.add(curve1),new egPoint(-curve1.y,curve1.x),!0).intersect(new egLine(point.add(segment),new egPoint(-segment.y,segment.x),!0),!0);if(radius&&point.getDistance(radius)<=miterLimit&&(addPoint(radius),!isArea))return}isArea||addPoint(point.add(curve1)),addPoint(point.add(segment))},egPath._addSquareCap=function(segment,cap,radius,matrix,strokeMatrix,addPoint,isArea){var point=segment._point,segment=segment.getLocation(),radius=segment.getNormal().multiply(radius);matrix&&(point=matrix.transformPoint(point)),strokeMatrix&&(radius=strokeMatrix.transformPoint(radius)),isArea&&(addPoint(point.subtract(radius)),addPoint(point.add(radius))),addPoint((point="square"===cap?point.add(radius.rotate(0===segment.getTime()?-90:90)):point).add(radius)),addPoint(point.subtract(radius))},egPath._getHandleBounds=function(segments,closed,style,matrix,opt){opt&&opt._stroke&&style.stroke&&(opt=egPath._getStrokeMatrix(matrix,opt),joinRadius=strokeRadius=style.strokeWidth/2,"miter"===style.strokeJoin&&(joinRadius=strokeRadius*style.miterLimit),"square"===style.strokeCap&&(joinRadius=Math.max(joinRadius,strokeRadius*Math.sqrt(2))),strokePadding=egPath._getStrokePadding(strokeRadius,opt),joinPadding=egPath._getStrokePadding(joinRadius,opt));for(var strokePadding,joinPadding,strokeRadius,joinRadius,coords=new Array(6),x1=1/0,x2=-x1,y1=x1,y2=x2,i=0,l=segments.length;i<l;i++){var segment=segments[i];segment&&segment._transformCoordinates(matrix,coords);for(var j=0;j<6;j+=2){var padding=0===j?joinPadding:strokePadding,paddingX=padding?padding[0]:0,padding=padding?padding[1]:0,x=coords[j],y=coords[j+1],xn=x-paddingX,x=x+paddingX,paddingX=y-padding,y=y+padding;xn<x1&&(x1=xn),x2<x&&(x2=x),paddingX<y1&&(y1=paddingX),y2<y&&(y2=y)}}return new egRect(x1,y1,x2-x1,y2-y1)},egPath._getStrokeMatrix=function(mx,opt){return mx&&mx._shiftless()},egPath.prototype._getMonoCurves=function(){var last;function insertCurve(v){var y0=v[1],y1=v[7],y1=Math.abs((y0-y1)/(v[0]-v[6]))<2e-7?0:y1<y0?-1:1,y0={values:v,winding:y1};monoCurves.push(y0),y1&&(last=y0)}function handleCurve(v){var y3,y2,y1,y0;0!==egCurve.getLength(v)&&(y0=v[1],y1=v[3],y2=v[5],y3=v[7],egCurve.isStraight(v)||y1<=y0==y2<=y1&&y2<=y1==y3<=y2||(y2=egMath.solveQuadratic(3*(y1-y2)-y0+y3,2*(y0+y2)-4*y1,y1-y0,y3=[],4e-7,1-4e-7))<1?insertCurve(v):(y3.sort(),y1=y3[0],insertCurve((y0=egCurve.subdivide(v,y1))[0]),1<y2&&(y1=(y3[1]-y1)/(1-y1),insertCurve((y0=egCurve.subdivide(y0[1],y1))[0])),insertCurve(y0[1])))}if(!(monoCurves=this._monoCurves)){for(var p1x,p1,monoCurves=this._monoCurves=[],curves=this.getCurves(),segments=this._segments,i=0,l=curves.length;i<l;i++)handleCurve(curves[i].getValues());!this._closed&&1<segments.length&&(p1=segments[segments.length-1]._point,segments=segments[0]._point,handleCurve([p1x=p1._x,p1=p1._y,p1x,p1,p1x=segments._x,p1=segments._y,p1x,p1])),0<monoCurves.length&&(monoCurves[0].last=last)}return monoCurves},egPath.prototype.getInteriorPoint=function(evenodd){var point=this.getBounds().center();if(!this.contains(point,evenodd)){for(var curves=this._getMonoCurves(),roots=[],y=point.y,intercepts=[],i=0,l=curves.length;i<l;i++){var values=curves[i].values;if(1===curves[i].winding&&y>values[1]&&y<=values[7]||y>=values[7]&&y<values[1])for(var j=egCurve.solveCubic(values,1,y,roots,0,1)-1;0<=j;j--)intercepts.push(egCurve.getPoint(values,roots[j]).x)}intercepts.sort(function(a,b){return a-b}),point.x=(intercepts[0]+intercepts[1])/2}return point},egPath.prototype.reorient=function(){return this.setClockwise(!0),this},egPath.prototype.getPointAt=function(offset){offset=this.getLocationAt(offset);return offset&&offset.getPoint()},egPath.prototype.getTangentAt=function(offset){offset=this.getLocationAt(offset);return offset&&offset.getTangent()},egPath.prototype.getNormalAt=function(offset){offset=this.getLocationAt(offset);return offset&&offset.getNormal()},egPath.prototype.getWeightedTangentAt=function(offset){offset=this.getLocationAt(offset);return offset&&offset.getWeightedTangent()},egPath.prototype.getWeightedNormalAt=function(offset){offset=this.getLocationAt(offset);return offset&&offset.getWeightedNormal()},egPath.prototype.getCurvatureAt=function(offset){offset=this.getLocationAt(offset);return offset&&offset.getCurvature()},egPath}(),EDPathElement=function(){function EDPathElement(x,y,type,bx,by){this._x=x,this._y=y,this._type=type,this._by=this._bx=0,bx&&(this._bx=bx),by&&(this._by=by)}return EDPathElement.prototype.clone=function(){return new EDPathElement(this._x,this._y,this._type,this._bx,this._by)},EDPathElement.prototype.setXY=function(x,y){this._x=x,this._y=y},EDPathElement.prototype.swapXY=function(other){var _e=__read([other._x,this._x],2);this._x=_e[0],other._x=_e[1],_e=__read([other._y,this._y],2),this._y=_e[0],other._y=_e[1]},Object.defineProperty(EDPathElement.prototype,"point",{get:function(){return new egPoint(this._x,this._y)},set:function(pt){this._x=pt.x,this._y=pt.y},enumerable:!0,configurable:!0}),Object.defineProperty(EDPathElement.prototype,"bkPoint",{get:function(){return new egPoint(this._bx,this._by)},set:function(pt){this._bx=pt.x,this._by=pt.y},enumerable:!0,configurable:!0}),EDPathElement}(),EDPath=function(){function EDPath(arg){arg?this.assign(arg):this._elements=[]}return EDPath.prototype.clone=function(){return new EDPath(this)},EDPath.prototype.assign=function(path){if(this._elements=[],path)for(var i=0;i<path._elements.length;i++)this._elements.push(path._elements[i].clone())},EDPath.prototype.isEmpty=function(){return 0===this._elements.length},EDPath.prototype.reset=function(){this._elements.clear()},EDPath.prototype.size=function(){return this._elements.length},EDPath.prototype.toContent=function(ctx){ctx.beginPath();for(var i=0,l=this._elements.length;i<l;i++){var elem=this._elements[i];switch(elem._type){case ePathElemType.MoveTo:ctx.moveTo(elem._x,elem._y);break;case ePathElemType.LineTo:ctx.lineTo(elem._x,elem._y);break;case ePathElemType.CurveTo:i<this._elements.length-2&&(ctx.bezierCurveTo(elem._x,elem._y,this._elements[i+1]._x,this._elements[i+1]._y,this._elements[i+2]._x,this._elements[i+2]._y),i+=2);break;case ePathElemType.Close:ctx.closePath()}}},EDPath.prototype.moveTo=function(x,y){0<this._elements.length&&this._elements.last()._type==ePathElemType.MoveTo?this._elements.last().setXY(x,y):this._elements.push(new EDPathElement(x,y,ePathElemType.MoveTo))},EDPath.prototype.moveToPt=function(endPt){this.moveTo(endPt.x,endPt.y)},EDPath.prototype.lineTo=function(x,y){0==this._elements.length&&this.moveTo(0,0);var lstElem=this._elements.last();(.9<Math.abs(lstElem._x-x)||.9<Math.abs(lstElem._y-y))&&this._elements.push(new EDPathElement(x,y,ePathElemType.LineTo))},EDPath.prototype.lineToPt=function(endPt){this.lineTo(endPt.x,endPt.y)},EDPath.prototype.curveTo=function(cx1,cy1,cx2,cy2,px,py){0===this._elements.length&&this.moveTo(0,0),this._elements.push(new EDPathElement(cx1,cy1,ePathElemType.CurveTo)),this._elements.push(new EDPathElement(cx2,cy2,ePathElemType.CurveData)),this._elements.push(new EDPathElement(px,py,ePathElemType.CurveData))},EDPath.prototype.curveToPt=function(ctrlA,ctrlB,endPt){this.curveTo(ctrlA.x,ctrlA.y,ctrlB.x,ctrlB.y,endPt.x,endPt.y)},EDPath.prototype.arcTo=function(box,startAngle,sweepAngle){if(!box.isEmpty()){var vecPts=[],box=egBezier.arcToBezier(box,-startAngle,-sweepAngle,vecPts);0==this._elements.length||this._elements.last()._type==ePathElemType.Close?this.moveTo(box.x,box.y):this.lineTo(box.x,box.y);for(var i=0;i<vecPts.length;i+=3)this.curveToPt(vecPts[i],vecPts[i+1],vecPts[i+2])}},EDPath.prototype.ellipse=function(rcfBox){var ptStart;rcfBox.isEmpty()||(ptStart=egBezier.arcToBezier(rcfBox,0,-360,rcfBox=[]),12==rcfBox.length&&(0<this._elements.length&&this._elements.last()._type==ePathElemType.MoveTo&&this._elements.pop(),this.moveToPt(ptStart),this.curveToPt(rcfBox[0],rcfBox[1],rcfBox[2]),this.curveToPt(rcfBox[3],rcfBox[4],rcfBox[5]),this.curveToPt(rcfBox[6],rcfBox[7],rcfBox[8]),this.curveToPt(rcfBox[9],rcfBox[10],rcfBox[11]),this._elements.push(new EDPathElement(ptStart.x,ptStart.y,ePathElemType.Close))))},EDPath.prototype.closeSubpath=function(){if(!(this._elements.length<2)){for(var ptfs=new egPoint,ptfe=this._elements.last().point,i=this._elements.length-1;0<=i;i--)if(this._elements[i]._type==ePathElemType.MoveTo){ptfs=this._elements[i].point;break}ptfs.equals2(ptfe,1)?this._elements.last().point=ptfs:this.lineTo(ptfs.x,ptfs.y),this._elements.push(new EDPathElement(ptfs.x,ptfs.y,ePathElemType.Close))}},EDPath.prototype.addLine=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];2===args.length&&args[0]instanceof egPoint&&args[0]instanceof egPoint?(this.moveToPt(args[0]),this.lineToPt(args[1])):4===args.length&&(this.moveTo(args[0],args[1]),this.lineTo(args[2],args[3]))},EDPath.prototype.addRect=function(box){this.moveToPt(box.topLeft()),this.lineToPt(box.topRight()),this.lineToPt(box.bottomRight()),this.lineToPt(box.bottomLeft()),this.closeSubpath()},EDPath.prototype.addEllipse=function(box){var pt;box.isEmpty()||(pt=egBezier.arcToBezier(box,0,-360,box=[]),12==box.length&&(0<this._elements.length&&this._elements.last()._type==ePathElemType.MoveTo&&this._elements.pop(),this.moveToPt(pt),this.curveToPt(box[0],box[1],box[2]),this.curveToPt(box[3],box[4],box[5]),this.curveToPt(box[6],box[7],box[8]),this.curveToPt(box[9],box[10],box[11])))},EDPath.prototype.addEllipseArc=function(startX,startY,rx,ry,xAxisRotation,largeArcFlag,sweepFlag,endX,endY){for(var x1,cx,cy,a01,th0,th_arc,px,sin_th=Math.sin(xAxisRotation*Math.PI/180),cos_th=Math.cos(xAxisRotation*Math.PI/180),n_segs=(1<(px=(px=cos_th*(startX-endX)*.5+sin_th*(startY-endY)*.5)*px/((rx=rx<0?-rx:rx)*rx)+(px=cos_th*(startY-endY)*.5-sin_th*(startX-endX)*.5)*px/((ry=ry<0?-ry:ry)*ry))&&(rx*=px=Math.sqrt(px),ry*=px),(endY=1/(((x1=(px=cos_th/rx)*endX+(a01=sin_th/rx)*endY)-(px=px*startX+a01*startY))*(x1-px)+((endX=(a01=-sin_th/ry)*endX+(sin_th=cos_th/ry)*endY)-(cos_th=a01*startX+sin_th*startY))*(endX-cos_th))-.25)<0&&(endY=0),a01=Math.sqrt(endY),cx=.5*(px+x1)-(a01=sweepFlag==largeArcFlag?-a01:a01)*(endX-cos_th),cy=.5*(cos_th+endX)+a01*(x1-px),th0=Math.atan2(cos_th-cy,px-cx),(th_arc=Math.atan2(endX-cy,x1-cx)-th0)<0&&sweepFlag?th_arc+=2*Math.PI:0<th_arc&&!sweepFlag&&(th_arc-=2*Math.PI),Math.ceil(Math.abs(th_arc/(.5*Math.PI+.001)))),s=new egPoint(startX,startY),i=0;i<n_segs;i++)EDPath.addEllipseArcSegment(this,s,cx,cy,th0+i*th_arc/n_segs,th0+(i+1)*th_arc/n_segs,rx,ry,xAxisRotation)},EDPath.addEllipseArcSegment=function(path,spt,cx,cy,th0,th1,rx,ry,xAxisRotation){var sin_th=Math.sin(xAxisRotation*Math.PI/180),xAxisRotation=Math.cos(xAxisRotation*Math.PI/180),a00=xAxisRotation*rx,a01=-sin_th*ry,sin_th=sin_th*rx,rx=xAxisRotation*ry,xAxisRotation=.5*(th1-th0),ry=8/3*Math.sin(.5*xAxisRotation)*Math.sin(.5*xAxisRotation)/Math.sin(xAxisRotation),xAxisRotation=cx+Math.cos(th0)-ry*Math.sin(th0),th0=cy+Math.sin(th0)+ry*Math.cos(th0),cx=cx+Math.cos(th1),cy=cy+Math.sin(th1),x2=cx+ry*Math.sin(th1),ry=cy-ry*Math.cos(th1),th1=new egPoint(a00*cx+a01*cy,sin_th*cx+rx*cy);path.isEmpty()&&path.moveTo(spt.x,spt.y),path.curveTo(a00*xAxisRotation+a01*th0,sin_th*xAxisRotation+rx*th0,a00*x2+a01*ry,sin_th*x2+rx*ry,th1.x,th1.y),spt.setPt(th1)},EDPath.prototype.addLines=function(ptfs){0==this._elements.length||this._elements.last()._type==ePathElemType.Close?this.moveToPt(ptfs[0]):this.lineToPt(ptfs[0]);for(var i=1;i<ptfs.length;i++)this.lineToPt(ptfs[i])},EDPath.prototype.addPath=function(path,connect){if(void 0===connect&&(connect=!1),!path.isEmpty()){0<this._elements.length&&connect?path._elements[0].point.equals2(this._elements.last().point)||(this._elements.push(path._elements[0]),this._elements.last()._type=ePathElemType.LineTo):this._elements.push(path._elements[0]);for(var i=1;i<path._elements.length;i++)this._elements.push(path._elements[i])}},EDPath.prototype.at=function(index){return 0<=index&&index<this._elements.length?this._elements[index]:null},EDPath.prototype.roundData=function(){for(var i=0,l=this._elements.length;i<l;i++)this._elements[i]._type!=ePathElemType.CurveData&&(this._elements[i]._x=Math.round(this._elements[i]._x),this._elements[i]._y=Math.round(this._elements[i]._y))},EDPath.prototype.getOpenedStart=function(ptf1,ptf2,fromPos){if(fromPos>=this._elements.length)return[-1,fromPos];for(var curMove=-1,i=fromPos;i<this._elements.length;i++)if(this._elements[i]._type==ePathElemType.MoveTo){if(-1!=curMove)return ptf2.setPt(this._elements[curMove+1].point),[curMove,fromPos=i];curMove=i,ptf1.setPt(this._elements[i].point)}else this._elements[i]._type==ePathElemType.Close&&(curMove=-1);return-1!=curMove&&curMove<this._elements.length-1?(ptf2.setPt(this._elements[curMove+1].point),[curMove,fromPos=this._elements.length]):[-1,fromPos]},EDPath.prototype.getOpenedEnd=function(ptf1,ptf2,fromPos,curMove){if(void 0===curMove&&(curMove=0),fromPos>=this._elements.length)return[-1,fromPos,curMove];curMove=-1;for(var i=fromPos;i<this._elements.length;i++)if(this._elements[i]._type==ePathElemType.MoveTo){if(-1!=curMove)return 1<i&&(ptf1.setPt(this._elements[i-2].point),ptf2.setPt(this._elements[i-1].point)),[(fromPos=i)-1,fromPos,curMove];curMove=i}else this._elements[i]._type==ePathElemType.Close&&(curMove=-1);return-1!=curMove&&1<this._elements.length?(ptf1.setPt(this._elements[this._elements.length-2].point),ptf2.setPt(this._elements.last().point),fromPos=this._elements.length,[this._elements.length-1,fromPos,curMove]):[-1,fromPos,curMove]},EDPath.prototype.setLineHead=function(sizeS,sizeE){var oldStarts=[],oldEnds=[],ptfs=new egPoint,ptfe=new egPoint,fromPos=0,fromPosCur=0,curPos=0,exist=!1;if(0<sizeS){var relt,fromPos=0,curPos=(relt=this.getOpenedStart(ptfs,ptfe,fromPos))[0];for(fromPos=relt[1];-1!=curPos;){var ang1,lx,ly,xpath,exist=!0;this._elements[curPos+1]._type==ePathElemType.LineTo?(oldStarts.push(this._elements[curPos].point),ptfs.getDistance(ptfe)<=sizeS?curPos+2==this._elements.length||this._elements[curPos+2]._type==ePathElemType.MoveTo?(this._elements.splice(curPos,2),fromPos-=2):(this._elements[curPos+1]._type=ePathElemType.MoveTo,this._elements.splice(curPos,1),--fromPos):(ang1=Math.atan2(ptfe.y-ptfs.y,ptfe.x-ptfs.x),lx=sizeS*Math.cos(ang1),ly=sizeS*Math.sin(ang1),Math.abs(lx)<.01&&(lx=0),Math.abs(ly)<.01&&(ly=0),ptfs.x=ptfs.x+lx,ptfs.y=ptfs.y+ly,this._elements[curPos].point=ptfs)):this._elements[curPos+1]._type==ePathElemType.CurveTo&&((xpath=this.toXPath(curPos)).getFirstChild().getFirstCurve().getLength()<=sizeS?curPos+4==this._elements.length||this._elements[curPos+4]._type==ePathElemType.MoveTo?(this._elements.splice(curPos,4),fromPos-=4):(this._elements[curPos+3]._type=ePathElemType.MoveTo,this._elements.splice(curPos,3),fromPos-=3):(oldStarts.push(this._elements[curPos].point),xpath.splitAt(sizeS),this._elements.splice(curPos,this._elements.length-curPos),this.fromXPath(xpath,1))),curPos=(relt=this.getOpenedStart(ptfs,ptfe,fromPos))[0],fromPos=relt[1]}}if(0<sizeE)for(curPos=(relt=this.getOpenedEnd(ptfs,ptfe,fromPos=0,fromPosCur))[0],fromPos=relt[1],fromPosCur=relt[2];-1!=curPos;)exist=!0,0<curPos&&(this._elements[curPos]._type==ePathElemType.LineTo?(oldEnds.push(this._elements[curPos].point),ptfs.getDistance(ptfe)<=sizeE?this._elements[curPos-1]._type==ePathElemType.MoveTo?(this._elements.splice(curPos-1,2),fromPos-=2):(this._elements.splice(curPos,1),--fromPos):(ang1=Math.atan2(ptfs.y-ptfe.y,ptfs.x-ptfe.x),lx=sizeE*Math.cos(ang1),ly=sizeE*Math.sin(ang1),Math.abs(lx)<.01&&(lx=0),Math.abs(ly)<.01&&(ly=0),ptfe.x=ptfe.x+lx,ptfe.y=ptfe.y+ly,this._elements[curPos].point=ptfe)):this._elements[curPos]._type==ePathElemType.CurveData&&2<curPos&&((xpath=this.toXPath(fromPosCur)).getFirstChild().getLastCurve().getLength()<=sizeE?this._elements[curPos-3]._type==ePathElemType.MoveTo?(this._elements.splice(curPos-3,4),fromPos-=4):(this._elements.splice(curPos-2,3),fromPos-=3):(oldEnds.push(this._elements[curPos].point),xpath.removeChild(xpath.getFirstChild().splitAt(-sizeE)),this._elements.splice(fromPosCur,this._elements.length-fromPosCur),this.fromXPath(xpath)))),curPos=(relt=this.getOpenedEnd(ptfs,ptfe,fromPos,fromPosCur))[0],fromPos=relt[1],fromPosCur=relt[2];for(var i=fromPos=0;i<oldStarts.length;i++)curPos=(res=this.getOpenedStart(ptfs,ptfe,fromPos))[0],fromPos=res[1],-1!=curPos&&(this._elements[curPos].bkPoint=oldStarts[i]);for(var res,i=fromPos=0;i<oldEnds.length;i++)curPos=(res=this.getOpenedEnd(ptfs,ptfe,fromPos,fromPosCur))[0],fromPos=res[1],fromPosCur=res[2],-1!=curPos&&(this._elements[curPos].bkPoint=oldEnds[i]);return exist},EDPath.prototype.setCornerRound=function(size){if(0!=size){for(var pta1,pta2,pte,curve,t,curves,pte1,pte2,pte3,pte4,seg1,seg2,curve1,seg3,seg4,curve2,ang1,ang2,alfa,_size,len1,len2,t1,curves1,t2,curves2,ang3,ang4,lx,ly,rx,ry,ptL,ptR,tempSegments=[],pt1=new egPoint,pt2=new egPoint,pt3=new egPoint,prevMoveTo=-1,prevInSeg=-1,i=0,l=this._elements.length;i<l;i++)this._elements[i]._type==ePathElemType.MoveTo?(prevMoveTo=i,tempSegments.push(this._elements[i].clone()),prevInSeg=tempSegments.length-1):this._elements[i]._type==ePathElemType.LineTo?this._elements[i-1]._type==ePathElemType.MoveTo?tempSegments.push(this._elements[i].clone()):this._elements[i-1]._type==ePathElemType.LineTo?(pt1=this._elements[i-2].point,pt2=this._elements[i-1].point,pt3=this._elements[i].point,ang1=Math.atan2(pt1.y-pt2.y,pt1.x-pt2.x),alfa=(ang2=Math.atan2(pt3.y-pt2.y,pt3.x-pt2.x))-ang1,Math.abs(alfa)<.001||Math.abs(Math.abs(alfa)-Math.PI)<.001||(_size=size,len1=Math.sqrt(Math.pow(pt1.x-pt2.x,2)+Math.pow(pt1.y-pt2.y,2)),lx=(_size=(len2=Math.sqrt(Math.pow(pt2.x-pt3.x,2)+Math.pow(pt2.y-pt3.y,2)))<2*(_size=len1<2*_size?.5*len1:_size)?.5*len2:_size)*Math.cos(ang1),ly=_size*Math.sin(ang1),rx=_size*Math.cos(ang2),ry=_size*Math.sin(ang2),Math.abs(lx)<.01&&(lx=0),Math.abs(ly)<.01&&(ly=0),Math.abs(rx)<.01&&(rx=0),Math.abs(ry)<.01&&(ry=0),tempSegments[tempSegments.length-1].setXY(pt2.x+lx,pt2.y+ly),tempSegments.push(new EDPathElement(pt2.x+.448*lx,pt2.y+.448*ly,ePathElemType.CurveTo)),tempSegments.push(new EDPathElement(pt2.x+.448*rx,pt2.y+.448*ry,ePathElemType.CurveData)),tempSegments.push(new EDPathElement(pt2.x+rx,pt2.y+ry,ePathElemType.CurveData))),tempSegments.push(this._elements[i].clone())):this._elements[i-1]._type==ePathElemType.CurveData&&(pte4=this._elements[i-4].point,pte3=this._elements[i-3].point,pte2=this._elements[i-2].point,pte1=this._elements[i-1].point,seg1=new egSegment(pte4.x,pte4.y,0,0,pte3.x-pte4.x,pte3.y-pte4.y),seg2=new egSegment(pte1.x,pte1.y,pte2.x-pte1.x,pte2.y-pte1.y,0,0),curve=new egCurve(null,seg1,seg2),pt1.set(0,0),pt2=this._elements[i-1].point,pt3=this._elements[i].point,ang1=Math.atan2(curve.getTangentAtTime(1)._y,curve.getTangentAtTime(1)._x),alfa=(ang2=Math.atan2(pt3.y-pt2.y,pt3.x-pt2.x))-ang1,Math.abs(alfa)<.001||(_size=size,len1=curve.getLength(),(len2=Math.sqrt(Math.pow(pt3.x-pt2.x,2)+Math.pow(pt3.y-pt2.y,2)))<2*(_size=len1<2*_size?.5*len1:_size)&&(_size=.5*len2),t=curve.getTimeAt(-_size),curves=egCurve.subdivide(curve.getValues(),t),ang3=Math.atan2(egCurve.getTangent(curves[1],0)._y,egCurve.getTangent(curves[1],0)._x),lx=_size*Math.cos(ang3),ly=_size*Math.sin(ang3),rx=_size*Math.cos(ang2),ry=_size*Math.sin(ang2),Math.abs(lx)<.01&&(lx=0),Math.abs(ly)<.01&&(ly=0),Math.abs(rx)<.01&&(rx=0),Math.abs(ry)<.01&&(ry=0),ptL=new egPoint(curves[1][0],curves[1][1]),tempSegments[tempSegments.length-3].setXY(curves[0][2],curves[0][3]),tempSegments[tempSegments.length-2].setXY(curves[0][4],curves[0][5]),tempSegments[tempSegments.length-1].point=ptL,tempSegments.push(new EDPathElement(ptL.x+.448*lx*1.5,ptL.y+.448*ly*1.5,ePathElemType.CurveTo)),tempSegments.push(new EDPathElement(pt2.x+.448*rx,pt2.y+.448*ry,ePathElemType.CurveData)),tempSegments.push(new EDPathElement(pt2.x+rx,pt2.y+ry,ePathElemType.CurveData))),tempSegments.push(this._elements[i].clone())):this._elements[i]._type==ePathElemType.CurveTo?this._elements[i-1]._type==ePathElemType.MoveTo?(tempSegments.push(this._elements[i].clone()),tempSegments.push(this._elements[i+1].clone()),tempSegments.push(this._elements[i+2].clone()),i+=2):this._elements[i-1]._type==ePathElemType.LineTo?(pte1=this._elements[i-1].point,pte=this._elements[i].point,pta1=this._elements[i+1].point,pta2=this._elements[i+2].point,seg1=new egSegment(pte1.x,pte1.y,0,0,pte.x-pte1.x,pte.y-pte1.y),seg2=new egSegment(pta2.x,pta2.y,pta1.x-pta2.x,pta1.y-pta2.y,0,0),curve=new egCurve(null,seg1,seg2),pt1=this._elements[i-2].point,pt2=this._elements[i-1].point,pt3.set(0,0),alfa=(ang1=Math.atan2(pt1.y-pt2.y,pt1.x-pt2.x))-(ang2=Math.atan2(curve.getTangentAtTime(0)._y,curve.getTangentAtTime(0)._x)),Math.abs(alfa)<.001?(tempSegments.push(this._elements[i].clone()),tempSegments.push(this._elements[i+1].clone()),tempSegments.push(this._elements[i+2].clone())):(_size=size,len1=Math.sqrt(Math.pow(pt1.x-pt2.x,2)+Math.pow(pt1.y-pt2.y,2)),(len2=curve.getLength())<2*(_size=len1<2*_size?.5*len1:_size)&&(_size=.5*len2),t=curve.getTimeAt(_size),curves=egCurve.subdivide(curve.getValues(),t),ang3=Math.atan2(egCurve.getTangent(curves[1],0)._y,egCurve.getTangent(curves[1],0)._x)+Math.PI,lx=_size*Math.cos(ang1),ly=_size*Math.sin(ang1),rx=_size*Math.cos(ang3),ry=_size*Math.sin(ang3),Math.abs(lx)<.01&&(lx=0),Math.abs(ly)<.01&&(ly=0),Math.abs(rx)<.01&&(rx=0),Math.abs(ry)<.01&&(ry=0),tempSegments[tempSegments.length-1].setXY(pt2.x+lx,pt2.y+ly),tempSegments.push(new EDPathElement(pt2.x+.448*lx,pt2.y+.448*ly,ePathElemType.CurveTo)),tempSegments.push(new EDPathElement(curves[0][6]+.448*rx*1.5,curves[0][7]+.448*ry*1.5,ePathElemType.CurveData)),tempSegments.push(new EDPathElement(curves[0][6],curves[0][7],ePathElemType.CurveData)),tempSegments.push(new EDPathElement(curves[1][2],curves[1][3],ePathElemType.CurveTo)),tempSegments.push(new EDPathElement(curves[1][4],curves[1][5],ePathElemType.CurveData)),tempSegments.push(new EDPathElement(curves[1][6],curves[1][7],ePathElemType.CurveData))),i+=2):this._elements[i-1]._type==ePathElemType.CurveData&&(pte1=this._elements[i-1].point,pte2=this._elements[i-2].point,pte3=this._elements[i-3].point,pte4=this._elements[i-4].point,pte=this._elements[i].point,pta1=this._elements[i+1].point,pta2=this._elements[i+2].point,seg1=new egSegment(pte4.x,pte4.y,0,0,pte3.x-pte4.x,pte3.y-pte4.y),seg2=new egSegment(pte1.x,pte1.y,pte2.x-pte1.x,pte2.y-pte1.y,0,0),curve1=new egCurve(null,seg1,seg2),seg3=new egSegment(pte1.x,pte1.y,0,0,pte.x-pte1.x,pte.y-pte1.y),seg4=new egSegment(pta2.x,pta2.y,pta1.x-pta2.x,pta1.y-pta2.y,0,0),curve2=new egCurve(null,seg3,seg4),alfa=(ang1=Math.atan2(curve1.getTangentAtTime(1)._y,curve1.getTangentAtTime(1)._x))-(ang2=Math.atan2(curve2.getTangentAtTime(0)._y,curve2.getTangentAtTime(0)._x)),Math.abs(alfa)<.001?(tempSegments.push(this._elements[i].clone()),tempSegments.push(this._elements[i+1].clone()),tempSegments.push(this._elements[i+2].clone())):(_size=size,len1=curve1.getLength(),(len2=curve2.getLength())<2*(_size=len1<2*_size?.5*len1:_size)&&(_size=.5*len2),t1=curve1.getTimeAt(-_size),curves1=egCurve.subdivide(curve1.getValues(),t1),t2=curve2.getTimeAt(_size),curves2=egCurve.subdivide(curve2.getValues(),t2),ang3=Math.atan2(egCurve.getTangent(curves1[1],0)._y,egCurve.getTangent(curves1[1],0)._x),ang4=Math.atan2(egCurve.getTangent(curves2[1],0)._y,egCurve.getTangent(curves2[1],0)._x)+Math.PI,lx=_size*Math.cos(ang3),ly=_size*Math.sin(ang3),rx=_size*Math.cos(ang4),ry=_size*Math.sin(ang4),Math.abs(lx)<.01&&(lx=0),Math.abs(ly)<.01&&(ly=0),Math.abs(rx)<.01&&(rx=0),Math.abs(ry)<.01&&(ry=0),ptL=new egPoint(curves1[1][0],curves1[1][1]),ptR=new egPoint(curves2[1][0],curves2[1][1]),tempSegments[tempSegments.length-3].setXY(curves1[0][2],curves1[0][3]),tempSegments[tempSegments.length-2].setXY(curves1[0][4],curves1[0][5]),tempSegments[tempSegments.length-1].setXY(ptL.x,ptL.y),tempSegments.push(new EDPathElement(ptL.x+.448*lx*1.5,ptL.y+.448*ly*1.5,ePathElemType.CurveTo)),tempSegments.push(new EDPathElement(ptR.x+.448*rx*1.5,ptR.y+.448*ry*1.5,ePathElemType.CurveData)),tempSegments.push(new EDPathElement(ptR.x,ptR.y,ePathElemType.CurveData)),tempSegments.push(new EDPathElement(curves2[1][2],curves2[1][3],ePathElemType.CurveTo)),tempSegments.push(new EDPathElement(curves2[1][4],curves2[1][5],ePathElemType.CurveData)),tempSegments.push(new EDPathElement(curves2[1][6],curves2[1][7],ePathElemType.CurveData))),i+=2):this._elements[i]._type==ePathElemType.Close&&(this._elements[prevMoveTo+1]._type==ePathElemType.LineTo&&this._elements[i-1]._type==ePathElemType.LineTo?(pt1=this._elements[i-2].point,pt2=this._elements[i-1].point,pt3=this._elements[prevMoveTo+1].point,ang1=Math.atan2(pt1.y-pt2.y,pt1.x-pt2.x),alfa=(ang2=Math.atan2(pt3.y-pt2.y,pt3.x-pt2.x))-ang1,Math.abs(alfa)<.001||Math.abs(Math.abs(alfa)-Math.PI)<.001?tempSegments.push(this._elements[i].clone()):(_size=size,len1=Math.sqrt(Math.pow(pt1.x-pt2.x,2)+Math.pow(pt1.y-pt2.y,2)),lx=(_size=(len2=Math.sqrt(Math.pow(pt2.x-pt3.x,2)+Math.pow(pt2.y-pt3.y,2)))<2*(_size=len1<2*_size?.5*len1:_size)?.5*len2:_size)*Math.cos(ang1),ly=_size*Math.sin(ang1),rx=_size*Math.cos(ang2),ry=_size*Math.sin(ang2),Math.abs(lx)<.01&&(lx=0),Math.abs(ly)<.01&&(ly=0),Math.abs(rx)<.01&&(rx=0),Math.abs(ry)<.01&&(ry=0),ptR=new egPoint(pt2.x+rx,pt2.y+ry),tempSegments[tempSegments.length-1].setXY(pt2.x+lx,pt2.y+ly),tempSegments.push(new EDPathElement(pt2.x+.448*lx,pt2.y+.448*ly,ePathElemType.CurveTo)),tempSegments.push(new EDPathElement(pt2.x+.448*rx,pt2.y+.448*ry,ePathElemType.CurveData)),tempSegments.push(new EDPathElement(ptR.x,ptR.y,ePathElemType.CurveData)),tempSegments[prevInSeg].point=ptR,tempSegments.push(new EDPathElement(ptR.x,ptR.y,ePathElemType.Close)))):this._elements[prevMoveTo+1]._type==ePathElemType.CurveTo&&this._elements[i-1]._type==ePathElemType.LineTo?(pte=this._elements[prevMoveTo].point,pte1=this._elements[prevMoveTo+1].point,pte2=this._elements[prevMoveTo+2].point,pte3=this._elements[prevMoveTo+3].point,seg1=new egSegment(pte.x,pte.y,0,0,pte1.x-pte.x,pte1.y-pte.y),seg2=new egSegment(pte3.x,pte3.y,pte2.x-pte3.x,pte2.y-pte3.y,0,0),curve=new egCurve(null,seg1,seg2),pt1=this._elements[i-2].point,pt2=this._elements[i-1].point,pt3.set(0,0),alfa=(ang1=Math.atan2(pt1.y-pt2.y,pt1.x-pt2.x))-(ang2=Math.atan2(curve.getTangentAtTime(0)._y,curve.getTangentAtTime(0)._x)),Math.abs(alfa)<.001?tempSegments.push(this._elements[i].clone()):(_size=size,len1=Math.sqrt(Math.pow(pt1.x-pt2.x,2)+Math.pow(pt1.y-pt2.y,2)),(len2=curve.getLength())<2*(_size=len1<2*_size?.5*len1:_size)&&(_size=.5*len2),t=curve.getTimeAt(_size),curves=egCurve.subdivide(curve.getValues(),t),ang3=Math.atan2(egCurve.getTangent(curves[1],0)._y,egCurve.getTangent(curves[1],0)._x)+Math.PI,lx=_size*Math.cos(ang1),ly=_size*Math.sin(ang1),rx=_size*Math.cos(ang3),ry=_size*Math.sin(ang3),Math.abs(lx)<.01&&(lx=0),Math.abs(ly)<.01&&(ly=0),Math.abs(rx)<.01&&(rx=0),Math.abs(ry)<.01&&(ry=0),ptR=new egPoint(curves[0][6],curves[0][7]),tempSegments[tempSegments.length-1].setXY(pt2.x+lx,pt2.y+ly),tempSegments.push(new EDPathElement(pt2.x+.448*lx,pt2.y+.448*ly,ePathElemType.CurveTo)),tempSegments.push(new EDPathElement(ptR.x+.448*rx*1.5,ptR.y+.448*ry*1.5,ePathElemType.CurveData)),tempSegments.push(new EDPathElement(ptR.x,ptR.y,ePathElemType.CurveData)),tempSegments[prevInSeg].point=ptR,tempSegments[prevInSeg+1].setXY(curves[1][2],curves[1][3]),tempSegments[prevInSeg+2].setXY(curves[1][4],curves[1][5]),tempSegments.push(new EDPathElement(ptR.x,ptR.y,ePathElemType.Close)))):this._elements[prevMoveTo+1]._type==ePathElemType.LineTo&&this._elements[i-1]._type==ePathElemType.CurveData?(pte1=this._elements[i-1].point,pte2=this._elements[i-2].point,pte3=this._elements[i-3].point,pte4=this._elements[i-4].point,seg1=new egSegment(pte4.x,pte4.y,0,0,pte3.x-pte4.x,pte3.y-pte4.y),seg2=new egSegment(pte1.x,pte1.y,pte2.x-pte1.x,pte2.y-pte1.y,0,0),curve=new egCurve(null,seg1,seg2),pt1.set(0,0),pt2=this._elements[prevMoveTo].point,pt3=this._elements[prevMoveTo+1].point,ang1=Math.atan2(curve.getTangentAtTime(1)._y,curve.getTangentAtTime(1)._x),alfa=(ang2=Math.atan2(pt3.y-pt2.y,pt3.x-pt2.x))-ang1,Math.abs(alfa)<.001?tempSegments.push(this._elements[i].clone()):(_size=size,len1=curve.getLength(),(len2=Math.sqrt(Math.pow(pt3.x-pt2.x,2)+Math.pow(pt3.y-pt2.y,2)))<2*(_size=len1<2*_size?.5*len1:_size)&&(_size=.5*len2),t=curve.getTimeAt(-_size),curves=egCurve.subdivide(curve.getValues(),t),ang3=Math.atan2(egCurve.getTangent(curves[1],0)._y,egCurve.getTangent(curves[1],0)._x),lx=_size*Math.cos(ang3),ly=_size*Math.sin(ang3),rx=_size*Math.cos(ang2),ry=_size*Math.sin(ang2),Math.abs(lx)<.01&&(lx=0),Math.abs(ly)<.01&&(ly=0),Math.abs(rx)<.01&&(rx=0),Math.abs(ry)<.01&&(ry=0),ptL=new egPoint(curves[0][6],curves[0][7]),ptR=new egPoint(pt2.x+rx,pt2.y+ry),tempSegments[tempSegments.length-3].setXY(curves[0][2],curves[0][3]),tempSegments[tempSegments.length-2].setXY(curves[0][4],curves[0][5]),tempSegments[tempSegments.length-1].point=ptL,tempSegments.push(new EDPathElement(ptL.x+.448*lx*1.5,ptL.y+.448*ly*1.5,ePathElemType.CurveTo)),tempSegments.push(new EDPathElement(pt2.x+.448*rx,pt2.y+.448*ry,ePathElemType.CurveData)),tempSegments.push(new EDPathElement(ptR.x,ptR.y,ePathElemType.CurveData)),tempSegments[prevInSeg].point=ptR,tempSegments.push(new EDPathElement(ptR.x,ptR.y,ePathElemType.Close)))):this._elements[prevMoveTo+1]._type==ePathElemType.CurveTo&&this._elements[i-1]._type==ePathElemType.CurveData&&(pte1=this._elements[i-1].point,pte2=this._elements[i-2].point,pte3=this._elements[i-3].point,pte4=this._elements[i-4].point,seg1=new egSegment(pte4.x,pte4.y,0,0,pte3.x-pte4.x,pte3.y-pte4.y),seg2=new egSegment(pte1.x,pte1.y,pte2.x-pte1.x,pte2.y-pte1.y,0,0),curve1=new egCurve(null,seg1,seg2),pte1=this._elements[prevMoveTo].point,pte2=this._elements[prevMoveTo+1].point,pte3=this._elements[prevMoveTo+2].point,pte4=this._elements[prevMoveTo+3].point,seg3=new egSegment(pte1.x,pte1.y,0,0,pte2.x-pte1.x,pte2.y-pte1.y),seg4=new egSegment(pte4.x,pte4.y,pte3.x-pte4.x,pte3.y-pte4.y,0,0),curve2=new egCurve(null,seg3,seg4),alfa=(ang1=Math.atan2(curve1.getTangentAtTime(1)._y,curve1.getTangentAtTime(1)._x))-(ang2=Math.atan2(curve2.getTangentAtTime(0)._y,curve2.getTangentAtTime(0)._x)),Math.abs(alfa)<.001?tempSegments.push(this._elements[i].clone()):(_size=size,len1=curve1.getLength(),(len2=curve2.getLength())<2*(_size=len1<2*_size?.5*len1:_size)&&(_size=.5*len2),t1=curve1.getTimeAt(-_size),curves1=egCurve.subdivide(curve1.getValues(),t1),t2=curve2.getTimeAt(_size),curves2=egCurve.subdivide(curve2.getValues(),t2),ang3=Math.atan2(egCurve.getTangent(curves1[1],0)._y,egCurve.getTangent(curves1[1],0)._x),ang4=Math.atan2(egCurve.getTangent(curves2[1],0)._y,egCurve.getTangent(curves2[1],0)._x)+Math.PI,lx=_size*Math.cos(ang3),ly=_size*Math.sin(ang3),rx=_size*Math.cos(ang4),ry=_size*Math.sin(ang4),Math.abs(lx)<.01&&(lx=0),Math.abs(ly)<.01&&(ly=0),Math.abs(rx)<.01&&(rx=0),Math.abs(ry)<.01&&(ry=0),ptL=new egPoint(curves1[1][0],curves1[1][1]),ptR=new egPoint(curves2[1][0],curves2[1][1]),tempSegments[tempSegments.length-3].setXY(curves1[0][2],curves1[0][3]),tempSegments[tempSegments.length-2].setXY(curves1[0][4],curves1[0][5]),tempSegments[tempSegments.length-1].point=ptL,tempSegments.push(new EDPathElement(ptL.x+.448*lx*1.5,ptL.y+.448*ly*1.5,ePathElemType.CurveTo)),tempSegments.push(new EDPathElement(ptR.x+.448*lx*1.5,ptR.y+.448*ly*1.5,ePathElemType.CurveData)),tempSegments.push(new EDPathElement(ptR.x,ptR.y,ePathElemType.CurveData)),tempSegments[prevInSeg].point=ptR,tempSegments[prevInSeg+1].setXY(curves2[1][2],curves2[1][3]),tempSegments[prevInSeg+2].setXY(curves2[1][4],curves2[1][5]),tempSegments.push(new EDPathElement(ptR.x,ptR.y,ePathElemType.Close)))));this._elements=tempSegments}},EDPath.prototype.translate=function(x,y){for(var i=0,l=this._elements.length;i<l;i++)this._elements[i]._x+=x,this._elements[i]._y+=y},EDPath.prototype.scale=function(xscale,yscale){var ma=new egMatrix;ma.scale(xscale,yscale),this.transform(ma)},EDPath.prototype.transform=function(ma){for(var i=0,l=this._elements.length;i<l;i++){var v=ma.transformXY(this._elements[i]._x,this._elements[i]._y);this._elements[i]._x=v[0],this._elements[i]._y=v[1]}},EDPath.prototype.isClockWise=function(){for(var path=new egPath,i=0;i<this._elements.length&&!(this._elements[i]._type==ePathElemType.MoveTo&&0<i);i++)switch(this._elements[i]._type){case ePathElemType.MoveTo:path.moveTo(this._elements[i].point);break;case ePathElemType.LineTo:path.lineTo(this._elements[i].point);break;case ePathElemType.CurveTo:i<this._elements.length-2&&(path.cubicCurveTo(this._elements[i].point,this._elements[i+1].point,this._elements[i+2].point),i+=2);break;case ePathElemType.Close:path.closePath(1)}return path.isClockwise()},EDPath.prototype.toXPath=function(fromIdx){for(var path,paths=[],i=fromIdx=void 0===fromIdx?0:fromIdx,l=this._elements.length;i<l;i++){var elem=this._elements[i];switch(elem._type){case ePathElemType.MoveTo:path=new egPath,paths.push(path),path.moveToXY(elem._x,elem._y);break;case ePathElemType.LineTo:path.lineToXY(elem._x,elem._y);break;case ePathElemType.CurveTo:i<this._elements.length-2&&(path.cubicCurveTo(elem.point,this._elements[i+1].point,this._elements[i+2].point),i+=2);break;case ePathElemType.Close:path.closePath(1)}}fromIdx=new XPath;return fromIdx.setChildren(paths),fromIdx},EDPath.prototype.toSvg=function(){var res="",floor=Math.floor;function perc(x){return floor(10*x)/10}for(var i=0;i<this._elements.length;i++)switch(this._elements[i]._type){case ePathElemType.MoveTo:res+="M"+perc(this._elements[i]._x)+","+perc(this._elements[i]._y);break;case ePathElemType.LineTo:res+="L"+perc(this._elements[i]._x)+","+perc(this._elements[i]._y);break;case ePathElemType.CurveTo:res+="C"+perc(this._elements[i]._x)+","+perc(this._elements[i]._y)+","+perc(this._elements[i+1]._x)+","+perc(this._elements[i+1]._y)+","+perc(this._elements[i+2]._x)+","+perc(this._elements[i+2]._y),i+=2;break;case ePathElemType.Close:res+="Z";break;case ePathElemType.CurveData:}return res},EDPath.prototype.fromXPath=function(gpath,from,to){var epath=this;void 0===to&&(to=gpath._children.length);for(var i=from=void 0===from?0:from;i<to;i++)!function(path){if(path&&1<path._segments.length){for(var seg2=seg1=path._segments[0],i=0,l=path._segments.length-1;i<l;i++){var seg1=seg2,seg2=path._segments[i+1],startPt=seg1._point,outPt=seg1._handleOut,endPt=seg2._point,inPt=seg2._handleIn;0===i&&epath.moveToPt(startPt),0!==outPt._x||0!==outPt._y||0!==inPt._x||0!==inPt._y?epath.curveToPt(outPt.add(startPt),inPt.add(endPt),endPt):epath.lineToPt(endPt)}path.isClosed()&&(seg1=seg2,seg2=path._segments[0],startPt=seg1._point,outPt=seg1._handleOut,endPt=seg2._point,inPt=seg2._handleIn,0!==outPt._x||0!==outPt._y||0!==inPt._x||0!==inPt._y?epath.curveToPt(outPt.add(startPt),inPt.add(endPt),endPt):epath.lineToPt(endPt),epath.closeSubpath())}}(gpath._children[i])},EDPath.prototype.getBound=function(style){return this.toXPath().getBounds(new egBoundOpt(!!style,!0),style)},EDPath.prototype.hit=function(pt,opt,style){return this.toXPath().hitTest(pt,opt,style)},EDPath.prototype.unite=function(path){var xpath1=this.toXPath(),path=path?path.toXPath():xpath1,xpath1=xpath1.unite(path);xpath1&&(this.reset(),this.fromXPath(xpath1))},EDPath.prototype.intersect=function(path){var xpath1=this.toXPath(),path=path.toXPath(),xpath1=xpath1.intersect(path);xpath1&&(this.reset(),this.fromXPath(xpath1))},EDPath.prototype.intersects=function(path){var xpath1=this.toXPath(),path=path.toXPath(),xpath1=xpath1.intersect(path);return!!xpath1.getFirstChild()},EDPath.prototype.subtract=function(path){var xpath1=this.toXPath(),path=path.toXPath(),xpath1=xpath1.subtract(path);xpath1&&(this.reset(),this.fromXPath(xpath1))},EDPath.prototype.crossPoints=function(path){for(var xpath1=this.toXPath(),path=path.toXPath(),locs=xpath1.getCrossings(path),res=[],i=0;i<locs.length;i++)res.push(locs[i].getPoint().clone());return res},EDPath.prototype.smooth=function(tpe){void 0===tpe&&(tpe=4);var xpath1=this.toXPath();xpath1.smooth(tpe),this.reset(),this.fromXPath(xpath1)},EDPath.prototype.reverse=function(){for(var spos=0,epos=this._elements.length-1,cpos=1;cpos<this._elements.length;){for(;cpos<this._elements.length;cpos++)if(this._elements[cpos]._type==ePathElemType.MoveTo||this._elements[cpos]._type==ePathElemType.Close){epos=cpos-1;break}var sp=spos,ep=epos=cpos>=this._elements.length?cpos=this._elements.length-1:epos,pts=this._elements[spos].point;for(spos++;spos<epos;){var tpe=this._elements[spos]._type,tpe=(this._elements[spos]._type=this._elements[epos]._type,this._elements[epos]._type=tpe,this._elements[spos].point);this._elements[spos].point=this._elements[epos].point,this._elements[epos].point=tpe,spos++,epos--}for(var i=sp;i<ep;i++)this._elements[i].point=this._elements[i+1].point;this._elements[ep].point=pts,this._elements[cpos]._type==ePathElemType.Close&&cpos++,spos=cpos,cpos++}for(i=0;i<this._elements.length;i++)this._elements[i]._type==ePathElemType.CurveTo&&i<this._elements.length-2&&(this._elements[i]._type=ePathElemType.CurveTo,this._elements[i+1]._type=ePathElemType.CurveData,this._elements[i+2]._type=ePathElemType.CurveData,i+=2)},EDPath.prototype.getTangent=function(index,start){void 0===start&&(start=!0);var path,index=this.toXPath(index);return 0==index._children.length?0:(path=index._children[0],start=start?0:path.getLength(),index._children[0].getTangentAt(start).getAngle())},EDPath.prototype.dividePath=function(path,pt,keepFirst){void 0===keepFirst&&(keepFirst=!1);var xpath1=this.toXPath(),path=path.toXPath(),path=xpath1.getCrossings(path);return 0<path.length&&(path[0].getPoint(),path=xpath1._children[0].splitAt(path[0]),keepFirst?(xpath1.removeChild(path),this.reset(),this.fromXPath(xpath1)):((keepFirst=new XPath).addChild(path),xpath1.removeChild(path),this.reset(),this.fromXPath(keepFirst)),!0)},EDPath.prototype.wavePath=function(path,mode,step,height,satu){void 0===height&&(height=-1),void 0===satu&&(satu=1.2);var epath,xpath=this.toXPath(),off=0,h=-1==height?.5*step:height,lv=h*satu,ptlast=new egPoint,ptstart=new egPoint,ptc1=new egPoint,dir=-1;function addWall(last){var pt,pt2,loc=epath.getLocationAt(off);loc&&(pt2=(pt=loc.getPoint()).clone(),loc=loc.getTangent(),pt.x+=loc.y*h*dir,pt.y-=loc.x*h*dir,pt2.x-=loc.y*h*dir,pt2.y+=loc.x*h*dir,last?path.lineToPt(pt):(0==off?epath.isClosed()&&(path._elements.pop(),path.moveToPt(pt)):path.lineToPt(pt),path.lineToPt(pt2)))}for(var i=0;i<xpath._children.length;i++)if(!(epath=xpath._children[i]).isEmpty()){var pt1,pt3,loc,loc2,pt,tang,pt2,tlen,stepx=(tlen=epath.getLength())/step,num=Math.round(stepx);for(!epath.isClosed()||0!=mode&&3!=mode&&6!=mode||num%2!=0&&(num<stepx?num++:num--),stepx=tlen/num,off=0,dir=-1,ptstart=epath._segments[0].getPoint(),ptlast.setPt(ptstart),path.moveToPt(ptlast);0<num;)0==mode?(function(size){var pt,pt2,pt1;(size=epath.getLocationAt(off+size))&&(pt=size.getPoint(),size=size.getTangent(),pt.x+=size.y*h*dir,pt.y-=size.x*h*dir,pt2=pt.clone(),(pt1=pt.clone()).x-=size.x*lv,pt1.y-=size.y*lv,pt2.x+=size.x*lv,pt2.y+=size.y*lv,0==off&&epath.isClosed()?(path._elements.pop(),path.moveToPt(pt),ptstart.setPt(pt),ptc1.setPt(pt1)):path.curveToPt(ptlast,pt1,pt),ptlast.setPt(pt2))}(0<off?stepx:.5*stepx),dir*=-1,off+=0<off?stepx:.5*stepx):1==mode||2==mode?(loc=epath.getLocationAt(off+.5*stepx),loc2=epath.getLocationAt(off+stepx),loc&&loc2&&(pt=loc.getPoint(),tang=loc.getTangent(),2==mode?(pt.x-=tang.y*h,pt.y+=tang.x*h):(pt.x+=tang.y*h,pt.y-=tang.x*h),pt2=pt.clone(),(pt1=pt.clone()).x-=tang.x*lv,pt1.y-=tang.y*lv,pt2.x+=tang.x*lv,pt2.y+=tang.y*lv,pt3=loc2.getPoint(),path.curveToPt(ptlast,pt1,pt),path.curveToPt(pt2,pt3,pt3),ptlast=pt3),off+=stepx):3==mode?(function(size){var pt;(size=epath.getLocationAt(off+size))&&(pt=size.getPoint(),size=size.getTangent(),pt.x+=size.y*h*dir,pt.y-=size.x*h*dir,0==off&&epath.isClosed()?(ptstart.setPt(pt),path._elements.pop(),path.moveToPt(pt)):path.lineToPt(pt))}(0<off?stepx:.5*stepx),dir*=-1,off+=0<off?stepx:.5*stepx):4==mode||5==mode?(loc=epath.getLocationAt(off+.5*stepx),loc2=epath.getLocationAt(off+stepx),loc&&loc2&&(pt=loc.getPoint(),tang=loc.getTangent(),5==mode?(pt.x-=tang.y*h,pt.y+=tang.x*h):(pt.x+=tang.y*h,pt.y-=tang.x*h),pt2=loc2.getPoint(),path.lineToPt(pt),path.lineToPt(pt2)),off+=stepx):6==mode&&(addWall(!1),off+=stepx,dir*=-1),num--;0==mode?epath.isClosed()?path.curveToPt(ptlast,ptc1,ptstart):(tlen=epath._segments.last().getPoint(),path.curveToPt(ptlast,tlen,tlen)):3==mode?epath.isClosed()?path.lineToPt(ptstart):path.lineToPt(epath._segments.last().getPoint()):6!=mode||epath.isClosed()||(addWall(!0),path.lineToPt(epath._segments.last().getPoint())),epath.isClosed()&&path.closeSubpath()}},EDPath.prototype.thickPath=function(path,thickness,endThickness,precision){void 0===endThickness&&(endThickness=0),void 0===precision&&(precision=10);var epath=path.toXPath().getFirstChild();if(epath){var len=epath.getLength(),off=0,preci=0,uppt=new egPoint,dwpt=new egPoint,uppath=new EDPath,dwpath=new EDPath,curves=epath.getCurves();addPt(),uppath.moveToPt(uppt),dwpath.moveToPt(dwpt);for(var i=0;i<curves.length;i++){var curve=curves[i],preci=precision,clen=curve.getLength();if(curve.isStraight())off+=curve.getLength(),addPt(),uppath.lineToPt(uppt),dwpath.lineToPt(dwpt);else{for(var tmpup=new EDPath,tmpdw=new EDPath,tlen=(tmpup.moveToPt(uppt),tmpdw.moveToPt(dwpt),clen+off);clen/preci<4&&2<=preci;)preci*=.5;for(addPt();off<tlen-.1&&off<len-.1;)tlen<(off+=preci)&&(off=tlen),addPt(),tmpup.lineToPt(uppt),tmpdw.lineToPt(dwpt);tmpup.smooth(),uppath.addPath(tmpup,!0),tmpdw.smooth(),dwpath.addPath(tmpdw,!0)}}var rsPath=new EDPath,rePath=new EDPath;if(1<uppath._elements.length&&1<dwpath._elements.length){var lrx=.6*(rx=1.2*thickness),lry=.55*thickness,lpu=new egPoint,lpd=new egPoint,pt1=uppath._elements[0].point,pt2=uppath._elements[1].point,a=lrx/(lrx+(plen=Math.sqrt((pt1.x-pt2.x)*(pt1.x-pt2.x)+(pt1.y-pt2.y)*(pt1.y-pt2.y)))),pc=(lpu.x=(pt1.x-a*pt2.x)/(1-a),lpu.y=(pt1.y-a*pt2.y)/(1-a),pt1=dwpath._elements[0].point,pt2=dwpath._elements[1].point,plen=Math.sqrt((pt1.x-pt2.x)*(pt1.x-pt2.x)+(pt1.y-pt2.y)*(pt1.y-pt2.y)),lpd.x=(pt1.x-(a=lrx/(lrx+plen))*pt2.x)/(1-a),lpd.y=(pt1.y-a*pt2.y)/(1-a),path._elements[0].point);if(loc=epath.getLocationAt(0)){var ang=loc.getTangent().getAngle(),pts=[new egPoint(pc.x-rx,pc.y-lry),new egPoint(pc.x-rx,pc.y),new egPoint(pc.x-rx,pc.y+lry)];(ma=new egMatrix).translate(pc.x,pc.y),ma.rotate(ang),ma.translate(-pc.x,-pc.y);for(i=0;i<3;i++)pts[i]=ma.transformPoint(pts[i]);rsPath.moveToPt(dwpath._elements[0].point),rsPath.curveToPt(lpd,pts[0],pts[1]),rsPath.curveToPt(pts[2],lpu,uppath._elements[0].point)}}if(0<endThickness){var rx,loc,lrx=.6*(rx=1.2*endThickness),lry=.55*endThickness,pt1=uppath._elements.last().point,pt2=uppath._elements[uppath._elements.length-2].point,plen=Math.sqrt((pt1.x-pt2.x)*(pt1.x-pt2.x)+(pt1.y-pt2.y)*(pt1.y-pt2.y)),lpu=new egPoint,lpd=new egPoint,a=lrx/(lrx+plen),pc=(lpu.x=(pt1.x-a*pt2.x)/(1-a),lpu.y=(pt1.y-a*pt2.y)/(1-a),pt1=dwpath._elements.last().point,pt2=dwpath._elements[dwpath._elements.length-2].point,plen=Math.sqrt((pt1.x-pt2.x)*(pt1.x-pt2.x)+(pt1.y-pt2.y)*(pt1.y-pt2.y)),lpd.x=(pt1.x-(a=lrx/(lrx+plen))*pt2.x)/(1-a),lpd.y=(pt1.y-a*pt2.y)/(1-a),path._elements.last().point);if(loc=epath.getLocationAt(len)){var ma,ang=loc.getTangent().getAngle(),pts=[new egPoint(pc.x+rx,pc.y+lry),new egPoint(pc.x+rx,pc.y),new egPoint(pc.x+rx,pc.y-lry)];(ma=new egMatrix).translate(pc.x,pc.y),ma.rotate(ang),ma.translate(-pc.x,-pc.y);for(i=0;i<3;i++)pts[i]=ma.transformPoint(pts[i]);rePath.moveToPt(uppath._elements.last().point),rePath.curveToPt(lpu,pts[0],pts[1]),rePath.curveToPt(pts[2],lpd,dwpath._elements.last().point)}}this.reset(),this.addPath(rsPath),this.addPath(uppath,!0),this.addPath(rePath,!0),dwpath.reverse(),this.addPath(dwpath,!0),this.closeSubpath()}function addPt(){var ept,offy=thickness-off*(thickness-endThickness)/len,loc=(len<off&&(off=len),epath.getLocationAt(off));loc&&(ept=loc.getTangent(),loc=loc.getPoint(),uppt.x=loc.x-ept._y*offy,uppt.y=loc.y+ept._x*offy,dwpt.x=loc.x+ept._y*offy,dwpt.y=loc.y-ept._x*offy)}},EDPath.prototype.manualPath=function(path,amplitude,precision){if(void 0===amplitude&&(amplitude=1.2),void 0===precision&&(precision=6),path&&0!=path.size()){for(var epath,tmpPath=new EDPath,xpath=path.toXPath(),off=0,i=0;i<xpath._children.length;i++)if(epath=xpath._children[i]){var off=0,epos=epath._segments.length-1,len=epath.getLength(),newPath=(new egPoint,new EDPath),startPt=epath._segments[0]._point,epos=epath.isClosed()?startPt:epath._segments[epos]._point;for(newPath.moveToPt(startPt),off+=precision;off<len;)newPath.lineToPt(function(){var ept,offy=amplitude*egMath.perlinNoise_1D(.05*off),pt=new egPoint,loc=epath.getLocationAt(off);return loc&&(ept=loc.getTangent(),loc=loc.getPoint(),pt.x=loc.x+ept._y*offy,pt.y=loc.y-ept._x*offy),pt}()),off+=precision;newPath.lineToPt(epos),epath.isClosed()&&newPath.closeSubpath(),tmpPath.addPath(newPath)}this.assign(tmpPath)}},EDPath.prototype.containsPt=function(pt,fill,stroke,tolerance){void 0===fill&&(fill=!0),void 0===stroke&&(stroke=!1),void 0===tolerance&&(tolerance=1);var xpath=this.toXPath(),fill=new egHitOpt(fill,stroke,!1,!0,tolerance);return null!=xpath.hitTest(pt,fill)},EDPath.prototype.curveReverse=function(){4==this._elements.length&&0==this._elements[0]._type&&2==this._elements[1]._type&&this._elements[0]._x>this._elements[3]._x&&(this._elements[0].swapXY(this._elements[3]),this._elements[1].swapXY(this._elements[2]))},EDPath.prototype.pointAtPercent=function(p){var path=this.toXPath().getFirstChild();return(path&&path.getLocationAt(path.getLength()*p)).getPoint()},EDPath.prototype.parallelPath=function(offset,precision){void 0===precision&&(precision=5);var path=new EDPath;if(0===offset)path.assign(this);else for(var prevAcuteAngle,intersectPt=new egPoint,Pt=new egPoint,prevPt=new egPoint,prevMoveTo=-1,i=0;i<this._elements.length;i++)if(this._elements[i]._type===ePathElemType.MoveTo)prevMoveTo=i;else if(this._elements[i]._type===ePathElemType.LineTo){if(this._elements[i-1]._type===ePathElemType.MoveTo){var pt1=this._elements[i-1].point,pt2=this._elements[i].point,el1=transLine(new egLine(pt1.x,pt1.y,pt2.x,pt2.y));path.moveTo(el1._px,el1._py),intersectPt=new egPoint(el1._px,el1._py),i!==this._elements.length-1&&this._elements[i+1]._type!==ePathElemType.MoveTo||path.lineTo(el1._px+el1._vx,el1._py+el1._vy)}else if(this._elements[i-1]._type===ePathElemType.LineTo){var pt1=this._elements[i-2].point,pt2=this._elements[i-1].point,pt3=this._elements[i].point,el1=new egLine(pt1.x,pt1.y,pt2.x,pt2.y),el2=new egLine(pt2.x,pt2.y,pt3.x,pt3.y),el3=transLine(el1),el4=transLine(el2);el1.isCollinear(el2)?0<new egPoint(el1._vx,el1._vy).dot(new egPoint(el2._vx,el2._vy))?(intersectPt.x=el4._px,intersectPt.y=el4._py):(ang1=Math.atan2(el1._vy,el1._vx),x1=Math.abs(offset)*Math.cos(ang1),y1=Math.abs(offset)*Math.sin(ang1),ang2=Math.atan2(el2._vy,el2._vx),x2=Math.abs(offset)*Math.cos(ang2),y2=Math.abs(offset)*Math.sin(ang2),path.lineTo(el3._px+el3._vx+x1,el3._py+el3._vy+y1),intersectPt.x=el4._px-x2,intersectPt.y=el4._py-y2):(intersectPt=el3.intersect(el4,!0),side=el1.getSide(new egPoint(pt3.x,pt3.y),!0),(0<offset&&side<0||offset<0&&0<side)&&new egPoint(intersectPt.x,intersectPt.y).getDistance(new egPoint(el3._px+el3._vx,el3._py+el3._vy))>Math.abs(offset)/Math.tan(Math.PI/8)&&(ang1=Math.atan2(el1._vy,el1._vx),x1=Math.abs(offset)*Math.cos(ang1),y1=Math.abs(offset)*Math.sin(ang1),ang2=Math.atan2(el2._vy,el2._vx),x2=Math.abs(offset)*Math.cos(ang2),y2=Math.abs(offset)*Math.sin(ang2),path.lineTo(el3._px+el3._vx+x1,el3._py+el3._vy+y1),intersectPt.x=el4._px-x2,intersectPt.y=el4._py-y2)),path.lineToPt(intersectPt),i!==this._elements.length-1&&this._elements[i+1]._type!==ePathElemType.MoveTo||path.lineTo(el4._px+el4._vx,el4._py+el4._vy)}else if(this._elements[i-1]._type===ePathElemType.CurveData){var pt1=this._elements[i-4].point,pt2=this._elements[i-3].point,pt3=this._elements[i-2].point,pt4=this._elements[i-1].point,pt5=this._elements[i].point,seg1=new egSegment(new egPoint(pt1.x,pt1.y),new egPoint(0,0),new egPoint(pt2.x-pt1.x,pt2.y-pt1.y)),seg2=new egSegment(new egPoint(pt4.x,pt4.y),new egPoint(pt3.x-pt4.x,pt3.y-pt4.y),new egPoint(0,0)),seg3=new egSegment(new egPoint(pt4.x,pt4.y),new egPoint(0,0),new egPoint(pt3.x-pt4.x,pt3.y-pt4.y)),seg4=new egSegment(new egPoint(pt1.x,pt1.y),new egPoint(pt2.x-pt1.x,pt2.y-pt1.y),new egPoint(0,0)),curve1=new egCurve(null,seg1,seg2),curve1_R=new egCurve(null,seg3,seg4),el1=new egLine(pt4.x,pt4.y,curve1.getTangentAtTime(1)._x,curve1.getTangentAtTime(1)._y,!0),el2=new egLine(pt4.x,pt4.y,pt5.x,pt5.y),el3=transLine(el1),el4=transLine(el2),isAcuteAngle1=0<(side=el1.getSide(new egPoint(pt5.x,pt5.y),!0))||0===side&&new egPoint(el1._vx,el1._vy).dot(new egPoint(el2._vx,el2._vy))<0&&0<curve1.getCurvatureAtTime(1),isAcuteAngle2=side<0||0===side&&new egPoint(el1._vx,el1._vy).dot(new egPoint(el2._vx,el2._vy))<0&&curve1.getCurvatureAtTime(1)<0;if(0<offset&&isAcuteAngle1||offset<0&&isAcuteAngle2){var len=curve1.getLength(),off_len=0,len_R=(prevAcuteAngle&&(off_len=curve1.getPartLength(0,egCurve.getNearestTime(curve1.getValues(),new egPoint(intersectPt.x,intersectPt.y))),off_len+=precision),curve1_R.getLength()),off_len_R=0;for(offset=-offset;off_len_R<=len_R;){if(addPt(curve1_R,off_len_R),(isSide=0<-offset&&0<el2.getSide(new egPoint(Pt.x,Pt.y),!0)||-offset<0&&el2.getSide(new egPoint(Pt.x,Pt.y),!0)<0)&&el2.getDistance(new egPoint(Pt.x,Pt.y))>=Math.abs(offset)){intersectPt.x=(Pt.x+prevPt.x)/2,intersectPt.y=(Pt.y+prevPt.y)/2,len-=off_len_R;break}prevPt=Pt,off_len_R+=precision}for(offset=-offset;off_len<len;)addPt(curve1,off_len),path.lineToPt(Pt),off_len+=precision}else{len=curve1.getLength(),off_len=0;for(prevAcuteAngle&&(off_len=curve1.getPartLength(0,egCurve.getNearestTime(curve1.getValues(),new egPoint(intersectPt.x,intersectPt.y))),off_len+=precision);off_len<len;)addPt(curve1,off_len),path.lineToPt(Pt),off_len+=precision;addPt(curve1,off_len=len),path.lineToPt(Pt),el1.isCollinear(el2)?0<new egPoint(el1._vx,el1._vy).dot(new egPoint(el2._vx,el2._vy))?(intersectPt.x=el4._px,intersectPt.y=el4._py):(ang1=Math.atan2(el1._vy,el1._vx),x1=Math.abs(offset)*Math.cos(ang1),y1=Math.abs(offset)*Math.sin(ang1),ang2=Math.atan2(el2._vy,el2._vx),x2=Math.abs(offset)*Math.cos(ang2),y2=Math.abs(offset)*Math.sin(ang2),path.lineTo(el3._px+x1,el3._py+y1),intersectPt.x=el4._px-x2,intersectPt.y=el4._py-y2):(intersectPt=el3.intersect(el4,!0),new egPoint(intersectPt.x,intersectPt.y).getDistance(new egPoint(el3._px,el3._py))>Math.abs(offset)/Math.tan(Math.PI/8)&&(ang1=Math.atan2(el1._vy,el1._vx),x1=Math.abs(offset)*Math.cos(ang1),y1=Math.abs(offset)*Math.sin(ang1),ang2=Math.atan2(el2._vy,el2._vx),x2=Math.abs(offset)*Math.cos(ang2),y2=Math.abs(offset)*Math.sin(ang2),path.lineTo(el3._px+x1,el3._py+y1),intersectPt.x=el4._px-x2,intersectPt.y=el4._py-y2))}path.lineToPt(intersectPt),i!=this._elements.length-1&&this._elements[i+1]._type!==ePathElemType.MoveTo||path.lineTo(el4._px+el4._vx,el4._py+el4._vy)}prevAcuteAngle=!1}else if(this._elements[i]._type===ePathElemType.CurveTo){if(this._elements[i-1]._type===ePathElemType.MoveTo){var pt1=this._elements[i-1].point,pt2=this._elements[i].point,pt3=this._elements[i+1].point,pt4=this._elements[i+2].point,seg1=new egSegment(new egPoint(pt1.x,pt1.y),new egPoint(0,0),new egPoint(pt2.x-pt1.x,pt2.y-pt1.y)),seg2=new egSegment(new egPoint(pt4.x,pt4.y),new egPoint(pt3.x-pt4.x,pt3.y-pt4.y),new egPoint(0,0)),curve=new egCurve(null,seg1,seg2),ept=curve.getTangentAtTime(0);if(intersectPt.x=pt1.x+ept._y*offset,intersectPt.y=pt1.y-ept._x*offset,path.moveToPt(intersectPt),prevAcuteAngle=!1,i==this._elements.length-3||this._elements[i+3]._type===ePathElemType.MoveTo){len=curve.getLength();for(addPt(curve,off_len=0),path.moveToPt(Pt),off_len+=precision;off_len<len;)addPt(curve,off_len),path.lineToPt(Pt),off_len+=precision;addPt(curve,off_len=len),path.lineToPt(Pt)}i+=2}else if(this._elements[i-1]._type===ePathElemType.CurveData){pt1=this._elements[i-2].point,pt2=this._elements[i-1].point,pt3=this._elements[i].point,pt4=this._elements[i+1].point,pt5=this._elements[i+2].point,seg1=new egSegment(new egPoint(pt2.x,pt2.y),new egPoint(0,0),new egPoint(pt3.x-pt2.x,pt3.y-pt2.y)),seg2=new egSegment(new egPoint(pt5.x,pt5.y),new egPoint(pt4.x-pt5.x,pt4.y-pt5.y),new egPoint(0,0)),curve1=new egCurve(null,seg1,seg2),el1=new egLine(pt1.x,pt1.y,pt2.x,pt2.y),el2=new egLine(pt2.x,pt2.y,curve1.getTangentAtTime(0)._x,curve1.getTangentAtTime(0)._y,!0),el3=transLine(el1),el4=transLine(el2),isAcuteAngle1=0<(side=el2.getSide(new egPoint(pt1.x,pt1.y),!0))||0===side&&new egPoint(el1._vx,el1._vy).dot(new egPoint(el2._vx,el2._vy))<0&&0<curve1.getCurvatureAtTime(0),isAcuteAngle2=side<0||0===side&&new egPoint(el1._vx,el1._vy).dot(new egPoint(el2._vx,el2._vy))<0&&curve1.getCurvatureAtTime(0)<0;if(0<offset&&isAcuteAngle1||offset<0&&isAcuteAngle2){for(len=curve1.getLength(),off_len=0;off_len<=len;){if(addPt(curve1,off_len),(isSide=0<offset&&0<el1.getSide(new egPoint(Pt.x,Pt.y),!0)||offset<0&&el1.getSide(new egPoint(Pt.x,Pt.y),!0)<0)&&el1.getDistance(new egPoint(Pt.x,Pt.y))>=Math.abs(offset)){intersectPt.x=(Pt.x+prevPt.x)/2,intersectPt.y=(Pt.y+prevPt.y)/2;break}prevPt=Pt,off_len+=precision}path.lineToPt(intersectPt),prevAcuteAngle=!0}else el1.isCollinear(el2)?0<new egPoint(el1._vx,el1._vy).dot(new egPoint(el2._vx,el2._vy))?(intersectPt.x=el4._px,intersectPt.y=el4._py):(ang1=Math.atan2(el1._vy,el1._vx),x1=Math.abs(offset)*Math.cos(ang1),y1=Math.abs(offset)*Math.sin(ang1),ang2=Math.atan2(el2._vy,el2._vx),x2=Math.abs(offset)*Math.cos(ang2),y2=Math.abs(offset)*Math.sin(ang2),path.lineTo(el3._px+el3._vx+x1,el3._py+el3._vy+y1),intersectPt.x=el4._px-x2,intersectPt.y=el4._py-y2):(intersectPt=el3.intersect(el4,!0),new egPoint(intersectPt.x,intersectPt.y).getDistance(new egPoint(el3._px+el3._vx,el3._py+el3._vy))>Math.abs(offset)/Math.tan(Math.PI/8)&&(ang1=Math.atan2(el1._vy,el1._vx),x1=Math.abs(offset)*Math.cos(ang1),y1=Math.abs(offset)*Math.sin(ang1),ang2=Math.atan2(el2._vy,el2._vx),x2=Math.abs(offset)*Math.cos(ang2),y2=Math.abs(offset)*Math.sin(ang2),path.lineTo(el3._px+el3._vx+x1,el3._py+el3._vy+y1),intersectPt.x=el4._px-x2,intersectPt.y=el4._py-y2)),path.lineToPt(intersectPt),prevAcuteAngle=!1;if(i==this._elements.length-3||this._elements[i+3]._type===ePathElemType.MoveTo){len=curve1.getLength(),off_len=0;for(prevAcuteAngle&&(off_len=curve1.getPartLength(0,egCurve.getNearestTime(curve1.getValues(),new egPoint(intersectPt.x,intersectPt.y))),off_len+=precision);off_len<len;)addPt(curve1,off_len),path.lineToPt(Pt),off_len+=precision;addPt(curve1,off_len=len),path.lineToPt(Pt)}i+=2}else if(this._elements[i-1]._type===ePathElemType.CurveTo){var pt1=this._elements[i-4].point,pt2=this._elements[i-3].point,pt3=this._elements[i-2].point,pt4=this._elements[i-1].point,pt5=this._elements[i].point,pt6=this._elements[i+1].point,pt7=this._elements[i+2].point,seg1=new egSegment(new egPoint(pt1.x,pt1.y),new egPoint(0,0),new egPoint(pt2.x-pt1.x,pt2.y-pt1.y)),seg2=new egSegment(new egPoint(pt4.x,pt4.y),new egPoint(pt3.x-pt4.x,pt3.y-pt4.y),new egPoint(0,0)),seg3=new egSegment(new egPoint(pt4.x,pt4.y),new egPoint(0,0),new egPoint(pt5.x-pt4.x,pt5.y-pt4.y)),seg4=new egSegment(new egPoint(pt7.x,pt7.y),new egPoint(pt6.x-pt7.x,pt6.y-pt7.y),new egPoint(0,0)),curve1=new egCurve(null,seg1,seg2),curve2=new egCurve(null,seg3,seg4),el1=new egLine(pt4.x,pt4.y,curve1.getTangentAtTime(1)._x,curve1.getTangentAtTime(1)._y,!0),el2=new egLine(pt4.x,pt4.y,curve2.getTangentAtTime(0)._x,curve2.getTangentAtTime(0)._y,!0),el3=transLine(el1),el4=transLine(el2),isAcuteAngle1=0<(side=el1.getSide(new egPoint(pt5.x,pt5.y),!0))||0===side&&new egPoint(el1._vx,el1._vy).dot(new egPoint(el2._vx,el2._vy))<0&&0<curve1.getCurvatureAtTime(0),isAcuteAngle2=side<0||0===side&&new egPoint(el1._vx,el1._vy).dot(new egPoint(el2._vx,el2._vy))<0&&curve1.getCurvatureAtTime(0)<0;if(0<offset&&isAcuteAngle1||offset<0&&isAcuteAngle2){for(var len=curve1.getLength(),off_len=0,len2=(prevAcuteAngle&&(off_len=curve1.getPartLength(0,egCurve.getNearestTime(curve1.getValues(),new egPoint(intersectPt.x,intersectPt.y))),off_len+=precision),curve2.getLength()),off_len2=0;off_len2<=len2;){addPt(curve2,off_len2);var isSide=0<offset&&0<el1.getSide(new egPoint(Pt.x,Pt.y),!0)||offset<0&&el1.getSide(new egPoint(Pt.x,Pt.y),!0)<0,loc=curve1.getNearestLocation(new egPoint(Pt.x,Pt.y));if(isSide&&loc._distance>=Math.abs(offset)){intersectPt.x=(Pt.x+prevPt.x)/2,intersectPt.y=(Pt.y+prevPt.y)/2,len=curve1.getPartLength(0,loc.getTime());break}prevPt=Pt,off_len2+=precision}for(;off_len<len;)addPt(curve1,off_len),path.lineToPt(Pt),off_len+=precision;path.lineToPt(intersectPt),prevAcuteAngle=!0}else{len=curve1.getLength(),off_len=0;for(prevAcuteAngle&&(off_len=curve1.getPartLength(0,egCurve.getNearestTime(curve1.getValues(),new egPoint(intersectPt.x,intersectPt.y))),off_len+=precision);off_len<len;)addPt(curve1,off_len),path.lineToPt(Pt),off_len+=precision;addPt(curve1,off_len=len),path.lineToPt(Pt),el1.isCollinear(el2)?0<new egPoint(el1._vx,el1._vy).dot(new egPoint(el2._vx,el2._vy))?(intersectPt.x=el4._px,intersectPt.y=el4._py):(ang1=Math.atan2(el1._vy,el1._vx),x1=Math.abs(offset)*Math.cos(ang1),y1=Math.abs(offset)*Math.sin(ang1),ang2=Math.atan2(el2._vy,el2._vx),x2=Math.abs(offset)*Math.cos(ang2),y2=Math.abs(offset)*Math.sin(ang2),path.lineTo(el3._px+x1,el3._py+y1),intersectPt.x=el4._px-x2,intersectPt.y=el4._py-y2):(intersectPt=el3.intersect(el4,!0),new egPoint(intersectPt.x,intersectPt.y).getDistance(new egPoint(el3._px,el3._py))>Math.abs(offset)/Math.tan(Math.PI/8)&&(ang1=Math.atan2(el1._vy,el1._vx),x1=Math.abs(offset)*Math.cos(ang1),y1=Math.abs(offset)*Math.sin(ang1),ang2=Math.atan2(el2._vy,el2._vx),x2=Math.abs(offset)*Math.cos(ang2),y2=Math.abs(offset)*Math.sin(ang2),path.lineTo(el3._px+x1,el3._py+y1),intersectPt.x=el4._px-x2,intersectPt.y=el4._py-y2)),path.lineToPt(intersectPt),prevAcuteAngle=!1}if(i==this._elements.length-3||this._elements[i+3]._type===ePathElemType.MoveTo){len=curve2.getLength(),off_len=0;for(prevAcuteAngle&&(off_len=curve2.getPartLength(0,egCurve.getNearestTime(curve2.getValues(),new egPoint(intersectPt.x,intersectPt.y))),off_len+=precision);off_len<len;)addPt(curve2,off_len),path.lineToPt(Pt),off_len+=precision;addPt(curve2,off_len=len),path.lineToPt(Pt)}i+=2}}else if(this._elements[i]._type===ePathElemType.Close)if(this._elements[prevMoveTo+1]._type===ePathElemType.LineTo&&this._elements[i-1]._type==ePathElemType.LineTo){var pt1=this._elements[i-2].point,pt2=this._elements[i-1].point,pt3=this._elements[prevMoveTo+1].point,el1=new egLine(pt1.x,pt1.y,pt2.x,pt2.y),el2=new egLine(pt2.x,pt2.y,pt3.x,pt3.y),el3=transLine(el1),el4=transLine(el2),closedSeg=(el1.isCollinear(el2)?(intersectPt.x=el4._px,intersectPt.y=el4._py):(intersectPt=el3.intersect(el4,!0),side=el1.getSide(new egPoint(pt3.x,pt3.y),!0),(0<offset&&side<0||offset<0&&0<side)&&new egPoint(intersectPt.x,intersectPt.y).getDistance(new egPoint(el3._px+el3._vx,el3._py+el3._vy))>Math.abs(offset)/Math.tan(Math.PI/8)&&(ang1=Math.atan2(el1._vy,el1._vx),x1=Math.abs(offset)*Math.cos(ang1),y1=Math.abs(offset)*Math.sin(ang1),ang2=Math.atan2(el2._vy,el2._vx),x2=Math.abs(offset)*Math.cos(ang2),y2=Math.abs(offset)*Math.sin(ang2),path.lineTo(el3._px+el3._vx+x1,el3._py+el3._vy+y1),intersectPt.x=el4._px-x2,intersectPt.y=el4._py-y2)),path.lineToPt(intersectPt),new EDPathElement(intersectPt.x,intersectPt.y,ePathElemType.Close));path._elements.push(closedSeg),path._elements[prevMoveTo].point=intersectPt}else if(this._elements[prevMoveTo+1]._type===ePathElemType.LineTo&&this._elements[i-1]._type===ePathElemType.CurveData){pt1=this._elements[i-4].point,pt2=this._elements[i-3].point,pt3=this._elements[i-2].point,pt4=this._elements[i-1].point,pt5=this._elements[prevMoveTo+1].point,seg1=new egSegment(new egPoint(pt1.x,pt1.y),new egPoint(0,0),new egPoint(pt2.x-pt1.x,pt2.y-pt1.y)),seg2=new egSegment(new egPoint(pt4.x,pt4.y),new egPoint(pt3.x-pt4.x,pt3.y-pt4.y),new egPoint(0,0)),seg3=new egSegment(new egPoint(pt4.x,pt4.y),new egPoint(0,0),new egPoint(pt3.x-pt4.x,pt3.y-pt4.y)),seg4=new egSegment(new egPoint(pt1.x,pt1.y),new egPoint(pt2.x-pt1.x,pt2.y-pt1.y),new egPoint(0,0)),curve1=new egCurve(null,seg1,seg2),curve1_R=new egCurve(null,seg3,seg4),el1=new egLine(pt4.x,pt4.y,curve1.getTangentAtTime(1)._x,curve1.getTangentAtTime(1)._y,!0),el2=new egLine(pt4.x,pt4.y,pt5.x,pt5.y),el3=transLine(el1),el4=transLine(el2),isAcuteAngle1=0<(side=el1.getSide(new egPoint(pt5.x,pt5.y),!0))||0===side&&new egPoint(el1._vx,el1._vy).dot(new egPoint(el2._vx,el2._vy))<0&&0<curve1.getCurvatureAtTime(1),isAcuteAngle2=side<0||0===side&&new egPoint(el1._vx,el1._vy).dot(new egPoint(el2._vx,el2._vy))<0&&curve1.getCurvatureAtTime(1)<0;if(0<offset&&isAcuteAngle1||offset<0&&isAcuteAngle2){len=curve1.getLength(),off_len=0,len_R=(prevAcuteAngle&&(off_len=curve1.getPartLength(0,egCurve.getNearestTime(curve1.getValues(),new egPoint(intersectPt.x,intersectPt.y))),off_len+=precision),curve1_R.getLength()),off_len_R=0;for(offset=-offset;off_len_R<=len_R;){if(addPt(curve1_R,off_len_R),(isSide=0<-offset&&0<el2.getSide(new egPoint(Pt.x,Pt.y),!0)||-offset<0&&el2.getSide(new egPoint(Pt.x,Pt.y),!0)<0)&&el2.getDistance(new egPoint(Pt.x,Pt.y))>=Math.abs(offset)){intersectPt.x=(Pt.x+prevPt.x)/2,intersectPt.y=(Pt.y+prevPt.y)/2,len-=off_len_R;break}prevPt=Pt,off_len_R+=precision}for(offset=-offset;off_len<len;)addPt(curve1,off_len),path.lineToPt(Pt),off_len+=precision}else{len=curve1.getLength(),off_len=0;for(prevAcuteAngle&&(off_len=curve1.getPartLength(0,egCurve.getNearestTime(curve1.getValues(),new egPoint(intersectPt.x,intersectPt.y))),off_len+=precision);off_len<len;)addPt(curve1,off_len),path.lineToPt(Pt),off_len+=precision;addPt(curve1,off_len=len),path.lineToPt(Pt),el1.isCollinear(el2)?0<new egPoint(el1._vx,el1._vy).dot(new egPoint(el2._vx,el2._vy))?(intersectPt.x=el4._px,intersectPt.y=el4._py):(ang1=Math.atan2(el1._vy,el1._vx),x1=Math.abs(offset)*Math.cos(ang1),y1=Math.abs(offset)*Math.sin(ang1),ang2=Math.atan2(el2._vy,el2._vx),x2=Math.abs(offset)*Math.cos(ang2),y2=Math.abs(offset)*Math.sin(ang2),path.lineTo(el3._px+x1,el3._py+y1),intersectPt.x=el4._px-x2,intersectPt.y=el4._py-y2):(intersectPt=el3.intersect(el4,!0),new egPoint(intersectPt.x,intersectPt.y).getDistance(new egPoint(el3._px,el3._py))>Math.abs(offset)/Math.tan(Math.PI/8)&&(ang1=Math.atan2(el1._vy,el1._vx),x1=Math.abs(offset)*Math.cos(ang1),y1=Math.abs(offset)*Math.sin(ang1),ang2=Math.atan2(el2._vy,el2._vx),x2=Math.abs(offset)*Math.cos(ang2),y2=Math.abs(offset)*Math.sin(ang2),path.lineTo(el3._px+x1,el3._py+y1),intersectPt.x=el4._px-x2,intersectPt.y=el4._py-y2))}path.lineToPt(intersectPt);closedSeg=new EDPathElement(intersectPt.x,intersectPt.y,ePathElemType.Close);path._elements.push(closedSeg),path._elements[prevMoveTo].point=intersectPt}else if(this._elements[prevMoveTo+1]._type===ePathElemType.CurveTo&&this._elements[i-1]._type===ePathElemType.LineTo){pt1=this._elements[i-2].point,pt2=this._elements[i-1].point,pt3=this._elements[prevMoveTo+1].point,pt4=this._elements[prevMoveTo+2].point,pt5=this._elements[prevMoveTo+3].point,seg1=new egSegment(new egPoint(pt2.x,pt2.y),new egPoint(0,0),new egPoint(pt3.x-pt2.x,pt3.y-pt2.y)),seg2=new egSegment(new egPoint(pt5.x,pt5.y),new egPoint(pt4.x-pt5.x,pt4.y-pt5.y),new egPoint(0,0)),curve1=new egCurve(null,seg1,seg2),el1=new egLine(pt1.x,pt1.y,pt2.x,pt2.y),el2=new egLine(pt2.x,pt2.y,curve1.getTangentAtTime(0)._x,curve1.getTangentAtTime(0)._y,!0),el3=transLine(el1),el4=transLine(el2),isAcuteAngle1=0<(side=el2.getSide(new egPoint(pt1.x,pt1.y),!0))||0===side&&new egPoint(el1._vx,el1._vy).dot(new egPoint(el2._vx,el2._vy))<0&&0<curve1.getCurvatureAtTime(0),isAcuteAngle2=side<0||0===side&&new egPoint(el1._vx,el1._vy).dot(new egPoint(el2._vx,el2._vy))<0&&curve1.getCurvatureAtTime(0)<0;if(0<offset&&isAcuteAngle1||offset<0&&isAcuteAngle2){for(len=curve1.getLength(),off_len=0;off_len<=len;){if(addPt(curve1,off_len),(isSide=0<offset&&0<el1.getSide(new egPoint(Pt.x,Pt.y),!0)||offset<0&&el1.getSide(new egPoint(Pt.x,Pt.y),!0)<0)&&el1.getDistance(new egPoint(Pt.x,Pt.y))>=Math.abs(offset)){intersectPt.x=(Pt.x+prevPt.x)/2,intersectPt.y=(Pt.y+prevPt.y)/2;break}path._elements.pop(),prevPt=Pt,off_len+=precision}path.lineToPt(intersectPt);var closedSeg=new EDPathElement(intersectPt.x,intersectPt.y,ePathElemType.Close),startSeg=(path._elements.push(closedSeg),new EDPathElement(intersectPt.x,intersectPt.y,ePathElemType.MoveTo));path._elements.unshift(startSeg)}else{closedSeg=(el1.isCollinear(el2)?0<new egPoint(el1._vx,el1._vy).dot(new egPoint(el2._vx,el2._vy))?(intersectPt.x=el4._px,intersectPt.y=el4._py):(ang1=Math.atan2(el1._vy,el1._vx),x1=Math.abs(offset)*Math.cos(ang1),y1=Math.abs(offset)*Math.sin(ang1),ang2=Math.atan2(el2._vy,el2._vx),x2=Math.abs(offset)*Math.cos(ang2),y2=Math.abs(offset)*Math.sin(ang2),path.lineTo(el3._px+el3._vx+x1,el3._py+el3._vy+y1),intersectPt.x=el4._px-x2,intersectPt.y=el4._py-y2):(intersectPt=el3.intersect(el4,!0),new egPoint(intersectPt.x,intersectPt.y).getDistance(new egPoint(el3._px+el3._vx,el3._py+el3._vy))>Math.abs(offset)/Math.tan(Math.PI/8)&&(ang1=Math.atan2(el1._vy,el1._vx),x1=Math.abs(offset)*Math.cos(ang1),y1=Math.abs(offset)*Math.sin(ang1),ang2=Math.atan2(el2._vy,el2._vx),x2=Math.abs(offset)*Math.cos(ang2),y2=Math.abs(offset)*Math.sin(ang2),path.lineTo(el3._px+el3._vx+x1,el3._py+el3._vy+y1),intersectPt.x=el4._px-x2,intersectPt.y=el4._py-y2)),path.lineToPt(intersectPt),path.lineToPt(new egPoint(el4._px,el4._py)),new EDPathElement(el4._px,el4._py,ePathElemType.Close));path._elements.push(closedSeg)}}else if(this._elements[prevMoveTo+1]._type===ePathElemType.CurveTo&&this._elements[i-1]._type===ePathElemType.CurveData){var side,pt1=this._elements[i-4].point,pt2=this._elements[i-3].point,pt3=this._elements[i-2].point,pt4=this._elements[i-1].point,pt5=this._elements[prevMoveTo+1].point,pt6=this._elements[prevMoveTo+2].point,pt7=this._elements[prevMoveTo+3].point,seg1=new egSegment(new egPoint(pt1.x,pt1.y),new egPoint(0,0),new egPoint(pt2.x-pt1.x,pt2.y-pt1.y)),seg2=new egSegment(new egPoint(pt4.x,pt4.y),new egPoint(pt3.x-pt4.x,pt3.y-pt4.y),new egPoint(0,0)),seg3=new egSegment(new egPoint(pt4.x,pt4.y),new egPoint(0,0),new egPoint(pt5.x-pt4.x,pt5.y-pt4.y)),seg4=new egSegment(new egPoint(pt7.x,pt7.y),new egPoint(pt6.x-pt7.x,pt6.y-pt7.y),new egPoint(0,0)),curve1=new egCurve(null,seg1,seg2),curve2=new egCurve(null,seg3,seg4),el1=new egLine(pt4.x,pt4.y,curve1.getTangentAtTime(1)._x,curve1.getTangentAtTime(1)._y,!0),el2=new egLine(pt4.x,pt4.y,curve2.getTangentAtTime(0)._x,curve2.getTangentAtTime(0)._y,!0),el3=transLine(el1),el4=transLine(el2),isAcuteAngle1=0<(side=el1.getSide(new egPoint(pt5.x,pt5.y),!0))||0===side&&new egPoint(el1._vx,el1._vy).dot(new egPoint(el2._vx,el2._vy))<0&&0<curve1.getCurvatureAtTime(0),isAcuteAngle2=side<0||0===side&&new egPoint(el1._vx,el1._vy).dot(new egPoint(el2._vx,el2._vy))<0&&curve1.getCurvatureAtTime(0)<0;if(0<offset&&isAcuteAngle1||offset<0&&isAcuteAngle2){for(len=curve1.getLength(),off_len=0,len2=(prevAcuteAngle&&(off_len=curve1.getPartLength(0,egCurve.getNearestTime(curve1.getValues(),new egPoint(intersectPt.x,intersectPt.y))),off_len+=precision),curve2.getLength()),off_len2=0;off_len2<=len2;){addPt(curve2,off_len2);isSide=0<offset&&0<el1.getSide(new egPoint(Pt.x,Pt.y),!0)||offset<0&&el1.getSide(new egPoint(Pt.x,Pt.y),!0)<0,loc=curve1.getNearestLocation(new egPoint(Pt.x,Pt.y));if(isSide&&loc._distance>=Math.abs(offset)){intersectPt.x=(Pt.x+prevPt.x)/2,intersectPt.y=(Pt.y+prevPt.y)/2,len=curve1.getPartLength(0,loc.getTime());break}path._elements.pop(),prevPt=Pt,off_len2+=precision}for(;off_len<len;)addPt(curve1,off_len),path.lineToPt(Pt),off_len+=precision;path.lineToPt(intersectPt);closedSeg=new EDPathElement(intersectPt.x,intersectPt.y,ePathElemType.Close),startSeg=(path._elements.push(closedSeg),new EDPathElement(intersectPt.x,intersectPt.y,ePathElemType.MoveTo));path._elements.unshift(startSeg)}else{var ang1,x1,y1,ang2,x2,y2,len=curve1.getLength(),off_len=0;for(prevAcuteAngle&&(off_len=curve1.getPartLength(0,egCurve.getNearestTime(curve1.getValues(),new egPoint(intersectPt.x,intersectPt.y))),off_len+=precision);off_len<len;)addPt(curve1,off_len),path.lineToPt(Pt),off_len+=precision;addPt(curve1,off_len=len),path.lineToPt(Pt),el1.isCollinear(el2)?0<new egPoint(el1._vx,el1._vy).dot(new egPoint(el2._vx,el2._vy))?(intersectPt.x=el4._px,intersectPt.y=el4._py):(ang1=Math.atan2(el1._vy,el1._vx),x1=Math.abs(offset)*Math.cos(ang1),y1=Math.abs(offset)*Math.sin(ang1),ang2=Math.atan2(el2._vy,el2._vx),x2=Math.abs(offset)*Math.cos(ang2),y2=Math.abs(offset)*Math.sin(ang2),path.lineTo(el3._px+x1,el3._py+y1),intersectPt.x=el4._px-x2,intersectPt.y=el4._py-y2):(intersectPt=el3.intersect(el4,!0),new egPoint(intersectPt.x,intersectPt.y).getDistance(new egPoint(el3._px,el3._py))>Math.abs(offset)/Math.tan(Math.PI/8)&&(ang1=Math.atan2(el1._vy,el1._vx),x1=Math.abs(offset)*Math.cos(ang1),y1=Math.abs(offset)*Math.sin(ang1),ang2=Math.atan2(el2._vy,el2._vx),x2=Math.abs(offset)*Math.cos(ang2),y2=Math.abs(offset)*Math.sin(ang2),path.lineTo(el3._px+x1,el3._py+y1),intersectPt.x=el4._px-x2,intersectPt.y=el4._py-y2)),path.lineToPt(intersectPt),path.lineToPt(new egPoint(el4._px,el4._py));closedSeg=new EDPathElement(el4._px,el4._py,ePathElemType.Close);path._elements.push(closedSeg)}}return path;function transLine(el){var tanX=el._vx,tanY=el._vy,len=Math.sqrt(el._vx*el._vx+el._vy*el._vy),len=(len&&(tanX/=len,tanY/=len),el._px+tanY*offset),y1=el._py-tanX*offset,tanY=el._px+el._vx+tanY*offset,el=el._py+el._vy-tanX*offset;return new egLine(len,y1,tanY,el)}function addPt(curve,off_len){var curve=curve.getLocationAt(off_len);curve&&(off_len=curve.getTangent(),curve=curve.getPoint(),Pt.x=curve.x+off_len.y*offset,Pt.y=curve.y-off_len.x*offset)}},EDPath}(),EDMMLEntityTable=(!function(EDTextType){EDTextType[EDTextType.MathML=0]="MathML",EDTextType[EDTextType.Latex=1]="Latex"}(EDTextType=EDTextType||{}),!function(EDMathMlNodeType){EDMathMlNodeType[EDMathMlNodeType.NoNode=0]="NoNode",EDMathMlNodeType[EDMathMlNodeType.MiNode=1]="MiNode",EDMathMlNodeType[EDMathMlNodeType.MnNode=2]="MnNode",EDMathMlNodeType[EDMathMlNodeType.MfracNode=3]="MfracNode",EDMathMlNodeType[EDMathMlNodeType.MrowNode=4]="MrowNode",EDMathMlNodeType[EDMathMlNodeType.MsqrtNode=5]="MsqrtNode",EDMathMlNodeType[EDMathMlNodeType.MrootNode=6]="MrootNode",EDMathMlNodeType[EDMathMlNodeType.MsupNode=7]="MsupNode",EDMathMlNodeType[EDMathMlNodeType.MsubNode=8]="MsubNode",EDMathMlNodeType[EDMathMlNodeType.MsubsupNode=9]="MsubsupNode",EDMathMlNodeType[EDMathMlNodeType.MoNode=10]="MoNode",EDMathMlNodeType[EDMathMlNodeType.MstyleNode=11]="MstyleNode",EDMathMlNodeType[EDMathMlNodeType.MencloseNode=12]="MencloseNode",EDMathMlNodeType[EDMathMlNodeType.TextNode=13]="TextNode",EDMathMlNodeType[EDMathMlNodeType.MphantomNode=14]="MphantomNode",EDMathMlNodeType[EDMathMlNodeType.MfencedNode=15]="MfencedNode",EDMathMlNodeType[EDMathMlNodeType.MtableNode=16]="MtableNode",EDMathMlNodeType[EDMathMlNodeType.MtrNode=17]="MtrNode",EDMathMlNodeType[EDMathMlNodeType.MtdNode=18]="MtdNode",EDMathMlNodeType[EDMathMlNodeType.MoverNode=19]="MoverNode",EDMathMlNodeType[EDMathMlNodeType.MunderNode=20]="MunderNode",EDMathMlNodeType[EDMathMlNodeType.MunderoverNode=21]="MunderoverNode",EDMathMlNodeType[EDMathMlNodeType.MprescriptsNode=22]="MprescriptsNode",EDMathMlNodeType[EDMathMlNodeType.NoneNode=23]="NoneNode",EDMathMlNodeType[EDMathMlNodeType.MmultiscriptsNode=24]="MmultiscriptsNode",EDMathMlNodeType[EDMathMlNodeType.MerrorNode=25]="MerrorNode",EDMathMlNodeType[EDMathMlNodeType.MtextNode=26]="MtextNode",EDMathMlNodeType[EDMathMlNodeType.MpaddedNode=27]="MpaddedNode",EDMathMlNodeType[EDMathMlNodeType.MspaceNode=28]="MspaceNode",EDMathMlNodeType[EDMathMlNodeType.MalignMarkNode=29]="MalignMarkNode",EDMathMlNodeType[EDMathMlNodeType.UnknownNode=30]="UnknownNode"}(EDMathMlNodeType=EDMathMlNodeType||{}),!function(EDMmlFormulaIndex){EDMmlFormulaIndex[EDMmlFormulaIndex.le=1e5]="le",EDMmlFormulaIndex[EDMmlFormulaIndex.ge=100001]="ge",EDMmlFormulaIndex[EDMmlFormulaIndex.ll=100002]="ll",EDMmlFormulaIndex[EDMmlFormulaIndex.gg=100003]="gg",EDMmlFormulaIndex[EDMmlFormulaIndex.prec=100004]="prec",EDMmlFormulaIndex[EDMmlFormulaIndex.succ=100005]="succ",EDMmlFormulaIndex[EDMmlFormulaIndex.triangleleft=100006]="triangleleft",EDMmlFormulaIndex[EDMmlFormulaIndex.triangleright=100007]="triangleright",EDMmlFormulaIndex[EDMmlFormulaIndex.thicksim=100008]="thicksim",EDMmlFormulaIndex[EDMmlFormulaIndex.asymp=100009]="asymp",EDMmlFormulaIndex[EDMmlFormulaIndex.simeq=100010]="simeq",EDMmlFormulaIndex[EDMmlFormulaIndex.cong=100011]="cong",EDMmlFormulaIndex[EDMmlFormulaIndex.ne=100012]="ne",EDMmlFormulaIndex[EDMmlFormulaIndex.equiv=100013]="equiv",EDMmlFormulaIndex[EDMmlFormulaIndex.triangleq=100014]="triangleq",EDMmlFormulaIndex[EDMmlFormulaIndex.hateq=100015]="hateq",EDMmlFormulaIndex[EDMmlFormulaIndex.doteq=100016]="doteq",EDMmlFormulaIndex[EDMmlFormulaIndex.prop=100017]="prop",EDMmlFormulaIndex[EDMmlFormulaIndex.Indentation=100018]="Indentation",EDMmlFormulaIndex[EDMmlFormulaIndex.Space_1=100019]="Space_1",EDMmlFormulaIndex[EDMmlFormulaIndex.Space_2=100020]="Space_2",EDMmlFormulaIndex[EDMmlFormulaIndex.Space_3=100021]="Space_3",EDMmlFormulaIndex[EDMmlFormulaIndex.Space_4=100022]="Space_4",EDMmlFormulaIndex[EDMmlFormulaIndex.Space_5=100023]="Space_5",EDMmlFormulaIndex[EDMmlFormulaIndex.hellip=100024]="hellip",EDMmlFormulaIndex[EDMmlFormulaIndex.mellip=100025]="mellip",EDMmlFormulaIndex[EDMmlFormulaIndex.vellip=100026]="vellip",EDMmlFormulaIndex[EDMmlFormulaIndex.urellip=100027]="urellip",EDMmlFormulaIndex[EDMmlFormulaIndex.rrellip=100028]="rrellip",EDMmlFormulaIndex[EDMmlFormulaIndex.plusmn=100029]="plusmn",EDMmlFormulaIndex[EDMmlFormulaIndex.minusPlus=100030]="minusPlus",EDMmlFormulaIndex[EDMmlFormulaIndex.times=100031]="times",EDMmlFormulaIndex[EDMmlFormulaIndex.lowast=100032]="lowast",EDMmlFormulaIndex[EDMmlFormulaIndex.div=100033]="div",EDMmlFormulaIndex[EDMmlFormulaIndex.oplus=100034]="oplus",EDMmlFormulaIndex[EDMmlFormulaIndex.otimes=100035]="otimes",EDMmlFormulaIndex[EDMmlFormulaIndex.odot=100036]="odot",EDMmlFormulaIndex[EDMmlFormulaIndex.sdot=100037]="sdot",EDMmlFormulaIndex[EDMmlFormulaIndex.centerdot=100038]="centerdot",EDMmlFormulaIndex[EDMmlFormulaIndex.bullet=100039]="bullet",EDMmlFormulaIndex[EDMmlFormulaIndex.scirc=100040]="scirc",EDMmlFormulaIndex[EDMmlFormulaIndex.langle=100041]="langle",EDMmlFormulaIndex[EDMmlFormulaIndex.rangle=100042]="rangle",EDMmlFormulaIndex[EDMmlFormulaIndex.lobrk=100043]="lobrk",EDMmlFormulaIndex[EDMmlFormulaIndex.robrk=100044]="robrk",EDMmlFormulaIndex[EDMmlFormulaIndex.LeftRightArr=100045]="LeftRightArr",EDMmlFormulaIndex[EDMmlFormulaIndex.RightArr=100046]="RightArr",EDMmlFormulaIndex[EDMmlFormulaIndex.LeftArr=100047]="LeftArr",EDMmlFormulaIndex[EDMmlFormulaIndex.UpDownArrow=100048]="UpDownArrow",EDMmlFormulaIndex[EDMmlFormulaIndex.UpArrow=100049]="UpArrow",EDMmlFormulaIndex[EDMmlFormulaIndex.DownArrow=100050]="DownArrow",EDMmlFormulaIndex[EDMmlFormulaIndex.DoubleLeftRightArr=100051]="DoubleLeftRightArr",EDMmlFormulaIndex[EDMmlFormulaIndex.DoubleRightArr=100052]="DoubleRightArr",EDMmlFormulaIndex[EDMmlFormulaIndex.DoubleLeftArr=100053]="DoubleLeftArr",EDMmlFormulaIndex[EDMmlFormulaIndex.DoubleUpDownArr=100054]="DoubleUpDownArr",EDMmlFormulaIndex[EDMmlFormulaIndex.DoubleUpArr=100055]="DoubleUpArr",EDMmlFormulaIndex[EDMmlFormulaIndex.DoubleDownArr=100056]="DoubleDownArr",EDMmlFormulaIndex[EDMmlFormulaIndex.LLeftURightArr=100057]="LLeftURightArr",EDMmlFormulaIndex[EDMmlFormulaIndex.UpperRightArr=100058]="UpperRightArr",EDMmlFormulaIndex[EDMmlFormulaIndex.LowerLeftArr=100059]="LowerLeftArr",EDMmlFormulaIndex[EDMmlFormulaIndex.ULeftLRightArr=100060]="ULeftLRightArr",EDMmlFormulaIndex[EDMmlFormulaIndex.LowerRightArr=100061]="LowerRightArr",EDMmlFormulaIndex[EDMmlFormulaIndex.UpperLeftArr=100062]="UpperLeftArr",EDMmlFormulaIndex[EDMmlFormulaIndex.RightArrLeftArr=100063]="RightArrLeftArr",EDMmlFormulaIndex[EDMmlFormulaIndex.Equilibrium=100064]="Equilibrium",EDMmlFormulaIndex[EDMmlFormulaIndex.RightTeeArr=100065]="RightTeeArr",EDMmlFormulaIndex[EDMmlFormulaIndex.enter=100066]="enter",EDMmlFormulaIndex[EDMmlFormulaIndex.there4=100067]="there4",EDMmlFormulaIndex[EDMmlFormulaIndex.becaus=100068]="becaus",EDMmlFormulaIndex[EDMmlFormulaIndex.backepsilon=100069]="backepsilon",EDMmlFormulaIndex[EDMmlFormulaIndex.exist=100070]="exist",EDMmlFormulaIndex[EDMmlFormulaIndex.forall=100071]="forall",EDMmlFormulaIndex[EDMmlFormulaIndex.Not=100072]="Not",EDMmlFormulaIndex[EDMmlFormulaIndex.And=100073]="And",EDMmlFormulaIndex[EDMmlFormulaIndex.Or=100074]="Or",EDMmlFormulaIndex[EDMmlFormulaIndex.isin=100075]="isin",EDMmlFormulaIndex[EDMmlFormulaIndex.notin=100076]="notin",EDMmlFormulaIndex[EDMmlFormulaIndex.cup=100077]="cup",EDMmlFormulaIndex[EDMmlFormulaIndex.cap=100078]="cap",EDMmlFormulaIndex[EDMmlFormulaIndex.sub=100079]="sub",EDMmlFormulaIndex[EDMmlFormulaIndex.sup=100080]="sup",EDMmlFormulaIndex[EDMmlFormulaIndex.sube=100081]="sube",EDMmlFormulaIndex[EDMmlFormulaIndex.supe=100082]="supe",EDMmlFormulaIndex[EDMmlFormulaIndex.nsub=100083]="nsub",EDMmlFormulaIndex[EDMmlFormulaIndex.empty=100084]="empty",EDMmlFormulaIndex[EDMmlFormulaIndex.part=100085]="part",EDMmlFormulaIndex[EDMmlFormulaIndex.wp=100086]="wp",EDMmlFormulaIndex[EDMmlFormulaIndex.Im=100087]="Im",EDMmlFormulaIndex[EDMmlFormulaIndex.Re=100088]="Re",EDMmlFormulaIndex[EDMmlFormulaIndex.aleph=100089]="aleph",EDMmlFormulaIndex[EDMmlFormulaIndex.Ropf=100090]="Ropf",EDMmlFormulaIndex[EDMmlFormulaIndex.Zopf=100091]="Zopf",EDMmlFormulaIndex[EDMmlFormulaIndex.Copf=100092]="Copf",EDMmlFormulaIndex[EDMmlFormulaIndex.Qopf=100093]="Qopf",EDMmlFormulaIndex[EDMmlFormulaIndex.Nopf=100094]="Nopf",EDMmlFormulaIndex[EDMmlFormulaIndex.infin=100095]="infin",EDMmlFormulaIndex[EDMmlFormulaIndex.hbar=100096]="hbar",EDMmlFormulaIndex[EDMmlFormulaIndex.hlambda=100097]="hlambda",EDMmlFormulaIndex[EDMmlFormulaIndex.ell=100098]="ell",EDMmlFormulaIndex[EDMmlFormulaIndex.dagger=100099]="dagger",EDMmlFormulaIndex[EDMmlFormulaIndex.Delta=100100]="Delta",EDMmlFormulaIndex[EDMmlFormulaIndex.nabla=100101]="nabla",EDMmlFormulaIndex[EDMmlFormulaIndex.Omega=100102]="Omega",EDMmlFormulaIndex[EDMmlFormulaIndex.mho=100103]="mho",EDMmlFormulaIndex[EDMmlFormulaIndex.diamond=100104]="diamond",EDMmlFormulaIndex[EDMmlFormulaIndex.prod=100105]="prod",EDMmlFormulaIndex[EDMmlFormulaIndex.coprod=100106]="coprod",EDMmlFormulaIndex[EDMmlFormulaIndex.circ=100107]="circ",EDMmlFormulaIndex[EDMmlFormulaIndex.ang=100108]="ang",EDMmlFormulaIndex[EDMmlFormulaIndex.measuredangle=100109]="measuredangle",EDMmlFormulaIndex[EDMmlFormulaIndex.sphericalangle=100110]="sphericalangle",EDMmlFormulaIndex[EDMmlFormulaIndex.perp=100111]="perp",EDMmlFormulaIndex[EDMmlFormulaIndex.parallel=100112]="parallel",EDMmlFormulaIndex[EDMmlFormulaIndex.bigtriangleup=100113]="bigtriangleup",EDMmlFormulaIndex[EDMmlFormulaIndex.square=100114]="square",EDMmlFormulaIndex[EDMmlFormulaIndex.rect=100115]="rect",EDMmlFormulaIndex[EDMmlFormulaIndex.quad=100116]="quad",EDMmlFormulaIndex[EDMmlFormulaIndex.bigcirc=100117]="bigcirc",EDMmlFormulaIndex[EDMmlFormulaIndex.alpha=100118]="alpha",EDMmlFormulaIndex[EDMmlFormulaIndex.beta=100119]="beta",EDMmlFormulaIndex[EDMmlFormulaIndex.chi=100120]="chi",EDMmlFormulaIndex[EDMmlFormulaIndex.delta=100121]="delta",EDMmlFormulaIndex[EDMmlFormulaIndex.epsilon=100122]="epsilon",EDMmlFormulaIndex[EDMmlFormulaIndex.lphi=100123]="lphi",EDMmlFormulaIndex[EDMmlFormulaIndex.phi=100124]="phi",EDMmlFormulaIndex[EDMmlFormulaIndex.gamma=100125]="gamma",EDMmlFormulaIndex[EDMmlFormulaIndex.eta=100126]="eta",EDMmlFormulaIndex[EDMmlFormulaIndex.iota=100127]="iota",EDMmlFormulaIndex[EDMmlFormulaIndex.kappa=100128]="kappa",EDMmlFormulaIndex[EDMmlFormulaIndex.lambda=100129]="lambda",EDMmlFormulaIndex[EDMmlFormulaIndex.mu=100130]="mu",EDMmlFormulaIndex[EDMmlFormulaIndex.nu=100131]="nu",EDMmlFormulaIndex[EDMmlFormulaIndex.omicron=100132]="omicron",EDMmlFormulaIndex[EDMmlFormulaIndex.pi=100133]="pi",EDMmlFormulaIndex[EDMmlFormulaIndex.piv=100134]="piv",EDMmlFormulaIndex[EDMmlFormulaIndex.theta=100135]="theta",EDMmlFormulaIndex[EDMmlFormulaIndex.thetasym=100136]="thetasym",EDMmlFormulaIndex[EDMmlFormulaIndex.rho=100137]="rho",EDMmlFormulaIndex[EDMmlFormulaIndex.sigma=100138]="sigma",EDMmlFormulaIndex[EDMmlFormulaIndex.sigmaf=100139]="sigmaf",EDMmlFormulaIndex[EDMmlFormulaIndex.tau=100140]="tau",EDMmlFormulaIndex[EDMmlFormulaIndex.upsilon=100141]="upsilon",EDMmlFormulaIndex[EDMmlFormulaIndex.omega=100142]="omega",EDMmlFormulaIndex[EDMmlFormulaIndex.xi=100143]="xi",EDMmlFormulaIndex[EDMmlFormulaIndex.psi=100144]="psi",EDMmlFormulaIndex[EDMmlFormulaIndex.zeta=100145]="zeta",EDMmlFormulaIndex[EDMmlFormulaIndex.Alpha=100146]="Alpha",EDMmlFormulaIndex[EDMmlFormulaIndex.Beta=100147]="Beta",EDMmlFormulaIndex[EDMmlFormulaIndex.Chi=100148]="Chi",EDMmlFormulaIndex[EDMmlFormulaIndex.Epsilon=100149]="Epsilon",EDMmlFormulaIndex[EDMmlFormulaIndex.Phi=100150]="Phi",EDMmlFormulaIndex[EDMmlFormulaIndex.Gamma=100151]="Gamma",EDMmlFormulaIndex[EDMmlFormulaIndex.Eta=100152]="Eta",EDMmlFormulaIndex[EDMmlFormulaIndex.Iota=100153]="Iota",EDMmlFormulaIndex[EDMmlFormulaIndex.Kappa=100154]="Kappa",EDMmlFormulaIndex[EDMmlFormulaIndex.Lambda=100155]="Lambda",EDMmlFormulaIndex[EDMmlFormulaIndex.Mu=100156]="Mu",EDMmlFormulaIndex[EDMmlFormulaIndex.Nu=100157]="Nu",EDMmlFormulaIndex[EDMmlFormulaIndex.Omicron=100158]="Omicron",EDMmlFormulaIndex[EDMmlFormulaIndex.Pi=100159]="Pi",EDMmlFormulaIndex[EDMmlFormulaIndex.Theta=100160]="Theta",EDMmlFormulaIndex[EDMmlFormulaIndex.Rho=100161]="Rho",EDMmlFormulaIndex[EDMmlFormulaIndex.Sigma=100162]="Sigma",EDMmlFormulaIndex[EDMmlFormulaIndex.Tau=100163]="Tau",EDMmlFormulaIndex[EDMmlFormulaIndex.upsih=100164]="upsih",EDMmlFormulaIndex[EDMmlFormulaIndex.Xi=100165]="Xi",EDMmlFormulaIndex[EDMmlFormulaIndex.Psi=100166]="Psi",EDMmlFormulaIndex[EDMmlFormulaIndex.Zeta=100167]="Zeta",EDMmlFormulaIndex[EDMmlFormulaIndex.Symbol_LRightArrSLeftArr=100168]="Symbol_LRightArrSLeftArr",EDMmlFormulaIndex[EDMmlFormulaIndex.Symbol_SRightArrLLeftArr=100169]="Symbol_SRightArrLLeftArr",EDMmlFormulaIndex[EDMmlFormulaIndex.Symbol_LRightVerSLeftVer=100170]="Symbol_LRightVerSLeftVer",EDMmlFormulaIndex[EDMmlFormulaIndex.Symbol_SRightVerLLeftVer=100171]="Symbol_SRightVerLLeftVer",EDMmlFormulaIndex[EDMmlFormulaIndex.sin=100172]="sin",EDMmlFormulaIndex[EDMmlFormulaIndex.cos=100173]="cos",EDMmlFormulaIndex[EDMmlFormulaIndex.tan=100174]="tan",EDMmlFormulaIndex[EDMmlFormulaIndex.sec=100175]="sec",EDMmlFormulaIndex[EDMmlFormulaIndex.csc=100176]="csc",EDMmlFormulaIndex[EDMmlFormulaIndex.cot=100177]="cot",EDMmlFormulaIndex[EDMmlFormulaIndex.arcsin=100178]="arcsin",EDMmlFormulaIndex[EDMmlFormulaIndex.arccos=100179]="arccos",EDMmlFormulaIndex[EDMmlFormulaIndex.arctan=100180]="arctan",EDMmlFormulaIndex[EDMmlFormulaIndex.arccot=100181]="arccot",EDMmlFormulaIndex[EDMmlFormulaIndex.d=100182]="d",EDMmlFormulaIndex[EDMmlFormulaIndex.lim=100183]="lim",EDMmlFormulaIndex[EDMmlFormulaIndex.log=100184]="log",EDMmlFormulaIndex[EDMmlFormulaIndex.lg=100185]="lg",EDMmlFormulaIndex[EDMmlFormulaIndex.ln=100186]="ln",EDMmlFormulaIndex[EDMmlFormulaIndex.exp=100187]="exp",EDMmlFormulaIndex[EDMmlFormulaIndex.ch=100188]="ch",EDMmlFormulaIndex[EDMmlFormulaIndex.sh=100189]="sh",EDMmlFormulaIndex[EDMmlFormulaIndex.max=100190]="max",EDMmlFormulaIndex[EDMmlFormulaIndex.min=100191]="min",EDMmlFormulaIndex[EDMmlFormulaIndex.ni=100192]="ni",EDMmlFormulaIndex[EDMmlFormulaIndex.sum=100193]="sum",EDMmlFormulaIndex[EDMmlFormulaIndex.minus=100194]="minus",EDMmlFormulaIndex[EDMmlFormulaIndex.radic=100195]="radic",EDMmlFormulaIndex[EDMmlFormulaIndex.lceil=100196]="lceil",EDMmlFormulaIndex[EDMmlFormulaIndex.rceil=100197]="rceil",EDMmlFormulaIndex[EDMmlFormulaIndex.lfloor=100198]="lfloor",EDMmlFormulaIndex[EDMmlFormulaIndex.rfloor=100199]="rfloor",EDMmlFormulaIndex[EDMmlFormulaIndex.LongLeftArr=100200]="LongLeftArr",EDMmlFormulaIndex[EDMmlFormulaIndex.LeftTeeArr=100201]="LeftTeeArr",EDMmlFormulaIndex[EDMmlFormulaIndex.DbLongLeftArr=100202]="DbLongLeftArr",EDMmlFormulaIndex[EDMmlFormulaIndex.LongRightArr=100203]="LongRightArr",EDMmlFormulaIndex[EDMmlFormulaIndex.DbLongRightArr=100204]="DbLongRightArr",EDMmlFormulaIndex[EDMmlFormulaIndex.LongLeftRightArr=100205]="LongLeftRightArr",EDMmlFormulaIndex[EDMmlFormulaIndex.LeftArrRightArr=100206]="LeftArrRightArr",EDMmlFormulaIndex[EDMmlFormulaIndex.ReverseEquilibrium=100207]="ReverseEquilibrium",EDMmlFormulaIndex[EDMmlFormulaIndex.LongRArrShortLArr=100208]="LongRArrShortLArr",EDMmlFormulaIndex[EDMmlFormulaIndex.ShortRArrLongLArr=100209]="ShortRArrLongLArr",EDMmlFormulaIndex[EDMmlFormulaIndex.Upsilon=100210]="Upsilon",EDMmlFormulaIndex[EDMmlFormulaIndex.key_a=100211]="key_a",EDMmlFormulaIndex[EDMmlFormulaIndex.key_b=100212]="key_b",EDMmlFormulaIndex[EDMmlFormulaIndex.key_c=100213]="key_c",EDMmlFormulaIndex[EDMmlFormulaIndex.key_d=100214]="key_d",EDMmlFormulaIndex[EDMmlFormulaIndex.key_e=100215]="key_e",EDMmlFormulaIndex[EDMmlFormulaIndex.key_f=100216]="key_f",EDMmlFormulaIndex[EDMmlFormulaIndex.key_g=100217]="key_g",EDMmlFormulaIndex[EDMmlFormulaIndex.key_h=100218]="key_h",EDMmlFormulaIndex[EDMmlFormulaIndex.key_i=100219]="key_i",EDMmlFormulaIndex[EDMmlFormulaIndex.key_j=100220]="key_j",EDMmlFormulaIndex[EDMmlFormulaIndex.key_k=100221]="key_k",EDMmlFormulaIndex[EDMmlFormulaIndex.key_l=100222]="key_l",EDMmlFormulaIndex[EDMmlFormulaIndex.key_m=100223]="key_m",EDMmlFormulaIndex[EDMmlFormulaIndex.key_n=100224]="key_n",EDMmlFormulaIndex[EDMmlFormulaIndex.key_o=100225]="key_o",EDMmlFormulaIndex[EDMmlFormulaIndex.key_p=100226]="key_p",EDMmlFormulaIndex[EDMmlFormulaIndex.key_q=100227]="key_q",EDMmlFormulaIndex[EDMmlFormulaIndex.key_r=100228]="key_r",EDMmlFormulaIndex[EDMmlFormulaIndex.key_s=100229]="key_s",EDMmlFormulaIndex[EDMmlFormulaIndex.key_t=100230]="key_t",EDMmlFormulaIndex[EDMmlFormulaIndex.key_u=100231]="key_u",EDMmlFormulaIndex[EDMmlFormulaIndex.key_v=100232]="key_v",EDMmlFormulaIndex[EDMmlFormulaIndex.key_w=100233]="key_w",EDMmlFormulaIndex[EDMmlFormulaIndex.key_x=100234]="key_x",EDMmlFormulaIndex[EDMmlFormulaIndex.key_y=100235]="key_y",EDMmlFormulaIndex[EDMmlFormulaIndex.key_z=100236]="key_z",EDMmlFormulaIndex[EDMmlFormulaIndex.key_A=100237]="key_A",EDMmlFormulaIndex[EDMmlFormulaIndex.key_B=100238]="key_B",EDMmlFormulaIndex[EDMmlFormulaIndex.key_C=100239]="key_C",EDMmlFormulaIndex[EDMmlFormulaIndex.key_D=100240]="key_D",EDMmlFormulaIndex[EDMmlFormulaIndex.key_E=100241]="key_E",EDMmlFormulaIndex[EDMmlFormulaIndex.key_F=100242]="key_F",EDMmlFormulaIndex[EDMmlFormulaIndex.key_G=100243]="key_G",EDMmlFormulaIndex[EDMmlFormulaIndex.key_H=100244]="key_H",EDMmlFormulaIndex[EDMmlFormulaIndex.key_I=100245]="key_I",EDMmlFormulaIndex[EDMmlFormulaIndex.key_J=100246]="key_J",EDMmlFormulaIndex[EDMmlFormulaIndex.key_K=100247]="key_K",EDMmlFormulaIndex[EDMmlFormulaIndex.key_L=100248]="key_L",EDMmlFormulaIndex[EDMmlFormulaIndex.key_M=100249]="key_M",EDMmlFormulaIndex[EDMmlFormulaIndex.key_N=100250]="key_N",EDMmlFormulaIndex[EDMmlFormulaIndex.key_O=100251]="key_O",EDMmlFormulaIndex[EDMmlFormulaIndex.key_P=100252]="key_P",EDMmlFormulaIndex[EDMmlFormulaIndex.key_Q=100253]="key_Q",EDMmlFormulaIndex[EDMmlFormulaIndex.key_R=100254]="key_R",EDMmlFormulaIndex[EDMmlFormulaIndex.key_S=100255]="key_S",EDMmlFormulaIndex[EDMmlFormulaIndex.key_T=100256]="key_T",EDMmlFormulaIndex[EDMmlFormulaIndex.key_U=100257]="key_U",EDMmlFormulaIndex[EDMmlFormulaIndex.key_V=100258]="key_V",EDMmlFormulaIndex[EDMmlFormulaIndex.key_W=100259]="key_W",EDMmlFormulaIndex[EDMmlFormulaIndex.key_X=100260]="key_X",EDMmlFormulaIndex[EDMmlFormulaIndex.key_Y=100261]="key_Y",EDMmlFormulaIndex[EDMmlFormulaIndex.key_Z=100262]="key_Z",EDMmlFormulaIndex[EDMmlFormulaIndex.key_1=100263]="key_1",EDMmlFormulaIndex[EDMmlFormulaIndex.key_2=100264]="key_2",EDMmlFormulaIndex[EDMmlFormulaIndex.key_3=100265]="key_3",EDMmlFormulaIndex[EDMmlFormulaIndex.key_4=100266]="key_4",EDMmlFormulaIndex[EDMmlFormulaIndex.key_5=100267]="key_5",EDMmlFormulaIndex[EDMmlFormulaIndex.key_6=100268]="key_6",EDMmlFormulaIndex[EDMmlFormulaIndex.key_7=100269]="key_7",EDMmlFormulaIndex[EDMmlFormulaIndex.key_8=100270]="key_8",EDMmlFormulaIndex[EDMmlFormulaIndex.key_9=100271]="key_9",EDMmlFormulaIndex[EDMmlFormulaIndex.key_0=100272]="key_0",EDMmlFormulaIndex[EDMmlFormulaIndex.key_x21=100273]="key_x21",EDMmlFormulaIndex[EDMmlFormulaIndex.key_x22=100274]="key_x22",EDMmlFormulaIndex[EDMmlFormulaIndex.key_x23=100275]="key_x23",EDMmlFormulaIndex[EDMmlFormulaIndex.key_x24=100276]="key_x24",EDMmlFormulaIndex[EDMmlFormulaIndex.key_x25=100277]="key_x25",EDMmlFormulaIndex[EDMmlFormulaIndex.key_x26=100278]="key_x26",EDMmlFormulaIndex[EDMmlFormulaIndex.key_x27=100279]="key_x27",EDMmlFormulaIndex[EDMmlFormulaIndex.key_x28=100280]="key_x28",EDMmlFormulaIndex[EDMmlFormulaIndex.key_x29=100281]="key_x29",EDMmlFormulaIndex[EDMmlFormulaIndex.key_x2B=100282]="key_x2B",EDMmlFormulaIndex[EDMmlFormulaIndex.key_x2C=100283]="key_x2C",EDMmlFormulaIndex[EDMmlFormulaIndex.key_x2D=100284]="key_x2D",EDMmlFormulaIndex[EDMmlFormulaIndex.key_x2E=100285]="key_x2E",EDMmlFormulaIndex[EDMmlFormulaIndex.key_x3A=100286]="key_x3A",EDMmlFormulaIndex[EDMmlFormulaIndex.key_x3B=100287]="key_x3B",EDMmlFormulaIndex[EDMmlFormulaIndex.key_x3C=100288]="key_x3C",EDMmlFormulaIndex[EDMmlFormulaIndex.key_x3D=100289]="key_x3D",EDMmlFormulaIndex[EDMmlFormulaIndex.key_x3E=100290]="key_x3E",EDMmlFormulaIndex[EDMmlFormulaIndex.key_x3F=100291]="key_x3F",EDMmlFormulaIndex[EDMmlFormulaIndex.key_x40=100292]="key_x40",EDMmlFormulaIndex[EDMmlFormulaIndex.key_x5B=100293]="key_x5B",EDMmlFormulaIndex[EDMmlFormulaIndex.key_x5D=100294]="key_x5D",EDMmlFormulaIndex[EDMmlFormulaIndex.key_x7B=100295]="key_x7B",EDMmlFormulaIndex[EDMmlFormulaIndex.key_x7D=100296]="key_x7D",EDMmlFormulaIndex[EDMmlFormulaIndex.key_xB0=100297]="key_xB0",EDMmlFormulaIndex[EDMmlFormulaIndex.key_x58x61=100298]="key_x58x61",EDMmlFormulaIndex[EDMmlFormulaIndex.key_x2032=100299]="key_x2032",EDMmlFormulaIndex[EDMmlFormulaIndex.key_x2033=100300]="key_x2033",EDMmlFormulaIndex[EDMmlFormulaIndex.key_x225f=100301]="key_x225f",EDMmlFormulaIndex[EDMmlFormulaIndex.key_backspace=100302]="key_backspace",EDMmlFormulaIndex[EDMmlFormulaIndex.key_left=100303]="key_left",EDMmlFormulaIndex[EDMmlFormulaIndex.key_right=100304]="key_right",EDMmlFormulaIndex[EDMmlFormulaIndex.key_enter=100305]="key_enter",EDMmlFormulaIndex[EDMmlFormulaIndex.key_selectedAll=100306]="key_selectedAll",EDMmlFormulaIndex[EDMmlFormulaIndex.edusymbol_length=100307]="edusymbol_length",EDMmlFormulaIndex[EDMmlFormulaIndex.symbol_length=100308]="symbol_length",EDMmlFormulaIndex[EDMmlFormulaIndex.insertMrow=100309]="insertMrow",EDMmlFormulaIndex[EDMmlFormulaIndex.Frac=100310]="Frac",EDMmlFormulaIndex[EDMmlFormulaIndex.FracBevelled=100311]="FracBevelled",EDMmlFormulaIndex[EDMmlFormulaIndex.Frac_old=100312]="Frac_old",EDMmlFormulaIndex[EDMmlFormulaIndex.Frac_s=100313]="Frac_s",EDMmlFormulaIndex[EDMmlFormulaIndex.FracBevelled_s=100314]="FracBevelled_s",EDMmlFormulaIndex[EDMmlFormulaIndex.Sqrt=100315]="Sqrt",EDMmlFormulaIndex[EDMmlFormulaIndex.Root=100316]="Root",EDMmlFormulaIndex[EDMmlFormulaIndex.Enclose_div=100317]="Enclose_div",EDMmlFormulaIndex[EDMmlFormulaIndex.SubSup=100318]="SubSup",EDMmlFormulaIndex[EDMmlFormulaIndex.Sub=100319]="Sub",EDMmlFormulaIndex[EDMmlFormulaIndex.Sup=100320]="Sup",EDMmlFormulaIndex[EDMmlFormulaIndex.PreSubSup=100321]="PreSubSup",EDMmlFormulaIndex[EDMmlFormulaIndex.PreSub=100322]="PreSub",EDMmlFormulaIndex[EDMmlFormulaIndex.PreSup=100323]="PreSup",EDMmlFormulaIndex[EDMmlFormulaIndex.Empty_uo=100324]="Empty_uo",EDMmlFormulaIndex[EDMmlFormulaIndex.Empty_u=100325]="Empty_u",EDMmlFormulaIndex[EDMmlFormulaIndex.Empty_o=100326]="Empty_o",EDMmlFormulaIndex[EDMmlFormulaIndex.Empty_bp=100327]="Empty_bp",EDMmlFormulaIndex[EDMmlFormulaIndex.Empty_b=100328]="Empty_b",EDMmlFormulaIndex[EDMmlFormulaIndex.Empty_p=100329]="Empty_p",EDMmlFormulaIndex[EDMmlFormulaIndex.PreEmpty_p=100330]="PreEmpty_p",EDMmlFormulaIndex[EDMmlFormulaIndex.PreEmpty_b=100331]="PreEmpty_b",EDMmlFormulaIndex[EDMmlFormulaIndex.PreEmpty_bp=100332]="PreEmpty_bp",EDMmlFormulaIndex[EDMmlFormulaIndex.LargeEmpty_uo=100333]="LargeEmpty_uo",EDMmlFormulaIndex[EDMmlFormulaIndex.LargeEmpty_u=100334]="LargeEmpty_u",EDMmlFormulaIndex[EDMmlFormulaIndex.LargeEmpty_o=100335]="LargeEmpty_o",EDMmlFormulaIndex[EDMmlFormulaIndex.LargeEmpty_bp=100336]="LargeEmpty_bp",EDMmlFormulaIndex[EDMmlFormulaIndex.LargeEmpty_b=100337]="LargeEmpty_b",EDMmlFormulaIndex[EDMmlFormulaIndex.LargeEmpty_p=100338]="LargeEmpty_p",EDMmlFormulaIndex[EDMmlFormulaIndex.PreLargeEmpty_p=100339]="PreLargeEmpty_p",EDMmlFormulaIndex[EDMmlFormulaIndex.PreLargeEmpty_b=100340]="PreLargeEmpty_b",EDMmlFormulaIndex[EDMmlFormulaIndex.PreLargeEmpty_bp=100341]="PreLargeEmpty_bp",EDMmlFormulaIndex[EDMmlFormulaIndex.Enclose_tablediv=100342]="Enclose_tablediv",EDMmlFormulaIndex[EDMmlFormulaIndex.Enclose_tablediv2=100343]="Enclose_tablediv2",EDMmlFormulaIndex[EDMmlFormulaIndex.Npart=100344]="Npart",EDMmlFormulaIndex[EDMmlFormulaIndex.Infin=100345]="Infin",EDMmlFormulaIndex[EDMmlFormulaIndex.Sum_uo=100346]="Sum_uo",EDMmlFormulaIndex[EDMmlFormulaIndex.Sum=100347]="Sum",EDMmlFormulaIndex[EDMmlFormulaIndex.Sum_u=100348]="Sum_u",EDMmlFormulaIndex[EDMmlFormulaIndex.Sum_bp=100349]="Sum_bp",EDMmlFormulaIndex[EDMmlFormulaIndex.Sum_b=100350]="Sum_b",EDMmlFormulaIndex[EDMmlFormulaIndex.Product_uo=100351]="Product_uo",EDMmlFormulaIndex[EDMmlFormulaIndex.Product=100352]="Product",EDMmlFormulaIndex[EDMmlFormulaIndex.Product_u=100353]="Product_u",EDMmlFormulaIndex[EDMmlFormulaIndex.Product_bp=100354]="Product_bp",EDMmlFormulaIndex[EDMmlFormulaIndex.Product_b=100355]="Product_b",EDMmlFormulaIndex[EDMmlFormulaIndex.CoProduct_uo=100356]="CoProduct_uo",EDMmlFormulaIndex[EDMmlFormulaIndex.CoProduct=100357]="CoProduct",EDMmlFormulaIndex[EDMmlFormulaIndex.CoProduct_u=100358]="CoProduct_u",EDMmlFormulaIndex[EDMmlFormulaIndex.CoProduct_bp=100359]="CoProduct_bp",EDMmlFormulaIndex[EDMmlFormulaIndex.CoProduct_b=100360]="CoProduct_b",EDMmlFormulaIndex[EDMmlFormulaIndex.Intersection_uo=100361]="Intersection_uo",EDMmlFormulaIndex[EDMmlFormulaIndex.Intersection=100362]="Intersection",EDMmlFormulaIndex[EDMmlFormulaIndex.Intersection_u=100363]="Intersection_u",EDMmlFormulaIndex[EDMmlFormulaIndex.Intersection_bp=100364]="Intersection_bp",EDMmlFormulaIndex[EDMmlFormulaIndex.Intersection_b=100365]="Intersection_b",EDMmlFormulaIndex[EDMmlFormulaIndex.Union_uo=100366]="Union_uo",EDMmlFormulaIndex[EDMmlFormulaIndex.Union=100367]="Union",EDMmlFormulaIndex[EDMmlFormulaIndex.Union_u=100368]="Union_u",EDMmlFormulaIndex[EDMmlFormulaIndex.Union_bp=100369]="Union_bp",EDMmlFormulaIndex[EDMmlFormulaIndex.Union_b=100370]="Union_b",EDMmlFormulaIndex[EDMmlFormulaIndex.Lor_uo=100371]="Lor_uo",EDMmlFormulaIndex[EDMmlFormulaIndex.Lor=100372]="Lor",EDMmlFormulaIndex[EDMmlFormulaIndex.Lor_u=100373]="Lor_u",EDMmlFormulaIndex[EDMmlFormulaIndex.Lor_bp=100374]="Lor_bp",EDMmlFormulaIndex[EDMmlFormulaIndex.Lor_b=100375]="Lor_b",EDMmlFormulaIndex[EDMmlFormulaIndex.Land_uo=100376]="Land_uo",EDMmlFormulaIndex[EDMmlFormulaIndex.Land=100377]="Land",EDMmlFormulaIndex[EDMmlFormulaIndex.Land_u=100378]="Land_u",EDMmlFormulaIndex[EDMmlFormulaIndex.Land_bp=100379]="Land_bp",EDMmlFormulaIndex[EDMmlFormulaIndex.Land_b=100380]="Land_b",EDMmlFormulaIndex[EDMmlFormulaIndex.Int_u=100381]="Int_u",EDMmlFormulaIndex[EDMmlFormulaIndex.Int_uo=100382]="Int_uo",EDMmlFormulaIndex[EDMmlFormulaIndex.Int=100383]="Int",EDMmlFormulaIndex[EDMmlFormulaIndex.Int_bp=100384]="Int_bp",EDMmlFormulaIndex[EDMmlFormulaIndex.Int_b=100385]="Int_b",EDMmlFormulaIndex[EDMmlFormulaIndex.DoubleInt_u=100386]="DoubleInt_u",EDMmlFormulaIndex[EDMmlFormulaIndex.DoubleInt_uo=100387]="DoubleInt_uo",EDMmlFormulaIndex[EDMmlFormulaIndex.DoubleInt=100388]="DoubleInt",EDMmlFormulaIndex[EDMmlFormulaIndex.DoubleInt_bp=100389]="DoubleInt_bp",EDMmlFormulaIndex[EDMmlFormulaIndex.DoubleInt_b=100390]="DoubleInt_b",EDMmlFormulaIndex[EDMmlFormulaIndex.TripleInt_u=100391]="TripleInt_u",EDMmlFormulaIndex[EDMmlFormulaIndex.TripleInt_uo=100392]="TripleInt_uo",EDMmlFormulaIndex[EDMmlFormulaIndex.TripleInt=100393]="TripleInt",EDMmlFormulaIndex[EDMmlFormulaIndex.TripleInt_bp=100394]="TripleInt_bp",EDMmlFormulaIndex[EDMmlFormulaIndex.TripleInt_b=100395]="TripleInt_b",EDMmlFormulaIndex[EDMmlFormulaIndex.QuadrupleInt_u=100396]="QuadrupleInt_u",EDMmlFormulaIndex[EDMmlFormulaIndex.QuadrupleInt_uo=100397]="QuadrupleInt_uo",EDMmlFormulaIndex[EDMmlFormulaIndex.QuadrupleInt=100398]="QuadrupleInt",EDMmlFormulaIndex[EDMmlFormulaIndex.QuadrupleInt_bp=100399]="QuadrupleInt_bp",EDMmlFormulaIndex[EDMmlFormulaIndex.QuadrupleInt_b=100400]="QuadrupleInt_b",EDMmlFormulaIndex[EDMmlFormulaIndex.ContourInt_u=100401]="ContourInt_u",EDMmlFormulaIndex[EDMmlFormulaIndex.ContourInt_uo=100402]="ContourInt_uo",EDMmlFormulaIndex[EDMmlFormulaIndex.ContourInt=100403]="ContourInt",EDMmlFormulaIndex[EDMmlFormulaIndex.ContourInt_bp=100404]="ContourInt_bp",EDMmlFormulaIndex[EDMmlFormulaIndex.ContourInt_b=100405]="ContourInt_b",EDMmlFormulaIndex[EDMmlFormulaIndex.SurfaceInt_u=100406]="SurfaceInt_u",EDMmlFormulaIndex[EDMmlFormulaIndex.SurfaceInt_uo=100407]="SurfaceInt_uo",EDMmlFormulaIndex[EDMmlFormulaIndex.SurfaceInt=100408]="SurfaceInt",EDMmlFormulaIndex[EDMmlFormulaIndex.SurfaceInt_bp=100409]="SurfaceInt_bp",EDMmlFormulaIndex[EDMmlFormulaIndex.SurfaceInt_b=100410]="SurfaceInt_b",EDMmlFormulaIndex[EDMmlFormulaIndex.VolumeInt_u=100411]="VolumeInt_u",EDMmlFormulaIndex[EDMmlFormulaIndex.VolumeInt_uo=100412]="VolumeInt_uo",EDMmlFormulaIndex[EDMmlFormulaIndex.VolumeInt=100413]="VolumeInt",EDMmlFormulaIndex[EDMmlFormulaIndex.VolumeInt_bp=100414]="VolumeInt_bp",EDMmlFormulaIndex[EDMmlFormulaIndex.VolumeInt_b=100415]="VolumeInt_b",EDMmlFormulaIndex[EDMmlFormulaIndex.ClockwiseInt_u=100416]="ClockwiseInt_u",EDMmlFormulaIndex[EDMmlFormulaIndex.ClockwiseInt_uo=100417]="ClockwiseInt_uo",EDMmlFormulaIndex[EDMmlFormulaIndex.ClockwiseInt=100418]="ClockwiseInt",EDMmlFormulaIndex[EDMmlFormulaIndex.ClockwiseInt_bp=100419]="ClockwiseInt_bp",EDMmlFormulaIndex[EDMmlFormulaIndex.ClockwiseInt_b=100420]="ClockwiseInt_b",EDMmlFormulaIndex[EDMmlFormulaIndex.CtClockwiseInt_u=100421]="CtClockwiseInt_u",EDMmlFormulaIndex[EDMmlFormulaIndex.CtClockwiseInt_uo=100422]="CtClockwiseInt_uo",EDMmlFormulaIndex[EDMmlFormulaIndex.CtClockwiseInt=100423]="CtClockwiseInt",EDMmlFormulaIndex[EDMmlFormulaIndex.CtClockwiseInt_bp=100424]="CtClockwiseInt_bp",EDMmlFormulaIndex[EDMmlFormulaIndex.CtClockwiseInt_b=100425]="CtClockwiseInt_b",EDMmlFormulaIndex[EDMmlFormulaIndex.ClockwiseContInt_u=100426]="ClockwiseContInt_u",EDMmlFormulaIndex[EDMmlFormulaIndex.ClockwiseContInt_uo=100427]="ClockwiseContInt_uo",EDMmlFormulaIndex[EDMmlFormulaIndex.ClockwiseContInt=100428]="ClockwiseContInt",EDMmlFormulaIndex[EDMmlFormulaIndex.ClockwiseContInt_bp=100429]="ClockwiseContInt_bp",EDMmlFormulaIndex[EDMmlFormulaIndex.ClockwiseContInt_b=100430]="ClockwiseContInt_b",EDMmlFormulaIndex[EDMmlFormulaIndex.CtClockwiseContInt_u=100431]="CtClockwiseContInt_u",EDMmlFormulaIndex[EDMmlFormulaIndex.CtClockwiseContInt_uo=100432]="CtClockwiseContInt_uo",EDMmlFormulaIndex[EDMmlFormulaIndex.CtClockwiseContInt=100433]="CtClockwiseContInt",EDMmlFormulaIndex[EDMmlFormulaIndex.CtClockwiseContInt_bp=100434]="CtClockwiseContInt_bp",EDMmlFormulaIndex[EDMmlFormulaIndex.CtClockwiseContInt_b=100435]="CtClockwiseContInt_b",EDMmlFormulaIndex[EDMmlFormulaIndex.Enclose_tl=100436]="Enclose_tl",EDMmlFormulaIndex[EDMmlFormulaIndex.Enclose_tr=100437]="Enclose_tr",EDMmlFormulaIndex[EDMmlFormulaIndex.Enclose_bl=100438]="Enclose_bl",EDMmlFormulaIndex[EDMmlFormulaIndex.Enclose_br=100439]="Enclose_br",EDMmlFormulaIndex[EDMmlFormulaIndex.Enclose_box=100440]="Enclose_box",EDMmlFormulaIndex[EDMmlFormulaIndex.Enclose_up=100441]="Enclose_up",EDMmlFormulaIndex[EDMmlFormulaIndex.Enclose_down=100442]="Enclose_down",EDMmlFormulaIndex[EDMmlFormulaIndex.Enclose_updown=100443]="Enclose_updown",EDMmlFormulaIndex[EDMmlFormulaIndex.Enclose_ver=100444]="Enclose_ver",EDMmlFormulaIndex[EDMmlFormulaIndex.Enclose_hor=100445]="Enclose_hor",EDMmlFormulaIndex[EDMmlFormulaIndex.Parentheses_lr=100446]="Parentheses_lr",EDMmlFormulaIndex[EDMmlFormulaIndex.Parentheses_l=100447]="Parentheses_l",EDMmlFormulaIndex[EDMmlFormulaIndex.Parentheses_r=100448]="Parentheses_r",EDMmlFormulaIndex[EDMmlFormulaIndex.Parentheses_uo=100449]="Parentheses_uo",EDMmlFormulaIndex[EDMmlFormulaIndex.Parentheses_u=100450]="Parentheses_u",EDMmlFormulaIndex[EDMmlFormulaIndex.Parentheses_o=100451]="Parentheses_o",EDMmlFormulaIndex[EDMmlFormulaIndex.Parentheses_iuo=100452]="Parentheses_iuo",EDMmlFormulaIndex[EDMmlFormulaIndex.Parentheses_iu=100453]="Parentheses_iu",EDMmlFormulaIndex[EDMmlFormulaIndex.Parentheses_io=100454]="Parentheses_io",EDMmlFormulaIndex[EDMmlFormulaIndex.SquareBracket_lr=100455]="SquareBracket_lr",EDMmlFormulaIndex[EDMmlFormulaIndex.SquareBracket_l=100456]="SquareBracket_l",EDMmlFormulaIndex[EDMmlFormulaIndex.SquareBracket_r=100457]="SquareBracket_r",EDMmlFormulaIndex[EDMmlFormulaIndex.SquareBracket_uo=100458]="SquareBracket_uo",EDMmlFormulaIndex[EDMmlFormulaIndex.SquareBracket_u=100459]="SquareBracket_u",EDMmlFormulaIndex[EDMmlFormulaIndex.SquareBracket_o=100460]="SquareBracket_o",EDMmlFormulaIndex[EDMmlFormulaIndex.SquareBracket_iuo=100461]="SquareBracket_iuo",EDMmlFormulaIndex[EDMmlFormulaIndex.SquareBracket_iu=100462]="SquareBracket_iu",EDMmlFormulaIndex[EDMmlFormulaIndex.SquareBracket_io=100463]="SquareBracket_io",EDMmlFormulaIndex[EDMmlFormulaIndex.SquareBracket_ll=100464]="SquareBracket_ll",EDMmlFormulaIndex[EDMmlFormulaIndex.SquareBracket_rr=100465]="SquareBracket_rr",EDMmlFormulaIndex[EDMmlFormulaIndex.SquareBracket_rl=100466]="SquareBracket_rl",EDMmlFormulaIndex[EDMmlFormulaIndex.CurlyBracket_lr=100467]="CurlyBracket_lr",EDMmlFormulaIndex[EDMmlFormulaIndex.CurlyBracket_l=100468]="CurlyBracket_l",EDMmlFormulaIndex[EDMmlFormulaIndex.CurlyBracket_r=100469]="CurlyBracket_r",EDMmlFormulaIndex[EDMmlFormulaIndex.CurlyBracket_uo=100470]="CurlyBracket_uo",EDMmlFormulaIndex[EDMmlFormulaIndex.CurlyBracket_u=100471]="CurlyBracket_u",EDMmlFormulaIndex[EDMmlFormulaIndex.CurlyBracket_o=100472]="CurlyBracket_o",EDMmlFormulaIndex[EDMmlFormulaIndex.CurlyBracket_iuo=100473]="CurlyBracket_iuo",EDMmlFormulaIndex[EDMmlFormulaIndex.CurlyBracket_iu=100474]="CurlyBracket_iu",EDMmlFormulaIndex[EDMmlFormulaIndex.CurlyBracket_io=100475]="CurlyBracket_io",EDMmlFormulaIndex[EDMmlFormulaIndex.VerticalBars_lr=100476]="VerticalBars_lr",EDMmlFormulaIndex[EDMmlFormulaIndex.VerticalBars_l=100477]="VerticalBars_l",EDMmlFormulaIndex[EDMmlFormulaIndex.VerticalBars_r=100478]="VerticalBars_r",EDMmlFormulaIndex[EDMmlFormulaIndex.DoubleVerticalBars_lr=100479]="DoubleVerticalBars_lr",EDMmlFormulaIndex[EDMmlFormulaIndex.DoubleVerticalBars_l=100480]="DoubleVerticalBars_l",EDMmlFormulaIndex[EDMmlFormulaIndex.DoubleVerticalBars_r=100481]="DoubleVerticalBars_r",EDMmlFormulaIndex[EDMmlFormulaIndex.DoubleBracket_lr=100482]="DoubleBracket_lr",EDMmlFormulaIndex[EDMmlFormulaIndex.DoubleBracket_l=100483]="DoubleBracket_l",EDMmlFormulaIndex[EDMmlFormulaIndex.DoubleBracket_r=100484]="DoubleBracket_r",EDMmlFormulaIndex[EDMmlFormulaIndex.AngleBracket_lr=100485]="AngleBracket_lr",EDMmlFormulaIndex[EDMmlFormulaIndex.AngleBracket_l=100486]="AngleBracket_l",EDMmlFormulaIndex[EDMmlFormulaIndex.AngleBracket_r=100487]="AngleBracket_r",EDMmlFormulaIndex[EDMmlFormulaIndex.Floor_lr=100488]="Floor_lr",EDMmlFormulaIndex[EDMmlFormulaIndex.Ceiling_lr=100489]="Ceiling_lr",EDMmlFormulaIndex[EDMmlFormulaIndex.Floor_Ceiling=100490]="Floor_Ceiling",EDMmlFormulaIndex[EDMmlFormulaIndex.AngleBracketWithBar=100491]="AngleBracketWithBar",EDMmlFormulaIndex[EDMmlFormulaIndex.ParenthesesWithBar=100492]="ParenthesesWithBar",EDMmlFormulaIndex[EDMmlFormulaIndex.SquareBracketWithBar=100493]="SquareBracketWithBar",EDMmlFormulaIndex[EDMmlFormulaIndex.CurlyBracketWithBar=100494]="CurlyBracketWithBar",EDMmlFormulaIndex[EDMmlFormulaIndex.LSquareBracketRParentheses=100495]="LSquareBracketRParentheses",EDMmlFormulaIndex[EDMmlFormulaIndex.LParenthesesRSquareBracket=100496]="LParenthesesRSquareBracket",EDMmlFormulaIndex[EDMmlFormulaIndex.LVerticalBarsRAngleBracket=100497]="LVerticalBarsRAngleBracket",EDMmlFormulaIndex[EDMmlFormulaIndex.LAngleBracketRVerticalBars=100498]="LAngleBracketRVerticalBars",EDMmlFormulaIndex[EDMmlFormulaIndex.SupMin=100499]="SupMin",EDMmlFormulaIndex[EDMmlFormulaIndex.SupSec=100500]="SupSec",EDMmlFormulaIndex[EDMmlFormulaIndex.SupMilliSec=100501]="SupMilliSec",EDMmlFormulaIndex[EDMmlFormulaIndex.LeftMin=100502]="LeftMin",EDMmlFormulaIndex[EDMmlFormulaIndex.OverDot_s=100503]="OverDot_s",EDMmlFormulaIndex[EDMmlFormulaIndex.OverDoubleDot_s=100504]="OverDoubleDot_s",EDMmlFormulaIndex[EDMmlFormulaIndex.OverTripleDot_s=100505]="OverTripleDot_s",EDMmlFormulaIndex[EDMmlFormulaIndex.OverDotDot_s=100506]="OverDotDot_s",EDMmlFormulaIndex[EDMmlFormulaIndex.OverShortRightArr_s=100507]="OverShortRightArr_s",EDMmlFormulaIndex[EDMmlFormulaIndex.OverLeftRightArrow_s=100508]="OverLeftRightArrow_s",EDMmlFormulaIndex[EDMmlFormulaIndex.OverShortLeftArr_s=100509]="OverShortLeftArr_s",EDMmlFormulaIndex[EDMmlFormulaIndex.OverRightVector_s=100510]="OverRightVector_s",EDMmlFormulaIndex[EDMmlFormulaIndex.OverLeftRightVector_s=100511]="OverLeftRightVector_s",EDMmlFormulaIndex[EDMmlFormulaIndex.OverLeftVector_s=100512]="OverLeftVector_s",EDMmlFormulaIndex[EDMmlFormulaIndex.Enclosedown_s=100513]="Enclosedown_s",EDMmlFormulaIndex[EDMmlFormulaIndex.UnderDot_s=100514]="UnderDot_s",EDMmlFormulaIndex[EDMmlFormulaIndex.UnderDoubleDot_s=100515]="UnderDoubleDot_s",EDMmlFormulaIndex[EDMmlFormulaIndex.UnderTripleDot_s=100516]="UnderTripleDot_s",EDMmlFormulaIndex[EDMmlFormulaIndex.UnderDotDot_s=100517]="UnderDotDot_s",EDMmlFormulaIndex[EDMmlFormulaIndex.UnderShortRightArr_s=100518]="UnderShortRightArr_s",EDMmlFormulaIndex[EDMmlFormulaIndex.UnderLeftRightArrow_s=100519]="UnderLeftRightArrow_s",EDMmlFormulaIndex[EDMmlFormulaIndex.UnderShortLeftArr_s=100520]="UnderShortLeftArr_s",EDMmlFormulaIndex[EDMmlFormulaIndex.UnderRightVector_s=100521]="UnderRightVector_s",EDMmlFormulaIndex[EDMmlFormulaIndex.UnderLeftRightVector_s=100522]="UnderLeftRightVector_s",EDMmlFormulaIndex[EDMmlFormulaIndex.UnderLeftVector_s=100523]="UnderLeftVector_s",EDMmlFormulaIndex[EDMmlFormulaIndex.Encloseup_s=100524]="Encloseup_s",EDMmlFormulaIndex[EDMmlFormulaIndex.OverBar_s=100525]="OverBar_s",EDMmlFormulaIndex[EDMmlFormulaIndex.OverTilde_s=100526]="OverTilde_s",EDMmlFormulaIndex[EDMmlFormulaIndex.Parentheses_os=100527]="Parentheses_os",EDMmlFormulaIndex[EDMmlFormulaIndex.OverParentheses_s=100528]="OverParentheses_s",EDMmlFormulaIndex[EDMmlFormulaIndex.OverHat_s=100529]="OverHat_s",EDMmlFormulaIndex[EDMmlFormulaIndex.OverDownhat_s=100530]="OverDownhat_s",EDMmlFormulaIndex[EDMmlFormulaIndex.SupMin_s=100531]="SupMin_s",EDMmlFormulaIndex[EDMmlFormulaIndex.SupSec_s=100532]="SupSec_s",EDMmlFormulaIndex[EDMmlFormulaIndex.SupMilliSec_s=100533]="SupMilliSec_s",EDMmlFormulaIndex[EDMmlFormulaIndex.SupDegree_s=100534]="SupDegree_s",EDMmlFormulaIndex[EDMmlFormulaIndex.Enclosehor_s=100535]="Enclosehor_s",EDMmlFormulaIndex[EDMmlFormulaIndex.UnderBar_s=100536]="UnderBar_s",EDMmlFormulaIndex[EDMmlFormulaIndex.UnderTilde_s=100537]="UnderTilde_s",EDMmlFormulaIndex[EDMmlFormulaIndex.UnderParentheses_s=100538]="UnderParentheses_s",EDMmlFormulaIndex[EDMmlFormulaIndex.Parentheses_us=100539]="Parentheses_us",EDMmlFormulaIndex[EDMmlFormulaIndex.UnderHat_s=100540]="UnderHat_s",EDMmlFormulaIndex[EDMmlFormulaIndex.UnderDownhat_s=100541]="UnderDownhat_s",EDMmlFormulaIndex[EDMmlFormulaIndex.OverMin_s=100542]="OverMin_s",EDMmlFormulaIndex[EDMmlFormulaIndex.OverLefmin_s=100543]="OverLefmin_s",EDMmlFormulaIndex[EDMmlFormulaIndex.SupT_s=100544]="SupT_s",EDMmlFormulaIndex[EDMmlFormulaIndex.Encloseupdown_s=100545]="Encloseupdown_s",EDMmlFormulaIndex[EDMmlFormulaIndex.Last_s=100546]="Last_s",EDMmlFormulaIndex[EDMmlFormulaIndex.OverDot=100547]="OverDot",EDMmlFormulaIndex[EDMmlFormulaIndex.UnderDot=100548]="UnderDot",EDMmlFormulaIndex[EDMmlFormulaIndex.OverDoubleDot=100549]="OverDoubleDot",EDMmlFormulaIndex[EDMmlFormulaIndex.UnderDoubleDot=100550]="UnderDoubleDot",EDMmlFormulaIndex[EDMmlFormulaIndex.OverTripleDot=100551]="OverTripleDot",EDMmlFormulaIndex[EDMmlFormulaIndex.UnderTripleDot=100552]="UnderTripleDot",EDMmlFormulaIndex[EDMmlFormulaIndex.OverDotDot=100553]="OverDotDot",EDMmlFormulaIndex[EDMmlFormulaIndex.UnderDotDot=100554]="UnderDotDot",EDMmlFormulaIndex[EDMmlFormulaIndex.OverBar=100555]="OverBar",EDMmlFormulaIndex[EDMmlFormulaIndex.UnderBar=100556]="UnderBar",EDMmlFormulaIndex[EDMmlFormulaIndex.OverDoubleBar=100557]="OverDoubleBar",EDMmlFormulaIndex[EDMmlFormulaIndex.UnderDoubleBar=100558]="UnderDoubleBar",EDMmlFormulaIndex[EDMmlFormulaIndex.OverShortRightArr=100559]="OverShortRightArr",EDMmlFormulaIndex[EDMmlFormulaIndex.UnderShortRightArr=100560]="UnderShortRightArr",EDMmlFormulaIndex[EDMmlFormulaIndex.OverShortLeftArr=100561]="OverShortLeftArr",EDMmlFormulaIndex[EDMmlFormulaIndex.UnderShortLeftArr=100562]="UnderShortLeftArr",EDMmlFormulaIndex[EDMmlFormulaIndex.OverRightVector=100563]="OverRightVector",EDMmlFormulaIndex[EDMmlFormulaIndex.UnderRightVector=100564]="UnderRightVector",EDMmlFormulaIndex[EDMmlFormulaIndex.OverLeftVector=100565]="OverLeftVector",EDMmlFormulaIndex[EDMmlFormulaIndex.UnderLeftVector=100566]="UnderLeftVector",EDMmlFormulaIndex[EDMmlFormulaIndex.OverLeftRightArrow=100567]="OverLeftRightArrow",EDMmlFormulaIndex[EDMmlFormulaIndex.UnderLeftRightArrow=100568]="UnderLeftRightArrow",EDMmlFormulaIndex[EDMmlFormulaIndex.OverLeftRightVector=100569]="OverLeftRightVector",EDMmlFormulaIndex[EDMmlFormulaIndex.UnderLeftRightVector=100570]="UnderLeftRightVector",EDMmlFormulaIndex[EDMmlFormulaIndex.OverTilde=100571]="OverTilde",EDMmlFormulaIndex[EDMmlFormulaIndex.UnderTilde=100572]="UnderTilde",EDMmlFormulaIndex[EDMmlFormulaIndex.OverHat=100573]="OverHat",EDMmlFormulaIndex[EDMmlFormulaIndex.UnderHat=100574]="UnderHat",EDMmlFormulaIndex[EDMmlFormulaIndex.OverShellBracket=100575]="OverShellBracket",EDMmlFormulaIndex[EDMmlFormulaIndex.UnderShellBracket=100576]="UnderShellBracket",EDMmlFormulaIndex[EDMmlFormulaIndex.RightArr_uo=100577]="RightArr_uo",EDMmlFormulaIndex[EDMmlFormulaIndex.RightArr_u=100578]="RightArr_u",EDMmlFormulaIndex[EDMmlFormulaIndex.RightArr_o=100579]="RightArr_o",EDMmlFormulaIndex[EDMmlFormulaIndex.LeftArr_uo=100580]="LeftArr_uo",EDMmlFormulaIndex[EDMmlFormulaIndex.LeftArr_u=100581]="LeftArr_u",EDMmlFormulaIndex[EDMmlFormulaIndex.LeftArr_o=100582]="LeftArr_o",EDMmlFormulaIndex[EDMmlFormulaIndex.LeftRightArr_uo=100583]="LeftRightArr_uo",EDMmlFormulaIndex[EDMmlFormulaIndex.LeftRightArr_u=100584]="LeftRightArr_u",EDMmlFormulaIndex[EDMmlFormulaIndex.LeftRightArr_o=100585]="LeftRightArr_o",EDMmlFormulaIndex[EDMmlFormulaIndex.RightArrLeftArr_uo=100586]="RightArrLeftArr_uo",EDMmlFormulaIndex[EDMmlFormulaIndex.RightArrLeftArr_u=100587]="RightArrLeftArr_u",EDMmlFormulaIndex[EDMmlFormulaIndex.RightArrLeftArr_o=100588]="RightArrLeftArr_o",EDMmlFormulaIndex[EDMmlFormulaIndex.LRightArrSLeftArr_uo=100589]="LRightArrSLeftArr_uo",EDMmlFormulaIndex[EDMmlFormulaIndex.LRightArrSLeftArr_u=100590]="LRightArrSLeftArr_u",EDMmlFormulaIndex[EDMmlFormulaIndex.LRightArrSLeftArr_o=100591]="LRightArrSLeftArr_o",EDMmlFormulaIndex[EDMmlFormulaIndex.SRightArrLLeftArr_uo=100592]="SRightArrLLeftArr_uo",EDMmlFormulaIndex[EDMmlFormulaIndex.SRightArrLLeftArr_u=100593]="SRightArrLLeftArr_u",EDMmlFormulaIndex[EDMmlFormulaIndex.SRightArrLLeftArr_o=100594]="SRightArrLLeftArr_o",EDMmlFormulaIndex[EDMmlFormulaIndex.Equilibrium_uo=100595]="Equilibrium_uo",EDMmlFormulaIndex[EDMmlFormulaIndex.Equilibrium_u=100596]="Equilibrium_u",EDMmlFormulaIndex[EDMmlFormulaIndex.Equilibrium_o=100597]="Equilibrium_o",EDMmlFormulaIndex[EDMmlFormulaIndex.LRightVerSLeftVer_uo=100598]="LRightVerSLeftVer_uo",EDMmlFormulaIndex[EDMmlFormulaIndex.LRightVerSLeftVer_u=100599]="LRightVerSLeftVer_u",EDMmlFormulaIndex[EDMmlFormulaIndex.LRightVerSLeftVer_o=100600]="LRightVerSLeftVer_o",EDMmlFormulaIndex[EDMmlFormulaIndex.SRightVerLLeftVer_uo=100601]="SRightVerLLeftVer_uo",EDMmlFormulaIndex[EDMmlFormulaIndex.SRightVerLLeftVer_u=100602]="SRightVerLLeftVer_u",EDMmlFormulaIndex[EDMmlFormulaIndex.SRightVerLLeftVer_o=100603]="SRightVerLLeftVer_o",EDMmlFormulaIndex[EDMmlFormulaIndex.LongLeftArr_uo=100604]="LongLeftArr_uo",EDMmlFormulaIndex[EDMmlFormulaIndex.LongLeftArr_u=100605]="LongLeftArr_u",EDMmlFormulaIndex[EDMmlFormulaIndex.LongLeftArr_o=100606]="LongLeftArr_o",EDMmlFormulaIndex[EDMmlFormulaIndex.LeftTeeArr_uo=100607]="LeftTeeArr_uo",EDMmlFormulaIndex[EDMmlFormulaIndex.LeftTeeArr_u=100608]="LeftTeeArr_u",EDMmlFormulaIndex[EDMmlFormulaIndex.LeftTeeArr_o=100609]="LeftTeeArr_o",EDMmlFormulaIndex[EDMmlFormulaIndex.DoubleLeftArr_uo=100610]="DoubleLeftArr_uo",EDMmlFormulaIndex[EDMmlFormulaIndex.DoubleLeftArr_u=100611]="DoubleLeftArr_u",EDMmlFormulaIndex[EDMmlFormulaIndex.DoubleLeftArr_o=100612]="DoubleLeftArr_o",EDMmlFormulaIndex[EDMmlFormulaIndex.DbLongLeftArr_uo=100613]="DbLongLeftArr_uo",EDMmlFormulaIndex[EDMmlFormulaIndex.DbLongLeftArr_u=100614]="DbLongLeftArr_u",EDMmlFormulaIndex[EDMmlFormulaIndex.DbLongLeftArr_o=100615]="DbLongLeftArr_o",EDMmlFormulaIndex[EDMmlFormulaIndex.LongRightArr_uo=100616]="LongRightArr_uo",EDMmlFormulaIndex[EDMmlFormulaIndex.LongRightArr_u=100617]="LongRightArr_u",EDMmlFormulaIndex[EDMmlFormulaIndex.LongRightArr_o=100618]="LongRightArr_o",EDMmlFormulaIndex[EDMmlFormulaIndex.RightTeeArr_uo=100619]="RightTeeArr_uo",EDMmlFormulaIndex[EDMmlFormulaIndex.RightTeeArr_u=100620]="RightTeeArr_u",EDMmlFormulaIndex[EDMmlFormulaIndex.RightTeeArr_o=100621]="RightTeeArr_o",EDMmlFormulaIndex[EDMmlFormulaIndex.DoubleRightArr_uo=100622]="DoubleRightArr_uo",EDMmlFormulaIndex[EDMmlFormulaIndex.DoubleRightArr_u=100623]="DoubleRightArr_u",EDMmlFormulaIndex[EDMmlFormulaIndex.DoubleRightArr_o=100624]="DoubleRightArr_o",EDMmlFormulaIndex[EDMmlFormulaIndex.DbLongRightArr_uo=100625]="DbLongRightArr_uo",EDMmlFormulaIndex[EDMmlFormulaIndex.DbLongRightArr_u=100626]="DbLongRightArr_u",EDMmlFormulaIndex[EDMmlFormulaIndex.DbLongRightArr_o=100627]="DbLongRightArr_o",EDMmlFormulaIndex[EDMmlFormulaIndex.LongLeftRightArr_uo=100628]="LongLeftRightArr_uo",EDMmlFormulaIndex[EDMmlFormulaIndex.LongLeftRightArr_u=100629]="LongLeftRightArr_u",EDMmlFormulaIndex[EDMmlFormulaIndex.LongLeftRightArr_o=100630]="LongLeftRightArr_o",EDMmlFormulaIndex[EDMmlFormulaIndex.LeftArrRightArr_uo=100631]="LeftArrRightArr_uo",EDMmlFormulaIndex[EDMmlFormulaIndex.LeftArrRightArr_u=100632]="LeftArrRightArr_u",EDMmlFormulaIndex[EDMmlFormulaIndex.LeftArrRightArr_o=100633]="LeftArrRightArr_o",EDMmlFormulaIndex[EDMmlFormulaIndex.ReverseEquilibrium_uo=100634]="ReverseEquilibrium_uo",EDMmlFormulaIndex[EDMmlFormulaIndex.ReverseEquilibrium_u=100635]="ReverseEquilibrium_u",EDMmlFormulaIndex[EDMmlFormulaIndex.ReverseEquilibrium_o=100636]="ReverseEquilibrium_o",EDMmlFormulaIndex[EDMmlFormulaIndex.LongRArrShortLArr_uo=100637]="LongRArrShortLArr_uo",EDMmlFormulaIndex[EDMmlFormulaIndex.LongRArrShortLArr_u=100638]="LongRArrShortLArr_u",EDMmlFormulaIndex[EDMmlFormulaIndex.LongRArrShortLArr_o=100639]="LongRArrShortLArr_o",EDMmlFormulaIndex[EDMmlFormulaIndex.ShortRArrLongLArr_uo=100640]="ShortRArrLongLArr_uo",EDMmlFormulaIndex[EDMmlFormulaIndex.ShortRArrLongLArr_u=100641]="ShortRArrLongLArr_u",EDMmlFormulaIndex[EDMmlFormulaIndex.ShortRArrLongLArr_o=100642]="ShortRArrLongLArr_o",EDMmlFormulaIndex[EDMmlFormulaIndex.fX=100643]="fX",EDMmlFormulaIndex[EDMmlFormulaIndex.derivativeX=100644]="derivativeX",EDMmlFormulaIndex[EDMmlFormulaIndex.sinX=100645]="sinX",EDMmlFormulaIndex[EDMmlFormulaIndex.sin_X=100646]="sin_X",EDMmlFormulaIndex[EDMmlFormulaIndex.sin2X=100647]="sin2X",EDMmlFormulaIndex[EDMmlFormulaIndex.cosX=100648]="cosX",EDMmlFormulaIndex[EDMmlFormulaIndex.cos_X=100649]="cos_X",EDMmlFormulaIndex[EDMmlFormulaIndex.cos2X=100650]="cos2X",EDMmlFormulaIndex[EDMmlFormulaIndex.tanX=100651]="tanX",EDMmlFormulaIndex[EDMmlFormulaIndex.tan_X=100652]="tan_X",EDMmlFormulaIndex[EDMmlFormulaIndex.tan2X=100653]="tan2X",EDMmlFormulaIndex[EDMmlFormulaIndex.secX=100654]="secX",EDMmlFormulaIndex[EDMmlFormulaIndex.sec2X=100655]="sec2X",EDMmlFormulaIndex[EDMmlFormulaIndex.cscX=100656]="cscX",EDMmlFormulaIndex[EDMmlFormulaIndex.csc2X=100657]="csc2X",EDMmlFormulaIndex[EDMmlFormulaIndex.cotX=100658]="cotX",EDMmlFormulaIndex[EDMmlFormulaIndex.cot2X=100659]="cot2X",EDMmlFormulaIndex[EDMmlFormulaIndex.arcsinX=100660]="arcsinX",EDMmlFormulaIndex[EDMmlFormulaIndex.arccosX=100661]="arccosX",EDMmlFormulaIndex[EDMmlFormulaIndex.arctanX=100662]="arctanX",EDMmlFormulaIndex[EDMmlFormulaIndex.arccotX=100663]="arccotX",EDMmlFormulaIndex[EDMmlFormulaIndex.logX=100664]="logX",EDMmlFormulaIndex[EDMmlFormulaIndex.lgX=100665]="lgX",EDMmlFormulaIndex[EDMmlFormulaIndex.lnX=100666]="lnX",EDMmlFormulaIndex[EDMmlFormulaIndex.expX=100667]="expX",EDMmlFormulaIndex[EDMmlFormulaIndex.eX=100668]="eX",EDMmlFormulaIndex[EDMmlFormulaIndex.tenX=100669]="tenX",EDMmlFormulaIndex[EDMmlFormulaIndex.sup2=100670]="sup2",EDMmlFormulaIndex[EDMmlFormulaIndex.divided=100671]="divided",EDMmlFormulaIndex[EDMmlFormulaIndex.limX=100672]="limX",EDMmlFormulaIndex[EDMmlFormulaIndex.end=100673]="end"}(EDMmlFormulaIndex=EDMmlFormulaIndex||{}),!function(EDMmlNodeLayoutType){EDMmlNodeLayoutType[EDMmlNodeLayoutType.None=0]="None",EDMmlNodeLayoutType[EDMmlNodeLayoutType.LeftRight=1]="LeftRight",EDMmlNodeLayoutType[EDMmlNodeLayoutType.Left=2]="Left",EDMmlNodeLayoutType[EDMmlNodeLayoutType.Right=3]="Right",EDMmlNodeLayoutType[EDMmlNodeLayoutType.WithBar=4]="WithBar",EDMmlNodeLayoutType[EDMmlNodeLayoutType.Over=5]="Over",EDMmlNodeLayoutType[EDMmlNodeLayoutType.Under=6]="Under",EDMmlNodeLayoutType[EDMmlNodeLayoutType.UnerOver=7]="UnerOver",EDMmlNodeLayoutType[EDMmlNodeLayoutType.IndexOver=8]="IndexOver",EDMmlNodeLayoutType[EDMmlNodeLayoutType.IndexUnder=9]="IndexUnder",EDMmlNodeLayoutType[EDMmlNodeLayoutType.IndexUnderOver=10]="IndexUnderOver",EDMmlNodeLayoutType[EDMmlNodeLayoutType.Enclose=11]="Enclose",EDMmlNodeLayoutType[EDMmlNodeLayoutType.Single=12]="Single",EDMmlNodeLayoutType[EDMmlNodeLayoutType.SupSingle=13]="SupSingle"}(EDMmlNodeLayoutType=EDMmlNodeLayoutType||{}),!function(MathVariant){MathVariant[MathVariant.NormalMV=0]="NormalMV",MathVariant[MathVariant.BoldMV=1]="BoldMV",MathVariant[MathVariant.ItalicMV=2]="ItalicMV",MathVariant[MathVariant.DoubleStruckMV=4]="DoubleStruckMV",MathVariant[MathVariant.ScriptMV=8]="ScriptMV",MathVariant[MathVariant.FrakturMV=16]="FrakturMV",MathVariant[MathVariant.SansSerifMV=32]="SansSerifMV",MathVariant[MathVariant.MonospaceMV=64]="MonospaceMV"}(MathVariant=MathVariant||{}),!function(FormType){FormType[FormType.PrefixForm=0]="PrefixForm",FormType[FormType.InfixForm=1]="InfixForm",FormType[FormType.PostfixForm=2]="PostfixForm"}(FormType=FormType||{}),!function(ColAlign){ColAlign[ColAlign.ColAlignLeft=0]="ColAlignLeft",ColAlign[ColAlign.ColAlignCenter=1]="ColAlignCenter",ColAlign[ColAlign.ColAlignRight=2]="ColAlignRight"}(ColAlign=ColAlign||{}),!function(RowAlign){RowAlign[RowAlign.RowAlignTop=0]="RowAlignTop",RowAlign[RowAlign.RowAlignCenter=1]="RowAlignCenter",RowAlign[RowAlign.RowAlignBottom=2]="RowAlignBottom",RowAlign[RowAlign.RowAlignAxis=3]="RowAlignAxis",RowAlign[RowAlign.RowAlignBaseline=4]="RowAlignBaseline"}(RowAlign=RowAlign||{}),!function(FrameType){FrameType[FrameType.FrameNone=0]="FrameNone",FrameType[FrameType.FrameSolid=1]="FrameSolid",FrameType[FrameType.FrameDashed=2]="FrameDashed"}(FrameType=FrameType||{}),!function(SymbolType){SymbolType[SymbolType.Normal=0]="Normal",SymbolType[SymbolType.Arrow=1]="Arrow",SymbolType[SymbolType.Under=2]="Under",SymbolType[SymbolType.Over=3]="Over",SymbolType[SymbolType.Symbol=4]="Symbol",SymbolType[SymbolType.BoundingRect=5]="BoundingRect",SymbolType[SymbolType.Center=6]="Center"}(SymbolType=SymbolType||{}),!function(StretchDir){StretchDir[StretchDir.NoStretch=0]="NoStretch",StretchDir[StretchDir.HStretch=1]="HStretch",StretchDir[StretchDir.VStretch=2]="VStretch",StretchDir[StretchDir.HVStretch=3]="HVStretch"}(StretchDir=StretchDir||{}),!function(ChildSpec){ChildSpec[ChildSpec.ChildAny=-1]="ChildAny",ChildSpec[ChildSpec.ChildIgnore=-2]="ChildIgnore",ChildSpec[ChildSpec.ImplicitMrow=-3]="ImplicitMrow"}(ChildSpec=ChildSpec||{}),!function(MmlFont){MmlFont[MmlFont.NormalFont=0]="NormalFont",MmlFont[MmlFont.FrakturFont=1]="FrakturFont",MmlFont[MmlFont.SansSerifFont=2]="SansSerifFont",MmlFont[MmlFont.ScriptFont=3]="ScriptFont",MmlFont[MmlFont.MonospaceFont=4]="MonospaceFont",MmlFont[MmlFont.DoublestruckFont=5]="DoublestruckFont"}(MmlFont=MmlFont||{}),!function(EDRendAdjustBits){EDRendAdjustBits[EDRendAdjustBits.Nothing=0]="Nothing",EDRendAdjustBits[EDRendAdjustBits.translateLspace=1]="translateLspace",EDRendAdjustBits[EDRendAdjustBits.translateTxt=2]="translateTxt"}(EDRendAdjustBits=EDRendAdjustBits||{}),!function(EdrawMathDate){function EDMmlOperSpec(name,form,attributes,stretch_dir,symboltype){this.name=name,this.form=form,this.attributes=attributes,this.stretch_dir=stretch_dir,this.symboltype=symboltype}function EDMmlNodeSpec(type,tag,type_str,child_spec,child_types,attributes){this.type=type,this.tag=tag,this.type_str=type_str,this.child_spec=child_spec,this.child_types=child_types,this.attributes=attributes}function EDSaveData(mmltext,mousepoint){this.mmltext=mmltext,this.mousepoint=mousepoint}EdrawMathDate.FrameSpacing=function(hor,ver){this.hor=hor,this.ver=ver},EdrawMathDate.EDMmlOperSpec=EDMmlOperSpec,EdrawMathDate.EDMmlNodeSpec=EDMmlNodeSpec;function HSpacingValue(name,factor){this.name=name,this.factor=factor}function MathVariantValue(value,mv){this.value=value,this.mv=mv}function EDRenderingPosition(){this._nodeId=0,this._subPos=0,this._itemRect=new egRect(0,0,0,0)}function EDAddRendData(index,node,bits){void 0===node&&(node=null),void 0===bits&&(bits=EDRendAdjustBits.Nothing),this._index=index=void 0===index?0:index,this._node=node,this._bits=bits}EdrawMathDate.EDSaveData=EDSaveData;var OperSpecSearchResult=function(){function OperSpecSearchResult(){this.prefix_form=null,this.infix_form=null,this.postfix_form=null}return OperSpecSearchResult.prototype.getForm=function(form){switch(form){case FormType.PrefixForm:return this.prefix_form;case FormType.InfixForm:return this.infix_form;case FormType.PostfixForm:return this.postfix_form}return null},OperSpecSearchResult.prototype.haveForm=function(form){return null!=this.getForm(form)},OperSpecSearchResult.prototype.addForm=function(spec){switch(spec.form){case FormType.PrefixForm:this.prefix_form=spec;case FormType.InfixForm:this.infix_form=spec;case FormType.PostfixForm:this.postfix_form=spec}},OperSpecSearchResult}(),OperSpecSearchResult=(EdrawMathDate.OperSpecSearchResult=OperSpecSearchResult,EdrawMathDate.HSpacingValue=HSpacingValue,EdrawMathDate.MathVariantValue=MathVariantValue,EdrawMathDate.EDRenderingPosition=EDRenderingPosition,EdrawMathDate.EDAddRendData=EDAddRendData,function(){function CellSizeData(){this.col_widths=[],this.row_heights=[]}return CellSizeData.prototype.colWidthSum=function(){for(var w=0,i=0;i<this.col_widths.length;++i)w+=this.col_widths[i];return w},CellSizeData.prototype.rowHeightSum=function(){for(var h=0,i=0;i<this.row_heights.length;++i)h+=this.row_heights[i];return h},CellSizeData.prototype.init=function(first_row){this.col_widths.splice(0),this.row_heights.splice(0);for(var mtr=first_row;null!=mtr;mtr=mtr.nextSibling){if(mtr.nodeType!==EDMathMlNodeType.MtrNode)return;for(var col_cnt=0,mtd=mtr.firstChild;null!=mtd;mtd=mtd.nextSibling,++col_cnt){if(mtr.nodeType!==EDMathMlNodeType.MtrNode)return;var mtdmr=mtd.myRect;col_cnt===this.col_widths.length?this.col_widths.push(mtdmr.width):this.col_widths[col_cnt]-mtdmr.width<0&&(this.col_widths[col_cnt]=mtdmr.width)}this.row_heights.push(mtr.myRect.height)}},CellSizeData.prototype.numCols=function(){return this.col_widths.length},CellSizeData.prototype.numRows=function(){return this.row_heights.length},CellSizeData}()),OperSpecSearchResult=(EdrawMathDate.CellSizeData=OperSpecSearchResult,function(){function EDFont(mmlnodetype){void 0===mmlnodetype&&(mmlnodetype=EDMathMlNodeType.NoneNode),this.mmlnodetype=mmlnodetype,this.bold=!1,mmlnodetype===EDMathMlNodeType.MiNode?this.italic=!0:this.italic=!1,this.fontfamily="Times New Roman",this._pixelSize=20,this.strikeOutPos=.5*this._pixelSize}return EDFont.prototype.fontstring=function(){var italicstr="",boldstr=(this.italic&&(italicstr="italic"),"");return this.bold&&(boldstr="bold"),"".concat(italicstr," ").concat(boldstr," ").concat(this.pixelSize,"px '").concat(this.fontfamily,"',''")},Object.defineProperty(EDFont.prototype,"pixelSize",{get:function(){return this._pixelSize},set:function(pixelsize){0<pixelsize&&(this._pixelSize=pixelsize,this.strikeOutPos=.5*this.pixelSize)},enumerable:!1,configurable:!0}),EDFont}());EdrawMathDate.EDFont=OperSpecSearchResult}(EdrawMathDate=EdrawMathDate||{}),function(){function EDMMLEntityTable(){}return EDMMLEntityTable.initValueLookup=function(){var hash=new Map;return hash.set("Darr","&#x021A1;"),hash.set("DDotrahd","&#x02911;"),hash.set("Larr","&#x0219E;"),hash.set("Map","&#x02905;"),hash.set("Rarr","&#x021A0;"),hash.set("Rarrtl","&#x02916;"),hash.set("RBarr","&#x02910;"),hash.set("Uarr","&#x0219F;"),hash.set("Uarrocir","&#x02949;"),hash.set("Barwed","&#x02306;"),hash.set("Cap","&#x022D2;"),hash.set("Cup","&#x022D3;"),hash.set("Dagger","&#x02021;"),hash.set("Otimes","&#x02A37;"),hash.set("Barv","&#x02AE7;"),hash.set("Colon","&#x02237;"),hash.set("Colone","&#x02A74;"),hash.set("Dashv","&#x02AE4;"),hash.set("Esim","&#x02A73;"),hash.set("Gg","&#x022D9;"),hash.set("Gt","&#x0226B;"),hash.set("Ll","&#x022D8;"),hash.set("Lt","&#x0226A;"),hash.set("Pr","&#x02ABB;"),hash.set("Sc","&#x02ABC;"),hash.set("Sub","&#x022D0;"),hash.set("Sup","&#x022D1;"),hash.set("Vbar","&#x02AEB;"),hash.set("VDash","&#x022AB;"),hash.set("Vdash","&#x022A9;"),hash.set("Vdashl","&#x02AE6;"),hash.set("Vvdash","&#x022AA;"),hash.set("Delta","&#x00394;"),hash.set("Gamma","&#x00393;"),hash.set("Gammad","&#x003DC;"),hash.set("Lambda","&#x0039B;"),hash.set("Omega","&#x003A9;"),hash.set("Phi","&#x003A6;"),hash.set("Pi","&#x003A0;"),hash.set("pi","&#x003C0;"),hash.set("Psi","&#x003A8;"),hash.set("Sigma","&#x003A3;"),hash.set("Theta","&#x00398;"),hash.set("Upsi","&#x003D2;"),hash.set("Xi","&#x0039E;"),hash.set("Cfr","&#x0212D;"),hash.set("Hfr","&#x0210C;"),hash.set("Ifr","&#x02111;"),hash.set("Rfr","&#x0211C;"),hash.set("Zfr","&#x02128;"),hash.set("Copf","&#x02102;"),hash.set("Hopf","&#x0210D;"),hash.set("Nopf","&#x02115;"),hash.set("Popf","&#x02119;"),hash.set("Qopf","&#x0211A;"),hash.set("Ropf","&#x0211D;"),hash.set("Zopf","&#x02124;"),hash.set("Bscr","&#x0212C;"),hash.set("Escr","&#x02130;"),hash.set("Fscr","&#x02131;"),hash.set("Hscr","&#x0210B;"),hash.set("Iscr","&#x02110;"),hash.set("Lscr","&#x02112;"),hash.set("Mscr","&#x02133;"),hash.set("Rscr","&#x0211B;"),hash.set("And","&#x02A53;"),hash.set("Awint","&#x02A11;"),hash.set("Cconint","&#x02230;"),hash.set("Cwint","&#x02231;"),hash.set("DotDot","&#x020DC;"),hash.set("IInt","&#x0222C;"),hash.set("Lang","&#x0300A;"),hash.set("Lowast","&#x02217;"),hash.set("Not","&#x02AEC;"),hash.set("Or","&#x02A54;"),hash.set("Prime","&#x02033;"),hash.set("Rang","&#x0300B;"),hash.set("Acy","&#x00410;"),hash.set("Bcy","&#x00411;"),hash.set("CHcy","&#x00427;"),hash.set("Dcy","&#x00414;"),hash.set("Ecy","&#x0042D;"),hash.set("Fcy","&#x00424;"),hash.set("Gcy","&#x00413;"),hash.set("HARDcy","&#x0042A;"),hash.set("Icy","&#x00418;"),hash.set("IEcy","&#x00415;"),hash.set("IOcy","&#x00401;"),hash.set("Jcy","&#x00419;"),hash.set("Kcy","&#x0041A;"),hash.set("KHcy","&#x00425;"),hash.set("Lcy","&#x0041B;"),hash.set("Mcy","&#x0041C;"),hash.set("Ncy","&#x0041D;"),hash.set("Ocy","&#x0041E;"),hash.set("Pcy","&#x0041F;"),hash.set("Rcy","&#x00420;"),hash.set("Scy","&#x00421;"),hash.set("SHCHcy","&#x00429;"),hash.set("SHcy","&#x00428;"),hash.set("SOFTcy","&#x0042C;"),hash.set("Tcy","&#x00422;"),hash.set("TScy","&#x00426;"),hash.set("Ucy","&#x00423;"),hash.set("Vcy","&#x00412;"),hash.set("YAcy","&#x0042F;"),hash.set("Ycy","&#x0042B;"),hash.set("YUcy","&#x0042E;"),hash.set("Zcy","&#x00417;"),hash.set("ZHcy","&#x00416;"),hash.set("DJcy","&#x00402;"),hash.set("DScy","&#x00405;"),hash.set("DZcy","&#x0040F;"),hash.set("GJcy","&#x00403;"),hash.set("Iukcy","&#x00406;"),hash.set("Jsercy","&#x00408;"),hash.set("Jukcy","&#x00404;"),hash.set("KJcy","&#x0040C;"),hash.set("LJcy","&#x00409;"),hash.set("NJcy","&#x0040A;"),hash.set("TSHcy","&#x0040B;"),hash.set("Ubrcy","&#x0040E;"),hash.set("YIcy","&#x00407;"),hash.set("Aacute","&#x000C1;"),hash.set("Acirc","&#x000C2;"),hash.set("AElig","&#x000C6;"),hash.set("Agrave","&#x000C0;"),hash.set("Aring","&#x000C5;"),hash.set("Atilde","&#x000C3;"),hash.set("Auml","&#x000C4;"),hash.set("Ccedil","&#x000C7;"),hash.set("Eacute","&#x000C9;"),hash.set("Ecirc","&#x000CA;"),hash.set("Egrave","&#x000C8;"),hash.set("ETH","&#x000D0;"),hash.set("Euml","&#x000CB;"),hash.set("Iacute","&#x000CD;"),hash.set("Icirc","&#x000CE;"),hash.set("Igrave","&#x000CC;"),hash.set("Iuml","&#x000CF;"),hash.set("Ntilde","&#x000D1;"),hash.set("Oacute","&#x000D3;"),hash.set("Ocirc","&#x000D4;"),hash.set("Ograve","&#x000D2;"),hash.set("Oslash","&#x000D8;"),hash.set("Otilde","&#x000D5;"),hash.set("Ouml","&#x000D6;"),hash.set("THORN","&#x000DE;"),hash.set("Uacute","&#x000DA;"),hash.set("Ucirc","&#x000DB;"),hash.set("Ugrave","&#x000D9;"),hash.set("Uuml","&#x000DC;"),hash.set("Yacute","&#x000DD;"),hash.set("Abreve","&#x00102;"),hash.set("Amacr","&#x00100;"),hash.set("Aogon","&#x00104;"),hash.set("Cacute","&#x00106;"),hash.set("Ccaron","&#x0010C;"),hash.set("Ccirc","&#x00108;"),hash.set("Cdot","&#x0010A;"),hash.set("Dcaron","&#x0010E;"),hash.set("Dstrok","&#x00110;"),hash.set("Ecaron","&#x0011A;"),hash.set("Edot","&#x00116;"),hash.set("Emacr","&#x00112;"),hash.set("ENG","&#x0014A;"),hash.set("Eogon","&#x00118;"),hash.set("Gbreve","&#x0011E;"),hash.set("Gcedil","&#x00122;"),hash.set("Gcirc","&#x0011C;"),hash.set("Gdot","&#x00120;"),hash.set("Hcirc","&#x00124;"),hash.set("Hstrok","&#x00126;"),hash.set("Idot","&#x00130;"),hash.set("IJlig","&#x00132;"),hash.set("Iogon","&#x0012E;"),hash.set("Itilde","&#x00128;"),hash.set("Jcirc","&#x00134;"),hash.set("Kcedil","&#x00136;"),hash.set("Lacute","&#x00139;"),hash.set("Lcaron","&#x0013D;"),hash.set("Lcedil","&#x0013B;"),hash.set("Lmidot","&#x0013F;"),hash.set("Lstrok","&#x00141;"),hash.set("Nacute","&#x00143;"),hash.set("Ncaron","&#x00147;"),hash.set("Ncedil","&#x00145;"),hash.set("Odblac","&#x00150;"),hash.set("OElig","&#x00152;"),hash.set("Omacr","&#x0014C;"),hash.set("Racute","&#x00154;"),hash.set("Rcaron","&#x00158;"),hash.set("Rcedil","&#x00156;"),hash.set("Sacute","&#x0015A;"),hash.set("Scaron","&#x00160;"),hash.set("Scedil","&#x0015E;"),hash.set("Scirc","&#x0015C;"),hash.set("Tcaron","&#x00164;"),hash.set("Tcedil","&#x00162;"),hash.set("Tstrok","&#x00166;"),hash.set("Ubreve","&#x0016C;"),hash.set("Udblac","&#x00170;"),hash.set("Umacr","&#x0016A;"),hash.set("Uogon","&#x00172;"),hash.set("Uring","&#x0016E;"),hash.set("Utilde","&#x00168;"),hash.set("Wcirc","&#x00174;"),hash.set("Ycirc","&#x00176;"),hash.set("Yuml","&#x00178;"),hash.set("Zacute","&#x00179;"),hash.set("Zcaron","&#x0017D;"),hash.set("Zdot","&#x0017B;"),hash.set("equals","&#x0003D;"),hash.set("Dagger","&#x02021;"),hash.set("Cross","&#x02A2F;"),hash.set("DD","&#x02145;"),hash.set("DownArrowBar","&#x02913;"),hash.set("DownBreve","&#x00311;"),hash.set("DownLeftRightVector","&#x02950;"),hash.set("DownLeftTeeVector","&#x0295E;"),hash.set("DownLeftVectorBar","&#x02956;"),hash.set("DownRightTeeVector","&#x0295F;"),hash.set("DownRightVectorBar","&#x02957;"),hash.set("EmptySmallSquare","&#x025FB;"),hash.set("EmptyVerySmallSquare","&#x025AB;"),hash.set("Equal","&#x02A75;"),hash.set("FilledSmallSquare","&#x025FC;"),hash.set("FilledVerySmallSquare","&#x025AA;"),hash.set("GreaterGreater","&#x02AA2;"),hash.set("Hat","&#x0005E;"),hash.set("HatDown","&#x01A06;"),hash.set("HatUp","&#x01A08;"),hash.set("HorizontalLine","&#x02500;"),hash.set("LeftDownTeeVector","&#x02961;"),hash.set("LeftDownVectorBar","&#x02959;"),hash.set("LeftRightVector","&#x0294E;"),hash.set("LeftTeeVector","&#x0295A;"),hash.set("LeftTriangleBar","&#x029CF;"),hash.set("LeftUpDownVector","&#x02951;"),hash.set("LeftUpTeeVector","&#x02960;"),hash.set("LeftUpVectorBar","&#x02958;"),hash.set("LeftVectorBar","&#x02952;"),hash.set("LessLess","&#x02AA1;"),hash.set("MediumSpace","&#x0205F;"),hash.set("NewLine","&#x0000A;"),hash.set("NoBreak","&#x02060;"),hash.set("NotCupCap","&#x0226D;"),hash.set("NotHumpEqual","&#x0224F;&#x00338;"),hash.set("NotLeftTriangleBar","&#x029CF;&#x00338;"),hash.set("NotNestedGreaterGreater","&#x02AA2;&#x00338;"),hash.set("NotNestedLessLess","&#x02AA1;&#x00338;"),hash.set("NotRightTriangleBar","&#x029D0;&#x00338;"),hash.set("NotSquareSubset","&#x0228F;&#x00338;"),hash.set("NotSquareSuperset","&#x02290;&#x00338;"),hash.set("NotSucceedsTilde","&#x0227F;&#x00338;"),hash.set("OverBar","&#x000AF;"),hash.set("OverBrace","&#x0FE37;"),hash.set("OverBracket","&#x023B4;"),hash.set("OverParenthesis","&#x0FE35;"),hash.set("Product","&#x0220F;"),hash.set("RightDownTeeVector","&#x0295D;"),hash.set("RightDownVectorBar","&#x02955;"),hash.set("RightTeeVector","&#x0295B;"),hash.set("RightTriangleBar","&#x029D0;"),hash.set("RightUpDownVector","&#x0294F;"),hash.set("RightUpTeeVector","&#x0295C;"),hash.set("RightUpVectorBar","&#x02954;"),hash.set("RightVectorBar","&#x02953;"),hash.set("RoundImplies","&#x02970;"),hash.set("RuleDelayed","&#x029F4;"),hash.set("Tab","&#x00009;"),hash.set("UnderBar","&#x00332;"),hash.set("UnderBrace","&#x0FE38;"),hash.set("UnderBracket","&#x023B5;"),hash.set("UnderParenthesis","&#x0FE36;"),hash.set("UpArrowBar","&#x02912;"),hash.set("Upsilon","&#x003A5;"),hash.set("VerticalLine","&#x0007C;"),hash.set("VerticalSeparator","&#x02758;"),hash.set("ZeroWidthSpace","&#x0200B;"),hash.set("ApplyFunction","&#x02061;"),hash.set("Assign","&#x02254;"),hash.set("Backslash","&#x02216;"),hash.set("Because","&#x02235;"),hash.set("Bernoullis","&#x0212C;"),hash.set("Breve","&#x002D8;"),hash.set("Bumpeq","&#x0224E;"),hash.set("CapitalDifferentialD","&#x02145;"),hash.set("Cayleys","&#x0212D;"),hash.set("Cedilla","&#x000B8;"),hash.set("CenterDot","&#x000B7;"),hash.set("CircleDot","&#x02299;"),hash.set("CircleMinus","&#x02296;"),hash.set("CirclePlus","&#x02295;"),hash.set("CircleTimes","&#x02297;"),hash.set("ClockwiseContourIntegral","&#x02232;"),hash.set("CloseCurlyDoubleQuote","&#x0201D;"),hash.set("CloseCurlyQuote","&#x02019;"),hash.set("Congruent","&#x02261;"),hash.set("ContourIntegral","&#x0222E;"),hash.set("Coproduct","&#x02210;"),hash.set("CounterClockwiseContourIntegral","&#x02233;"),hash.set("CupCap","&#x0224D;"),hash.set("Del","&#x02207;"),hash.set("DiacriticalAcute","&#x000B4;"),hash.set("DiacriticalDot","&#x002D9;"),hash.set("DiacriticalDoubleAcute","&#x002DD;"),hash.set("DiacriticalGrave","&#x00060;"),hash.set("DiacriticalTilde","&#x002DC;"),hash.set("Diamond","&#x022C4;"),hash.set("DifferentialD","&#x02146;"),hash.set("DotEqual","&#x02250;"),hash.set("DoubleContourIntegral","&#x0222F;"),hash.set("DoubleDot","&#x000A8;"),hash.set("DoubleDownArrow","&#x021D3;"),hash.set("DoubleLeftArrow","&#x021D0;"),hash.set("DoubleLeftRightArrow","&#x021D4;"),hash.set("DoubleLeftTee","&#x02AE4;"),hash.set("DoubleLongLeftArrow","&#x027F8;"),hash.set("DoubleLongLeftRightArrow","&#x027FA;"),hash.set("DoubleLongRightArrow","&#x027F9;"),hash.set("DoubleRightArrow","&#x021D2;"),hash.set("DoubleRightTee","&#x022A8;"),hash.set("DoubleUpArrow","&#x021D1;"),hash.set("DoubleUpDownArrow","&#x021D5;"),hash.set("DoubleVerticalBar","&#x02225;"),hash.set("DownArrow","&#x02193;"),hash.set("DownArrowUpArrow","&#x021F5;"),hash.set("DownLeftVector","&#x021BD;"),hash.set("DownRightVector","&#x021C1;"),hash.set("DownTee","&#x022A4;"),hash.set("DownTeeArrow","&#x021A7;"),hash.set("Element","&#x02208;"),hash.set("EqualTilde","&#x02242;"),hash.set("Equilibrium","&#x021CC;"),hash.set("Exists","&#x02203;"),hash.set("ExponentialE","&#x02147;"),hash.set("ForAll","&#x02200;"),hash.set("Fouriertrf","&#x02131;"),hash.set("gneqq","&#x02269;"),hash.set("GreaterEqualLess","&#x022DB;"),hash.set("GreaterFullEqual","&#x02267;"),hash.set("GreaterLess","&#x02277;"),hash.set("GreaterSlantEqual","&#x02A7E;"),hash.set("GreaterTilde","&#x02273;"),hash.set("Hacek","&#x002C7;"),hash.set("HilbertSpace","&#x0210B;"),hash.set("HumpDownHump","&#x0224E;"),hash.set("HumpEqual","&#x0224F;"),hash.set("IIIInt","&#x02A0C;"),hash.set("IIInt","&#x0222D;"),hash.set("Im","&#x02111;"),hash.set("ImaginaryI","&#x02148;"),hash.set("Integral","&#x0222B;"),hash.set("Intersection","&#x022C2;"),hash.set("InvisibleComma","&#x02063;"),hash.set("InvisibleTimes","&#x02062;"),hash.set("Laplacetrf","&#x02112;"),hash.set("LeftAngleBracket","&#x02329;"),hash.set("LeftArrow","&#x02190;"),hash.set("LeftArrowBar","&#x021E4;"),hash.set("LeftArrowRightArrow","&#x021C6;"),hash.set("LeftCeiling","&#x02308;"),hash.set("LeftDoubleBracket","&#x0301A;"),hash.set("LeftDownVector","&#x021C3;"),hash.set("LeftFloor","&#x0230A;"),hash.set("LeftRightArrow","&#x02194;"),hash.set("LeftTee","&#x022A3;"),hash.set("LeftTeeArrow","&#x021A4;"),hash.set("LeftTriangle","&#x022B2;"),hash.set("LeftTriangleEqual","&#x022B4;"),hash.set("LeftUpVector","&#x021BF;"),hash.set("LeftVector","&#x021BC;"),hash.set("LessEqualGreater","&#x022DA;"),hash.set("LessFullEqual","&#x02266;"),hash.set("LessGreater","&#x02276;"),hash.set("LessSlantEqual","&#x02A7D;"),hash.set("LessTilde","&#x02272;"),hash.set("Lleftarrow","&#x021DA;"),hash.set("LongLeftArrow","&#x027F5;"),hash.set("LongLeftRightArrow","&#x027F7;"),hash.set("LongRightArrow","&#x027F6;"),hash.set("LowerLeftArrow","&#x02199;"),hash.set("LowerRightArrow","&#x02198;"),hash.set("Lsh","&#x021B0;"),hash.set("Mellintrf","&#x02133;"),hash.set("MinusPlus","&#x02213;"),hash.set("NestedGreaterGreater","&#x0226B;"),hash.set("NestedLessLess","&#x0226A;"),hash.set("NonBreakingSpace","&#x000A0;"),hash.set("NotCongruent","&#x02262;"),hash.set("NotDoubleVerticalBar","&#x02226;"),hash.set("NotElement","&#x02209;"),hash.set("NotEqual","&#x02260;"),hash.set("NotEqualTilde","&#x02242;&#x00338;"),hash.set("NotExists","&#x02204;"),hash.set("NotGreater","&#x0226F;"),hash.set("NotGreaterEqual","&#x02271;"),hash.set("NotGreaterFullEqual","&#x02266;&#x00338;"),hash.set("NotGreaterGreater","&#x0226B;&#x00338;"),hash.set("NotGreaterLess","&#x02279;"),hash.set("NotGreaterSlantEqual","&#x02A7E;&#x00338;"),hash.set("NotGreaterTilde","&#x02275;"),hash.set("NotHumpDownHump","&#x0224E;&#x00338;"),hash.set("NotLeftTriangle","&#x022EA;"),hash.set("NotLeftTriangleEqual","&#x022EC;"),hash.set("NotLess","&#x0226E;"),hash.set("NotLessEqual","&#x02270;"),hash.set("NotLessGreater","&#x02278;"),hash.set("NotLessLess","&#x0226A;&#x00338;"),hash.set("NotLessSlantEqual","&#x02A7D;&#x00338;"),hash.set("NotLessTilde","&#x02274;"),hash.set("NotPrecedes","&#x02280;"),hash.set("NotPrecedesEqual","&#x02AAF;&#x00338;"),hash.set("NotPrecedesSlantEqual","&#x022E0;"),hash.set("NotReverseElement","&#x0220C;"),hash.set("NotRightTriangle","&#x022EB;"),hash.set("NotRightTriangleEqual","&#x022ED;"),hash.set("NotSquareSubsetEqual","&#x022E2;"),hash.set("NotSquareSupersetEqual","&#x022E3;"),hash.set("NotSubset","&#x02282;&#x020D2;"),hash.set("NotSubsetEqual","&#x02288;"),hash.set("NotSucceeds","&#x02281;"),hash.set("NotSucceedsEqual","&#x02AB0;&#x00338;"),hash.set("NotSucceedsSlantEqual","&#x022E1;"),hash.set("NotSuperset","&#x02283;&#x020D2;"),hash.set("NotSupersetEqual","&#x02289;"),hash.set("NotTilde","&#x02241;"),hash.set("NotTildeEqual","&#x02244;"),hash.set("NotTildeFullEqual","&#x02247;"),hash.set("NotTildeTilde","&#x02249;"),hash.set("NotVerticalBar","&#x02224;"),hash.set("OpenCurlyDoubleQuote","&#x0201C;"),hash.set("OpenCurlyQuote","&#x02018;"),hash.set("PartialD","&#x02202;"),hash.set("PlusMinus","&#x000B1;"),hash.set("Poincareplane","&#x0210C;"),hash.set("Precedes","&#x0227A;"),hash.set("PrecedesEqual","&#x02AAF;"),hash.set("PrecedesSlantEqual","&#x0227C;"),hash.set("PrecedesTilde","&#x0227E;"),hash.set("Proportion","&#x02237;"),hash.set("Proportional","&#x0221D;"),hash.set("Re","&#x0211C;"),hash.set("ReverseElement","&#x0220B;"),hash.set("ReverseEquilibrium","&#x021CB;"),hash.set("ReverseUpEquilibrium","&#x0296F;"),hash.set("RightAngleBracket","&#x0232A;"),hash.set("RightArrow","&#x02192;"),hash.set("RightArrowBar","&#x021E5;"),hash.set("RightArrowLeftArrow","&#x021C4;"),hash.set("RightCeiling","&#x02309;"),hash.set("RightDoubleBracket","&#x0301B;"),hash.set("RightDownVector","&#x021C2;"),hash.set("RightFloor","&#x0230B;"),hash.set("RightTee","&#x022A2;"),hash.set("RightTeeArrow","&#x021A6;"),hash.set("RightTriangle","&#x022B3;"),hash.set("RightTriangleEqual","&#x022B5;"),hash.set("RightUpVector","&#x021BE;"),hash.set("RightVector","&#x021C0;"),hash.set("Rsh","&#x021B1;"),hash.set("ShortDownArrow","&#x02193;"),hash.set("ShortUpArrow","&#x02191;"),hash.set("SmallCircle","&#x02218;"),hash.set("Sqrt","&#x0221A;"),hash.set("Square","&#x025A1;"),hash.set("SquareIntersection","&#x02293;"),hash.set("SquareSubset","&#x0228F;"),hash.set("SquareSubsetEqual","&#x02291;"),hash.set("SquareSuperset","&#x02290;"),hash.set("SquareSupersetEqual","&#x02292;"),hash.set("SquareUnion","&#x02294;"),hash.set("Star","&#x022C6;"),hash.set("Subset","&#x022D0;"),hash.set("SubsetEqual","&#x02286;"),hash.set("Succeeds","&#x0227B;"),hash.set("SucceedsEqual","&#x02AB0;"),hash.set("SucceedsSlantEqual","&#x0227D;"),hash.set("SucceedsTilde","&#x0227F;"),hash.set("SuchThat","&#x0220B;"),hash.set("Sum","&#x02211;"),hash.set("Superset","&#x02283;"),hash.set("SupersetEqual","&#x02287;"),hash.set("Supset","&#x022D1;"),hash.set("ThinSpace","&#x02009;"),hash.set("Tilde","&#x0223C;"),hash.set("TildeEqual","&#x02243;"),hash.set("TildeFullEqual","&#x02245;"),hash.set("TildeTilde","&#x02248;"),hash.set("TripleDot","&#x020DB;"),hash.set("Union","&#x022C3;"),hash.set("UnionPlus","&#x0228E;"),hash.set("UpArrow","&#x02191;"),hash.set("UpArrowDownArrow","&#x021C5;"),hash.set("UpDownArrow","&#x02195;"),hash.set("UpEquilibrium","&#x0296E;"),hash.set("UpperLeftArrow","&#x02196;"),hash.set("UpperRightArrow","&#x02197;"),hash.set("UpTee","&#x022A5;"),hash.set("UpTeeArrow","&#x021A5;"),hash.set("Vee","&#x022C1;"),hash.set("VerticalBar","&#x02223;"),hash.set("VerticalTilde","&#x02240;"),hash.set("VeryThinSpace","&#x0200A;"),hash.set("Wedge","&#x022C0;"),hash},EDMMLEntityTable.prototype.entities=function(text){return 0<text.length&&text[0].replace("<math>",'<math display="block" xmlns="http://www.w3.org/1998/Math/MathML">'),""},EDMMLEntityTable.prototype.search=function(value){var list=[];return EDMMLEntityTable.valueLookup.forEach(function(envalue,enkey){envalue===value&&list.push(enkey)}),list},EDMMLEntityTable.valueLookup=EDMMLEntityTable.initValueLookup(),EDMMLEntityTable}()),__extends=(!function(EdrawMathDate){var EDStatic=function(){function EDStatic(){EDStatic.g_symboldata=new Map,EDStatic.g_symboldata.set(EDMmlFormulaIndex.le,"<mo>&#x2264;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.ge,"<mo>&#x2265;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.ll,"<mo>&#x226A;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.gg,"<mo>&#x226B;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.prec,"<mo>&#x227A;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.succ,"<mo>&#x227B;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.triangleleft,"<mo>&#x22B2;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.triangleright,"<mo>&#x22B3;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.thicksim,"<mo>&#x223C;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.asymp,"<mo>&#x2248;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.simeq,"<mo>&#x2243;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.cong,"<mo>&#x2245;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.ne,"<mo>&#x2260;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.equiv,"<mo>&#x2261;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.triangleq,"<mo>&#x225C;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.hateq,"<mo>&#x2259;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.doteq,"<mo>&#x2250;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.prop,"<mo>&#x221D;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.Indentation,"<mo>isIndentation!</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.Space_1,"<mo>isSpace_1!</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.Space_2,"<mo>isSpace_2!</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.Space_3,"<mo>isSpace_3!</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.Space_4,"<mo>isSpace_4!</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.Space_5,"<mo>isSpace_5!</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.Symbol_LRightArrSLeftArr,"<mo>&#xF2192;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.Symbol_SRightArrLLeftArr,"<mo>&#xF2190;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.Symbol_LRightVerSLeftVer,"<mo>&#xF21C0;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.Symbol_SRightVerLLeftVer,"<mo>&#xF21BD;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.hellip,"<mo>&#x2026;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.mellip,"<mo>&#x22EF;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.vellip,"<mo>&#x22EE;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.urellip,"<mo>&#x22F0;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.rrellip,"<mo>&#x22F1;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.plusmn,"<mo>&#x00B1;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.minusPlus,"<mo>&#x2213;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.times,"<mo>&#x00D7;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.lowast,"<mo>&#x2217;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.div,"<mo>&#x00F7;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.oplus,"<mo>&#x2295;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.otimes,"<mo>&#x2297;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.odot,"<mo>&#x2299;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.sdot,"<mo>&#x22C5;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.centerdot,"<mo>&#x00B7;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.bullet,"<mo>&#x2022;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.scirc,"<mo>&#x2218;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.langle,"<mo>&#x2329;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.rangle,"<mo>&#x232A;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.lobrk,"<mo>&#x301A;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.robrk,"<mo>&#x301B;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.LeftRightArr,"<mo>&#x2194;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.RightArr,"<mo>&#x2192;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.LeftArr,"<mo>&#x2190;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.UpDownArrow,"<mo>&#x2195;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.UpArrow,"<mo>&#x2191;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.DownArrow,"<mo>&#x2193;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.DoubleLeftRightArr,"<mo>&#x21D4;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.DoubleRightArr,"<mo>&#x21D2;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.DoubleLeftArr,"<mo>&#x21D0;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.DoubleUpDownArr,"<mo>&#x21D5;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.DoubleUpArr,"<mo>&#x21D1;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.DoubleDownArr,"<mo>&#x21D3;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.LLeftURightArr,"<mo>&#x2922;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.UpperRightArr,"<mo>&#x2197;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.LowerLeftArr,"<mo>&#x2199;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.ULeftLRightArr,"<mo>&#x2921;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.LowerRightArr,"<mo>&#x2198;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.UpperLeftArr,"<mo>&#x2196;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.RightArrLeftArr,"<mo>&#x21C4;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.Equilibrium,"<mo>&#x21CC;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.RightTeeArr,"<mo>&#x21A6;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.enter,"<mo>&#x21B5;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.there4,"<mo>&#x2234;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.becaus,"<mo>&#x2235;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.backepsilon,"<mo>&#x220D;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.exist,"<mo>&#x2203;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.forall,"<mo>&#x2200;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.Not,"<mo>&#x00AC;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.And,"<mo>&#x2227;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.Or,"<mo>&#x2228;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.isin,"<mo>&#x2208;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.notin,"<mo>&#x2209;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.cup,"<mo>&#x222A;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.cap,"<mo>&#x2229;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.Union,"<mo>&#x22C3;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.Intersection,"<mo>&#x22C2;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.sub,"<mo>&#x2282;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.sup,"<mo>&#x2283;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.sube,"<mo>&#x2286;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.supe,"<mo>&#x2287;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.nsub,"<mo>&#x2284;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.empty,"<mo>&#x2205;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.part,"<mo>&#x2202;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.wp,"<mo>&#x2118;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.Im,"<mo>&#x2111;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.Re,"<mo>&#x211C;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.aleph,"<mo>&#x2135;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.Ropf,"<mo>&#x211D;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.Zopf,"<mo>&#x2124;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.Copf,"<mo>&#x2102;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.Qopf,"<mo>&#x211A;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.Nopf,"<mo>&#x2115;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.infin,"<mo>&#x221E;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.hbar,"<mo>&#x210F;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.hlambda,"<mo>&#x019B;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.ell,"<mo>&#x2113;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.dagger,"<mo>&#x2020;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.Delta,"<mo>&#x0394;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.nabla,"<mo>&#x2207;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.Omega,"<mo>&#x03A9;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.mho,"<mo>&#x2127;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.diamond,"<mo>&#x22C4;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.Sum,"<mo>&#x2211;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.prod,"<mo>&#x220F;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.coprod,"<mo>&#x2210;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.Int,"<mo>&#x222B;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.circ,"<mo>&#x00B0;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.ang,"<mo>&#x2220;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.measuredangle,"<mo>&#x2221;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.sphericalangle,"<mo>&#x2222;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.perp,"<mo>&#x22A5;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.parallel,"<mo>&#x2225;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.bigtriangleup,"<mo>&#x25B3;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.square,"<mo>&#x25A1;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.rect,"<mo>&#x25AD;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.quad,"<mo>&#x25B1;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.bigcirc,"<mo>&#x25CB;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.alpha,"<mo>&#x03B1;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.beta,"<mo>&#x03B2;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.chi,"<mo>&#x03C7;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.delta,"<mo>&#x03B4;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.epsilon,"<mo>&#x03B5;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.lphi,"<mo>&#x03D5;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.phi,"<mo>&#x03C6;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.gamma,"<mo>&#x03B3;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.eta,"<mo>&#x03B7;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.iota,"<mo>&#x03B9;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.kappa,"<mo>&#x03BA;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.lambda,"<mo>&#x03BB;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.mu,"<mo>&#x03BC;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.nu,"<mo>&#x03BD;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.omicron,"<mo>&#x03BF;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.pi,"<mo>&#x03C0;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.piv,"<mo>&#x03D6;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.theta,"<mo>&#x03B8;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.thetasym,"<mo>&#x03D1;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.rho,"<mo>&#x03C1;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.sigma,"<mo>&#x03C3;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.sigmaf,"<mo>&#x03C2;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.tau,"<mo>&#x03C4;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.upsilon,"<mo>&#x03C5;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.omega,"<mo>&#x03C9;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.xi,"<mo>&#x03BE;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.psi,"<mo>&#x03C8;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.zeta,"<mo>&#x03B6;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.Alpha,"<mo>&#x0391;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.Beta,"<mo>&#x0392;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.Chi,"<mo>&#x03A7;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.Epsilon,"<mo>&#x0395;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.Phi,"<mo>&#x03A6;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.Gamma,"<mo>&#x0393;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.Eta,"<mo>&#x0397;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.Iota,"<mo>&#x0399;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.Kappa,"<mo>&#x039A;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.Lambda,"<mo>&#x039B;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.Mu,"<mo>&#x039C;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.Nu,"<mo>&#x039D;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.Omicron,"<mo>&#x039F;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.Pi,"<mo>&#x03A0;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.Theta,"<mo>&#x0398;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.Rho,"<mo>&#x03A1;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.Sigma,"<mo>&#x03A3;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.Tau,"<mo>&#x03A4;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.upsih,"<mo>&#x03D2;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.Xi,"<mo>&#x039E;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.Psi,"<mo>&#x03A8;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.Zeta,"<mo>&#x0396;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.d,"<mo>d</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.sin,"<mo>sin</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.cos,"<mo>cos</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.tan,"<mo>tan</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.sec,"<mo>sec</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.csc,"<mo>csc</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.cot,"<mo>cot</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.arcsin,"<mo>arcsin</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.arccos,"<mo>arccos</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.arctan,"<mo>arctan</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.arccot,"<mo>arccot</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.log,"<mo>log</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.lg,"<mo>lg</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.ln,"<mo>ln</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.exp,"<mo>exp</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.ch,"<mo>ch</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.sh,"<mo>sh</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.lim,"<mo>lim</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.max,"<mo>max</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.min,"<mo>min</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.ni,"<mo>&#x220B;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.sum,"<mo>&#x2211;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.minus,"<mo>&#x2212;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.radic,"<mo>&#x221A;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.lceil,"<mo>&#x2308;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.rceil,"<mo>&#x2309;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.lfloor,"<mo>&#x230A;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.rfloor,"<mo>&#x230B;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.DoubleInt,"<mo>&#x222C;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.TripleInt,"<mo>&#x222D;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.ContourInt,"<mo>&#x222E;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.SurfaceInt,"<mo>&#x222F;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.VolumeInt,"<mo>&#x2230;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.ClockwiseContInt,"<mo>&#x2232;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.CtClockwiseContInt,"<mo>&#x2233;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.LongLeftArr,"<mo>&#x27F5;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.LeftTeeArr,"<mo>&#x21A4;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.DbLongLeftArr,"<mo>&#x27F8;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.LongRightArr,"<mo>&#x27F6;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.DbLongRightArr,"<mo>&#x27F9;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.LongLeftRightArr,"<mo>&#x27F7;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.LeftArrRightArr,"<mo>&#x21C6;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.ReverseEquilibrium,"<mo>&#x21CB;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.LongRArrShortLArr,"<mo>&#x2942;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.ShortRArrLongLArr,"<mo>&#x2944;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.Upsilon,"<mo>&#x03A5;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_a,"a"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_b,"b"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_c,"c"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_d,"d"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_e,"e"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_f,"f"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_g,"g"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_h,"h"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_i,"i"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_j,"j"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_k,"k"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_l,"l"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_m,"m"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_n,"n"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_o,"o"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_p,"p"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_q,"q"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_r,"r"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_s,"s"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_t,"t"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_u,"u"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_v,"v"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_w,"w"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_x,"x"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_y,"y"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_z,"z"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_A,"A"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_B,"B"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_C,"C"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_D,"D"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_E,"E"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_F,"F"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_G,"G"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_H,"H"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_I,"I"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_J,"J"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_K,"K"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_L,"L"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_M,"M"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_N,"N"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_O,"O"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_P,"P"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_Q,"Q"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_R,"R"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_S,"S"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_T,"T"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_U,"U"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_V,"V"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_W,"W"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_X,"X"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_Y,"Y"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_Z,"Z"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_1,"1"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_2,"2"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_3,"3"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_4,"4"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_5,"5"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_6,"6"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_7,"7"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_8,"8"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_9,"9"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_0,"0"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_x21,"!"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_x22,'"'),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_x23,"#"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_x24,"$"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_x25,"%"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_x26,"&"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_x27,"'"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_x28,"("),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_x29,")"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_x2B,"+"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_x2C,","),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_x2D,"-"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_x2E,"."),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_x3A,":"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_x3B,";"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_x3C,"<"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_x3D,"="),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_x3E,">"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_x3F,"?"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_x40,"@"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_x5B,"["),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_x5D,"]"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_x7B,"{"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_x7D,"}"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_xB0,""),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_x58x61,":="),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_x2032,"<mo>&#x2032;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_x2033,"<mo>&#x2033;</mo>"),EDStatic.g_symboldata.set(EDMmlFormulaIndex.key_x225f,"<mo>&#x225f;</mo>"),EDStatic.g_special_conversion=new Map,EDStatic.g_special_conversion.set("isIndentation!","#x200C;"),EDStatic.g_special_conversion.set("isSpace_1!","#x2008;"),EDStatic.g_special_conversion.set("isSpace_2!","#x2009;"),EDStatic.g_special_conversion.set("isSpace_3!","#x200A;"),EDStatic.g_special_conversion.set("isSpace_4!","#x200B;"),EDStatic.g_special_conversion.set("isSpace_5!","#x2003;"),EDStatic.g_special_conversion.set(" ","#x2009;"),EDStatic.g_special_conversion.set("","#xF2190;"),EDStatic.g_special_conversion.set("","#xF2192;"),EDStatic.g_special_conversion.set("","#xF21BD;"),EDStatic.g_special_conversion.set("","#xF21C0;"),EDStatic.g_arrowtext4replace=new Map,EDStatic.g_arrowtext4replace.set("<mo>&#xF2192;</mo>","<munder><mo>&#x2192;</mo><mo>&#x2190;</mo></munder>"),EDStatic.g_arrowtext4replace.set("<mo>&#xF2190;</mo>","<mover><mo>&#x2190;</mo><mo>&#x2192;</mo></mover>"),EDStatic.g_arrowtext4replace.set("<mo>&#xF21C0;</mo>","<munder><mo>&#x21C0;</mo><mo>&#x21BD;</mo></munder>"),EDStatic.g_arrowtext4replace.set("<mo>&#xF21BD;</mo>","<mover><mo>&#x21BD;</mo><mo>&#x21C0;</mo></mover>")}return EDStatic.mmlFindNodeSpec_type=function(type){for(var _i=0,_a=EDStatic.g_node_spec_data;_i<_a.length;_i++){var spec=_a[_i];if(type==spec.type)return spec;if(spec.type==EDMathMlNodeType.NoNode)break}return null},EDStatic.mmlFindNodeSpec_tag=function(tag){for(var _i=0,_a=EDStatic.g_node_spec_data;_i<_a.length;_i++){var spec=_a[_i];if(tag==spec.tag)return spec;if(spec.type==EDMathMlNodeType.NoNode)break}return null},EDStatic.mmlCheckChildType=function(parent_type,child_type,error_str){var allowed_child_types,child_type_str;return!(parent_type!=EDMathMlNodeType.UnknownNode&&child_type!=EDMathMlNodeType.UnknownNode&&(child_type=EDStatic.mmlFindNodeSpec_type(child_type),null==(parent_type=EDStatic.mmlFindNodeSpec_type(parent_type))?(0<error_str.length&&(error_str[0]="parent_spec is null"),1):null==child_type?(0<error_str.length&&(error_str[0]="child_spec is null"),1):!(allowed_child_types=parent_type.child_types).isEmpty()&&(child_type_str=" "+child_type.type_str+" ",null==allowed_child_types.match(child_type_str))&&(0<error_str.length&&(error_str[0]="illegal child ".concat(child_type.type_str," for parent ").concat(parent_type.type_str)),1)))},EDStatic.mmlCheckAttributes=function(child_type,attr,error_str){var allowed_attr,spec=EDStatic.mmlFindNodeSpec_type(child_type);return null==spec?(0<error_str.length&&(error_str[0]="spec is null"),!1):((allowed_attr=spec.attributes).isEmpty()||attr.forEach(function(value,key){-1==value.indexOf(":")&&null==allowed_attr.match(" "+value+" ")&&0<error_str.length&&(error_str[0]="illegal attribute ".concat(value," in ").concat(spec.type_str))}),!0)},EDStatic.attributeIndex=function(name){for(var g_oper_spec_names=["accent","fence","largeop","lspace","minsize","movablelimits","rspace","separator","stretchy"],i=0;i<EDStatic.g_oper_spec_rows;i++)if(name==g_oper_spec_names[i])return i;return-1},EDStatic.mmlDictAttribute=function(name,spec){name=this.attributeIndex(name);return-1==name?null:3==name||6==name?"0em":spec.attributes[name]},EDStatic.searchOperSpecData=function(name){if(!(name<this.g_oper_spec_data[0].name)){if(name==this.g_oper_spec_data[0].name)return 0;for(var begin=0,end=this.g_oper_spec_data.length-1;1<end-begin;){var mid=.5*(begin+end),mid=Math.floor(mid),spec=this.g_oper_spec_data[mid];if(name<spec.name)end=mid;else{if(!(name>spec.name))return mid;begin=mid}}}return null},EDStatic._mmlFindOperSpec=function(name_list,form){for(var result=new EdrawMathDate.OperSpecSearchResult,_i=0,name_list_1=name_list;_i<name_list_1.length;_i++){var name_1=name_list_1[_i],specindex=this.searchOperSpecData(name_1),spec=this.g_oper_spec_data[specindex];if(null!=spec){for(0<specindex&&this.g_oper_spec_data[specindex-1].name==name_1&&(spec=this.g_oper_spec_data[specindex-1]);spec.name!=name_1;)spec=this.g_oper_spec_data[specindex],specindex+=1;if(result.addForm(spec),result.haveForm(form))break}}return result},EDStatic.mmlFindOperSpec=function(text,form){var name_list=[text],result=this._mmlFindOperSpec(name_list,form);if(!result.haveForm(form)){for(var length_1=(unicode=text.charCodeAt(0).toString(16).toLocaleUpperCase()).length,i=0;i<5-length_1;++i)unicode="0"+unicode;for(var unicode="&#x"+unicode+";",text=this.mmlEntityTable.search(unicode),_i=0,nameList_1=text;_i<nameList_1.length;_i++){var name_2=nameList_1[_i];name_list.push("&"+name_2+";")}result=this._mmlFindOperSpec(name_list,form)}text=result.getForm(form);return null!=text||null!=(text=result.getForm(FormType.InfixForm))||null!=(text=result.getForm(FormType.PostfixForm))||null!=(text=result.getForm(FormType.PrefixForm))?text:this.g_oper_spec_defaults},EDStatic.mmlInterpretSpacing=function(value,em,ex,ok,fontsize,MmToPixFactor){if(0<ok.length&&(ok[0]=!0),"thin"==value)return.0666*fontsize;if("medium"==value)return.1333*fontsize;if("thick"==value)return.2*fontsize;for(var factor,_i=0,g_h_spacing_data_1=[new EdrawMathDate.HSpacingValue("veryverythinmathspace",.0555556),new EdrawMathDate.HSpacingValue("verythinmathspace",.111111),new EdrawMathDate.HSpacingValue("thinmathspace",.166667),new EdrawMathDate.HSpacingValue("mediummathspace",.222222),new EdrawMathDate.HSpacingValue("thickmathspace",.277778),new EdrawMathDate.HSpacingValue("verythickmathspace",.333333),new EdrawMathDate.HSpacingValue("veryverythickmathspace",.388889),new EdrawMathDate.HSpacingValue("0",0)];_i<g_h_spacing_data_1.length;_i++){var v=g_h_spacing_data_1[_i];if(value==v.name)return em*v.factor}return value.endsWith("em")?0<=(factor=(value=value.slice(0,value.length-2)).toFloat())?em*factor:(0<ok.length&&(ok[0]=!1),0):value.endsWith("ex")?0<=(factor=(value=value.slice(0,value.length-2)).toFloat())?ex*factor:(0<ok.length&&(ok[0]=!1),0):value.endsWith("cm")?0<=(factor=(value=value.slice(0,value.length-2)).toFloat())?10*factor*MmToPixFactor:(0<ok.length&&(ok[0]=!1),0):value.endsWith("mm")?0<=(factor=(value=value.slice(0,value.length-2)).toFloat())?factor*MmToPixFactor:(0<ok.length&&(ok[0]=!1),0):value.endsWith("in")?0<=(factor=(value=value.slice(0,value.length-2)).toFloat())?10*factor*MmToPixFactor*2.54:(0<ok.length&&(ok[0]=!1),0):value.endsWith("px")?0<=(fontsize=(value=value.slice(0,value.length-2)).toInt())?fontsize:(0<ok.length&&(ok[0]=!1),0):0<=(ex=value.toInt())?ex:(0<ok.length&&(ok[0]=!1),0)},EDStatic.mmlInterpretPercentSpacing=function(value,base,ok){if(value.endsWith("%")&&0<=(value=(value=value.slice(0,value.length-1)).toFloat()))return 0<ok.length&&(ok[0]=!0),.01*base*value;return 0<ok.length&&(ok[0]=!1),0},EDStatic.prototype.mmlInterpretMathVariant=function(value,ok){for(var _i=0,g_mv_data_1=[new EdrawMathDate.MathVariantValue("normal",MathVariant.NormalMV),new EdrawMathDate.MathVariantValue("bold",MathVariant.BoldMV),new EdrawMathDate.MathVariantValue("italic",MathVariant.ItalicMV),new EdrawMathDate.MathVariantValue("bold-italic",MathVariant.BoldMV|MathVariant.ItalicMV),new EdrawMathDate.MathVariantValue("double-struck",MathVariant.DoubleStruckMV),new EdrawMathDate.MathVariantValue("bold-fraktur",MathVariant.BoldMV|MathVariant.FrakturMV),new EdrawMathDate.MathVariantValue("script",MathVariant.ScriptMV),new EdrawMathDate.MathVariantValue("bold-script",MathVariant.BoldMV|MathVariant.ScriptMV),new EdrawMathDate.MathVariantValue("fraktur",MathVariant.FrakturMV),new EdrawMathDate.MathVariantValue("sans-serif",MathVariant.SansSerifMV),new EdrawMathDate.MathVariantValue("bold-sans-serif",MathVariant.BoldMV|MathVariant.SansSerifMV),new EdrawMathDate.MathVariantValue("sans-serif-italic",MathVariant.SansSerifMV|MathVariant.ItalicMV),new EdrawMathDate.MathVariantValue("sans-serif-bold-italic",MathVariant.SansSerifMV|MathVariant.ItalicMV|MathVariant.BoldMV),new EdrawMathDate.MathVariantValue("monospace",MathVariant.MonospaceMV),new EdrawMathDate.MathVariantValue("0",0)];_i<g_mv_data_1.length;_i++){var v=g_mv_data_1[_i];if(value==v.value)return 0<ok.length&&(ok[0]=!0),v.mv}return 0<ok.length&&(ok[0]=!1),MathVariant.NormalMV},EDStatic.mmlInterpretForm=function(value,ok){if(0<ok.length&&(ok[0]=!0),"prefix"==value)return FormType.PrefixForm;if("infix"!=value){if("postfix"==value)return FormType.PostfixForm;0<ok.length&&(ok[0]=!1)}return FormType.InfixForm},EDStatic.mmlInterpretListAttr=function(value_list,idx,def){value_list=value_list.split(" ");return 0==value_list.length?def:value_list.length<=idx?value_list[value_list.length-1]:value_list[idx]},EDStatic.mmlInterpretFrameType=function(value_list,idx,ok){0<ok.length&&(ok[0]=!0);value_list=this.mmlInterpretListAttr(value_list,idx,"none");if("none"!=value_list){if("solid"==value_list)return FrameType.FrameSolid;if("dashed"==value_list)return FrameType.FrameDashed;0<ok.length&&(ok[0]=!1)}return FrameType.FrameNone},EDStatic.mmlInterpretFrameSpacing=function(value_list,em,ex,ok,fontsize){var ver_ok,hor_ok,value_list=value_list.split(" ");return 2!=value_list.length?(0<ok.length&&(ok[0]=!1),new EdrawMathDate.FrameSpacing(.4*em,.5*ex)):(ver_ok=[!(hor_ok=[!1])],hor_ok=this.mmlInterpretSpacing(value_list[0],em,ex,hor_ok,fontsize,EdrawMathDate.EDMmlDocument.mmToPixelFactor),value_list=this.mmlInterpretSpacing(value_list[1],em,ex,ver_ok,fontsize,EdrawMathDate.EDMmlDocument.mmToPixelFactor),ok[0]=ver_ok[0],new EdrawMathDate.FrameSpacing(hor_ok,value_list))},EDStatic.mmlInterpretColAlign=function(value_list,colnum,ok){value_list=this.mmlInterpretListAttr(value_list,colnum,"center");return 0<ok.length&&(ok[0]=!0),"left"==value_list?ColAlign.ColAlignLeft:"right"==value_list?ColAlign.ColAlignRight:("center"!=value_list&&0<ok.length&&(ok[0]=!1),ColAlign.ColAlignCenter)},EDStatic.mmlInterpretRowAlign=function(value_list,rownum,ok){value_list=this.mmlInterpretListAttr(value_list,rownum,"axis");return 0<ok.length&&(ok[0]=!0),"top"==value_list?RowAlign.RowAlignTop:"center"==value_list?RowAlign.RowAlignCenter:"bottom"==value_list?RowAlign.RowAlignBottom:"baseline"==value_list?RowAlign.RowAlignBaseline:("axis"!=value_list&&0<ok.length&&(ok[0]=!1),RowAlign.RowAlignAxis)},EDStatic.mmlInterpretPointSize=function(value,ok){if(value.endsWith("pt")&&0<(value=(value=value.slice(0,value.length-2)).toFloat()))return 0<ok.length&&(ok[0]=!0),value*EdrawMathDate.EDMmlDocument.mmToPixelFactor*.35275;return 0<ok.length&&(ok[0]=!1),0},EDStatic.mmlInterpretPixelSize=function(value,ok){if(value.endsWith("px")&&0<(value=(value=value.slice(0,value.length-2)).toFloat()))return 0<ok.length&&(ok[0]=!0),value;return 0<ok.length&&(ok[0]=!1),0},EDStatic.mmlInterpretDepreciatedFontAttr=function(font_attr,fn,em,ex,fontsize){if(font_attr.has("fontsize"))for(var value=font_attr.get("fontsize");;){var ok=[!1],ok=this.mmlInterpretPointSize(value,ok);fn.pixelSize=ok;break}return font_attr.has("fontweight")&&("normal"==(value=font_attr.fontweight)?fn.bold=!1:"bold"==value&&(fn.bold=!0)),font_attr.has("fontstyle")&&("normal"==(value=font_attr.fontstyle)?fn.italic=!1:"italic"==value&&(fn.italic=!0)),font_attr.has("fontfamily")&&(value=font_attr.fontfamily,fn.fontfamily=value),fn},EDStatic.mmlInterpretMathSize=function(value,fn,em,ex,ok,fontsize){var size_ok,pxsize;return 0<ok.length&&(ok[0]=!0),"small"==value?fn.pixelSize=.7*fn.pixelSize:"normal"!=value&&("big"==value?fn.pixelSize=1.5*fn.pixelSize:(pxsize=this.mmlInterpretPointSize(value,size_ok=[!1]),size_ok[0]||(pxsize=this.mmlInterpretPixelSize(value,size_ok),size_ok[0])?fn.pixelSize=pxsize:(pxsize=this.mmlInterpretSpacing(value,em,ex,size_ok,fontsize,EdrawMathDate.EDMmlDocument.mmToPixelFactor),size_ok[0]?fn.pixelSize=pxsize:0<ok.length&&(ok[0]=!1)))),fn},EDStatic.updateFontAttr=function(font_attr,n,name,preferred_name){font_attr.has(preferred_name=void 0===preferred_name?null:preferred_name)||font_attr.has(name)||null!=(preferred_name=n.explicitAttribute(name))&&font_attr.set(name,preferred_name)},EDStatic.collectFontAttributes=function(node){for(var font_attr=new Map,n=node;null!=n;n=n.parent)n!=node&&n.nodeType!=EDMathMlNodeType.MstyleNode||(this.updateFontAttr(font_attr,n,"mathvariant"),this.updateFontAttr(font_attr,n,"mathsize"));return font_attr},EDStatic.g_exe_name=".",EDStatic.mmlEntityTable=new EDMMLEntityTable,EDStatic.g_init_mousepoint=new egPoint(20,30),EDStatic.g_relorigin_of_fontsize=.2,EDStatic.g_v_stretchsize=3,EDStatic.g_draw_linewidth=.05,EDStatic.g_node_space=.05,EDStatic.g_mfrac_spacing=.05,EDStatic.g_largeop_multiplier=1.6,EDStatic.g_mroot_base_margin=.1,EDStatic.g_mroot_base_line=.5,EDStatic.g_base_line_multiplier=.05,EDStatic.g_script_size_multiplier=.5,EDStatic.g_sub_shift_multiplier=.75,EDStatic.g_sup_shift_multiplier=.75,EDStatic.g_subsup_spacing="veryverythinmathspace",EDStatic.g_min_font_pixel_size=8,EDStatic.g_min_font_pixel_size_calc=8,EDStatic.g_dpi_font_size=1,EDStatic.g_oper_spec_rows=9,EDStatic.g_radical_points_size=11,EDStatic.g_radical_points=[new egPoint(110001e-9,.344439758),new egPoint(.217181096,.419051636),new egPoint(.557377049,.102829829),new egPoint(.942686988,1.048864253),new egPoint(1,1.048864253),new egPoint(1,1),new egPoint(1,1),new egPoint(.594230277,0),new egPoint(.51645748,0),new egPoint(.135213883,.352172079),new egPoint(.024654201,.316221808)],EDStatic.MML_ATT_COMMON=" class style id xref actiontype largeop",EDStatic.MML_ATT_FONTSIZE=" fontsize fontweight fontstyle fontfamily color ",EDStatic.MML_ATT_MATHVARIANT=" mathvariant mathsize mathcolor mathbackground ",EDStatic.MML_ATT_FONTINFO=EDStatic.MML_ATT_FONTSIZE+EDStatic.MML_ATT_MATHVARIANT,EDStatic.MML_ATT_OPINFO=" form fence separator lspace rspace stretchy symmetric          maxsize minsize largeop movablelimits accent ",EDStatic.MML_ATT_SIZEINFO=" width height depth ",EDStatic.MML_ATT_TABLEINFO=" align rowalign columnalign columnwidth groupalign          alignmentscope side rowspacing columnspacing rowlines columnlines width frame framespacing          equalrows equalcolumns displaystyle ",EDStatic.MML_ATT_MFRAC=" bevelled numalign denomalign linethickness ",EDStatic.MML_ATT_MSTYLE=EDStatic.MML_ATT_FONTINFO+EDStatic.MML_ATT_OPINFO+"         scriptlevel lquote rquote linethickness displaystyle          scriptsizemultiplier scriptminsize background          veryverythinmathspace verythinmathspace thinmathspace          mediummathspace thickmathspace verythickmathspace          veryverythickmathspace open close separators          subscriptshift superscriptshift accentunder tableinfo          rowspan columnspan edge selection bevelled ",EDStatic.MML_ATT_MTABLE=" align rowalign columnalign groupalign alignmentscope          columnwidth width rowspacing columnspacing rowlines columnlines          frame framespacing equalrows equalcolumns displaystyle side          minlabelspacing ",EDStatic.MML_ATT_NOTATION="notation",EDStatic.g_node_spec_data=[new EdrawMathDate.EDMmlNodeSpec(EDMathMlNodeType.MiNode,"mi","MiNode",ChildSpec.ChildAny," TextNode MalignMark ",EDStatic.MML_ATT_COMMON+EDStatic.MML_ATT_FONTINFO),new EdrawMathDate.EDMmlNodeSpec(EDMathMlNodeType.MnNode,"mn","MnNode",ChildSpec.ChildAny," TextNode MalignMark ",EDStatic.MML_ATT_COMMON+EDStatic.MML_ATT_FONTINFO),new EdrawMathDate.EDMmlNodeSpec(EDMathMlNodeType.MfracNode,"mfrac","MfracNode",2,"",EDStatic.MML_ATT_COMMON+EDStatic.MML_ATT_MFRAC),new EdrawMathDate.EDMmlNodeSpec(EDMathMlNodeType.MrowNode,"mrow","MrowNode",ChildSpec.ChildAny,"",EDStatic.MML_ATT_COMMON+" display mode "),new EdrawMathDate.EDMmlNodeSpec(EDMathMlNodeType.MsqrtNode,"msqrt","MsqrtNode",ChildSpec.ImplicitMrow,"",EDStatic.MML_ATT_COMMON),new EdrawMathDate.EDMmlNodeSpec(EDMathMlNodeType.MrootNode,"mroot","MrootNode",2,"",EDStatic.MML_ATT_COMMON),new EdrawMathDate.EDMmlNodeSpec(EDMathMlNodeType.MsupNode,"msup","MsupNode",2,"",EDStatic.MML_ATT_COMMON+" subscriptshift "),new EdrawMathDate.EDMmlNodeSpec(EDMathMlNodeType.MsubNode,"msub","MsubNode",2,"",EDStatic.MML_ATT_COMMON+" superscriptshift "),new EdrawMathDate.EDMmlNodeSpec(EDMathMlNodeType.MsubsupNode,"msubsup","MsubsupNode",3,"",EDStatic.MML_ATT_COMMON+" subscriptshift superscriptshift "),new EdrawMathDate.EDMmlNodeSpec(EDMathMlNodeType.MoNode,"mo","MoNode",ChildSpec.ChildAny," TextNode MalignMark ",EDStatic.MML_ATT_COMMON+EDStatic.MML_ATT_FONTINFO+EDStatic.MML_ATT_OPINFO),new EdrawMathDate.EDMmlNodeSpec(EDMathMlNodeType.MstyleNode,"mstyle","MstyleNode",ChildSpec.ImplicitMrow,"",EDStatic.MML_ATT_COMMON+EDStatic.MML_ATT_MSTYLE),new EdrawMathDate.EDMmlNodeSpec(EDMathMlNodeType.MencloseNode,"menclose","MencloseNode",ChildSpec.ImplicitMrow,"",EDStatic.MML_ATT_COMMON+" notation "),new EdrawMathDate.EDMmlNodeSpec(EDMathMlNodeType.MphantomNode,"mphantom","MphantomNode",ChildSpec.ImplicitMrow,"",EDStatic.MML_ATT_COMMON),new EdrawMathDate.EDMmlNodeSpec(EDMathMlNodeType.MalignMarkNode,"malignmark","MalignMarkNode",0,"",""),new EdrawMathDate.EDMmlNodeSpec(EDMathMlNodeType.MfencedNode,"mfenced","MfencedNode",ChildSpec.ChildAny,"",EDStatic.MML_ATT_COMMON+" open close separators "),new EdrawMathDate.EDMmlNodeSpec(EDMathMlNodeType.MtableNode,"mtable","MtableNode",ChildSpec.ChildAny," MtrNode ",EDStatic.MML_ATT_COMMON+EDStatic.MML_ATT_MTABLE),new EdrawMathDate.EDMmlNodeSpec(EDMathMlNodeType.MtrNode,"mtr","MtrNode",ChildSpec.ChildAny," MtdNode ",EDStatic.MML_ATT_COMMON+" rowalign columnalign groupalign "),new EdrawMathDate.EDMmlNodeSpec(EDMathMlNodeType.MtdNode,"mtd","MtdNode",ChildSpec.ImplicitMrow,"",EDStatic.MML_ATT_COMMON+" rowspan columnspan rowalign columnalign groupalign "),new EdrawMathDate.EDMmlNodeSpec(EDMathMlNodeType.MoverNode,"mover","MoverNode",2,"",EDStatic.MML_ATT_COMMON+" accent align "),new EdrawMathDate.EDMmlNodeSpec(EDMathMlNodeType.MunderNode,"munder","MunderNode",2,"",EDStatic.MML_ATT_COMMON+" accentunder align "),new EdrawMathDate.EDMmlNodeSpec(EDMathMlNodeType.MunderoverNode,"munderover","MunderoverNode",3,"",EDStatic.MML_ATT_COMMON+" accentunder accent align "),new EdrawMathDate.EDMmlNodeSpec(EDMathMlNodeType.MprescriptsNode,"mprescripts","MprescriptsNode",0,"",""),new EdrawMathDate.EDMmlNodeSpec(EDMathMlNodeType.NoneNode,"none","NoneNode",0,"",""),new EdrawMathDate.EDMmlNodeSpec(EDMathMlNodeType.MmultiscriptsNode,"mmultiscripts","MmultiscriptsNode",6,"",EDStatic.MML_ATT_COMMON+" subscriptshift superscriptshift "),new EdrawMathDate.EDMmlNodeSpec(EDMathMlNodeType.MrowNode,"math","MrowNode",ChildSpec.ChildAny,"",""),new EdrawMathDate.EDMmlNodeSpec(EDMathMlNodeType.MerrorNode,"merror","MerrorNode",ChildSpec.ImplicitMrow,"",EDStatic.MML_ATT_COMMON),new EdrawMathDate.EDMmlNodeSpec(EDMathMlNodeType.MtextNode,"mtext","MtextNode",1," TextNode ",EDStatic.MML_ATT_COMMON+EDStatic.MML_ATT_FONTINFO+" width height depth linebreak "),new EdrawMathDate.EDMmlNodeSpec(EDMathMlNodeType.MpaddedNode,"mpadded","MpaddedNode",ChildSpec.ImplicitMrow,"",EDStatic.MML_ATT_COMMON+" width height depth lspace "),new EdrawMathDate.EDMmlNodeSpec(EDMathMlNodeType.MspaceNode,"mspace","MspaceNode",ChildSpec.ImplicitMrow,"",EDStatic.MML_ATT_COMMON+" width height depth linebreak "),new EdrawMathDate.EDMmlNodeSpec(EDMathMlNodeType.TextNode,"text","TextNode",ChildSpec.ChildIgnore,"",""),new EdrawMathDate.EDMmlNodeSpec(EDMathMlNodeType.UnknownNode,"unknown","UnknownNode",ChildSpec.ChildAny,"",""),new EdrawMathDate.EDMmlNodeSpec(EDMathMlNodeType.NoNode,"node","",0,"","")],EDStatic.g_oper_spec_data=[new EdrawMathDate.EDMmlOperSpec("",FormType.PostfixForm,["","","","0em","","","0em","",""],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("!",FormType.PostfixForm,["","","","verythinmathspace","","","0em","",""],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("!!",FormType.PostfixForm,["","","","verythinmathspace","","","0em","",""],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("!=",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","",""],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&And;",FormType.InfixForm,["","","","mediummathspace","","","mediummathspace","","true"],StretchDir.VStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&ApplyFunction;",FormType.InfixForm,["","","","0em","","","0em","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&Assign;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&Awint;",FormType.PrefixForm,["","","true","0em","","","0em","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&Backslash;",FormType.InfixForm,["","","","thinmathspace","","","thinmathspace","","true"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&Because;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&Breve;",FormType.PostfixForm,["true","","","0em","","","0em","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&Cap;",FormType.InfixForm,["","","","thinmathspace","","","thinmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&CapitalDifferentialD;",FormType.PrefixForm,["","","","0em","","","verythinmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&Cconint;",FormType.PrefixForm,["","","true","0em","","","0em","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&Cedilla;",FormType.PostfixForm,["true","","","0em","","","0em","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&CenterDot;",FormType.InfixForm,["","","","thinmathspace","","","thinmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&CircleDot;",FormType.InfixForm,["","","","verythinmathspace","","","verythinmathspace","","false"],StretchDir.NoStretch,SymbolType.Symbol),new EdrawMathDate.EDMmlOperSpec("&CircleMinus;",FormType.InfixForm,["","","","thinmathspace","","","thinmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&CirclePlus;",FormType.InfixForm,["","","","thinmathspace","","","thinmathspace","","false"],StretchDir.NoStretch,SymbolType.Symbol),new EdrawMathDate.EDMmlOperSpec("&CircleTimes;",FormType.InfixForm,["","","","thinmathspace","","","thinmathspace","","false"],StretchDir.NoStretch,SymbolType.Symbol),new EdrawMathDate.EDMmlOperSpec("&ClockwiseContourIntegral;",FormType.PrefixForm,["","","true","0em","","","0em","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&CloseCurlyDoubleQuote;",FormType.PostfixForm,["","true","","0em","","","0em","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&CloseCurlyQuote;",FormType.PostfixForm,["","true","","0em","","","0em","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&Colon;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&Congruent;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&ContourIntegral;",FormType.PrefixForm,["","","true","0em","","","0em","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&Coproduct;",FormType.InfixForm,["","","true","thinmathspace","","","thinmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&CounterClockwiseContourIntegral;",FormType.PrefixForm,["","","true","0em","","","0em","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&Cross;",FormType.InfixForm,["","","","verythinmathspace","","","verythinmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&Cup;",FormType.InfixForm,["","","","thinmathspace","","","thinmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&CupCap;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&Cwint;",FormType.PrefixForm,["","","true","0em","","","0em","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&Del;",FormType.PrefixForm,["","","","0em","","","verythinmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&DiacriticalAcute;",FormType.PostfixForm,["true","","","0em","","","0em","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&DiacriticalDot;",FormType.PostfixForm,["true","","true","0em","","","0em","","false"],StretchDir.NoStretch,SymbolType.Over),new EdrawMathDate.EDMmlOperSpec("&DiacriticalDoubleAcute;",FormType.PostfixForm,["true","","","0em","","","0em","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&DiacriticalGrave;",FormType.PostfixForm,["true","","","0em","","","0em","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&DiacriticalLeftArrow;",FormType.PostfixForm,["true","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&DiacriticalLeftRightArrow;",FormType.PostfixForm,["true","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&DiacriticalLeftRightVector;",FormType.PostfixForm,["true","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&DiacriticalLeftVector;",FormType.PostfixForm,["true","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&DiacriticalRightArrow;",FormType.PostfixForm,["true","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&DiacriticalRightVector;",FormType.PostfixForm,["true","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&DiacriticalTilde;",FormType.PostfixForm,["true","","","0em","","","0em","","true"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&Diamond;",FormType.InfixForm,["","","","thinmathspace","","","thinmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&DifferentialD;",FormType.PrefixForm,["","","","0em","","","verythinmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&DotEqual;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&DoubleContourIntegral;",FormType.PrefixForm,["","","true","0em","","","0em","","true"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&DoubleDot;",FormType.PostfixForm,["true","","true","0em","","","0em","","false"],StretchDir.NoStretch,SymbolType.Over),new EdrawMathDate.EDMmlOperSpec("&DoubleDownArrow;",FormType.InfixForm,["","","","verythinmathspace","","","verythinmathspace","","true"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&DoubleLeftArrow;",FormType.InfixForm,["","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&DoubleLeftRightArrow;",FormType.InfixForm,["","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&DoubleLeftTee;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&DoubleLongLeftArrow;",FormType.InfixForm,["","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&DoubleLongLeftRightArrow;",FormType.InfixForm,["","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&DoubleLongRightArrow;",FormType.InfixForm,["","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&DoubleRightArrow;",FormType.InfixForm,["","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&DoubleRightTee;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&DoubleUpArrow;",FormType.InfixForm,["","","","verythinmathspace","","","verythinmathspace","","true"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&DoubleUpDownArrow;",FormType.InfixForm,["","","","verythinmathspace","","","verythinmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&DoubleVerticalBar;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&DownArrow;",FormType.InfixForm,["","","","verythinmathspace","","","verythinmathspace","","true"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&DownArrowBar;",FormType.InfixForm,["","","","verythinmathspace","","","verythinmathspace","","true"],StretchDir.VStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&DownArrowUpArrow;",FormType.InfixForm,["","","","verythinmathspace","","","verythinmathspace","","true"],StretchDir.VStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&DownBreve;",FormType.PostfixForm,["true","","","0em","","","0em","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&DownLeftRightVector;",FormType.InfixForm,["","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Arrow),new EdrawMathDate.EDMmlOperSpec("&DownLeftTeeVector;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","true"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&DownLeftVector;",FormType.InfixForm,["","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Arrow),new EdrawMathDate.EDMmlOperSpec("&DownLeftVectorBar;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","true"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&DownRightTeeVector;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","true"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&DownRightVector;",FormType.InfixForm,["","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Arrow),new EdrawMathDate.EDMmlOperSpec("&DownRightVectorBar;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","true"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&DownTee;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&DownTeeArrow;",FormType.InfixForm,["","","","verythinmathspace","","","verythinmathspace","","true"],StretchDir.VStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&Element;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&Equal;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&EqualTilde;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&Equilibrium;",FormType.InfixForm,["","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Arrow),new EdrawMathDate.EDMmlOperSpec("&Exists;",FormType.PrefixForm,["","","","0em","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&ForAll;",FormType.PrefixForm,["","","","0em","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&GreaterEqual;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&GreaterEqualLess;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&GreaterFullEqual;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&GreaterGreater;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&GreaterLess;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&GreaterSlantEqual;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&GreaterTilde;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&Hacek;",FormType.PostfixForm,["true","","","0em","","","0em","","true"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&Hat;",FormType.PostfixForm,["true","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Center),new EdrawMathDate.EDMmlOperSpec("&HatDown;",FormType.PostfixForm,["true","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Center),new EdrawMathDate.EDMmlOperSpec("&HatUp;",FormType.PostfixForm,["true","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Center),new EdrawMathDate.EDMmlOperSpec("&HorizontalLine;",FormType.InfixForm,["","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&HumpDownHump;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&HumpEqual;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&IIIInt;",FormType.PrefixForm,["","","true","0em","","","0em","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&IIInt;",FormType.PrefixForm,["","","true","0em","","","0em","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&IInt;",FormType.PrefixForm,["","","true","0em","","","0em","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&Implies;",FormType.InfixForm,["","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&Integral;",FormType.PrefixForm,["","","true","0em","","","0em","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&Intersection;",FormType.PrefixForm,["","","true","0em","","true","thinmathspace","","true"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&InvisibleComma;",FormType.InfixForm,["","","","0em","","","0em","true","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&InvisibleTimes;",FormType.InfixForm,["","","","0em","","","0em","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&LeftAngleBracket;",FormType.PrefixForm,["","true","","verythinmathspace","","","verythinmathspace","","true"],StretchDir.VStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&LeftArrow;",FormType.InfixForm,["","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Arrow),new EdrawMathDate.EDMmlOperSpec("&LeftArrowBar;",FormType.InfixForm,["","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&LeftArrowRightArrow;",FormType.InfixForm,["","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&LeftBracketingBar;",FormType.PrefixForm,["","true","","verythinmathspace","","","verythinmathspace","","true"],StretchDir.VStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&LeftCeiling;",FormType.PrefixForm,["","true","","verythinmathspace","","","verythinmathspace","","true"],StretchDir.VStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&LeftDoubleBracket;",FormType.PrefixForm,["","true","","verythinmathspace","","","verythinmathspace","","true"],StretchDir.VStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&LeftDoubleBracketingBar;",FormType.PrefixForm,["","true","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&LeftDownTeeVector;",FormType.InfixForm,["","","","verythinmathspace","","","verythinmathspace","","true"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&LeftDownVector;",FormType.InfixForm,["","","","verythinmathspace","","","verythinmathspace","","true"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&LeftDownVectorBar;",FormType.InfixForm,["","","","verythinmathspace","","","verythinmathspace","","true"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&LeftFloor;",FormType.PrefixForm,["","true","","verythinmathspace","","","verythinmathspace","","true"],StretchDir.VStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&LeftRightArrow;",FormType.InfixForm,["","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Arrow),new EdrawMathDate.EDMmlOperSpec("&LeftRightVector;",FormType.InfixForm,["","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Arrow),new EdrawMathDate.EDMmlOperSpec("&LeftSkeleton;",FormType.PrefixForm,["","true","","0em","","","0em","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&LeftTee;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&LeftTeeArrow;",FormType.InfixForm,["","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&LeftTeeVector;",FormType.InfixForm,["","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&LeftTriangle;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&LeftTriangleBar;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&LeftTriangleEqual;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&LeftUpDownVector;",FormType.InfixForm,["","","","verythinmathspace","","","verythinmathspace","","true"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&LeftUpTeeVector;",FormType.InfixForm,["","","","verythinmathspace","","","verythinmathspace","","true"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&LeftUpVector;",FormType.InfixForm,["","","","verythinmathspace","","","verythinmathspace","","true"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&LeftUpVectorBar;",FormType.InfixForm,["","","","verythinmathspace","","","verythinmathspace","","true"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&LeftVector;",FormType.InfixForm,["","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Arrow),new EdrawMathDate.EDMmlOperSpec("&LeftVectorBar;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","true"],StretchDir.VStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&LessEqualGreater;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&LessFullEqual;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&LessGreater;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&LessLess;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&LessSlantEqual;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&LessTilde;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&LongLeftArrow;",FormType.InfixForm,["","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&LongLeftRightArrow;",FormType.InfixForm,["","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&LongRightArrow;",FormType.InfixForm,["","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&Lowast;",FormType.InfixForm,["","","","thinmathspace","","","thinmathspace","","false"],StretchDir.NoStretch,SymbolType.Symbol),new EdrawMathDate.EDMmlOperSpec("&LowerLeftArrow;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","true"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&LowerRightArrow;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","true"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&MinusPlus;",FormType.PrefixForm,["","","","0em","","","veryverythinmathspace","","false"],StretchDir.NoStretch,SymbolType.Symbol),new EdrawMathDate.EDMmlOperSpec("&NestedGreaterGreater;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NestedLessLess;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&Not;",FormType.PrefixForm,["","","","0em","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotCongruent;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotCupCap;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotDoubleVerticalBar;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotElement;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotEqual;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotEqualTilde;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotExists;",FormType.PrefixForm,["","","","0em","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotGreater;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotGreaterEqual;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotGreaterFullEqual;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotGreaterGreater;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotGreaterLess;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotGreaterSlantEqual;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotGreaterTilde;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotHumpDownHump;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotHumpEqual;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotLeftTriangle;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotLeftTriangleBar;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotLeftTriangleEqual;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotLess;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotLessEqual;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotLessFullEqual;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotLessGreater;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotLessLess;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotLessSlantEqual;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotLessTilde;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotNestedGreaterGreater;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotNestedLessLess;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotPrecedes;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotPrecedesEqual;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotPrecedesSlantEqual;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotPrecedesTilde;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotReverseElement;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotRightTriangle;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotRightTriangleBar;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotRightTriangleEqual;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotSquareSubset;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotSquareSubsetEqual;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotSquareSuperset;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotSquareSupersetEqual;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotSubset;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotSubsetEqual;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotSucceeds;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotSucceedsEqual;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotSucceedsSlantEqual;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotSucceedsTilde;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotSuperset;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotSupersetEqual;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotTilde;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotTildeEqual;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotTildeFullEqual;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotTildeTilde;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&NotVerticalBar;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&OpenCurlyDoubleQuote;",FormType.PrefixForm,["","true","","0em","","","0em","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&OpenCurlyQuote;",FormType.PrefixForm,["","true","","0em","","","0em","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&Or;",FormType.InfixForm,["","","","mediummathspace","","","mediummathspace","","true"],StretchDir.VStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&OverBar;",FormType.PostfixForm,["true","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Center),new EdrawMathDate.EDMmlOperSpec("&OverBrace;",FormType.PostfixForm,["true","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Center),new EdrawMathDate.EDMmlOperSpec("&OverBracket;",FormType.PostfixForm,["true","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Center),new EdrawMathDate.EDMmlOperSpec("&OverParenthesis;",FormType.PostfixForm,["true","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Center),new EdrawMathDate.EDMmlOperSpec("&PartialD;",FormType.PrefixForm,["","","","0em","","","verythinmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&PlusMinus;",FormType.PrefixForm,["","","","0em","","","veryverythinmathspace","","false"],StretchDir.NoStretch,SymbolType.Symbol),new EdrawMathDate.EDMmlOperSpec("&Precedes;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&PrecedesEqual;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&PrecedesSlantEqual;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&PrecedesTilde;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&Product;",FormType.PrefixForm,["","","true","0em","","true","thinmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&Proportion;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&Proportional;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&ReverseElement;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&ReverseEquilibrium;",FormType.InfixForm,["","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&ReverseUpEquilibrium;",FormType.InfixForm,["","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&RightAngleBracket;",FormType.PostfixForm,["","true","","verythinmathspace","","","verythinmathspace","","true"],StretchDir.VStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&RightArrow;",FormType.InfixForm,["","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Arrow),new EdrawMathDate.EDMmlOperSpec("&RightArrowBar;",FormType.InfixForm,["","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&RightArrowLeftArrow;",FormType.InfixForm,["","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Arrow),new EdrawMathDate.EDMmlOperSpec("&RightBracketingBar;",FormType.PostfixForm,["","true","","verythinmathspace","","","verythinmathspace","","true"],StretchDir.VStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&RightCeiling;",FormType.PostfixForm,["","true","","verythinmathspace","","","verythinmathspace","","true"],StretchDir.VStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&RightDoubleBracket;",FormType.PostfixForm,["","true","","verythinmathspace","","","verythinmathspace","","true"],StretchDir.VStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&RightDoubleBracketingBar;",FormType.PostfixForm,["","true","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&RightDownTeeVector;",FormType.InfixForm,["","","","verythinmathspace","","","verythinmathspace","","true"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&RightDownVector;",FormType.InfixForm,["","","","verythinmathspace","","","verythinmathspace","","true"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&RightDownVectorBar;",FormType.InfixForm,["","","","verythinmathspace","","","verythinmathspace","","true"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&RightFloor;",FormType.PostfixForm,["","true","","verythinmathspace","","","verythinmathspace","","true"],StretchDir.VStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&RightSkeleton;",FormType.PostfixForm,["","true","","0em","","","0em","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&RightTee;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&RightTeeArrow;",FormType.InfixForm,["","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&RightTeeVector;",FormType.InfixForm,["","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&RightTriangle;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&RightTriangleBar;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&RightTriangleEqual;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&RightUpDownVector;",FormType.InfixForm,["","","","verythinmathspace","","","verythinmathspace","","true"],StretchDir.VStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&RightUpTeeVector;",FormType.InfixForm,["","","","verythinmathspace","","","verythinmathspace","","true"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&RightUpVector;",FormType.InfixForm,["","","","verythinmathspace","","","verythinmathspace","","true"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&RightUpVectorBar;",FormType.InfixForm,["","","","verythinmathspace","","","verythinmathspace","","true"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&RightVector;",FormType.InfixForm,["","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Arrow),new EdrawMathDate.EDMmlOperSpec("&RightVectorBar;",FormType.InfixForm,["","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&RoundImplies;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&ShortLeftArrow;",FormType.InfixForm,["","","","0em","","","0em","","false"],StretchDir.HStretch,SymbolType.Center),new EdrawMathDate.EDMmlOperSpec("&ShortRightArrow;",FormType.InfixForm,["","","","0em","","","0em","","false"],StretchDir.HStretch,SymbolType.Center),new EdrawMathDate.EDMmlOperSpec("&ShortUpArrow;",FormType.InfixForm,["","","","verythinmathspace","","","verythinmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&SmallCircle;",FormType.InfixForm,["","","","verythinmathspace","","","verythinmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&Sqrt;",FormType.PrefixForm,["","","","0em","","","verythinmathspace","","true"],StretchDir.VStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&Square;",FormType.PrefixForm,["","","","0em","","","verythinmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&SquareIntersection;",FormType.InfixForm,["","","","mediummathspace","","","mediummathspace","","true"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&SquareSubset;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&SquareSubsetEqual;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&SquareSuperset;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&SquareSupersetEqual;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&SquareUnion;",FormType.InfixForm,["","","","mediummathspace","","","mediummathspace","","true"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&Star;",FormType.InfixForm,["","","","thinmathspace","","","thinmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&Subset;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&SubsetEqual;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&Succeeds;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&SucceedsEqual;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&SucceedsSlantEqual;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&SucceedsTilde;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&SuchThat;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&Sum;",FormType.PrefixForm,["","","true","0em","","true","thinmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&Superset;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&SupersetEqual;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&Therefore;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&Tilde;",FormType.InfixForm,["","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Center),new EdrawMathDate.EDMmlOperSpec("&TildeEqual;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&TildeFullEqual;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&TildeTilde;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&TripleDot;",FormType.PostfixForm,["true","","true","0em","","","0em","","false"],StretchDir.NoStretch,SymbolType.Over),new EdrawMathDate.EDMmlOperSpec("&UnderBar;",FormType.PostfixForm,["true","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Center),new EdrawMathDate.EDMmlOperSpec("&UnderBrace;",FormType.PostfixForm,["true","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Center),new EdrawMathDate.EDMmlOperSpec("&UnderBracket;",FormType.PostfixForm,["true","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Center),new EdrawMathDate.EDMmlOperSpec("&UnderParenthesis;",FormType.PostfixForm,["true","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Center),new EdrawMathDate.EDMmlOperSpec("&Union;",FormType.PrefixForm,["","","true","0em","","true","thinmathspace","","true"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&UnionPlus;",FormType.PrefixForm,["","","true","0em","","true","thinmathspace","","true"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&UpArrow;",FormType.InfixForm,["","","","verythinmathspace","","","verythinmathspace","","true"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&UpArrowBar;",FormType.InfixForm,["","","","verythinmathspace","","","verythinmathspace","","true"],StretchDir.VStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&UpArrowDownArrow;",FormType.InfixForm,["","","","verythinmathspace","","","verythinmathspace","","true"],StretchDir.VStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&UpDownArrow;",FormType.InfixForm,["","","","verythinmathspace","","","verythinmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&UpEquilibrium;",FormType.InfixForm,["","","","verythinmathspace","","","verythinmathspace","","true"],StretchDir.VStretch,SymbolType.Arrow),new EdrawMathDate.EDMmlOperSpec("&UpTee;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&UpTeeArrow;",FormType.InfixForm,["","","","verythinmathspace","","","verythinmathspace","","true"],StretchDir.VStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&UpperLeftArrow;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","true"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&UpperRightArrow;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","true"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&Vee;",FormType.InfixForm,["","","true","thinmathspace","","","thinmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&VerticalBar;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&VerticalLine;",FormType.InfixForm,["","","","verythinmathspace","","","verythinmathspace","","true"],StretchDir.VStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&VerticalSeparator;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","true"],StretchDir.VStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&VerticalTilde;",FormType.InfixForm,["","","","thinmathspace","","","thinmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&Wedge;",FormType.InfixForm,["","","true","thinmathspace","","","thinmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&amp;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&amp;&amp;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&le;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&lt;",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&lt;=",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&lt;>",FormType.InfixForm,["","","","verythinmathspace","","","verythinmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("&pi;",FormType.InfixForm,["","","","verythinmathspace","","","verythinmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("'",FormType.PostfixForm,["","","","verythinmathspace","","","0em","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("(",FormType.InfixForm,["","true","","veryverythinmathspace","","","0em","","true"],StretchDir.VStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec(")",FormType.InfixForm,["","true","","0em","","","thinmathspace","","true"],StretchDir.VStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("*",FormType.InfixForm,["","","","thinmathspace","","","thinmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("**",FormType.InfixForm,["","","","verythinmathspace","","","verythinmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("*=",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("+",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("++",FormType.PrefixForm,["","","","0em","","","verythinmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("+=",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec(",",FormType.InfixForm,["","","","verythinmathspace","","","thickmathspace","true","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("-",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("--",FormType.PrefixForm,["","","","0em","","","verythinmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("-=",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("->",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec(".",FormType.InfixForm,["","","","0em","","","0em","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("..",FormType.PostfixForm,["","","","mediummathspace","","","0em","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("...",FormType.PostfixForm,["","","","mediummathspace","","","0em","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("/",FormType.InfixForm,["","","","thinmathspace","","","thinmathspace","","true"],StretchDir.VStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("//",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("/=",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec(":",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec(":=",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec(";",FormType.InfixForm,["","","","0em","","","verythickmathspace","true","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec(";",FormType.PostfixForm,["","","","0em","","","0em","true","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("=",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("==",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec(">",FormType.InfixForm,["","","","verythinmathspace","","","verythinmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec(">=",FormType.InfixForm,["","","","thickmathspace","","","thickmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("?",FormType.InfixForm,["","","","verythinmathspace","","","verythinmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("@",FormType.InfixForm,["","","","verythinmathspace","","","verythinmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("[",FormType.PrefixForm,["","true","","veryverythinmathspace","","","0em","","true"],StretchDir.VStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("]",FormType.PostfixForm,["","true","","0em","","","thinmathspace","","true"],StretchDir.VStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("_",FormType.InfixForm,["","","","verythinmathspace","","","verythinmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("lim",FormType.PrefixForm,["","","","0em","","true","thinmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("max",FormType.PrefixForm,["","","","0em","","true","thinmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("min",FormType.PrefixForm,["","","","0em","","true","thinmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("{",FormType.PrefixForm,["","true","","veryverythinmathspace","","","0em","","true"],StretchDir.VStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("|",FormType.PostfixForm,["","","","verythinmathspace","","","verythinmathspace","","true"],StretchDir.VStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("}",FormType.PostfixForm,["","true","","0em","","","thinmathspace","","true"],StretchDir.VStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("~",FormType.InfixForm,["","","","verythinmathspace","","","verythinmathspace","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("",FormType.InfixForm,["","","","thinmathspace","","","thinmathspace","","false"],StretchDir.NoStretch,SymbolType.Symbol),new EdrawMathDate.EDMmlOperSpec("",FormType.InfixForm,["","","","thinmathspace","","","thinmathspace","","false"],StretchDir.NoStretch,SymbolType.Symbol),new EdrawMathDate.EDMmlOperSpec("",FormType.PostfixForm,["","","","verythinmathspace","","","verythinmathspace","","true"],StretchDir.VStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("",FormType.InfixForm,["","","","0em","","","0em","","false"],StretchDir.NoStretch,SymbolType.BoundingRect),new EdrawMathDate.EDMmlOperSpec("",FormType.PostfixForm,["true","","true","0em","","","0em","","false"],StretchDir.NoStretch,SymbolType.Over),new EdrawMathDate.EDMmlOperSpec("",FormType.InfixForm,["","","","0em","","","0em","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("",FormType.InfixForm,["","","","0em","","","0em","","false"],StretchDir.NoStretch,SymbolType.BoundingRect),new EdrawMathDate.EDMmlOperSpec("",FormType.InfixForm,["","","","0em","","","0em","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("",FormType.InfixForm,["","","","0em","","","0em","","false"],StretchDir.NoStretch,SymbolType.Normal),new EdrawMathDate.EDMmlOperSpec("",FormType.PostfixForm,["true","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Center),new EdrawMathDate.EDMmlOperSpec("",FormType.PostfixForm,["true","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Center),new EdrawMathDate.EDMmlOperSpec("",FormType.PostfixForm,["true","","","0em","","","0em","","true"],StretchDir.NoStretch,SymbolType.Under),new EdrawMathDate.EDMmlOperSpec("",FormType.PostfixForm,["true","","","0em","","","0em","","true"],StretchDir.NoStretch,SymbolType.Under),new EdrawMathDate.EDMmlOperSpec("",FormType.InfixForm,["","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Arrow),new EdrawMathDate.EDMmlOperSpec("",FormType.InfixForm,["","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Arrow),new EdrawMathDate.EDMmlOperSpec("",FormType.InfixForm,["","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Arrow),new EdrawMathDate.EDMmlOperSpec("",FormType.InfixForm,["","","","0em","","","0em","","true"],StretchDir.HStretch,SymbolType.Arrow),new EdrawMathDate.EDMmlOperSpec("",FormType.InfixForm,["","","","0em","","","0em","",""],StretchDir.NoStretch,SymbolType.Normal)],EDStatic.g_oper_spec_defaults=new EdrawMathDate.EDMmlOperSpec("",FormType.InfixForm,["false","false","false","0em","1","false","0em","false","false"],StretchDir.NoStretch,SymbolType.Normal),EDStatic.g_symboldata=new Map,EDStatic.g_special_conversion=new Map,EDStatic.g_arrowtext4replace=new Map,EDStatic.g_special_mo=["","","","",""],EDStatic.g_special_bracket=["(",")","[","]","{","}","|","","","","","","","","","","/"],EDStatic.g_mi_height_1_2=["a","c","e","i","m","n","o","r","s","u","v","","w","x","z"],EDStatic}();new(EdrawMathDate.EDStatic=EDStatic)}(EdrawMathDate=EdrawMathDate||{}),!function(EdrawMathDate){var EDLatextoMmlRules=function(latex,mml){this.latex=latex,this.mml=mml},EDmatrixRules=function(environment,begin,end){this.environment=environment,this.begin=begin,this.end=end},mtableMatch=function(begin,end,index,len){this.begin=begin,this.end=end,this.index=index,this.len=len},bracketInfo=function(bracket,index,len){this.bracket=bracket,this.index=index,this.len=len},EDLatextoMML=function(){function EDLatextoMML(){this._latex="",this._currentCount=0}return EDLatextoMML.initCharMatch=function(){var charMatch=new Map;return charMatch.set("(","&#x0028;"),charMatch.set(")","&#x0029;"),charMatch.set("\\{","&#x007B;"),charMatch.set("\\}","&#x007D;"),charMatch.set("[","&#x005B;"),charMatch.set("]","&#x005D;"),charMatch.set("|","&#x007C;"),charMatch.set("\\|","&#x2016;"),charMatch.set("\\vert","&#x007C;"),charMatch.set("\\Vert","&#x2016;"),charMatch.set("\\lfloor","&#x230A;"),charMatch.set("\\rfloor","&#x230B;"),charMatch.set("\\lceil","&#x2308;"),charMatch.set("\\rceil","&#x2309;"),charMatch.set("\\langle","&#x2329;"),charMatch.set("\\rangle","&#x232A;"),charMatch},EDLatextoMML.prototype.initRules=function(){var rules=[];return rules.push(new EDLatextoMmlRules("\\\\(frac|tfrac|dfrac|cfrac) *<mrow (\\d+)>(.*?)</mrow \\2> *<mrow (\\d+)>(.*?)</mrow \\4>","<mfrac><mrow>$3</mrow><mrow>$5</mrow></mfrac>")),rules.push(new EDLatextoMmlRules("\\\\sqrt *<mrow (\\d+)>(.*?)</mrow \\1>","<msqrt><mrow>$2</mrow></msqrt>")),rules.push(new EDLatextoMmlRules("\\\\rm *<mrow (\\d+)>(.*?)</mrow \\1>","<mtext d='$2'></mtext>")),rules.push(new EDLatextoMmlRules("\\\\mbox *<mrow (\\d+)>(.*?)</mrow \\1>","<mtext d='$2'></mtext>")),rules.push(new EDLatextoMmlRules("\\\\text *<mrow (\\d+)>(.*?)</mrow \\1>","<mtext d='$2'></mtext>")),rules.push(new EDLatextoMmlRules("\\\\operatorname *<mrow (\\d+)>(.*?)</mrow \\1>","<mtext d='$2'></mtext>")),rules.push(new EDLatextoMmlRules("\\\\mathbb *<mrow (\\d+)> *R *</mrow \\1>","<mo d='&#x211D;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\mathbb *<mrow (\\d+)> *Z *</mrow \\1>","<mo d='&#x2124;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\mathbb *<mrow (\\d+)> *C *</mrow \\1>","<mo d='&#x2102;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\mathbb *<mrow (\\d+)> *Q *</mrow \\1>","<mo d='&#x211A;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\mathbb *<mrow (\\d+)> *N *</mrow \\1>","<mo d='&#x2115;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\quad(?![a-zA-Z])","<mo d='&#x2003;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\lim(?![a-zA-Z])","<mi d='lim'></mi>")),rules.push(new EDLatextoMmlRules("\\\\ln(?![a-zA-Z])","<mi d='ln'></mi>")),rules.push(new EDLatextoMmlRules("\\\\lg(?![a-zA-Z])","<mi d='lg'></mi>")),rules.push(new EDLatextoMmlRules("\\\\log(?![a-zA-Z])","<mi d='log'></mi>")),rules.push(new EDLatextoMmlRules("\\\\sin(?![a-zA-Z])","<mi d='sin'></mi>")),rules.push(new EDLatextoMmlRules("\\\\cos(?![a-zA-Z])","<mi d='cos'></mi>")),rules.push(new EDLatextoMmlRules("\\\\tan(?![a-zA-Z])","<mi d='tan'></mi>")),rules.push(new EDLatextoMmlRules("\\\\cot(?![a-zA-Z])","<mi d='cot'></mi>")),rules.push(new EDLatextoMmlRules("\\\\sec(?![a-zA-Z])","<mi d='sec'></mi>")),rules.push(new EDLatextoMmlRules("\\\\csc(?![a-zA-Z])","<mi d='csc'></mi>")),rules.push(new EDLatextoMmlRules("\\\\exp(?![a-zA-Z])","<mi d='exp'></mi>")),rules.push(new EDLatextoMmlRules("\\\\arcsin(?![a-zA-Z])","<mi d='arcsin'></mi>")),rules.push(new EDLatextoMmlRules("\\\\arccos(?![a-zA-Z])","<mi d='arccos'></mi>")),rules.push(new EDLatextoMmlRules("\\\\arctan(?![a-zA-Z])","<mi d='arctan'></mi>")),rules.push(new EDLatextoMmlRules("\\\\arccot(?![a-zA-Z])","<mi d='arccot'></mi>")),rules.push(new EDLatextoMmlRules("\\\\sinh(?![a-zA-Z])","<mi d='sinh'></mi>")),rules.push(new EDLatextoMmlRules("\\\\cosh(?![a-zA-Z])","<mi d='cosh'></mi>")),rules.push(new EDLatextoMmlRules("\\\\tanh(?![a-zA-Z])","<mi d='tanh'></mi>")),rules.push(new EDLatextoMmlRules("\\\\coth(?![a-zA-Z])","<mi d='coth'></mi>")),rules.push(new EDLatextoMmlRules("\\\\limsup(?![a-zA-Z])","<mi d='limsup'></mi>")),rules.push(new EDLatextoMmlRules("\\\\liminf(?![a-zA-Z])","<mi d='liminf'></mi>")),rules.push(new EDLatextoMmlRules("\\\\max(?![a-zA-Z])","<mi d='max'></mi>")),rules.push(new EDLatextoMmlRules("\\\\min(?![a-zA-Z])","<mi d='min'></mi>")),rules.push(new EDLatextoMmlRules("\\\\inf(?![a-zA-Z])","<mi d='inf'></mi>")),rules.push(new EDLatextoMmlRules("\\\\sup(?![a-zA-Z])","<mi d='sup'></mi>")),rules.push(new EDLatextoMmlRules("\\\\ker(?![a-zA-Z])","<mi d='ker'></mi>")),rules.push(new EDLatextoMmlRules("\\\\deg(?![a-zA-Z])","<mi d='deg'></mi>")),rules.push(new EDLatextoMmlRules("\\\\gcd(?![a-zA-Z])","<mi d='gcd'></mi>")),rules.push(new EDLatextoMmlRules("\\\\Pr(?![a-zA-Z])","<mi d='Pr'></mi>")),rules.push(new EDLatextoMmlRules("\\\\det(?![a-zA-Z])","<mi d='det'></mi>")),rules.push(new EDLatextoMmlRules("\\\\hom(?![a-zA-Z])","<mi d='hom'></mi>")),rules.push(new EDLatextoMmlRules("\\\\arg(?![a-zA-Z])","<mi d='arg'></mi>")),rules.push(new EDLatextoMmlRules("\\\\dim(?![a-zA-Z])","<mi d='dim'></mi>")),rules.push(new EDLatextoMmlRules("\\\\bmod(?![a-zA-Z])","<mi d='mod'></mi>")),rules.push(new EDLatextoMmlRules("\\\\pmod *<mrow (\\d+)>(.*?)</mrow \\1>","<mtext d='&#x2003;'></mtext><mo d='&#x0028;'></mo><mi d='mod'></mi>$2<mo d='&#x0029;'></mo>")),rules.push(new EDLatextoMmlRules("\\(","<mtext d='&#x0028;'></mtext>")),rules.push(new EDLatextoMmlRules("\\)","<mtext d='&#x0029;'></mtext>")),rules.push(new EDLatextoMmlRules("\\|","<mtext d='&#x007C;'></mtext>")),rules.push(new EDLatextoMmlRules("\\\\infty(?![a-zA-Z])","<mo d='&#x221E;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\intercal(?![a-zA-Z])","<mo d='&#x22BA;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\int(?![a-zA-Z])","<mo d='&#x222B;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\in(?![a-zA-Z])","<mo d='&#x2208;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\notin(?![a-zA-Z])","<mo d='&#x2209;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\cup(?![a-zA-Z])","<mo d='&#x222A;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\cap(?![a-zA-Z])","<mo d='&#x2229;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\bigcup(?![a-zA-Z])","<mo d='&#x22C3;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\bigcap(?![a-zA-Z])","<mo d='&#x22C2;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\subseteqq(?![a-zA-Z])","<mo d='&#x2AC5;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\subseteq(?![a-zA-Z])","<mo d='&#x2286;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\supseteqq(?![a-zA-Z])","<mo d='&#x2AC6;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\supseteq(?![a-zA-Z])","<mo d='&#x2287;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\subsetneqq(?![a-zA-Z])","<mo d='&#x2ACB;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\subsetneq(?![a-zA-Z])","<mo d='&#x228A;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\subset(?![a-zA-Z])","<mo d='&#x2282;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\supsetneqq(?![a-zA-Z])","<mo d='&#x2ACC;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\supsetneq(?![a-zA-Z])","<mo d='&#x228B;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\supset(?![a-zA-Z])","<mo d='&#x2283;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\emptyset(?![a-zA-Z])","<mo d='&#x2205;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\varnothing(?![a-zA-Z])","<mo d='&#x2205;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\therefore(?![a-zA-Z])","<mo d='&#x2234;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\because(?![a-zA-Z])","<mo d='&#x2235;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\backepsilon(?![a-zA-Z])","<mo d='&#x220D;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\exists(?![a-zA-Z])","<mo d='&#x2203;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\forall(?![a-zA-Z])","<mo d='&#x2200;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\neg(?![a-zA-Z])","<mo d='&#x00AC;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\wedge(?![a-zA-Z])","<mo d='&#x2227;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\land(?![a-zA-Z])","<mo d='&#x2227;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\veebar(?![a-zA-Z])","<mo d='&#x22BB;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\vee(?![a-zA-Z])","<mo d='&#x2228;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\lor(?![a-zA-Z])","<mo d='&#x2228;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\leftrightarrows(?![a-zA-Z])","<mo d='&#x21C6;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\leftrightarrow(?![a-zA-Z])","<mo d='&#x2194;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\top(?![a-zA-Z])","<mo d='&#x22A4;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\to(?![a-zA-Z])","<mo d='&#x2192;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\rightarrowtail(?![a-zA-Z])","<mo d='&#x21A3;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\rightarrow(?![a-zA-Z])","<mo d='&#x2192;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\leftarrowtail(?![a-zA-Z])","<mo d='&#x21A2;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\gets(?![a-zA-Z])","<mo d='&#x2190;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\leftarrow(?![a-zA-Z])","<mo d='&#x2190;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\updownarrow(?![a-zA-Z])","<mo d='&#x2195;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\uparrow(?![a-zA-Z])","<mo d='&#x2191;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\downarrow(?![a-zA-Z])","<mo d='&#x2193;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\Leftrightarrow(?![a-zA-Z])","<mo d='&#x21D4;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\Rightarrow(?![a-zA-Z])","<mo d='&#x21D2;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\Leftarrow(?![a-zA-Z])","<mo d='&#x21D0;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\Updownarrow(?![a-zA-Z])","<mo d='&#x21D5;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\Uparrow(?![a-zA-Z])","<mo d='&#x21D1;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\Downarrow(?![a-zA-Z])","<mo d='&#x21D3;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\nearrow(?![a-zA-Z])","<mo d='&#x2197;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\swarrow(?![a-zA-Z])","<mo d='&#x2199;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\searrow(?![a-zA-Z])","<mo d='&#x2198;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\nwarrow(?![a-zA-Z])","<mo d='&#x2196;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\rightleftarrows(?![a-zA-Z])","<mo d='&#x21C4;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\rightleftharpoons(?![a-zA-Z])","<mo d='&#x21CC;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\mapsto(?![a-zA-Z])","<mo d='&#x21A6;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\pm(?![a-zA-Z])","<mo d='&#x00B1;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\mp(?![a-zA-Z])","<mo d='&#x2213;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\times(?![a-zA-Z])","<mo d='&#x00D7;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\ast(?![a-zA-Z])","<mo d='&#x2217;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\divideontimes(?![a-zA-Z])","<mo d='&#x22C7;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\div(?![a-zA-Z])","<mo d='&#x00F7;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\oplus(?![a-zA-Z])","<mo d='&#x2295;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\bigoplus(?![a-zA-Z])","<mo d='&#x2A01;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\otimes(?![a-zA-Z])","<mo d='&#x2297;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\odot(?![a-zA-Z])","<mo d='&#x2299;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\bigodot(?![a-zA-Z])","<mo d='&#x2A00;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\cdots(?![a-zA-Z])","<mo d='&#x22EF;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\cdot(?![a-zA-Z])","<mo d='&#x22C5;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\bullet(?![a-zA-Z])","<mo d='&#x2022;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\circleddash(?![a-zA-Z])","<mo d='&#x2296;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\circeq(?![a-zA-Z])","<mo d='&#x2257;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\circlearrowleft(?![a-zA-Z])","<mo d='&#x21BA;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\circlearrowright(?![a-zA-Z])","<mo d='&#x21BB;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\circledcirc(?![a-zA-Z])","<mo d='&#x229A;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\circledast(?![a-zA-Z])","<mo d='&#x229B;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\circledS(?![a-zA-Z])","<mo d='&#x24C8;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\circ(?![a-zA-Z])","<mo d='&#x00B0;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\langle(?![a-zA-Z])","<mtext d='&#x2329;'></mtext>")),rules.push(new EDLatextoMmlRules("\\\\rangle(?![a-zA-Z])","<mtext d='&#x232A;'></mtext>")),rules.push(new EDLatextoMmlRules("\\\\llbracket(?![a-zA-Z])","<mo d='&#x301A;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\rrbracket(?![a-zA-Z])","<mo d='&#x301B;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\Delta(?![a-zA-Z])","<mo d='&#x0394;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\Phi(?![a-zA-Z])","<mo d='&#x03A6;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\Gamma(?![a-zA-Z])","<mo d='&#x0393;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\Lambda(?![a-zA-Z])","<mo d='&#x039B;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\Pi(?![a-zA-Z])","<mo d='&#x03A0;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\Theta(?![a-zA-Z])","<mo d='&#x0398;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\Sigma(?![a-zA-Z])","<mo d='&#x03A3;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\Upsilon(?![a-zA-Z])","<mo d='&#x03D2;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\Omega(?![a-zA-Z])","<mo d='&#x03A9;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\Xi(?![a-zA-Z])","<mo d='&#x039E;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\Psi(?![a-zA-Z])","<mo d='&#x03A8;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\alpha(?![a-zA-Z])","<mo d='&#x03B1;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\beta(?![a-zA-Z])","<mo d='&#x03B2;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\chi(?![a-zA-Z])","<mo d='&#x03C7;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\delta(?![a-zA-Z])","<mo d='&#x03B4;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\varepsilon(?![a-zA-Z])","<mo d='&#x03B5;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\phi(?![a-zA-Z])","<mo d='&#x03D5;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\varphi(?![a-zA-Z])","<mo d='&#x03C6;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\gamma(?![a-zA-Z])","<mo d='&#x03B3;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\eta(?![a-zA-Z])","<mo d='&#x03B7;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\iota(?![a-zA-Z])","<mo d='&#x03B9;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\kappa(?![a-zA-Z])","<mo d='&#x03BA;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\lambda(?![a-zA-Z])","<mo d='&#x03BB;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\multimap(?![a-zA-Z])","<mo d='&#x22B8;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\mu(?![a-zA-Z])","<mo d='&#x03BC;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\nu(?![a-zA-Z])","<mo d='&#x03BD;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\pitchfork(?![a-zA-Z])","<mo d='&#x22D4;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\pi(?![a-zA-Z])","<mo d='&#x03C0;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\varpi(?![a-zA-Z])","<mo d='&#x03D6;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\theta(?![a-zA-Z])","<mo d='&#x03B8;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\vartheta(?![a-zA-Z])","<mo d='&#x03D1;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\rho(?![a-zA-Z])","<mo d='&#x03C1;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\sigma(?![a-zA-Z])","<mo d='&#x03C3;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\varsigma(?![a-zA-Z])","<mo d='&#x03C2;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\tau(?![a-zA-Z])","<mo d='&#x03C4;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\upsilon(?![a-zA-Z])","<mo d='&#x03C5;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\omega(?![a-zA-Z])","<mo d='&#x03C9;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\xi(?![a-zA-Z])","<mo d='&#x03BE;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\psi(?![a-zA-Z])","<mo d='&#x03C8;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\zeta(?![a-zA-Z])","<mo d='&#x03B6;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\partial(?![a-zA-Z])","<mo d='&#x2202;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\wp(?![a-zA-Z])","<mo d='&#x2118;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\Im(?![a-zA-Z])","<mo d='&#x2111;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\Re(?![a-zA-Z])","<mo d='&#x211C;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\aleph(?![a-zA-Z])","<mo d='&#x2135;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\hbar(?![a-zA-Z])","<mo d='&#x210F;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\hslash(?![a-zA-Z])","<mo d='&#x210F;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\ell(?![a-zA-Z])","<mo d='&#x2113;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\dagger(?![a-zA-Z])","<mo d='&#x2020;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\Delta(?![a-zA-Z])","<mo d='&#x0394;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\nabla(?![a-zA-Z])","<mo d='&#x2207;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\Omega(?![a-zA-Z])","<mo d='&#x03A9;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\mho(?![a-zA-Z])","<mo d='&#x2127;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\diamondsuit(?![a-zA-Z])","<mo d='&#x2662;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\diamond(?![a-zA-Z])","<mo d='&#x22C4;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\sum(?![a-zA-Z])","<mo d='&#x2211;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\prod(?![a-zA-Z])","<mo d='&#x220F;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\coprod(?![a-zA-Z])","<mo d='&#x2210;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\amalg(?![a-zA-Z])","<mo d='&#x2210;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\angle(?![a-zA-Z])","<mo d='&#x2220;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\measuredangle(?![a-zA-Z])","<mo d='&#x2221;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\sphericalangle(?![a-zA-Z])","<mo d='&#x2222;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\perp(?![a-zA-Z])","<mo d='&#x22A5;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\bot(?![a-zA-Z])","<mo d='&#x22A5;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\parallel(?![a-zA-Z])","<mo d='&#x2225;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\bigtriangleup(?![a-zA-Z])","<mo d='&#x25B3;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\square(?![a-zA-Z])","<mo d='&#x25A1;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\Box(?![a-zA-Z])","<mo d='&#x25A1;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\lesssim(?![a-zA-Z])","<mo d='&#x2272;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\lessapprox(?![a-zA-Z])","<mo d='&#x2A85;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\leqslant(?![a-zA-Z])","<mo d='&#x2A7D;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\leqq(?![a-zA-Z])","<mo d='&#x2266;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\leftrightharpoons(?![a-zA-Z])","<mo d='&#x21CB;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\leq(?![a-zA-Z])","<mo d='&#x2264;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\leftharpoonup(?![a-zA-Z])","<mo d='&#x21BC;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\leftharpoondown(?![a-zA-Z])","<mo d='&#x21BD;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\leadsto(?![a-zA-Z])","<mo d='&#x21DD;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\lessdot(?![a-zA-Z])","<mo d='&#x22D6;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\lessgtr(?![a-zA-Z])","<mo d='&#x2276;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\lesseqgtr(?![a-zA-Z])","<mo d='&#x22DA;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\lesseqqgtr(?![a-zA-Z])","<mo d='&#x2A8B;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\leftleftarrows(?![a-zA-Z])","<mo d='&#x21C7;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\leftrightsquigarrow(?![a-zA-Z])","<mo d='&#x21AD;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\leftthreetimes(?![a-zA-Z])","<mo d='&#x22CB;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\le(?![a-zA-Z])","<mo d='&#x2264;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\geqslant(?![a-zA-Z])","<mo d='&#x2A7E;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\geqq(?![a-zA-Z])","<mo d='&#x2267;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\geq(?![a-zA-Z])","<mo d='&#x2265;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\ge(?![a-zA-Z])","<mo d='&#x2265;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\llcorner(?![a-zA-Z])","<mo d='&#x231E;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\llless(?![a-zA-Z])","<mo d='&#x22D8;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\lll(?![a-zA-Z])","<mo d='&#x22D8;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\ll(?![a-zA-Z])","<mo d='&#x226A;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\gggtr(?![a-zA-Z])","<mo d='&#x22D9;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\ggg(?![a-zA-Z])","<mo d='&#x22D9;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\gg(?![a-zA-Z])","<mo d='&#x226B;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\preceq(?![a-zA-Z])","<mo d='&#x2AAF;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\preccurlyeq(?![a-zA-Z])","<mo d='&#x227C;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\precsim(?![a-zA-Z])","<mo d='&#x227E;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\precapprox(?![a-zA-Z])","<mo d='&#x2AB7;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\precneqq(?![a-zA-Z])","<mo d='&#x2AB5;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\precnsim(?![a-zA-Z])","<mo d='&#x22E8;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\precnapprox(?![a-zA-Z])","<mo d='&#x2AB9;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\prec(?![a-zA-Z])","<mo d='&#x227A;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\succcurlyeq(?![a-zA-Z])","<mo d='&#x227D;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\succeq(?![a-zA-Z])","<mo d='&#x227D;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\succsim(?![a-zA-Z])","<mo d='&#x227F;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\succapprox(?![a-zA-Z])","<mo d='&#x2AB8;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\succneqq(?![a-zA-Z])","<mo d='&#x2AB6;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\succnsim(?![a-zA-Z])","<mo d='&#x22E9;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\succnapprox(?![a-zA-Z])","<mo d='&#x2ABA;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\succ(?![a-zA-Z])","<mo d='&#x227B;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\trianglelefteq(?![a-zA-Z])","<mo d='&#x22B4;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\triangleleft(?![a-zA-Z])","<mo d='&#x22B2;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\lhd(?![a-zA-Z])","<mo d='&#x22B2;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\vartriangleleft(?![a-zA-Z])","<mo d='&#x22B2;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\trianglerighteq(?![a-zA-Z])","<mo d='&#x22B5;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\triangleright(?![a-zA-Z])","<mo d='&#x22B3;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\vartriangleright(?![a-zA-Z])","<mo d='&#x22B3;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\vartriangleright(?![a-zA-Z])","<mo d='&#x22B3;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\simeq(?![a-zA-Z])","<mo d='&#x2243;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\sim(?![a-zA-Z])","<mo d='&#x223C;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\thicksim(?![a-zA-Z])","<mo d='&#x223C;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\approxeq(?![a-zA-Z])","<mo d='&#x224A;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\approx(?![a-zA-Z])","<mo d='&#x2248;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\thickapprox(?![a-zA-Z])","<mo d='&#x2248;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\cong(?![a-zA-Z])","<mo d='&#x2245;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\neq(?![a-zA-Z])","<mo d='&#x2260;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\nexists(?![a-zA-Z])","<mo d='&#x2204;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\ne(?![a-zA-Z])","<mo d='&#x2260;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\equiv(?![a-zA-Z])","<mo d='&#x2261;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\triangleq(?![a-zA-Z])","<mo d='&#x225C;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\triangleq(?![a-zA-Z])","<mo d='&#x225C;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\doteqdot(?![a-zA-Z])","<mo d='&#x2251;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\doteq(?![a-zA-Z])","<mo d='&#x2250;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\propto(?![a-zA-Z])","<mo d='&#x221D;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\varpropto(?![a-zA-Z])","<mo d='&#x221D;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\ldots(?![a-zA-Z])","<mo d='&#x2026;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\dots(?![a-zA-Z])","<mo d='&#x2026;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\vdots(?![a-zA-Z])","<mo d='&#x22EE;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\iddots(?![a-zA-Z])","<mo d='&#x22F0;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\ddots(?![a-zA-Z])","<mo d='&#x22F1;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\iint(?![a-zA-Z])","<mo d='&#x222C;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\iiint(?![a-zA-Z])","<mo d='&#x222D;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\iiiint(?![a-zA-Z])","<mo d='&#x2A0C;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\ointctrclockwise(?![a-zA-Z])","<mo d='&#x2233;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\ointclockwise(?![a-zA-Z])","<mo d='&#x2232;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\oint(?![a-zA-Z])","<mo d='&#x222E;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\varoiint(?![a-zA-Z])","<mo d='&#x222F;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\varoiint(?![a-zA-Z])","<mo d='&#x222F;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\\\{","<mtext d='&#x007B;'></mtext>")),rules.push(new EDLatextoMmlRules("\\\\\\}","<mtext d='&#x007D;'></mtext>")),rules.push(new EDLatextoMmlRules("\\\\lfloor(?![a-zA-Z])","<mtext d='&#x230A;'></mtext>")),rules.push(new EDLatextoMmlRules("\\\\rfloor(?![a-zA-Z])","<mtext d='&#x230B;'></mtext>")),rules.push(new EDLatextoMmlRules("\\\\Vert(?![a-zA-Z])","<mo d='&#x2016;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\lceil(?![a-zA-Z])","<mtext d='&#x2308;'></mtext>")),rules.push(new EDLatextoMmlRules("\\\\rceil(?![a-zA-Z])","<mtext d='&#x2309;'></mtext>")),rules.push(new EDLatextoMmlRules("\\\\epsilon(?![a-zA-Z])","<mo d='&#x03F5;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\varrho(?![a-zA-Z])","<mo d='&#x03F1;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\sqsubseteq(?![a-zA-Z])","<mo d='&#x2291;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\sqsupseteq(?![a-zA-Z])","<mo d='&#x2292;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\sqsubset(?![a-zA-Z])","<mo d='&#x228F;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\sqsupset(?![a-zA-Z])","<mo d='&#x2290;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\bowtie(?![a-zA-Z])","<mo d='&#x22C8;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\ni(?![a-zA-Z])","<mo d='&#x220B;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\owns(?![a-zA-Z])","<mo d='&#x220B;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\vdash(?![a-zA-Z])","<mo d='&#x22A2;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\dashv(?![a-zA-Z])","<mo d='&#x22A3;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\models(?![a-zA-Z])","<mo d='&#x22A8;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\vDash(?![a-zA-Z])","<mo d='&#x22A8;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\mid(?![a-zA-Z])","<mo d='&#x2223;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\smile(?![a-zA-Z])","<mo d='&#x2323;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\smallsmile(?![a-zA-Z])","<mo d='&#x2323;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\frown(?![a-zA-Z])","<mo d='&#x2322;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\smallfrown(?![a-zA-Z])","<mo d='&#x2322;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\asymp(?![a-zA-Z])","<mo d='&#x224D;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\setminus(?![a-zA-Z])","<mo d='&#x2216;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\smallsetminus(?![a-zA-Z])","<mo d='&#x2216;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\star(?![a-zA-Z])","<mo d='&#x22C6;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\sqcup(?![a-zA-Z])","<mo d='&#x2294;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\bigsqcup(?![a-zA-Z])","<mo d='&#x2A06;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\sqcap(?![a-zA-Z])","<mo d='&#x2293;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\ominus(?![a-zA-Z])","<mo d='&#x2296;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\oslash(?![a-zA-Z])","<mo d='&#x2298;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\uplus(?![a-zA-Z])","<mo d='&#x228E;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\biguplus(?![a-zA-Z])","<mo d='&#x2A04;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\bigcirc(?![a-zA-Z])","<mo d='&#x25EF;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\bigtriangledown(?![a-zA-Z])","<mo d='&#x25BD;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\triangledown(?![a-zA-Z])","<mo d='&#x25BD;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\ddagger(?![a-zA-Z])","<mo d='&#x2021;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\unlhd(?![a-zA-Z])","<mo d='&#x22B4;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\unrhd(?![a-zA-Z])","<mo d='&#x22B5;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\wr(?![a-zA-Z])","<mo d='&#x2240;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\bigvee(?![a-zA-Z])","<mo d='&#x22C1;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\bigwedge(?![a-zA-Z])","<mo d='&#x22C0;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\bigotimes(?![a-zA-Z])","<mo d='&#x2A02;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\longleftarrow(?![a-zA-Z])","<mo d='&#x27F5;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\longrightarrow(?![a-zA-Z])","<mo d='&#x27F6;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\longleftrightarrow(?![a-zA-Z])","<mo d='&#x27F7;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\Longleftarrow(?![a-zA-Z])","<mo d='&#x27F8;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\Longrightarrow(?![a-zA-Z])","<mo d='&#x27F9;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\Longleftrightarrow(?![a-zA-Z])","<mo d='&#x27FA;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\longmapsto(?![a-zA-Z])","<mo d='&#x27FC;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\hookleftarrow(?![a-zA-Z])","<mo d='&#x21A9;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\hookrightarrow(?![a-zA-Z])","<mo d='&#x21AA;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\rightharpoonup(?![a-zA-Z])","<mo d='&#x21C0;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\rightharpoondown(?![a-zA-Z])","<mo d='&#x21C1;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\vert(?![a-zA-Z])","<mo d='&#x007C;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\lgroup(?![a-zA-Z])","<mo d='&#x3014;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\backslash(?![a-zA-Z])","<mo d='&#x005C;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\rgroup(?![a-zA-Z])","<mo d='&#x3015;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\lmoustache(?![a-zA-Z])","<mo d='&#x23B0;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\rmoustache(?![a-zA-Z])","<mo d='&#x23B1;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\arrowvert(?![a-zA-Z])","<mo d='&#x23D0;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\imath(?![a-zA-Z])","<mo d='&#x0131;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\jmath(?![a-zA-Z])","<mo d='&#x0237;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\Re(?![a-zA-Z])","<mo d='&#x211C;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\prime(?![a-zA-Z])","<mo d='&#x2032;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\Diamond(?![a-zA-Z])","<mo d='&#x25CA;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\lozenge(?![a-zA-Z])","<mo d='&#x25CA;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\surd(?![a-zA-Z])","<mo d='&#x221A;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\heartsuit(?![a-zA-Z])","<mo d='&#x2661;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\clubsuit(?![a-zA-Z])","<mo d='&#x2663;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\spadesuit(?![a-zA-Z])","<mo d='&#x2660;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\flat(?![a-zA-Z])","<mo d='&#x266D;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\natural(?![a-zA-Z])","<mo d='&#x266E;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\sharp(?![a-zA-Z])","<mo d='&#x266F;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\Subset(?![a-zA-Z])","<mo d='&#x22D0;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\Supset(?![a-zA-Z])","<mo d='&#x22D1;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\S(?![a-zA-Z])","<mo d='&#x00A7;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\P(?![a-zA-Z])","<mo d='&#x00B6;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\pounds(?![a-zA-Z])","<mo d='&#x00A3;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\ulcorner(?![a-zA-Z])","<mo d='&#x231C;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\urcorner(?![a-zA-Z])","<mo d='&#x231D;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\lrcorner(?![a-zA-Z])","<mo d='&#x231F;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\digamma(?![a-zA-Z])","<mo d='&#x03DC;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\varkappa(?![a-zA-Z])","<mo d='&#x03F0;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\beth(?![a-zA-Z])","<mo d='&#x2136;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\daleth(?![a-zA-Z])","<mo d='&#x2138;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\gimel(?![a-zA-Z])","<mo d='&#x2137;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\gtrdot(?![a-zA-Z])","<mo d='&#x22D7;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\Doteq(?![a-zA-Z])","<mo d='&#x2251;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\risingdotseq(?![a-zA-Z])","<mo d='&#x2253;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\eqslantless(?![a-zA-Z])","<mo d='&#x22DC;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\eqslantgtr(?![a-zA-Z])","<mo d='&#x22DD;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\fallingdotseq(?![a-zA-Z])","<mo d='&#x2252;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\eqcirc(?![a-zA-Z])","<mo d='&#x2256;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\gtrsim(?![a-zA-Z])","<mo d='&#x2273;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\gtrapprox(?![a-zA-Z])","<mo d='&#x2A86;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\bumpeq(?![a-zA-Z])","<mo d='&#x224F;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\gtrless(?![a-zA-Z])","<mo d='&#x2277;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\Bumpeq(?![a-zA-Z])","<mo d='&#x224E;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\gtreqless(?![a-zA-Z])","<mo d='&#x22DB;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\gtreqqless(?![a-zA-Z])","<mo d='&#x2A8C;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\curlyeqprec(?![a-zA-Z])","<mo d='&#x22DE;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\curlyeqsucc(?![a-zA-Z])","<mo d='&#x22DF;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\backsimeq(?![a-zA-Z])","<mo d='&#x22CD;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\backsim(?![a-zA-Z])","<mo d='&#x223D;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\Vdash(?![a-zA-Z])","<mo d='&#x22A9;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\Vvdash(?![a-zA-Z])","<mo d='&#x22AA;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\between(?![a-zA-Z])","<mo d='&#x226C;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\blacktriangleleft(?![a-zA-Z])","<mo d='&#x25C0;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\blacktriangleright(?![a-zA-Z])","<mo d='&#x25B6;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\dashleftarrow(?![a-zA-Z])","<mo d='&#x21E0;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\dashrightarrow(?![a-zA-Z])","<mo d='&#x21E2;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\rightrightarrows(?![a-zA-Z])","<mo d='&#x21C9;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\upuparrows(?![a-zA-Z])","<mo d='&#x21C8;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\downdownarrows(?![a-zA-Z])","<mo d='&#x21CA;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\Lleftarrow(?![a-zA-Z])","<mo d='&#x21DA;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\Rrightarrow(?![a-zA-Z])","<mo d='&#x21DB;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\upharpoonleft(?![a-zA-Z])","<mo d='&#x21BF;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\twoheadleftarrow(?![a-zA-Z])","<mo d='&#x219E;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\twoheadrightarrow(?![a-zA-Z])","<mo d='&#x21A0;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\upharpoonright(?![a-zA-Z])","<mo d='&#x21BE;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\downharpoonleft(?![a-zA-Z])","<mo d='&#x21C3;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\downharpoonright(?![a-zA-Z])","<mo d='&#x21C2;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\Lsh(?![a-zA-Z])","<mo d='&#x21B0;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\Rsh(?![a-zA-Z])","<mo d='&#x21B1;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\rightsquigarrow(?![a-zA-Z])","<mo d='&#x21DD;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\looparrowleft(?![a-zA-Z])","<mo d='&#x21AB;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\looparrowright(?![a-zA-Z])","<mo d='&#x21AC;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\curvearrowleft(?![a-zA-Z])","<mo d='&#x21B6;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\curvearrowright(?![a-zA-Z])","<mo d='&#x21B7;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\nless(?![a-zA-Z])","<mo d='&#x226E;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\ngtr(?![a-zA-Z])","<mo d='&#x226F;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\lneqq(?![a-zA-Z])","<mo d='&#x2268;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\lneq(?![a-zA-Z])","<mo d='&#x2A87;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\gneqq(?![a-zA-Z])","<mo d='&#x2269;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\gneq(?![a-zA-Z])","<mo d='&#x2A88;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\nleq(?![a-zA-Z])","<mo d='&#x2270;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\ngeq(?![a-zA-Z])","<mo d='&#x2271;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\nsubseteqq(?![a-zA-Z])","<mo d='&#xE016;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\nsupseteqq(?![a-zA-Z])","<mo d='&#xE018;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\nmid(?![a-zA-Z])","<mo d='&#x2224;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\nparallel(?![a-zA-Z])","<mo d='&#x2226;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\lnsim(?![a-zA-Z])","<mo d='&#x22E6;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\gnsim(?![a-zA-Z])","<mo d='&#x22E7;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\lnapprox(?![a-zA-Z])","<mo d='&#x2A89;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\gnapprox(?![a-zA-Z])","<mo d='&#x2A8A;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\nsim(?![a-zA-Z])","<mo d='&#x2241;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\npreceq(?![a-zA-Z])","<mo d='&#x22E0;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\nprec(?![a-zA-Z])","<mo d='&#x2280;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\nsucceq(?![a-zA-Z])","<mo d='&#x22E1;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\nsucc(?![a-zA-Z])","<mo d='&#x2281;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\ncong(?![a-zA-Z])","<mo d='&#x2247;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\nvdash(?![a-zA-Z])","<mo d='&#x22AC;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\nvDash(?![a-zA-Z])","<mo d='&#x22AD;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\nVdash(?![a-zA-Z])","<mo d='&#x22AE;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\nVDash(?![a-zA-Z])","<mo d='&#x22AF;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\ntrianglelefteq(?![a-zA-Z])","<mo d='&#x22EC;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\ntriangleleft(?![a-zA-Z])","<mo d='&#x22EA;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\ntrianglerighteq(?![a-zA-Z])","<mo d='&#x22ED;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\ntriangleright(?![a-zA-Z])","<mo d='&#x22EB;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\nsubseteq(?![a-zA-Z])","<mo d='&#x2288;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\nsupseteq(?![a-zA-Z])","<mo d='&#x2289;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\nleftarrow(?![a-zA-Z])","<mo d='&#x219A;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\nrightarrow(?![a-zA-Z])","<mo d='&#x219B;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\nleftrightarrow(?![a-zA-Z])","<mo d='&#x21AE;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\nLeftarrow(?![a-zA-Z])","<mo d='&#x21CD;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\nRightarrow(?![a-zA-Z])","<mo d='&#x21CF;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\nLeftrightarrow(?![a-zA-Z])","<mo d='&#x21CE;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\dotplus(?![a-zA-Z])","<mo d='&#x2214;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\ltimes(?![a-zA-Z])","<mo d='&#x22C9;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\rtimes(?![a-zA-Z])","<mo d='&#x22CA;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\Cup(?![a-zA-Z])","<mo d='&#x22D3;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\doublecup(?![a-zA-Z])","<mo d='&#x22D3;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\Cap(?![a-zA-Z])","<mo d='&#x22D2;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\doublecap(?![a-zA-Z])","<mo d='&#x22D2;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\barwedge(?![a-zA-Z])","<mo d='&#x22BC;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\doublebarwedge(?![a-zA-Z])","<mo d='&#x2306;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\boxplus(?![a-zA-Z])","<mo d='&#x229E;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\boxminus(?![a-zA-Z])","<mo d='&#x229F;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\boxtimes(?![a-zA-Z])","<mo d='&#x22A0;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\boxdot(?![a-zA-Z])","<mo d='&#x22A1;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\rightthreetimes(?![a-zA-Z])","<mo d='&#x22CC;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\curlyvee(?![a-zA-Z])","<mo d='&#x22CE;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\curlywedge(?![a-zA-Z])","<mo d='&#x22CF;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\blacksquare(?![a-zA-Z])","<mo d='&#x25A0;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\vartriangle(?![a-zA-Z])","<mo d='&#x25B5;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\blacktriangledown(?![a-zA-Z])","<mo d='&#x25BC;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\blacktriangle(?![a-zA-Z])","<mo d='&#x25B2;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\complement(?![a-zA-Z])","<mo d='&#x2201;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\Game(?![a-zA-Z])","<mo d='&#x2141;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\blacklozenge(?![a-zA-Z])","<mo d='&#x2666;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\bigstar(?![a-zA-Z])","<mo d='&#x2605;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\diagup(?![a-zA-Z])","<mo d='&#x2571;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\diagdown(?![a-zA-Z])","<mo d='&#x2572;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\backprime(?![a-zA-Z])","<mo d='&#x2035;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\Finv(?![a-zA-Z])","<mo d='&#x2132;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\eth(?![a-zA-Z])","<mo d='&#x00F0;'></mo>")),rules.push(new EDLatextoMmlRules("\\\\tilde *<mrow (\\d+)>(.*?)</mrow \\1>","<mover><mrow>$2</mrow><mo d='&#x02DC;'></mo></mover>")),rules.push(new EDLatextoMmlRules("\\\\widetilde *<mrow (\\d+)>(.*?)</mrow \\1>","<mover><mrow>$2</mrow><mo d='&#x02DC;'></mo></mover>")),rules.push(new EDLatextoMmlRules("\\\\hat *<mrow (\\d+)>(.*?)</mrow \\1>","<mover><mrow>$2</mrow><mo d='&#x005E;'></mo></mover>")),rules.push(new EDLatextoMmlRules("\\\\widehat *<mrow (\\d+)>(.*?)</mrow \\1>","<mover><mrow>$2</mrow><mo d='&#x005E;'></mo></mover>")),rules.push(new EDLatextoMmlRules("\\\\bar *<mrow (\\d+)>(.*?)</mrow \\1>","<mover><mrow>$2</mrow><mo d='&#x00AF;'></mo></mover>")),rules.push(new EDLatextoMmlRules("\\\\overline *<mrow (\\d+)>(.*?)</mrow \\1>","<mover><mrow>$2</mrow><mo d='&#x00AF;'></mo></mover>")),rules.push(new EDLatextoMmlRules("\\\\vec *<mrow (\\d+)>(.*?)</mrow \\1>","<mover><mrow>$2</mrow><mo d='&#x2192;'></mo></mover>")),rules.push(new EDLatextoMmlRules("\\\\overrightarrow *<mrow (\\d+)>(.*?)</mrow \\1>","<mover><mrow>$2</mrow><mo d='&#x2192;'></mo></mover>")),rules.push(new EDLatextoMmlRules("\\\\overleftarrow *<mrow (\\d+)>(.*?)</mrow \\1>","<mover><mrow>$2</mrow><mo d='&#x2190;'></mo></mover>")),rules.push(new EDLatextoMmlRules("\\\\overleftrightarrow *<mrow (\\d+)>(.*?)</mrow \\1>","<mover><mrow>$2</mrow><mo d='&#x2194;'></mo></mover>")),rules.push(new EDLatextoMmlRules("\\\\check *<mrow (\\d+)>(.*?)</mrow \\1>","<mover><mrow>$2</mrow><mo d='&#x02C7;'></mo></mover>")),rules.push(new EDLatextoMmlRules("\\\\acute *<mrow (\\d+)>(.*?)</mrow \\1>","<mover><mrow>$2</mrow><mo d='&#x00B4;'></mo></mover>")),rules.push(new EDLatextoMmlRules("\\\\grave *<mrow (\\d+)>(.*?)</mrow \\1>","<mover><mrow>$2</mrow><mo d='&#x0060;'></mo></mover>")),rules.push(new EDLatextoMmlRules("\\\\dot *<mrow (\\d+)>(.*?)</mrow \\1>","<mover><mrow>$2</mrow><mo d='&#x02D9;'></mo></mover>")),rules.push(new EDLatextoMmlRules("\\\\ddot *<mrow (\\d+)>(.*?)</mrow \\1>","<mover><mrow>$2</mrow><mo d='&#x00A8;'></mo></mover>")),rules.push(new EDLatextoMmlRules("\\\\breve *<mrow (\\d+)>(.*?)</mrow \\1>","<mover><mrow>$2</mrow><mo d='&#x2323;'></mo></mover>")),rules.push(new EDLatextoMmlRules("\\\\xrightarrow *<mrow (\\d+)>(.*?)</mrow \\1>","<mover><mo d='&#x2192;'></mo><mrow>$2</mrow></mover>")),rules.push(new EDLatextoMmlRules("\\\\xleftarrow *<mrow (\\d+)>(.*?)</mrow \\1>","<mover><mo d='&#x2190;'></mo><mrow>$2</mrow></mover>")),rules.push(new EDLatextoMmlRules("\\\\underline *<mrow (\\d+)>(.*?)</mrow \\1>","<munder><mrow>$2</mrow><mo d='&#x005F;'></mo></munder>")),rules.push(new EDLatextoMmlRules("\\\\underrightarrow *<mrow (\\d+)>(.*?)</mrow \\1>","<munder><mrow>$2</mrow><mo d='&#x2192;'></mo></munder>")),rules.push(new EDLatextoMmlRules("\\\\underleftarrow *<mrow (\\d+)>(.*?)</mrow \\1>","<munder><mrow>$2</mrow><mo d='&#x2190;'></mo></munder>")),rules.push(new EDLatextoMmlRules("\\\\underleftrightarrow *<mrow (\\d+)>(.*?)</mrow \\1>","<munder><mrow>$2</mrow><mo d='&#x2194;'></mo></munder>")),rules.push(new EDLatextoMmlRules("\\\\xrightarrow *\\[(.*?)\\] *<mrow (\\d+)>(.*?)</mrow \\2>","<munderover><mo d='&#x2192;'></mo><mrow>$2</mrow><mrow>$3</mrow></munderover>")),rules.push(new EDLatextoMmlRules("\\\\xleftarrow *\\[(.*?)\\] *<mrow (\\d+)>(.*?)</mrow \\2>","<munderover><mo d='&#x2190;'></mo><mrow>$2</mrow><mrow>$3</mrow></munderover>")),rules},EDLatextoMML.prototype.initmatrixRules=function(){var matrixRules=[];return matrixRules.push(new EDmatrixRules("matrix"," \\begin{array}{*{20}{c}} "," \\end{array} ")),matrixRules.push(new EDmatrixRules("smallmatrix"," \\begin{array}{*{20}{c}} "," \\end{array} ")),matrixRules.push(new EDmatrixRules("vmatrix"," \\left| { \\begin{array}{*{20}{c}} "," \\end{array} } \\right| ")),matrixRules.push(new EDmatrixRules("Vmatrix"," \\left\\Vert { \\begin{array}{*{20}{c}} "," \\end{array} } \\right\\Vert ")),matrixRules.push(new EDmatrixRules("bmatrix"," \\left[ { \\begin{array}{*{20}{c}} "," \\end{array} } \\right] ")),matrixRules.push(new EDmatrixRules("Bmatrix"," \\left\\{ { \\begin{array}{*{20}{c}} "," \\end{array} } \\right\\} ")),matrixRules.push(new EDmatrixRules("pmatrix"," \\left( { \\begin{array}{*{20}{c}} "," \\end{array} } \\right) ")),matrixRules.push(new EDmatrixRules("align"," \\begin{array}{*{20}{l}} "," \\end{array} ")),matrixRules.push(new EDmatrixRules("cases"," \\left\\{ { \\begin{array}{*{20}{l}} "," \\end{array} } \\right. ")),matrixRules.push(new EDmatrixRules("equation"," "," ")),matrixRules},EDLatextoMML.prototype.initLatex=function(latex){latex=(latex=(latex=(latex=(latex=(latex=(latex=(latex=(latex=(latex=(latex=(latex=(latex=(latex=(latex=(latex=(latex=(latex=(latex=(latex=(latex=(latex=(latex=(latex=(latex=(latex=(latex=(latex=(latex=(latex=(latex=latex.replace(new RegExp("(\\_|\\^) *([a-zA-Z0-9])"),"$1{$2}")).replace(new RegExp("\\\\sqrt( *[0-9]| +[a-zA-Z])"),"\\sqrt{$1}")).replace(new RegExp("\\\\frac( *[0-9]| +[a-zA-Z0-9]) *([a-zA-Z0-9])"),"\\frac{$1}{$2}")).replace(new RegExp("\\\\mathop +([a-zA-Z0-9])\\\\nolimits(\\_|\\^)"),"{$1}$2")).replace(new RegExp("\\\\mathop +([a-zA-Z0-9])\\\\limits(\\_|\\^)"),"\\mathop{$1}\\limits$2")).replace(new RegExp("\\\\rm( *[0-9]| +[a-zA-Z0-9])"),"\\rm{$1}")).replace(new RegExp("\\\\tilde( *[0-9]| +[a-zA-Z0-9])"),"\\tilde{$1}")).replace(new RegExp("\\\\widetilde( *[0-9]| +[a-zA-Z0-9])"),"\\widetilde{$1}")).replace(new RegExp("\\\\hat( *[0-9]| +[a-zA-Z0-9])"),"\\hat{$1}")).replace(new RegExp("\\\\widehat( *[0-9]| +[a-zA-Z0-9])"),"\\widehat{$1}")).replace(new RegExp("\\\\bar( *[0-9]| +[a-zA-Z0-9])"),"\\bar{$1}")).replace(new RegExp("\\\\overline( *[0-9]| +[a-zA-Z0-9])"),"\\overline{$1}")).replace(new RegExp("\\\\vec( *[0-9]| +[a-zA-Z0-9])"),"\\vec{$1}")).replace(new RegExp("\\\\overrightarrow( *[0-9]| +[a-zA-Z0-9])"),"\\overrightarrow{$1}")).replace(new RegExp("\\\\overleftarrow( *[0-9]| +[a-zA-Z0-9])"),"\\overleftarrow{$1}")).replace(new RegExp("\\\\overleftrightarrow( *[0-9]| +[a-zA-Z0-9])"),"\\overleftrightarrow{$1}")).replace(new RegExp("\\\\check( *[0-9]| +[a-zA-Z0-9])"),"\\check{$1}")).replace(new RegExp("\\\\acute( *[0-9]| +[a-zA-Z0-9])"),"\\acute{$1}")).replace(new RegExp("\\\\grave( *[0-9]| +[a-zA-Z0-9])"),"\\grave{$1}")).replace(new RegExp("\\\\dot( *[0-9]| +[a-zA-Z0-9])"),"\\dot{$1}")).replace(new RegExp("\\\\ddot( *[0-9]| +[a-zA-Z0-9])"),"\\ddot{$1}")).replace(new RegExp("\\\\breve( *[0-9]| +[a-zA-Z0-9])"),"\\breve{$1}")).replace(new RegExp("\\\\xrightarrow( *[0-9]| +[a-zA-Z0-9])"),"\\xrightarrow{$1}")).replace(new RegExp("\\\\xleftarrow( *[0-9]| +[a-zA-Z0-9])"),"\\xleftarrow{$1}")).replace(new RegExp("\\\\underline( *[0-9]| +[a-zA-Z0-9])"),"\\underline{$1}")).replace(new RegExp("\\\\underrightarrow( *[0-9]| +[a-zA-Z0-9])"),"\\underrightarrow{$1}")).replace(new RegExp("\\\\underleftarrow( *[0-9]| +[a-zA-Z0-9])"),"\\underleftarrow{$1}")).replace(new RegExp("\\\\underleftrightarrow( *[0-9]| +[a-zA-Z0-9])"),"\\underleftrightarrow{$1}")).replace(new RegExp("\\\\xrightarrow *\\[(.*?)\\] *([a-zA-Z0-9])","g"),"\\xrightarrow[$1]{$2}")).replace(new RegExp("\\\\xleftarrow *\\[(.*?)\\] *([a-zA-Z0-9])","g"),"\\xleftarrow[$1]{$2}")).replace(new RegExp("\\\\sqrt *\\[(.*?)\\] *([a-zA-Z0-9])","g"),"\\sqrt[$1]{$2}");for(var rxa,pattern="\\\\(begin|end)\\{(.*?)\\}",rx=new RegExp(pattern),pos=0,mtableStack=[],matrixRules=this.initmatrixRules(),i=0;i<matrixRules.length;i++){var rxa_1,rule=matrixRules[i],pattern="\\\\(begin|end)\\{"+rule.environment+"\\}",rx=new RegExp(pattern,"g");for(pos=0;null!=(rxa_1=rx.exec(latex));){var length_1=rxa_1[0].length,pos=rx.lastIndex-length_1;"begin"===rxa_1[1]?(mtableInfo=new mtableMatch(rule.begin,rule.end,pos,length_1),mtableStack.push(mtableInfo)):"end"===rxa_1[1]&&0<mtableStack.length&&(mtableInfo=mtableStack.pop(),latex=(latex=latex.replace(rxa_1[0],mtableInfo.end)).slice(0,mtableInfo.index)+mtableInfo.begin+latex.slice(mtableInfo.index+mtableInfo.len))}mtableStack.splice(0)}for(rx=/(\\begin\{tabular\}\{(\{\d+\}|\{[clr]\}|[clr*|>])*?\}|\\end\{tabular\})/g;null!=(rxa=rx.exec(latex));){var length_2=rxa[0].length;pos=rx.lastIndex-length_2,"\\end{tabular}"===rxa[0]&&0<mtableStack.length?(mtableInfo=mtableStack.pop(),latex=(latex=latex.replace(rxa[1],mtableInfo.end)).slice(0,mtableInfo.index)+mtableInfo.begin+latex.slice(mtableInfo.index+mtableInfo.len)):(count=(++this._currentCount).toString(),mtableInfo=new mtableMatch("<mrow "+count+"><mtable columnalign='center'><mtr><mtd>","</mtd></mtr></mtable></mrow "+count+">",pos,length_2),mtableStack.push(mtableInfo))}mtableStack.splice(0),pattern="(\\\\begin\\{array\\}\\{\\*\\{20\\}\\{[c|l|r]\\}\\}|\\\\end\\{array\\})",new RegExp(pattern,"g"),rx=/(\\begin\{array\}(\{\*\{\d+\}\{[clr]+\}\}|\{[clr]\})|\\end\{array\})/g,pos=0;for(var rxCenter=/\\begin\{array\}\{\*\{\d+\}\{c\}\}/g,rxLeft=/\\begin\{array\}\{\*\{\d+\}\{l\}\}/g,rxRight=/\\begin\{array\}\{\*\{\d+\}\{r\}\}/g,rxElse=/\\begin\{array\}\{\*\{\d+\}\{[c|l|r]+\}\}/g;null!=(rxa=rx.exec(latex));){var count,mtableInfo,length_3=rxa[0].length;pos=rx.lastIndex-length_3,"\\begin{array}{c}"===rxa[0]||rxCenter.test(rxa[0])?(count=(++this._currentCount).toString(),mtableInfo=new mtableMatch("<mrow "+count+"><mtable columnalign='center'><mtr><mtd>","</mtd></mtr></mtable></mrow "+count+">",pos,length_3),mtableStack.push(mtableInfo)):"\\begin{array}{l}"===rxa[0]||rxLeft.test(rxa[0])?(count=(++this._currentCount).toString(),mtableInfo=new mtableMatch("<mrow "+count+"><mtable columnalign='left'><mtr><mtd>","</mtd></mtr></mtable></mrow "+count+">",pos,length_3),mtableStack.push(mtableInfo)):"\\begin{array}{r}"===rxa[0]||rxRight.test(rxa[0])?(count=(++this._currentCount).toString(),mtableInfo=new mtableMatch("<mrow "+count+"><mtable columnalign='right'><mtr><mtd>","</mtd></mtr></mtable></mrow "+count+">",pos,length_3),mtableStack.push(mtableInfo)):rxElse.test(rxa[0])?(count=(++this._currentCount).toString(),mtableInfo=new mtableMatch("<mrow "+count+"><mtable columnalign='center'><mtr><mtd>","</mtd></mtr></mtable></mrow "+count+">",pos,length_3),mtableStack.push(mtableInfo)):"\\end{array}"===rxa[0]&&0<mtableStack.length&&(mtableInfo=mtableStack.pop(),latex=(latex=latex.replace(rxa[1],mtableInfo.end)).slice(0,mtableInfo.index)+mtableInfo.begin+latex.slice(mtableInfo.index+mtableInfo.len))}return mtableStack.splice(0),latex},EDLatextoMML.prototype.initAgain=function(latex){for(var rxa,pattern="\\\\frac( *[0-9]| +[a-zA-Z]) *<mrow (\\d+)>(.*?)</mrow \\2>",rx=new RegExp(pattern,"g"),str="";null!=(rxa=rx.exec(latex));){str="<mrow "+(count1=(++this._currentCount).toString())+">\\frac<mrow "+(count2=(++this._currentCount).toString())+">"+rxa[1]+"</mrow "+count2+"><mrow "+rxa[2]+">"+rxa[3]+"</mrow "+rxa[2]+"></mrow "+count1+">";latex=latex.replace(rxa[0],str),null!=rx.exec(rxa[3])&&(rx=new RegExp(pattern,"g"))}for(pattern="\\\\frac *<mrow (\\d+)>(.*?)</mrow \\1> *([a-zA-Z0-9])",rx=new RegExp(pattern,"g");null!=(rxa=rx.exec(latex));){var count1=(++this._currentCount).toString(),count2=(++this._currentCount).toString();str="<mrow "+count1+">\\frac<mrow "+rxa[1]+">"+rxa[2]+"</mrow "+rxa[1]+"><mrow "+count2+">"+rxa[3]+"</mrow "+count2+"></mrow "+count1+">",latex=latex.replace(rxa[0],str),null!=rx.exec(rxa[2])&&(rx=new RegExp(pattern,"g"))}for(pattern="\\\\mathop *<mrow (\\d+)>(.*?)</mrow \\1> *\\\\nolimits(\\_|\\^)",rx=new RegExp(pattern,"g");null!=(rxa=rx.exec(latex));)latex=latex.replace(rxa[0],"<mrow "+rxa[1]+">"+rxa[2]+"</mrow "+rxa[1]+">"+rxa[3]),null!=rx.exec(rxa[2])&&(rx=new RegExp(pattern,"g"));return latex},EDLatextoMML.prototype.mtable=function(pos,len){for(var rx=new RegExp("<mrow (\\d+)><mtable( columnalign='left'| columnalign='center'| columnalign='right')?><mtr><mtd>(.*)</mtd></mtr></mtable></mrow \\1>","g"),index=pos,start=pos,flag=!0,latex=this._latex.slice(index,index+len);null!=(rxa=rx.exec(latex))||flag&&0!==index;){var x,latex2=latex,rxa=(-1<(pos=null!=rxa?rx.lastIndex-rxa[0].length:-1)?(length_4=rxa[3].length,start=start+pos+25+rxa[1].length+rxa[2].length,x=this.mtable(start,length_4),latex=this._latex.slice(index,index+(len=len-length_4+x)),rxa[0].length,latex2=latex.slice(pos,pos+rxa[0].length-length_4+x)):pos=0,latex2.length),length_4=new RegExp("> *&","g");latex2=latex2.replace(length_4,"></mtd><mtd>"),length_4=new RegExp("\\\\\\\\","g"),latex2=latex2.replace(length_4,"</mtd></mtr><mtr><mtd>"),latex=latex.slice(0,pos)+latex2+latex.slice(pos+rxa),this._latex=this._latex.slice(0,index)+latex+this._latex.slice(index+len),len=latex.length,flag=!1}return len},EDLatextoMML.prototype.mroot=function(latex){for(var pattern="\\\\sqrt *\\[(.*?)\\] *<mrow (\\d+)>(.*?)</mrow \\2>",rx=new RegExp(pattern,"g");null!=(rxa=rx.exec(latex));){var count,str=rxa[0],param1=rxa[3],rxa=rxa[1];null==rx.exec(str)&&(count=(++this._currentCount).toString(),latex=latex.replace(str,"<mrow "+count+"><mroot><mrow>"+param1+"</mrow><mrow>"+rxa+"</mrow></mroot></mrow "+count+">"),rx=new RegExp(pattern,"g"))}return latex},EDLatextoMML.prototype.munderover=function(latex){for(var rxa,rx=new RegExp("\\\\mathop *<mrow (\\d+)>(.*?)</mrow \\1> *\\\\limits *\\_ *<mrow (\\d+)>(.*?)</mrow \\3> *\\^ *<mrow (\\d+)>(.*?)</mrow \\5>","g");null!=(rxa=rx.exec(latex));){var base=rxa[2],munder_1=rxa[4],mover_1=rxa[6],count=(++this._currentCount).toString();latex=latex.replace(rxa[0],"<mrow "+count+"><munderover><mrow>"+base+"</mrow><mrow>"+munder_1+"</mrow><mrow>"+mover_1+"</mrow></munderover></mrow "+count+">")}for(rx=new RegExp("\\\\mathop *<mrow (\\d+)>(.*?)</mrow \\1> *\\\\limits *(\\_|\\^) *<mrow (\\d+)>(.*?)</mrow \\4>","g");null!=(rxa=rx.exec(latex));){var param1=rxa[2],param2=rxa[5],count=(++this._currentCount).toString();"_"===rxa[3]?latex=latex.replace(rxa[0],"<mrow "+count+"><munder><mrow>"+param1+"</mrow><mrow>"+param2+"</mrow></munder></mrow "+count+">"):"^"===rxa[3]&&(latex=latex.replace(rxa[0],"<mrow "+count+"><mover><mrow>"+param1+"</mrow><mrow>"+param2+"</mrow></mover></mrow "+count+">"))}return latex},EDLatextoMML.prototype.msubsup=function(latex){for(var rxa,msup="",msub="",str="",rx=new RegExp("(.*?)\\_ *<mrow (\\d+)>(.*?)</mrow \\2> *\\^ *<mrow (\\d+)>(.*?)</mrow \\4>","g");null!=(rxa=rx.exec(latex));){var msubsup1=rxa[1],msubsup2=rxa[3],msubsup3=rxa[5],patt=">(\\d+) worm/<(.*?)>\\1 worm<",rxx=new RegExp(patt,"g"),msubsup1=this.reverseStr(msubsup1),rxxa=void 0,count=(null!=(rxxa=rxx.exec(msubsup1))&&(str=this.reverseStr(rxxa[0]),msubsup1=msubsup1.replace(rxxa[0],"")),msubsup1=this.reverseStr(msubsup1),msub=msubsup2,msup=msubsup3,(++this._currentCount).toString());latex=latex.replace(rxa[0],msubsup1+"<mrow "+count+"><msubsup><mrow>"+str+"</mrow><mrow>"+msup+"</mrow><mrow>"+msub+"</mrow></msubsup></mrow "+count+">")}for(rx=new RegExp("(.*?) *(\\_|\\^) *<mrow (\\d+)>(.*?)</mrow \\3>","g");null!=(rxa=rx.exec(latex));){var param1=rxa[1],param2=rxa[4],patt=">(\\d+) worm/<(.*?)>\\1 worm<",rxx=new RegExp(patt,"g"),param1=this.reverseStr(param1),rxxa=void 0,count=(null!=(rxxa=rxx.exec(param1))&&(str=this.reverseStr(rxxa[0]),param1=param1.replace(rxxa[0],"")),param1=this.reverseStr(param1),(++this._currentCount).toString());"_"===rxa[2]?latex=latex.replace(rxa[0],msub=param1+"<mrow "+count+"><msub>"+str+param2+"</msub></mrow "+count+">"):"^"===rxa[2]&&(latex=latex.replace(rxa[0],msup=param1+"<mrow "+count+"><msup>"+str+param2+"</msup></mrow "+count+">"))}return latex},EDLatextoMML.prototype.reverseStr=function(str){for(var result="",_i=0,str_1=str;_i<str_1.length;_i++)result=str_1[_i]+result;return result},EDLatextoMML.prototype.removeMrow=function(){for(var rxa,rx=new RegExp("(<mrow>|</mrow>)","g"),stack=[];null!=(rxa=rx.exec(this._latex));)"<mrow>"===(str=rxa[1])&&(count=(++this._currentCount).toString(),stack.push(count),this._latex=this._latex.replace("<mrow>","<mrow "+count+">")),"</mrow>"===str&&0<stack.length&&(count=stack.pop(),this._latex=this._latex.replace("</mrow>","</mrow "+count+">"));var simple=this._latex,rx=new RegExp("<mrow (\\d+)>","g"),simple=simple.replace(rx,"<mrow id='$1'>");rx=new RegExp("</mrow (\\d+)>","g"),simple=simple.replace(rx,"</mrow>");simple=(new DOMParser).parseFromString(simple,"text/xml");if(null==simple)return!1;for(var str,count,simple=simple.documentElement,msubsupStack=(this.simplify(simple),rx=new RegExp("(<msubsup>|</msubsup>)","g"),[]);null!=(rxa=rx.exec(this._latex));)"<msubsup>"===(str=rxa[1])&&(count=(++this._currentCount).toString(),msubsupStack.push(count),this._latex=this._latex.replace("<msubsup>","<msubsup "+count+">")),"</msubsup>"===str&&0<msubsupStack.length&&(count=msubsupStack.pop(),this._latex=this._latex.replace("</msubsup>","</msubsup "+count+">"));for(rx=new RegExp("<msubsup (\\d+)> *<mrow (\\d+)> *</mrow \\2> *<mrow (\\d+)> *</mrow \\3> *<mrow (\\d+)> *</mrow \\4> *</msubsup \\1> *<msubsup (\\d+)>(.*?)<mrow (\\d+)> *</mrow \\7> *<mrow (\\d+)> *</mrow \\8> *</msubsup \\5>","g");null!=(rxa=rx.exec(this._latex));)this._latex=this._latex.replace(rx,"<mmultiscripts>$6<none/><none/><mprescripts/><none/><none/></mmultiscripts>");return rx=new RegExp("<msubsup (\\d+)>","g"),this._latex=this._latex.replace(rx,"<msubsup>"),rx=new RegExp("</msubsup (\\d+)>","g"),this._latex=this._latex.replace(rx,"</msubsup>"),rx=new RegExp("(<mrow \\d+>)","g"),this._latex=this._latex.replace(rx,"<mrow>"),rx=new RegExp("(</mrow \\d+>)","g"),this._latex=this._latex.replace(rx,"</mrow>"),!0},EDLatextoMML.prototype.simplify=function(root){for(var pattern,rx,childNum=0,child=root.firstElementChild;null!=child;)childNum++,this.simplify(child),child=child.nextElementSibling;"mrow"===root.nodeName&&1===childNum&&(pattern="<mrow "+(root=root.getAttribute("id"))+">",rx=new RegExp(pattern),this._latex=this._latex.replace(rx,""),rx=new RegExp(pattern="</mrow "+root+">"),this._latex=this._latex.replace(rx,""))},EDLatextoMML.prototype.toMathML=function(latex){this._latex=latex,this._latex=this._latex.replace(/\n/g," "),this._latex=this._latex.replace(/\r/g," "),this._latex=this._latex.replace(/\t/g," "),this._latex=this._latex.replace(/~/g," "),this._latex=this.initLatex(this._latex),this._latex=this._latex.trim(),this._latex=this._latex.replace(/\\\[/g,""),this._latex=this._latex.replace(/\\\]/g,""),this._latex=this._latex.replace(/\$/g,""),this._latex=this._latex.trim(),this._latex="<math>"+this._latex+"</math>";for(var rxa,pattern="\\\\(left|right) *(\\(|\\)|\\.|\\\\\\{|\\\\\\}|\\[|\\]|\\||\\\\lfloor|\\\\rfloor|\\\\lceil|\\\\rceil|\\\\langle|\\\\rangle|\\\\vert|\\\\Vert|\\\\\\|)",rx=new RegExp(pattern,"g"),pos=0,bracketStack=[],charMatch=EDLatextoMML.initCharMatch();null!=(rxa=rx.exec(this._latex));){var binfo,length=rxa[0].length,pos=rx.lastIndex-length,param1=rxa[1],param2=rxa[2];"left"===param1?(binfo=new bracketInfo(param2,pos,length),bracketStack.push(binfo)):0<bracketStack.length&&"right"===param1&&(param2="."===param2?"":" {<mo d='"+charMatch.get(param2)+"'></mo>} ",this._latex=this._latex.slice(0,pos)+param2+this._latex.slice(pos+length),"."===(binfo=bracketStack.pop()).bracket?binfo.bracket="":binfo.bracket=" {<mo d='"+charMatch.get(binfo.bracket)+"'></mo>} ",this._latex=this._latex.slice(0,binfo.index)+binfo.bracket+this._latex.slice(binfo.index+binfo.len),param2.length,binfo.bracket.length,binfo.len)}bracketStack.splice(0),pattern="((\\\\mathnormal|\\\\mathrm|\\\\mathit|\\\\mathbf|\\\\mathsf|\\\\mathtt|\\\\mathfrak|\\\\mathcal|\\\\mathbb|\\\\mathscr)?\\{|\\})",rx=new RegExp(pattern,"g"),pos=-1;for(var stack=[];null!=(rxa=rx.exec(this._latex));){pos=rx.lastIndex-1;var str_2=rxa[1],fontStyle=rxa[2];if("\\"!==this._latex.charAt(pos-1))if(fontStyle){"\\mathit"==fontStyle?0:"\\mathbf"==fontStyle&&0;var count=(++this._currentCount).toString();stack.push(count),this._latex=this._latex.replace(rxa[1],"<mrow "+count+">")}else if("{"===str_2){var count=(++this._currentCount).toString();stack.push(count),this._latex=this._latex.replace(rxa[1],"<mrow "+count+">")}else{if("}"===str_2&&stack.length<=0)return!1;"}"===str_2&&0<stack.length&&(count=stack.pop(),this._latex=this._latex.replace(rxa[1],"</mrow "+count+">"))}}if(0<stack.length)return!1;this._latex=this.initAgain(this._latex);for(var rules=this.initRules(),i=0;i<rules.length;i++)for(pattern=rules[i].latex,rx=new RegExp(pattern,"g");null!=(rxa=rx.exec(this._latex));){var mml=rules[i].mml,count=(++this._currentCount).toString();this._latex=this._latex.replace(rx,"<mrow "+count+">"+mml+"</mrow "+count+">"),this._latex=this.initAgain(this._latex)}for(var pattern="<mrow (\\d+)><mtext d='(.*?)'></mtext></mrow \\1>",rx=new RegExp(pattern,"g"),rrr=new RegExp("<mrow (\\d+)>(.*?)</mrow \\1>","g");null!=(rxa=rx.exec(this._latex));){pos=rx.lastIndex;for(var index,rrrxa,mtextStr=rxa[2],strList=[],begin=0,flag_1=!1;null!=(rrrxa=rrr.exec(mtextStr));)index=rrr.lastIndex,flag_1=!0,strList.push(mtextStr.slice(begin,begin+index-begin)),strList.push(mtextStr.slice(index,index+rrrxa[0].length)),begin=index+rrrxa[0].length;!1===flag_1?pos+rxa[0].length:(rx=new RegExp(pattern,"g"),0),strList.push(mtextStr.slice(begin));for(mtextStr="",i=0;i<strList.length;i++){var pat="^ *$",r=new RegExp(pat),str_3=strList[i];-1<str_3.search(r)||(count=(++this._currentCount).toString(),-1<str_3.search(rrr)?mtextStr+="<mrow "+count+">"+str_3+"</mrow "+count+">":mtextStr+="<mrow "+count+"><mtext d='"+(str_3=str_3.replace(/" "/g,""))+"'></mtext></mrow "+count+">")}this._latex=this._latex.replace(rxa[0],mtextStr)}this._latex=this.mroot(this._latex),this._latex=this.munderover(this._latex),pattern="(math|mrow|mrow \\d+|mfrac|msqrt|mroot|msub|msup|msubsup|munder|mover|munderover|mtable|mtr|mtd|mo|mn|mi|mtext)>(.*?)<",rx=new RegExp(pattern,"g");pos=0;for(var str="";null!=(rxa=rx.exec(this._latex));)if(pos=rx.lastIndex,rxa[2].length,""===(str=rxa[2]))pos++;else{var pat="( +)",reg=new RegExp(pat,"g");if(null!=(reg=reg.exec(str))&&str.length===reg[0].length)pos++;else{for(strList=[],i=0;i<str.length;i++)strList.push(str[i]);for(var rx2=new RegExp("([\\d])"),rx3=new RegExp("([a-zA-Z])"),rx4=new RegExp("(?![\\^_& \\\\])."),rx5=new RegExp("[-]"),i=0;i<strList.length;i++)-1!==(str=strList[i]).search(rx2)?(str="<mrow "+(count=(++this._currentCount).toString())+"><mn d='"+str+"'></mn></mrow "+count+">",strList[i]=str):-1!==str.search(rx3)?(count=(++this._currentCount).toString(),strList[i]=str="<mrow "+count+"><mi d='"+str+"'></mi></mrow "+count+">"):-1!==str.search(rx5)?(count=(++this._currentCount).toString(),strList[i]=str="<mrow "+count+"><mtext d='"+str+"'></mtext></mrow "+count+">"):">"===str?(count=(++this._currentCount).toString(),strList[i]=str="<mrow "+count+"><mo d='&#x003E;'></mo></mrow "+count+">"):"<"===str?(count=(++this._currentCount).toString(),strList[i]=str="<mrow "+count+"><mo d='&#x003C;'></mo></mrow "+count+">"):"["===str?(count=(++this._currentCount).toString(),strList[i]=str="<mrow "+count+"><mtext d='&#x005B;'></mtext></mrow "+count+">"):"]"===str?(count=(++this._currentCount).toString(),strList[i]=str="<mrow "+count+"><mtext d='&#x005D;'></mtext></mrow "+count+">"):-1===str.search(rx4)||";"===str&&0<=i-1&&"\\"===strList[i-1]||(count=(++this._currentCount).toString(),strList[i]=str="<mrow "+count+"><mo d='"+str+"'></mo></mrow "+count+">");str="";for(i=0;i<strList.length;i++)str+=strList[i];this._latex=this._latex.slice(0,pos-rxa[2].length-1)+str+this._latex.slice(pos-1)}}return this._latex=this.msubsup(this._latex),this.mtable(0,this._latex.length),pattern="<mtd></mtd>",rx=new RegExp(pattern,"g"),this._latex=this._latex.replace(rx,"<mtd><mrow></mrow></mtd>"),pattern="\\\\;",rx=new RegExp(pattern,"g"),this._latex=this._latex.replace(rx,"<mo d='&#x2009;'></mo>"),pattern="(\\\\ )",rx=new RegExp(pattern,"g"),this._latex=this._latex.replace(rx,"<mo d='&#x2008;'></mo>"),pattern="(\\\\)",rx=new RegExp(pattern,"g"),this._latex=this._latex.replace(rx,"<mo d='&#x005C;'></mo>"),pattern="> *&",rx=new RegExp(pattern,"g"),this._latex=this._latex.replace(rx,"><mo d='&#x0026;'></mo>"),pattern="<(mi|mn|mo|mtext) d='(.*?)'></\\1>",rx=new RegExp(pattern,"g"),this._latex=this._latex.replace(rx,"<$1>$2</$1>"),pattern="(<mrow \\d+>)",rx=new RegExp(pattern,"g"),this._latex=this._latex.replace(rx,"<mrow>"),pattern="(</mrow \\d+>)",rx=new RegExp(pattern,"g"),this._latex=this._latex.replace(rx,"</mrow>"),this.removeMrow()},EDLatextoMML.prototype.latexFromFile=function(latexFile,mml){return!1},EDLatextoMML.prototype.latexFromStr=function(latex){return latex=(latex=(latex=(latex=(latex=(latex=(latex=(latex=latex.replace(/\{/g,"{{")).replace(/\}/g,"}}")).replace(/\\\{/g,"\\")).replace(/\\\}/g,"\\")).replace(new RegExp("\\\\end{{(.*?)}}","g"),"\\end{$1}")).replace(new RegExp("\\\\begin{{(.*?)}}{{\\*{{(.*?)}}{{(.*?)}}}}","g"),"\\begin{$1}{*{$2}{$3}}")).replace(new RegExp("\\\\begin{{(.*?)}}{{(.*?)}}","g"),"\\begin{$1}{$2}")).replace(new RegExp("\\\\begin{{(.*?)}}","g"),"\\begin{$1}"),this.toMathML(latex)?this._latex:""},EDLatextoMML}();EdrawMathDate.EDLatextoMML=EDLatextoMML}(EdrawMathDate=EdrawMathDate||{}),!function(EdrawMathDate){var EDMmltoLatexRules=function(strMmlNodeName,strLatexText,strStackPushText,nOperType,bIsOtherItem,nMaxChild,listChildLatexText,paramOrder){this.strMmlNodeName=strMmlNodeName,this.strLatexText=strLatexText,this.strStackPushText=strStackPushText,this.nOperType=nOperType,this.bIsOtherItem=bIsOtherItem,this.nMaxChild=nMaxChild,this.listChildLatexText=listChildLatexText,this.paramOrder=paramOrder},EDcharInfo=function(strLatexList,cutLength,isExist,listChildLatexText,paramOrder){this.strLatexList=strLatexList,this.cutLength=cutLength,this.isExist=isExist,this.listChildLatexText=listChildLatexText,this.paramOrder=paramOrder},SpecialCharacter=function(specialCharacter,charInfo){this.specialCharacter=specialCharacter,this.charInfo=charInfo},EDMMLtoLatex=function(){function EDMMLtoLatex(){this._mathMl=[],this._latex=""}return EDMMLtoLatex.initRules=function(){for(var mtrChildLatexText=[],mtablemtrParamOrder=[],mathmrowChildLatexText=[],mathmrowParamOrder=[],i=0;i<EDMMLtoLatex.maxchild;i++)mtrChildLatexText.push("&"),mtablemtrParamOrder.push(i),mathmrowChildLatexText.push(""),mathmrowParamOrder.push(i);mtrChildLatexText[EDMMLtoLatex.maxchild-1]="";var rules=[];return rules.push(new EDMmltoLatexRules("math","\\[","\\]",1,!1,999,mathmrowChildLatexText,mathmrowParamOrder)),rules.push(new EDMmltoLatexRules("mrow","{","}",1,!1,999,mathmrowChildLatexText,mathmrowParamOrder)),rules.push(new EDMmltoLatexRules("msqrt","\\sqrt{","}",1,!1,1,[""],[0])),rules.push(new EDMmltoLatexRules("msub","\\mathop{","}",1,!1,2,["}\\nolimits_{",""],[0,1])),rules.push(new EDMmltoLatexRules("msup","\\mathop{","}",1,!1,2,["}\\nolimits^{",""],[0,1])),rules.push(new EDMmltoLatexRules("msubsup","\\mathop{","}",1,!1,3,["}\\nolimits_{","}^{",""],[0,1,2])),rules.push(new EDMmltoLatexRules("munder","\\mathop{","}",1,!1,2,["}\\limits_{",""],[0,1])),rules.push(new EDMmltoLatexRules("mover","\\mathop{","}",1,!1,2,["}\\limits^{",""],[0,1])),rules.push(new EDMmltoLatexRules("munderover","\\mathop{","}",1,!1,3,["}\\limits_{","}^{",""],[0,1,2])),rules.push(new EDMmltoLatexRules("mfrac","\\frac{","}",1,!1,2,["}{",""],[0,1])),rules.push(new EDMmltoLatexRules("mroot","\\sqrt[","}",1,!1,2,["]{",""],[1,0])),rules.push(new EDMmltoLatexRules("mmultiscripts","{}_","",1,!1,5,["^","","_","^",""],[3,4,0,1,2])),rules.push(new EDMmltoLatexRules("none","{ ","}",0,!1,0,[""],[])),rules.push(new EDMmltoLatexRules("mtext","\\text{","}",0,!1,0,[""],[])),rules.push(new EDMmltoLatexRules("mn","","",0,!1,0,[""],[])),rules.push(new EDMmltoLatexRules("mi","","",0,!1,0,[""],[])),rules.push(new EDMmltoLatexRules("mo","","",0,!1,0,[""],[])),rules.push(new EDMmltoLatexRules("mtable","\\begin{array}{*{20}{c}}\n","\n\\end{array}",1,!1,31,["\\\\\n","\\\\\n","\\\\\n","\\\\\n","\\\\\n","\\\\\n","\\\\\n","\\\\\n","\\\\\n","\\\\\n","\\\\\n","\\\\\n","\\\\\n","\\\\\n","\\\\\n","\\\\\n","\\\\\n","\\\\\n","\\\\\n","\\\\\n","\\\\\n","\\\\\n","\\\\\n","\\\\\n","\\\\\n","\\\\\n","\\\\\n","\\\\\n","\\\\\n","\\\\\n","\\\\\n",""],mtablemtrParamOrder)),rules.push(new EDMmltoLatexRules("mtr","","",1,!1,31,mtrChildLatexText,mtablemtrParamOrder)),rules.push(new EDMmltoLatexRules("mtd","","",1,!1,1,[""],[0])),rules},EDMMLtoLatex.initParamNodename=function(){var paramNodename=[];return paramNodename.push("math"),paramNodename.push("mrow"),paramNodename.push("msqrt"),paramNodename.push("msub"),paramNodename.push("msup"),paramNodename.push("msubsup"),paramNodename.push("munder"),paramNodename.push("mover"),paramNodename.push("munderover"),paramNodename.push("mfrac"),paramNodename.push("mroot"),paramNodename.push("mmultiscripts"),paramNodename.push("mtable"),paramNodename.push("mtr"),paramNodename.push("mtd"),paramNodename},EDMMLtoLatex.initMergeParamNodename=function(){},EDMMLtoLatex.initCharacter=function(){var character=new Map;return character.set("2208"," \\in "),character.set("2209"," \\notin "),character.set("222A"," \\cup "),character.set("2229"," \\cap "),character.set("22C3"," \\bigcup "),character.set("22C2"," \\bigcap "),character.set("2282"," \\subset "),character.set("2283"," \\supset "),character.set("2286"," \\subseteq "),character.set("2287"," \\supseteq "),character.set("2284"," \\not\\subset "),character.set("2205"," \\emptyset "),character.set("2234"," \\therefore "),character.set("2235"," \\because "),character.set("220D"," \\backepsilon "),character.set("2203"," \\exists "),character.set("2200"," \\forall "),character.set("00AC"," \\neg "),character.set("2227"," \\wedge "),character.set("2228"," \\vee "),character.set("2194"," \\leftrightarrow "),character.set("2192"," \\to "),character.set("2190"," \\leftarrow "),character.set("2195"," \\updownarrow "),character.set("2191"," \\uparrow "),character.set("2193"," \\downarrow "),character.set("21D4"," \\Leftrightarrow "),character.set("21D2"," \\Rightarrow "),character.set("21D0"," \\Leftarrow "),character.set("21D5"," \\Updownarrow "),character.set("21D1"," \\Uparrow "),character.set("21D3"," \\Downarrow "),character.set("2922","  "),character.set("2197"," \\nearrow "),character.set("2199"," \\swarrow "),character.set("2921","  "),character.set("2198"," \\searrow "),character.set("2196"," \\nwarrow "),character.set("21C4"," \\rightleftarrows "),character.set("2942","  "),character.set("2944","  "),character.set("21CC"," \\rightleftharpoons "),character.set("21A6"," \\mapsto "),character.set("21B5","  "),character.set("00B1"," \\pm "),character.set("2213"," \\mp "),character.set("00D7"," \\times "),character.set("2217"," \\ast "),character.set("00F7"," \\div "),character.set("2295"," \\oplus "),character.set("2297"," \\otimes "),character.set("2299"," \\odot "),character.set("22C5"," \\cdot "),character.set("00B7"," \\cdot "),character.set("2022"," \\bullet "),character.set("2218"," \\circ "),character.set("2329"," \\langle "),character.set("232A"," \\rangle "),character.set("301A"," \\llbracket "),character.set("301B"," \\rrbracket "),character.set("0391"," {\\rm A} "),character.set("0392"," {\\rm B} "),character.set("03A7"," {\\rm X} "),character.set("0394"," \\Delta "),character.set("0395"," {\\rm E} "),character.set("03A6"," \\Phi "),character.set("0393"," \\Gamma "),character.set("0397"," {\\rm H} "),character.set("0399"," {\\rm I} "),character.set("039A"," {\\rm K} "),character.set("039B"," \\Lambda "),character.set("039C"," {\\rm M} "),character.set("039D"," {\\rm N} "),character.set("039F"," {\\rm O} "),character.set("03A0"," \\Pi "),character.set("0398"," \\Theta "),character.set("03A1"," {\\rm P} "),character.set("03A3"," \\Sigma "),character.set("03A4"," {\\rm T} "),character.set("03D2"," \\Upsilon "),character.set("03A9"," \\Omega "),character.set("039E"," \\Xi "),character.set("03A8"," \\Psi "),character.set("0396"," {\\rm Z} "),character.set("03B1"," \\alpha "),character.set("03B2"," \\beta "),character.set("03C7"," \\chi "),character.set("03B4"," \\delta "),character.set("03B5"," \\varepsilon "),character.set("03D5"," \\phi "),character.set("03C6"," \\varphi "),character.set("03B3"," \\gamma "),character.set("03B7"," \\eta "),character.set("03B9"," \\iota "),character.set("03BA"," \\kappa "),character.set("03BB"," \\lambda "),character.set("03BC"," \\mu "),character.set("03BD"," \\nu "),character.set("03BF"," o "),character.set("03C0"," \\pi "),character.set("03D6"," \\varpi "),character.set("03B8"," \\theta "),character.set("03D1"," \\vartheta "),character.set("03C1"," \\rho "),character.set("03C3"," \\sigma "),character.set("03C2"," \\varsigma "),character.set("03C4"," \\tau "),character.set("03C5"," \\upsilon "),character.set("03C9"," \\omega "),character.set("03BE"," \\xi "),character.set("03C8"," \\psi "),character.set("03B6"," \\zeta "),character.set("2202"," \\partial "),character.set("2118"," \\wp "),character.set("2111"," \\Im "),character.set("211C"," \\Re "),character.set("2135"," \\aleph "),character.set("211D"," \\mathbb{R} "),character.set("2124"," \\mathbb{Z} "),character.set("2102"," \\mathbb{C} "),character.set("211A"," \\mathbb{Q} "),character.set("2115"," \\mathbb{N} "),character.set("221E"," \\infty "),character.set("210F"," \\hbar "),character.set("019B","  "),character.set("2113"," \\ell "),character.set("2020"," \\dagger "),character.set("2207"," \\nabla "),character.set("03A9"," \\Omega "),character.set("2127"," \\mho "),character.set("22C4"," \\diamond "),character.set("2211"," \\sum "),character.set("220F"," \\prod "),character.set("2210"," \\coprod "),character.set("222B"," \\int "),character.set("00B0"," \\circ "),character.set("2220"," \\angle "),character.set("2221"," \\measuredangle "),character.set("2222"," \\sphericalangle "),character.set("22A5"," \\perp "),character.set("2225"," \\parallel "),character.set("25B3"," \\bigtriangleup "),character.set("25A1"," \\square "),character.set("25AD","  "),character.set("25B1","  "),character.set("25CB"," \\bigcirc "),character.set("2264"," \\le "),character.set("2265"," \\ge "),character.set("226A"," \\ll "),character.set("226B"," \\gg "),character.set("227A"," \\prec "),character.set("227B"," \\succ "),character.set("22B2"," \\triangleleft "),character.set("22B3"," \\triangleright "),character.set("223C"," \\sim "),character.set("2248"," \\approx "),character.set("2243"," \\simeq "),character.set("2245"," \\cong "),character.set("2260"," \\neq "),character.set("2261"," \\equiv "),character.set("225C"," \\triangleq "),character.set("2259","  "),character.set("2250"," \\doteq "),character.set("221D"," \\propto "),character.set("2026"," \\ldots "),character.set("22EF"," \\cdots "),character.set("22EE"," \\vdots "),character.set("22F0"," \\iddots "),character.set("22F1"," \\ddots "),character.set("222C"," \\iint "),character.set("222D"," \\iiint "),character.set("2A0C"," \\iiiint "),character.set("222E"," \\oint "),character.set("222F"," \\varoiint "),character.set("2230","  "),character.set("2233"," \\ointctrclockwise "),character.set("2232"," \\ointclockwise "),character.set("007B"," \\{ "),character.set("007D"," \\} "),character.set("230A"," \\lfloor "),character.set("230B"," \\rfloor "),character.set("2016"," \\Vert "),character.set("2308"," \\lceil "),character.set("2309"," \\rceil "),character.set("23B4","  "),character.set("005F"," \\_ "),character.set("03F5"," \\epsilon "),character.set("03F1"," \\varrho "),character.set("03A5"," \\Upsilon "),character.set("003C"," < "),character.set("003E"," > "),character.set("2AAF"," \\preceq "),character.set("227D"," \\succeq "),character.set("228F"," \\sqsubset "),character.set("2290"," \\sqsupset "),character.set("2291"," \\sqsubseteq "),character.set("2292"," \\sqsupseteq "),character.set("22C8"," \\bowtie "),character.set("220B"," \\ni "),character.set("22A2"," \\vdash "),character.set("22A3"," \\dashv "),character.set("22A8"," \\models "),character.set("2223"," \\mid "),character.set("2323"," \\smile "),character.set("2322"," \\frown "),character.set("224D"," \\asymp "),character.set("2216"," \\setminus "),character.set("22C6"," \\star "),character.set("2294"," \\sqcup "),character.set("2A06"," \\bigsqcup "),character.set("2293"," \\sqcap "),character.set("2296"," \\ominus "),character.set("2298"," \\oslash "),character.set("228E"," \\uplus "),character.set("2A04"," \\biguplus "),character.set("25EF"," \\bigcirc "),character.set("25BD"," \\bigtriangledown "),character.set("2021"," \\ddagger "),character.set("22B4"," \\trianglelefteq "),character.set("22B5"," \\trianglerighteq "),character.set("2240"," \\wr "),character.set("22C1"," \\bigvee "),character.set("22C0"," \\bigwedge "),character.set("2A00"," \\bigodot "),character.set("2A01"," \\bigoplus "),character.set("2A02"," \\bigotimes "),character.set("27F5"," \\longleftarrow "),character.set("27F6"," \\longrightarrow "),character.set("27F7"," \\longleftrightarrow "),character.set("27F8"," \\Longleftarrow "),character.set("27F9"," \\Longrightarrow "),character.set("27FA"," \\Longleftrightarrow "),character.set("27FC"," \\longmapsto "),character.set("21A9"," \\hookleftarrow "),character.set("21AA"," \\hookrightarrow "),character.set("21BC"," \\leftharpoonup "),character.set("21C0"," \\rightharpoonup "),character.set("21BD"," \\leftharpoondown "),character.set("21C1"," \\rightharpoondown "),character.set("005C"," \\backslash "),character.set("3014"," \\lgroup "),character.set("3015"," \\rgroup "),character.set("23B0"," \\lmoustache "),character.set("23B1"," \\rmoustache "),character.set("23D0"," \\arrowvert "),character.set("0131"," \\imath "),character.set("0237"," \\jmath "),character.set("211C"," \\Re "),character.set("2032"," \\prime "),character.set("25CA"," \\Diamond "),character.set("22A4"," \\top "),character.set("221A"," \\surd "),character.set("2662"," \\diamondsuit "),character.set("2661"," \\heartsuit "),character.set("2663"," \\clubsuit "),character.set("2660"," \\spadesuit "),character.set("266D"," \\flat "),character.set("266E"," \\natural "),character.set("266F"," \\sharp "),character.set("00A7"," \\S "),character.set("00B6"," \\P "),character.set("00A3"," \\pounds "),character.set("231C"," \\ulcorner "),character.set("231D"," \\urcorner "),character.set("231E"," \\llcorner "),character.set("231F"," \\lrcorner "),character.set("03DC"," \\digamma "),character.set("03F0"," \\varkappa "),character.set("2136"," \\beth "),character.set("2138"," \\daleth "),character.set("2137"," \\gimel "),character.set("22D6"," \\lessdot "),character.set("22D7"," \\gtrdot "),character.set("2251"," \\doteqdot "),character.set("2A7D"," \\leqslant "),character.set("2A7E"," \\geqslant "),character.set("2253"," \\risingdotseq "),character.set("22DC"," \\eqslantless "),character.set("22DD"," \\eqslantgtr "),character.set("2252"," \\fallingdotseq "),character.set("2266"," \\leqq "),character.set("2267"," \\geqq "),character.set("2256"," \\eqcirc "),character.set("22D8"," \\lll "),character.set("22D9"," \\ggg "),character.set("2257"," \\circeq "),character.set("2272"," \\lesssim "),character.set("2273"," \\gtrsim "),character.set("2A85"," \\lessapprox "),character.set("2A86"," \\gtrapprox "),character.set("224F"," \\bumpeq "),character.set("2276"," \\lessgtr "),character.set("2277"," \\gtrless "),character.set("224E"," \\Bumpeq "),character.set("22DA"," \\lesseqgtr "),character.set("22DB"," \\gtreqless "),character.set("2A8B"," \\lesseqqgtr "),character.set("2A8C"," \\gtreqqless "),character.set("227C"," \\preccurlyeq "),character.set("224A"," \\approxeq "),character.set("22DE"," \\curlyeqprec "),character.set("22DF"," \\curlyeqsucc "),character.set("223D"," \\backsim "),character.set("227E"," \\precsim "),character.set("227F"," \\succsim "),character.set("22CD"," \\backsimeq "),character.set("2AB7"," \\precapprox "),character.set("2AB8"," \\succapprox "),character.set("2AC5"," \\subseteqq "),character.set("2AC6"," \\supseteqq "),character.set("22A9"," \\Vdash "),character.set("22D0"," \\Subset "),character.set("22D1"," \\Supset "),character.set("22AA"," \\Vvdash "),character.set("226C"," \\between "),character.set("22D4"," \\pitchfork "),character.set("25C0"," \\blacktriangleleft "),character.set("25B6"," \\blacktriangleright "),character.set("21E0"," \\dashleftarrow "),character.set("21E2"," \\dashrightarrow "),character.set("22B8"," \\multimap "),character.set("21C7"," \\leftleftarrows "),character.set("21C9"," \\rightrightarrows "),character.set("21C8"," \\upuparrows "),character.set("21C6"," \\leftrightarrows "),character.set("21CA"," \\downdownarrows "),character.set("21DA"," \\Lleftarrow "),character.set("21DB"," \\Rrightarrow "),character.set("21BF"," \\upharpoonleft "),character.set("219E"," \\twoheadleftarrow "),character.set("21A0"," \\twoheadrightarrow "),character.set("21BE"," \\upharpoonright "),character.set("21A2"," \\leftarrowtail "),character.set("21A3"," \\rightarrowtail "),character.set("21C3"," \\downharpoonleft "),character.set("21CB"," \\leftrightharpoons "),character.set("21C2"," \\downharpoonright "),character.set("21B0"," \\Lsh "),character.set("21B1"," \\Rsh "),character.set("21DD"," \\rightsquigarrow "),character.set("21AB"," \\looparrowleft "),character.set("21AC"," \\looparrowright "),character.set("21AD"," \\leftrightsquigarrow "),character.set("21B6"," \\curvearrowleft "),character.set("21B7"," \\curvearrowright "),character.set("21BA"," \\circlearrowleft "),character.set("21BB"," \\circlearrowright "),character.set("226E"," \\nless "),character.set("226F"," \\ngtr "),character.set("2A87"," \\lneq "),character.set("2A88"," \\gneq "),character.set("2270"," \\nleq "),character.set("2271"," \\ngeq "),character.set("E016"," \\nsubseteqq "),character.set("E018"," \\nsupseteqq "),character.set("2268"," \\lneqq "),character.set("2269"," \\gneqq "),character.set("2224"," \\nmid "),character.set("2226"," \\nparallel "),character.set("22E6"," \\lnsim "),character.set("22E7"," \\gnsim "),character.set("2A89"," \\lnapprox "),character.set("2A8A"," \\gnapprox "),character.set("2241"," \\nsim "),character.set("2280"," \\nprec "),character.set("2281"," \\nsucc "),character.set("2247"," \\ncong "),character.set("22E0"," \\npreceq "),character.set("22E1"," \\nsucceq "),character.set("22AC"," \\nvdash "),character.set("2AB5"," \\precneqq "),character.set("2AB6"," \\succneqq "),character.set("22AD"," \\nvDash "),character.set("22E8"," \\precnsim "),character.set("22E9"," \\succnsim "),character.set("22AE"," \\nVdash "),character.set("2AB9"," \\precnapprox "),character.set("2ABA"," \\succnapprox "),character.set("22AF"," \\nVDash "),character.set("228A"," \\subsetneq "),character.set("228B"," \\supsetneq "),character.set("22EA"," \\ntriangleleft "),character.set("2288"," \\nsubseteq "),character.set("2289"," \\nsupseteq "),character.set("22EB"," \\ntriangleright "),character.set("22EC"," \\ntrianglelefteq "),character.set("2ACB"," \\subsetneqq "),character.set("2ACC"," \\supsetneqq "),character.set("22ED"," \\ntrianglerighteq "),character.set("219A"," \\nleftarrow "),character.set("219B"," \\nrightarrow "),character.set("21AE"," \\nleftrightarrow "),character.set("21CD"," \\nLeftarrow "),character.set("21CF"," \\nRightarrow "),character.set("21CE"," \\nLeftrightarrow "),character.set("2214"," \\dotplus "),character.set("22BA"," \\intercal "),character.set("22C9"," \\ltimes "),character.set("22CA"," \\rtimes "),character.set("22C7"," \\divideontimes "),character.set("22D3"," \\Cup "),character.set("22D2"," \\Cap "),character.set("22BB"," \\veebar "),character.set("22BC"," \\barwedge "),character.set("2306"," \\doublebarwedge "),character.set("229E"," \\boxplus "),character.set("229F"," \\boxminus "),character.set("22A0"," \\boxtimes "),character.set("22A1"," \\boxdot "),character.set("229A"," \\circledcirc "),character.set("22CB"," \\leftthreetimes "),character.set("22CC"," \\rightthreetimes "),character.set("229B"," \\circledast "),character.set("22CE"," \\curlyvee "),character.set("22CF"," \\curlywedge "),character.set("25A0"," \\blacksquare "),character.set("24C8"," \\circledS "),character.set("25B5"," \\vartriangle "),character.set("25B2"," \\blacktriangle "),character.set("2201"," \\complement "),character.set("25BC"," \\blacktriangledown "),character.set("2141"," \\Game "),character.set("2666"," \\blacklozenge "),character.set("2605"," \\bigstar "),character.set("2571"," \\diagup "),character.set("2572"," \\diagdown "),character.set("2035"," \\backprime "),character.set("2204"," \\nexists "),character.set("2132"," \\Finv "),character.set("00F0"," \\eth "),character.set("2212"," - "),character.set("2033"," '' "),character},EDMMLtoLatex.initSpecialCharacter=function(){var specialCharacter=new Map,mover=[],mover=(mover.push(new SpecialCharacter("02DC",new EDcharInfo([""," \\widetilde "],8,!0,["",""],[[],[1,0]]))),mover.push(new SpecialCharacter("005E",new EDcharInfo([""," \\widehat "],8,!0,["",""],[[],[1,0]]))),mover.push(new SpecialCharacter("00AF",new EDcharInfo([""," \\overline "],8,!0,["",""],[[],[1,0]]))),mover.push(new SpecialCharacter("2192",new EDcharInfo([" \\xrightarrow "," \\overrightarrow "],8,!0,["",""],[[0,1],[1,0]]))),mover.push(new SpecialCharacter("2190",new EDcharInfo([" \\xleftarrow "," \\overleftarrow "],8,!0,["",""],[[0,1],[1,0]]))),mover.push(new SpecialCharacter("2194",new EDcharInfo([""," \\overleftrightarrow "],8,!0,["",""],[[],[1,0]]))),mover.push(new SpecialCharacter("02C7",new EDcharInfo([""," \\check "],8,!0,["",""],[[],[1,0]]))),mover.push(new SpecialCharacter("00B4",new EDcharInfo([""," \\acute "],8,!0,["",""],[[],[1,0]]))),mover.push(new SpecialCharacter("0060",new EDcharInfo([""," \\grave "],8,!0,["",""],[[],[1,0]]))),mover.push(new SpecialCharacter("02D9",new EDcharInfo([""," \\dot "],8,!0,["",""],[[],[1,0]]))),mover.push(new SpecialCharacter("00A8",new EDcharInfo([""," \\ddot "],8,!0,["",""],[[],[1,0]]))),mover.push(new SpecialCharacter("2323",new EDcharInfo([""," \\breve "],8,!0,["",""],[[],[1,0]]))),specialCharacter.set("mover",mover),[]),mover=(mover.push(new SpecialCharacter("005F",new EDcharInfo([""," \\underline "],8,!0,["",""],[[],[1,0]]))),mover.push(new SpecialCharacter("2192",new EDcharInfo([""," \\underrightarrow "],8,!0,["",""],[[],[1,0]]))),mover.push(new SpecialCharacter("2190",new EDcharInfo([""," \\underleftarrow "],8,!0,["",""],[[],[1,0]]))),mover.push(new SpecialCharacter("2194",new EDcharInfo([""," \\underleftrightarrow "],8,!0,["",""],[[],[1,0]]))),specialCharacter.set("munder",mover),[]);return mover.push(new SpecialCharacter("2192",new EDcharInfo([" \\xrightarrow ","",""],8,!0,["[","]",""],[[0,1,2],[],[]]))),mover.push(new SpecialCharacter("2190",new EDcharInfo([" \\xleftarrow ","",""],8,!0,["[","]",""],[[0,1,2],[],[]]))),specialCharacter.set("munderover",mover),specialCharacter},EDMMLtoLatex.initCharMatch=function(){var charMatch=new Map;return charMatch.set("(",")"),charMatch.set(")",""),charMatch.set(" \\{ "," \\} "),charMatch.set(" \\} ",""),charMatch.set("[","]"),charMatch.set("]",""),charMatch.set("|","|"),charMatch.set(" \\lfloor "," \\rfloor "),charMatch.set(" \\rfloor ",""),charMatch.set(" \\lceil "," \\rceil "),charMatch.set(" \\rceil ",""),charMatch.set(" \\langle "," \\rangle "),charMatch.set(" \\rangle ",""),charMatch.set(" \\Vert "," \\Vert "),charMatch},EDMMLtoLatex.initFunctionSymbol=function(){var functionSymbol=new Map;return functionSymbol.set("ln"," \\ln "),functionSymbol.set("lg"," \\lg "),functionSymbol.set("log"," \\log "),functionSymbol.set("lim"," \\lim "),functionSymbol.set("sin"," \\sin "),functionSymbol.set("cos"," \\cos "),functionSymbol.set("tan"," \\tan "),functionSymbol.set("cot"," \\cot "),functionSymbol.set("sec"," \\sec "),functionSymbol.set("csc"," \\csc "),functionSymbol.set("exp"," \\exp "),functionSymbol.set("arcsin"," \\arcsin "),functionSymbol.set("arccos"," \\arccos "),functionSymbol.set("arctan"," \\arctan "),functionSymbol.set("arccot"," \\arccot "),functionSymbol.set("sinh"," \\sinh "),functionSymbol.set("cosh"," \\cosh "),functionSymbol.set("tanh"," \\tanh "),functionSymbol.set("coth"," \\coth "),functionSymbol.set("limsup"," \\limsup "),functionSymbol.set("liminf"," \\liminf "),functionSymbol.set("max"," \\max "),functionSymbol.set("min"," \\min "),functionSymbol.set("inf"," \\inf "),functionSymbol.set("sup"," \\sup "),functionSymbol.set("ker"," \\ker "),functionSymbol.set("deg"," \\deg "),functionSymbol.set("gcd"," \\gcd "),functionSymbol.set("Pr"," \\Pr "),functionSymbol.set("det"," \\det "),functionSymbol.set("hom"," \\hom "),functionSymbol.set("arg"," \\arg "),functionSymbol.set("dim"," \\dim "),functionSymbol.set("mod"," \\bmod "),functionSymbol},EDMMLtoLatex.prototype.mmlFromFile=function(mmlFile,latexFile){return!1},EDMMLtoLatex.prototype.mmlFromStr=function(mml){return this.readMML(mml)?this._latex:""},EDMMLtoLatex.prototype.toLatex=function(parent){for(var otherItem=!0,tolatxtindex=-1,mapRulesIndex=new Map,mapNameToInt=new Map,mapNameToList=new Map,rules=EDMMLtoLatex.initRules(),i=0;i<rules.length;i++)if(parent.nodeName===rules[i].strMmlNodeName){for(var nodename=rules[i].strMmlNodeName,arrstr=(mapRulesIndex.set(nodename,i),[]),j=0;j<rules[i].nMaxChild;j++)arrstr.push("");if(mapNameToList.set(nodename,arrstr),mapNameToInt.set(nodename,1),"mtable"===nodename?"left"===parent.getAttribute("columnalign")?this._latex+="\\begin{array}{*{20}{l}}\n":"right"===parent.getAttribute("columnalign")?this._latex+="\\begin{array}{*{20}{r}}\n":"center"===parent.getAttribute("columnalign")?this._latex+="\\begin{array}{*{20}{c}}\n":this._latex+=rules[i].strLatexText:this._latex+=rules[i].strLatexText,0===rules[i].nMaxChild){if(0<(str=parent.textContent).length&&!1===this.specialCharJudge(parent.parentNode.nodeName,this.stringToUnicode(str)).isExist)if("mi"===nodename){var functionSymbol=EDMMLtoLatex.initFunctionSymbol();if(functionSymbol.has(str))str=functionSymbol.get(str);else{var rletter=/[a-zA-Z]/,isLetter=!1,miStrList=(null!=str.charAt(0).match(rletter)&&(isLetter=!0),[]),miStr="",index=0;for(index=0;index<str.length;index++)null!=str.charAt(index).match(rletter)&&!1===isLetter?(isLetter=!0,miStrList.push(miStr),miStr=str.charAt(index)):null!=str.charAt(index).match(rletter)&&!0===isLetter?miStr+=str.charAt(index):!1===isLetter?null!=EDMMLtoLatex.initCharacter().get(this.stringToUnicode(str.charAt(index)))?miStr+=EDMMLtoLatex.initCharacter().get(this.stringToUnicode(str.charAt(index))):miStr+=str.charAt(index):!0===isLetter&&(isLetter=!1,miStrList.push(miStr),miStr=null!=EDMMLtoLatex.initCharacter().get(this.stringToUnicode(str.charAt(index)))?EDMMLtoLatex.initCharacter().get(this.stringToUnicode(str.charAt(index))):str.charAt(index));for(miStrList.push(miStr),str="",index=0;index<miStrList.length;index++)""!==(miStr=miStrList[index])&&(null!=miStr.charAt(0).match(rletter)?str+=miStr:str+=" \\text{"+miStr+"} ")}}else if("mo"===nodename){var rnotChar=/[\da-zA-Z]/,isChar=!1,moStrList=(null==str.charAt(0).match(rnotChar)&&(isChar=!0),[]),moStr="",index=0;for(index=0;index<str.length;index++)null==str.charAt(index).match(rnotChar)&&!1===isChar?(isChar=!0,moStrList.push(moStr),moStr=null!=EDMMLtoLatex.initCharacter().get(this.stringToUnicode(str.charAt(index)))?EDMMLtoLatex.initCharacter().get(this.stringToUnicode(str.charAt(index))):str.charAt(index)):null==str.charAt(index).match(rnotChar)&&!0===isChar?null!=EDMMLtoLatex.initCharacter().get(this.stringToUnicode(str.charAt(index)))?moStr+=EDMMLtoLatex.initCharacter().get(this.stringToUnicode(str.charAt(index))):moStr+=str.charAt(index):!1===isChar?moStr+=str.charAt(index):!0===isChar&&(isChar=!1,moStrList.push(moStr),moStr=str.charAt(index));for(moStrList.push(moStr),str="",index=0;index<moStrList.length;index++)""!==(moStr=moStrList[index])&&(null==moStr.charAt(0).match(rnotChar)?str+=moStr:str+=" \\text{"+moStr+"} ")}else if("mn"===nodename){var rnumber=/[\d]/,isNumber=!1,mnStrList=(null!=str.charAt(0).match(rnumber)&&(isNumber=!0),[]),mnStr="",index=0;for(index=0;index<str.length;index++)null!=str.charAt(index).match(rnumber)&&!1===isNumber?(isNumber=!0,mnStrList.push(mnStr),mnStr=str.charAt(index)):null!=str.charAt(index).match(rnumber)&&!0===isNumber?mnStr+=str.charAt(index):!1===isNumber?null!=EDMMLtoLatex.initCharacter().get(this.stringToUnicode(str.charAt(index)))?mnStr+=EDMMLtoLatex.initCharacter().get(this.stringToUnicode(str.charAt(index))):mnStr+=str.charAt(index):!0===isNumber&&(isNumber=!1,mnStrList.push(mnStr),mnStr=null!=EDMMLtoLatex.initCharacter().get(this.stringToUnicode(str.charAt(index)))?EDMMLtoLatex.initCharacter().get(this.stringToUnicode(str.charAt(index))):str.charAt(index));for(mnStrList.push(mnStr),str="",index=0;index<mnStrList.length;index++)""!==(mnStr=mnStrList[index])&&(null!=mnStr.charAt(0).match(rnumber)?str+=mnStr:str+=" \\text{"+mnStr+"} ")}else if("mtext"===nodename){var mtextStr="",index=0;for(index=0;index<str.length;index++)null!=EDMMLtoLatex.initCharacter().get(this.stringToUnicode(str.charAt(index)))?mtextStr+=EDMMLtoLatex.initCharacter().get(this.stringToUnicode(str.charAt(index))):mtextStr+=str.charAt(index);str=mtextStr}this._latex+=str}1===rules[i].nOperType&&(tolatxtindex=this._latex.length),this._mathMl.push(rules[i].strStackPushText),otherItem=rules[i].bIsOtherItem}for(var child=parent.firstElementChild;null!=child;)if("mmultiscripts"===parent.nodeName&&"mprescripts"===child.nodeName)child=child.nextElementSibling;else{this.toLatex(child);for(var child=child.nextElementSibling,paramNodename_1=EDMMLtoLatex.initParamNodename(),i=0;i<paramNodename_1.length;i++){var tmpnumber,node=paramNodename_1[i],tmprule=rules[mapRulesIndex.get(node)];parent.nodeName===node&&mapNameToInt.get(node)<=tmprule.nMaxChild&&(mapNameToList.get(node)[mapNameToInt.get(node)-1]=this._latex.slice(tolatxtindex,this._latex.length),this._latex=this._latex.slice(0,tolatxtindex),tmpnumber=mapNameToInt.get(node)+1,mapNameToInt.set(node,tmpnumber))}}for(var paramNodename=EDMMLtoLatex.initParamNodename(),k=0;k<paramNodename.length;k++){node=paramNodename[k],tmprule=rules[mapRulesIndex.get(node)];if(parent.nodeName===node){"mmultiscripts"===node&&mapNameToInt.get(node)-1==3&&(tmprule.paramOrder=[1,2,0]);var paramOder=tmprule.paramOrder,charMatch=(1<mapNameToInt.get(node)&&(tmprule.listChildLatexText[mapNameToInt.get(node)-1-1]=""),EDMMLtoLatex.initCharMatch()),paramList=mapNameToList.get(node),bracketStack=[],leftDot=0,rightDot=0,parentChild=parent.firstElementChild,parentName=parent.nodeName,paramLength=mapNameToInt.get(node)-1;if(null!=parentChild)for(var param,leftIndex,leftBracket,rightParam,leftParam,i=0;i<paramList.length;i++)null!=(parentChild=0!==i&&null!=parentChild.nextElementSibling?parentChild.nextElementSibling:parentChild)&&"mo"!==parentChild.nodeName||(param=paramList[i],charMatch.has(param)&&charMatch.has(param)?"msub"===parentName||"msup"===parentName||"msubsup"===parentName||"munder"===parentName||"mover"===parentName||"munderover"===parentName||"mfrac"===parentName||"mroot"===parentName||"mmultiscripts"===parentName?(param=param.trim(),mapNameToList.get(node)[i]=" {\\left"+param+" \\right.} "):(bracketStack.push(i),"|"!==param&&" \\Vert "!==param||charMatch.set(param,"")):charMatch.has(param)&&""===charMatch.get(param)&&("msub"===parentName||"msup"===parentName||"msubsup"===parentName||"munder"===parentName||"mover"===parentName||"munderover"===parentName||"mfrac"===parentName||"mroot"===parentName||"mmultiscripts"===parentName?(param=param.trim(),mapNameToList.get(node)[i]=" {\\left. \\right"+param+"} "):(0<bracketStack.length?(leftIndex=bracketStack.pop(),leftBracket=(leftBracket=mapNameToList.get(node)[leftIndex]).trim(),mapNameToList.get(node)[leftIndex]=" \\left"+leftBracket+" ",param=param.trim(),mapNameToList.get(node)[i]=" \\right"+param+" "):i===paramLength-1?(leftDot++,rightParam=(rightParam=paramList[i]).trim(),mapNameToList.get(node)[i]=" \\right"+rightParam+" "):(rightDot++,leftParam=(leftParam=paramList[i]).trim(),mapNameToList.get(node)[i]=" \\left"+leftParam+" "),"|"!==param&&" \\Vert "!==param||charMatch.set(param,param))));for(;0<bracketStack.length;)(leftIndex=bracketStack.pop())===paramLength-1&&1!=paramLength?(leftDot++,rightParam=(rightParam=paramList[leftIndex]).trim(),mapNameToList.get(node)[leftIndex]=" \\right"+rightParam+" "):(rightDot++,leftParam=(leftParam=paramList[leftIndex]).trim(),mapNameToList.get(node)[leftIndex]=" \\left"+leftParam+" ");if(1<=paramLength){var leftDotList="",rightDotList="";leftDot<=rightDot?(rightDot-=leftDot,leftDot=0):(leftDot-=rightDot,rightDot=0);for(i=0;i<leftDot;i++)leftDotList+="\\left. ";var first=mapNameToList.get(node)[0];mapNameToList.get(node)[0]=leftDotList+first;for(i=0;i<rightDot;i++)rightDotList+="\\right. ";first=mapNameToList.get(node)[paramLength-1];mapNameToList.get(node)[paramLength-1]=first+rightDotList}for(var flag=!1,j=0;j<mapNameToInt.get(node)-1;j++){var str,charUnicode=this.stringToUnicode(mapNameToList.get(node)[j]),charUnicode=this.specialCharJudge(node,charUnicode);charUnicode.isExist&&""!==charUnicode.strLatexList[j]&&(!1===flag?(flag=!0,this._latex=this._latex.slice(0,tolatxtindex-charUnicode.cutLength),mapNameToList.get(node)[j]=charUnicode.strLatexList[j],tmprule.listChildLatexText=charUnicode.listChildLatexText,paramOder=charUnicode.paramOrder[j]):(str=mapNameToList.get(node)[j],mapNameToList[node].replace(j,EDMMLtoLatex.initCharacter()[this.stringToUnicode(str)])),this._mathMl.pop(),this._mathMl.push("")),charUnicode.isExist&&""===charUnicode.strLatexList[j]&&(str=mapNameToList.get(node)[j],mapNameToList.get(node)[j]=EDMMLtoLatex.initCharacter()[this.stringToUnicode(str)])}for(j=0;j<mapNameToInt.get(node)-1;j++)this._latex+=mapNameToList.get(node)[paramOder[j]]+tmprule.listChildLatexText[j];mapNameToInt.set(node,0)}}0<this._mathMl.length&&!otherItem&&(this._latex+=this._mathMl.pop())},EDMMLtoLatex.prototype.stringToUnicode=function(str){for(var unicodestr=str.charCodeAt(0).toString(16).toLocaleUpperCase(),i=unicodestr.length;i<4;++i)unicodestr="0"+unicodestr;return unicodestr},EDMMLtoLatex.prototype.specialCharJudge=function(node,unicode){var specialCharacter=EDMMLtoLatex.initSpecialCharacter();if(specialCharacter.has(node))for(var _i=0,mapCharInfo_1=specialCharacter.get(node);_i<mapCharInfo_1.length;_i++){var charinfo=mapCharInfo_1[_i];if(charinfo.specialCharacter===unicode)return charinfo.charInfo}return new EDcharInfo([""],8,!1,[""],[[]])},EDMMLtoLatex.prototype.readMML=function(mml){mml.replace("<mo>&#x2003;</mo>","<mo> \\quad </mo>"),mml.replace("<mo>&#x2008;</mo>","<mo> \\  </mo>"),mml.replace("<mo>&#x2009;</mo>","<mo> \\; </mo>");var mml=(new DOMParser).parseFromString(mml,"text/xml");return null!=mml&&(mml=mml.documentElement,this._latex="",this.toLatex(mml),!0)},EDMMLtoLatex.maxchild=32,EDMMLtoLatex}();EdrawMathDate.EDMMLtoLatex=EDMMLtoLatex}(EdrawMathDate=EdrawMathDate||{}),!function(EdrawMathDate){var EDMmlDocument=function(){function EDMmlDocument(EDMathMLDocument){this._EDMathMLDocument=EDMathMLDocument=void 0===EDMathMLDocument?null:EDMathMLDocument,EDMmlDocument.s_initialized=!1,this._ctx=null!=EDMathMLDocument?EDMathMLDocument.ctx:null,EDMmlDocument.s_MmToPixelFactor=8,this._base_font_pixel_size=20,this._ColAlignType=ColAlign.ColAlignLeft,this._nodeIdLookup=new Map,this._renderingData=[],this._renderingComplete=!1,this.init()}return EDMmlDocument.prototype.delete=function(){this.clear()},Object.defineProperty(EDMmlDocument.prototype,"ctx",{get:function(){return this._ctx},enumerable:!1,configurable:!0}),EDMmlDocument.prototype.clear=function(){null!=this._root_node&&(this._root_node.delete(),this._root_node=null),this.clearRendering()},EDMmlDocument.prototype.setContent=function(text,errorMsg,errorLine,errorColumn){var newtext,prefix;return void 0===errorMsg&&(errorMsg=[]),void 0===errorLine&&(errorLine=[0]),void 0===errorColumn&&(errorColumn=[0]),null!=this._root_node?(this.layout(),!1):(newtext=text,text=new RegExp(/\n*\r*/,"g"),newtext=(newtext=(newtext=(newtext=newtext.replace(text,"")).replace(/<mtext><\/mtext>/g,"")).replace(/  <  /g,"")).replace(/<mtext><\/mtext>/g,"<mtext>#x2009;</mtext>"),EdrawMathDate.EDStatic.g_arrowtext4replace.forEach(function(value,key){value=new RegExp(value,"g");newtext=newtext.replace(value,key)}),EdrawMathDate.EDStatic.g_special_conversion.forEach(function(value,key){var newvalue=value.replace(/#x/g,"&#x"),newvalue=new RegExp(newvalue,"g");newtext=newtext.replace(newvalue,value)}),text=[newtext],prefix=EdrawMathDate.EDStatic.mmlEntityTable.entities(text),prefix=(new DOMParser).parseFromString(prefix+text[0],"text/xml"),0<errorLine.length&&(errorLine[0]=-1),0<errorColumn.length&&(errorColumn[0]=-1),errorLine=this.domToMml(prefix,text=[!1],errorMsg),!!text[0]&&(null==errorLine?(0<errorMsg.length&&(errorMsg[0]="empty document"),!1):(this.insertChild(null,errorLine,[""]),this.updateNodeFont(),this.layout(),!0)))},EDMmlDocument.prototype.paint=function(painter,pos,outputPng){void 0===outputPng&&(outputPng=!1),null!=this._root_node&&(this._root_node.relOrigin=new egPoint(pos.x-this._root_node.myRect.left()+this._RelOrigin.x,pos.y-this._root_node.myRect.top()+this._RelOrigin.y),this._root_node.paint(painter,1,1,outputPng))},EDMmlDocument.prototype.getEduStr=function(edudata){var str;if(void 0===edudata&&(edudata=null),null!=this._root_node)return this._root_node.appendEduStr(str=[""],edudata),str[0]},EDMmlDocument.prototype.size=function(){return null==this._root_node?new egSize(0,0):this._root_node.deviceRect.size()},Object.defineProperty(EDMmlDocument.prototype,"relOrgin",{get:function(){return this._RelOrigin},enumerable:!1,configurable:!0}),EDMmlDocument.prototype.layout=function(){null!=this._root_node&&(this._root_node.nodeLayout(),this._root_node.nodeStretch())},EDMmlDocument.prototype.updateNodeFont=function(){null!=this._root_node&&this._root_node.updateChildFont()},EDMmlDocument.prototype.fontName=function(type){switch(type){case MmlFont.NormalFont:return EDMmlDocument.s_normal_font_name;case MmlFont.FrakturFont:return EDMmlDocument.s_fraktur_font_name;case MmlFont.SansSerifFont:return EDMmlDocument.s_sans_serif_font_name;case MmlFont.ScriptFont:return EDMmlDocument.s_script_font_name;case MmlFont.MonospaceFont:return EDMmlDocument.s_monospace_font_name;case MmlFont.DoublestruckFont:return EDMmlDocument.s_doublestruck_font_name}return null},EDMmlDocument.prototype.setfontName=function(type,name){switch(this.clearRendering(),type){case MmlFont.NormalFont:EDMmlDocument.s_normal_font_name=name;case MmlFont.FrakturFont:EDMmlDocument.s_fraktur_font_name=name;break;case MmlFont.SansSerifFont:EDMmlDocument.s_sans_serif_font_name=name;break;case MmlFont.ScriptFont:EDMmlDocument.s_script_font_name=name;break;case MmlFont.MonospaceFont:EDMmlDocument.s_monospace_font_name=name;break;case MmlFont.DoublestruckFont:EDMmlDocument.s_doublestruck_font_name=name}},Object.defineProperty(EDMmlDocument.prototype,"baseFontPixelSize",{get:function(){return this._base_font_pixel_size},set:function(size){this._base_font_pixel_size=size=size<EDMmlDocument.mmToPixelFactor?EDMmlDocument.mmToPixelFactor:size,this._RelOrigin.x=this._base_font_pixel_size*EdrawMathDate.EDStatic.g_relorigin_of_fontsize,this._RelOrigin.y=this._RelOrigin.x,this.clearRendering()},enumerable:!1,configurable:!0}),Object.defineProperty(EDMmlDocument.prototype,"foregroundColor",{get:function(){return this._foreground_color},set:function(color){this._foreground_color=color},enumerable:!1,configurable:!0}),Object.defineProperty(EDMmlDocument.prototype,"backgroundColor",{get:function(){return this._background_color},set:function(color){this._background_color=color},enumerable:!1,configurable:!0}),Object.defineProperty(EDMmlDocument.prototype,"drawFrames",{get:function(){return this._draw_frames},set:function(drawFrames){this._draw_frames=drawFrames},enumerable:!1,configurable:!0}),Object.defineProperty(EDMmlDocument.prototype,"defaultMode",{get:function(){return this._defaultMode},set:function(isdefault){this._defaultMode=isdefault,this.layout()},enumerable:!1,configurable:!0}),Object.defineProperty(EDMmlDocument,"mmToPixelFactor",{get:function(){return this.s_MmToPixelFactor},set:function(factor){this.s_MmToPixelFactor=factor,EdrawMathDate.EDStatic.g_min_font_pixel_size_calc=factor*EdrawMathDate.EDStatic.g_min_font_pixel_size},enumerable:!1,configurable:!0}),EDMmlDocument.prototype.rootisEmpty=function(){return null==this._root_node},Object.defineProperty(EDMmlDocument.prototype,"miBold",{get:function(){return this._bMiBold},set:function(isbold){this._bMiBold=isbold},enumerable:!1,configurable:!0}),Object.defineProperty(EDMmlDocument.prototype,"mnBold",{get:function(){return this._bMnBold},set:function(isbold){this._bMnBold=isbold},enumerable:!1,configurable:!0}),Object.defineProperty(EDMmlDocument.prototype,"miItalic",{get:function(){return this._bMiItalic},set:function(isitalic){this._bMiItalic=isitalic},enumerable:!1,configurable:!0}),Object.defineProperty(EDMmlDocument.prototype,"mnItalic",{get:function(){return this._bMnItalic},set:function(isitalic){this._bMnItalic=isitalic},enumerable:!1,configurable:!0}),Object.defineProperty(EDMmlDocument.prototype,"colAlignType",{set:function(colaligntype){this._ColAlignType=colaligntype},enumerable:!1,configurable:!0}),EDMmlDocument.prototype.domToEDMmlNodeType=function(do_node){var mml_type=EDMathMlNodeType.NoNode;switch(do_node.nodeType){case Node.ELEMENT_NODE:var tag=do_node.nodeName,tag=EdrawMathDate.EDStatic.mmlFindNodeSpec_tag(tag),mml_type=null==tag?EDMathMlNodeType.UnknownNode:tag.type;break;case Node.TEXT_NODE:mml_type=EDMathMlNodeType.TextNode;break;case Node.DOCUMENT_NODE:mml_type=EDMathMlNodeType.UnknownNode;break;case Node.ENTITY_REFERENCE_NODE:break;case Node.ATTRIBUTE_NODE:case Node.CDATA_SECTION_NODE:case Node.ENTITY_NODE:case Node.PROCESSING_INSTRUCTION_NODE:case Node.COMMENT_NODE:case Node.DOCUMENT_TYPE_NODE:case Node.DOCUMENT_FRAGMENT_NODE:case Node.NOTATION_NODE:}return mml_type},EDMmlDocument.prototype.getNode=function(mousepos){if(null==this._root_node)return null;this._root_node.relOrigin=new egPoint(-this._root_node.myRect.left()+this._RelOrigin.x,-this._root_node.myRect.top()+this._RelOrigin.y);var rootdr=this._root_node.deviceRect,x=mousepos.x,mousepos=(x<=rootdr.left()?x=rootdr.left():x>=rootdr.right()&&(x=rootdr.right()),mousepos.y);return mousepos<=rootdr.top()?mousepos=rootdr.top():mousepos>=rootdr.bottom()&&(mousepos=rootdr.bottom()),this._root_node.mousePress(new egPoint(x,mousepos))},EDMmlDocument.prototype.getNodeVector=function(editedvector,selectedvector,checkSpecialType){void 0===checkSpecialType&&(checkSpecialType=!0),null!=this._root_node&&(editedvector.splice(0),selectedvector.splice(0),this._root_node.relOrigin=new egPoint(-this._root_node.myRect.left()+this._RelOrigin.x,-this._root_node.myRect.top()+this._RelOrigin.y),this._root_node.appendTo([],!0,checkSpecialType),this._root_node.appendTo(editedvector),this._root_node.appendTo(selectedvector,!1))},EDMmlDocument.prototype.saveTo=function(ele,isforcoyp){return null!=this._root_node&&((isforcoyp=void 0===isforcoyp?!1:isforcoyp)?this._root_node.saveToForCopy(ele):this._root_node.saveTo(ele),!0)},EDMmlDocument.prototype.insertFrac=function(innode,outnode,bevelled,scriptup){bevelled=this.createMfracNode(bevelled,scriptup=void 0===scriptup?!1:scriptup);return outnode[0]=(scriptup?bevelled.firstChild:bevelled).firstChild.firstChild.lastSibling,this.ifParentNotMrow(innode),this.insertNextSibling(innode,bevelled,[])},EDMmlDocument.prototype.insertEnclose=function(innode,index,outnode){var newnode=null;switch(index){case EDMmlFormulaIndex.Enclose_div:newnode=this.createMencloseNode("longdiv");break;case EDMmlFormulaIndex.Enclose_tl:newnode=this.createMencloseNode("top left");break;case EDMmlFormulaIndex.Enclose_tr:newnode=this.createMencloseNode("top right");break;case EDMmlFormulaIndex.Enclose_bl:newnode=this.createMencloseNode("bottom left");break;case EDMmlFormulaIndex.Enclose_br:newnode=this.createMencloseNode("bottom right");break;case EDMmlFormulaIndex.Enclose_box:newnode=this.createMencloseNode("box");break;case EDMmlFormulaIndex.Enclose_up:newnode=this.createMencloseNode("updiagonalstrike");break;case EDMmlFormulaIndex.Enclose_down:newnode=this.createMencloseNode("downdiagonalstrike");break;case EDMmlFormulaIndex.Enclose_updown:newnode=this.createMencloseNode("updiagonalstrike downdiagonalstrike");break;case EDMmlFormulaIndex.Enclose_ver:newnode=this.createMencloseNode("verticalstrike");break;case EDMmlFormulaIndex.Enclose_hor:newnode=this.createMencloseNode("horizontalstrike")}return null!=newnode&&(outnode[0]=newnode.firstChild.firstChild.lastSibling,this.ifParentNotMrow(innode),this.insertNextSibling(innode,newnode,[]))},EDMmlDocument.prototype.insertNpart=function(innode,outnode){var frac_node=this.createMfracNode(!1);return this.insertPreText(frac_node.firstChild.firstChild,"<mo>&#x2202;</mo>"),this.insertPreText(frac_node.firstChild.nextSibling.firstChild,"<mo>&#x2202;</mo>"),outnode[0]=frac_node.firstChild.firstChild.lastSibling,this.ifParentNotMrow(innode),this.insertNextSibling(innode,frac_node,[])},EDMmlDocument.prototype.insertSqrt=function(innode,outnode){var sqrt_node=this.createNode(EDMathMlNodeType.MsqrtNode,new Map,null,[]),mrow_node=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[]);return this.insertChild(sqrt_node,mrow_node,[]),mrow_node.firstChild.firstChild.toTextNode().text="isNuLL!",outnode[0]=sqrt_node.firstChild.firstChild.lastSibling,this.ifParentNotMrow(innode),this.insertNextSibling(innode,sqrt_node,[])},EDMmlDocument.prototype.insertRoot=function(innode,outnode){var root_node=this.createNode(EDMathMlNodeType.MrootNode,new Map,null,[]),mrow_node=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[]),mrow_node=(this.insertChild(root_node,mrow_node,[]),mrow_node.firstChild.firstChild.toTextNode().text="isNuLL!",this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[]));return this.insertChild(root_node,mrow_node,[]),mrow_node.firstChild.firstChild.toTextNode().text="isNuLL!",outnode[0]=root_node.firstChild.firstChild.lastSibling,this.ifParentNotMrow(innode),this.insertNextSibling(innode,root_node,[])},EDMmlDocument.prototype.insertLayout=function(innode,index,outnode,outtype){void 0===outtype&&(outtype=0);var newnode=null;if(index>=EDMmlFormulaIndex.Empty_uo&&index<=EDMmlFormulaIndex.PreEmpty_bp){if(index===EDMmlFormulaIndex.Empty_uo)newnode=this.createMunderoverNode();else if(index===EDMmlFormulaIndex.Empty_u)newnode=this.createMunderNode();else if(index===EDMmlFormulaIndex.Empty_o)newnode=this.createMoverNode();else if(index===EDMmlFormulaIndex.Empty_bp)newnode=this.createMsubsupNode();else if(index===EDMmlFormulaIndex.Empty_b)newnode=this.createMsubNode();else if(index===EDMmlFormulaIndex.Empty_p)newnode=this.createMsupNode();else if(index===EDMmlFormulaIndex.PreEmpty_p)(newnode=this.createMmultiscriptsNode(!1,!1,!1,!0)).firstChild.firstChild.firstChild.toTextNode().text="isNuLL!";else if(index===EDMmlFormulaIndex.PreEmpty_b)(newnode=this.createMmultiscriptsNode(!1,!1,!0,!1)).firstChild.firstChild.firstChild.toTextNode().text="isNuLL!";else if(index===EDMmlFormulaIndex.PreEmpty_bp)(newnode=this.createMmultiscriptsNode(!1,!1,!0,!0)).firstChild.firstChild.firstChild.toTextNode().text="isNuLL!";else if(null==newnode)return!1;1===outtype&&(outnode[0]=newnode.firstChild.firstChild.lastSibling)}else if(index>=EDMmlFormulaIndex.SubSup&&index<=EDMmlFormulaIndex.Sup){if(index===EDMmlFormulaIndex.SubSup?newnode=this.createMsubsupNode():index===EDMmlFormulaIndex.Sub?newnode=this.createMsubNode():index===EDMmlFormulaIndex.Sup&&(newnode=this.createMsupNode()),null==newnode)return!1;outnode[0]=newnode.firstChild.nextSibling.firstChild.lastSibling,1<outnode.length&&(outnode[1]=newnode.firstChild.firstChild.lastSibling),newnode.firstChild.firstChild.firstChild.toTextNode().text=""}else if(index>=EDMmlFormulaIndex.PreSubSup&&index<=EDMmlFormulaIndex.PreSup){if(index===EDMmlFormulaIndex.PreSubSup&&(newnode=this.createMmultiscriptsNode(!1,!1,!0,!0),outnode[0]=newnode.firstChild.lastSibling.previousSibling.firstChild.lastSibling),index===EDMmlFormulaIndex.PreSub&&(newnode=this.createMmultiscriptsNode(!1,!1,!0,!1),outnode[0]=newnode.firstChild.lastSibling.previousSibling.firstChild.lastSibling),index===EDMmlFormulaIndex.PreSup&&(newnode=this.createMmultiscriptsNode(!1,!1,!1,!0),outnode[0]=newnode.firstChild.lastSibling.firstChild.lastSibling),null==newnode)return!1;1<outnode.length&&(outnode[1]=newnode.firstChild.firstChild.lastSibling),newnode.firstChild.firstChild.firstChild.toTextNode().text=""}else if(index>=EDMmlFormulaIndex.LargeEmpty_uo&&index<=EDMmlFormulaIndex.PreLargeEmpty_bp){if(index===EDMmlFormulaIndex.LargeEmpty_uo?newnode=this.createMunderoverNode():index===EDMmlFormulaIndex.LargeEmpty_u?newnode=this.createMunderNode():index===EDMmlFormulaIndex.LargeEmpty_o?newnode=this.createMoverNode():index===EDMmlFormulaIndex.LargeEmpty_bp?newnode=this.createMsubsupNode():index===EDMmlFormulaIndex.LargeEmpty_b?newnode=this.createMsubNode():index===EDMmlFormulaIndex.LargeEmpty_p?newnode=this.createMsupNode():index===EDMmlFormulaIndex.PreLargeEmpty_p?(newnode=this.createMmultiscriptsNode(!1,!1,!1,!0)).firstChild.firstChild.firstChild.toTextNode().text="isNuLL!":index===EDMmlFormulaIndex.PreLargeEmpty_b?(newnode=this.createMmultiscriptsNode(!1,!1,!0,!1)).firstChild.firstChild.firstChild.toTextNode().text="isNuLL!":index===EDMmlFormulaIndex.PreLargeEmpty_bp&&((newnode=this.createMmultiscriptsNode(!1,!1,!0,!0)).firstChild.firstChild.firstChild.toTextNode().text="isNuLL!"),null==newnode)return!1;var mstyle=[newnode.firstChild],mml_attr=new Map;mml_attr.set("mathsize","140%"),this.insertMstyleNode(mstyle,mml_attr)}else if(index>=EDMmlFormulaIndex.SupMin&&index<=EDMmlFormulaIndex.LeftMin){newnode=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[]),mstyle=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[]);this.insertChild(newnode,mstyle,[],!1),mstyle.firstChild.firstChild.toTextNode().text="isNuLL!",index===EDMmlFormulaIndex.SupMin?this.insertText(mstyle,"<mo>&#x2032;</mo>"):index===EDMmlFormulaIndex.SupSec?this.insertText(mstyle,"<mo>&#x2033;</mo>"):index===EDMmlFormulaIndex.SupMilliSec?this.insertText(mstyle,"<mo>&#x2034;</mo>"):index===EDMmlFormulaIndex.LeftMin&&this.insertPreText(mstyle,"<mo>&#x2035;</mo>"),outnode[0]=mstyle.firstChild}else if(index===EDMmlFormulaIndex.insertMrow){if(null==innode.previousSibling&&null==innode.nextSibling)return!1;(newnode=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[])).firstChild.firstChild.toTextNode().text="isNuLL!",outnode[0]=newnode.firstChild.lastSibling}else if(index==EDMmlFormulaIndex.sup2){if(null==(newnode=this.createMsupNode()))return!1;this.insertText(newnode.firstChild.nextSibling.firstChild.lastSibling,"2"),newnode.firstChild.nextSibling.firstChild.firstChild.toTextNode().text="",newnode.firstChild.firstChild.firstChild.toTextNode().text=""}else if(index==EDMmlFormulaIndex.eX){if(null==(newnode=this.createMsupNode()))return!1;newnode.firstChild.firstChild.lastSibling.firstChild.toTextNode().text="",this.insertText(newnode.firstChild.firstChild.lastSibling,"e"),1===outtype&&(outnode[0]=newnode.firstChild.nextSibling.firstChild.lastSibling)}else if(index==EDMmlFormulaIndex.tenX){if(null==(newnode=this.createMsupNode()))return!1;newnode.firstChild.firstChild.lastSibling.firstChild.toTextNode().text="",this.insertText(newnode.firstChild.firstChild.lastSibling,"1"),this.insertText(newnode.firstChild.firstChild.lastSibling,"0"),1===outtype&&(outnode[0]=newnode.firstChild.nextSibling.firstChild.lastSibling)}else if(index==EDMmlFormulaIndex.divided)return mml_attr=this.createMfracNode(!1,!1),outnode[1]=mml_attr.firstChild.firstChild.lastSibling,outnode[0]=mml_attr.firstChild.nextSibling.firstChild.lastSibling,this.insertNextSibling(innode,mml_attr,[]);return null!=newnode&&(2===outtype&&(outnode[0]=newnode.firstChild.firstChild.firstChild.lastSibling),this.ifParentNotMrow(innode),!!this.insertNextSibling(innode,newnode,[]))},EDMmlDocument.prototype.insertInfin=function(innode){var newnode=this.createMunderNode(),mo_node1=(this.insertPreText(newnode.firstChild.nextSibling.firstChild,"x"),this.deleteNode(newnode.firstChild.nextSibling.firstChild.nextSibling),this.insertText(newnode.firstChild.nextSibling.firstChild,"<mo>&#x2192;</mo>"),this.insertText(newnode.firstChild.nextSibling.firstChild.nextSibling,"<mo>&#x221E;</mo>"),this.createNode(EDMathMlNodeType.MiNode,new Map,null,[])),text_node1=(this.insertChild(newnode.firstChild,mo_node1,[]),this.createNode(EDMathMlNodeType.TextNode,new Map,"lim",[]));return this.insertChild(mo_node1,text_node1,[]),this.deleteNode(newnode.firstChild.firstChild),this.ifParentNotMrow(innode),this.insertNextSibling(innode,newnode,[])},EDMmlDocument.prototype.insertOther=function(node,functype,outnode){var newnode=null,newnode=this.createMunderNode(),mo_node2=(this.insertText(newnode.firstChild,"<mo>lim</mo>",!1),this.textChangeType("<mo>&#x2192;</mo>")),mo_node3=this.textChangeType("<mo>&#x221E;</mo>"),mo_node1=this.createNode(EDMathMlNodeType.MoNode,new Map,null,[]),text_node1=this.createNode(EDMathMlNodeType.TextNode,new Map,"n",[]),text_node1=(newnode.firstChild.nextSibling.nextSibling.firstChild.firstChild.toTextNode().text="",this.insertChild(mo_node1,text_node1,[]),this.insertChild(newnode.firstChild.nextSibling.nextSibling,mo_node1,[]),this.insertChild(newnode.firstChild.nextSibling.nextSibling,mo_node2,[]),this.insertChild(newnode.firstChild.nextSibling.nextSibling,mo_node3,[]),this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[])),mo_node1=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[]);this.insertChild(text_node1,mo_node1,[],!1),mo_node1.firstChild.firstChild.toTextNode().text="isNuLL!",this.insertPreSibling(mo_node1,newnode,[]);return this.deleteNode(newnode.firstChild),this.ifParentNotMrow(node),!!this.insertNextSibling(node,text_node1,[])&&(outnode[0]=mo_node1.firstChild.lastSibling,!0)},EDMmlDocument.prototype.insertInt=function(node,index,outnode){var mrow_node2,ok,newnode=null;if(index>=EDMmlFormulaIndex.Sum_uo&&index<=EDMmlFormulaIndex.Sum_b){if(index===EDMmlFormulaIndex.Sum_uo?newnode=this.createMunderoverNode():index===EDMmlFormulaIndex.Sum_u?newnode=this.createMunderNode():index===EDMmlFormulaIndex.Sum_bp?newnode=this.createMsubsupNode():index===EDMmlFormulaIndex.Sum_b?newnode=this.createMsubNode():index===EDMmlFormulaIndex.Sum&&((newnode=this.textChangeType("<mo>&#x2211;</mo>")).fontSizeLevel=EdrawMathDate.EDStatic.g_largeop_multiplier),null==newnode)return!1;this.insertText(newnode.firstChild,"<mo>&#x2211;</mo>",!1)}else if(index>=EDMmlFormulaIndex.Product_uo&&index<=EDMmlFormulaIndex.Product_b){if(index===EDMmlFormulaIndex.Product_uo?newnode=this.createMunderoverNode():index===EDMmlFormulaIndex.Product_u?newnode=this.createMunderNode():index===EDMmlFormulaIndex.Product_bp?newnode=this.createMsubsupNode():index===EDMmlFormulaIndex.Product_b?newnode=this.createMsubNode():index===EDMmlFormulaIndex.Product&&((newnode=this.textChangeType("<mo>&#x220F;</mo>")).fontSizeLevel=EdrawMathDate.EDStatic.g_largeop_multiplier),null==newnode)return!1;this.insertText(newnode.firstChild,"<mo>&#x220F;</mo>",!1)}else if(index>=EDMmlFormulaIndex.CoProduct_uo&&index<=EDMmlFormulaIndex.CoProduct_b){if(index===EDMmlFormulaIndex.CoProduct_uo?newnode=this.createMunderoverNode():index===EDMmlFormulaIndex.CoProduct_u?newnode=this.createMunderNode():index===EDMmlFormulaIndex.CoProduct_bp?newnode=this.createMsubsupNode():index===EDMmlFormulaIndex.CoProduct_b?newnode=this.createMsubNode():index===EDMmlFormulaIndex.CoProduct&&((newnode=this.textChangeType("<mo>&#x2210;</mo>")).fontSizeLevel=EdrawMathDate.EDStatic.g_largeop_multiplier),null==newnode)return!1;this.insertText(newnode.firstChild,"<mo>&#x2210;</mo>",!1)}else if(index>=EDMmlFormulaIndex.Intersection_uo&&index<=EDMmlFormulaIndex.Intersection_b){if(index===EDMmlFormulaIndex.Intersection_uo?newnode=this.createMunderoverNode():index===EDMmlFormulaIndex.Intersection_u?newnode=this.createMunderNode():index===EDMmlFormulaIndex.Intersection_bp?newnode=this.createMsubsupNode():index===EDMmlFormulaIndex.Intersection_b?newnode=this.createMsubNode():index===EDMmlFormulaIndex.Intersection&&((newnode=this.textChangeType("<mo>&#x22C2;</mo>")).fontSizeLevel=EdrawMathDate.EDStatic.g_largeop_multiplier),null==newnode)return!1;this.insertText(newnode.firstChild,"<mo>&#x22C2;</mo>",!1)}else if(index>=EDMmlFormulaIndex.Union_uo&&index<=EDMmlFormulaIndex.Union_b){if(index===EDMmlFormulaIndex.Union_uo?newnode=this.createMunderoverNode():index===EDMmlFormulaIndex.Union_u?newnode=this.createMunderNode():index===EDMmlFormulaIndex.Union_bp?newnode=this.createMsubsupNode():index===EDMmlFormulaIndex.Union_b?newnode=this.createMsubNode():index===EDMmlFormulaIndex.Union&&((newnode=this.textChangeType("<mo>&#x22C3;</mo>")).fontSizeLevel=EdrawMathDate.EDStatic.g_largeop_multiplier),null==newnode)return!1;this.insertText(newnode.firstChild,"<mo>&#x22C3;</mo>",!1)}else if(index>=EDMmlFormulaIndex.Lor_uo&&index<=EDMmlFormulaIndex.Lor_b){if(index===EDMmlFormulaIndex.Lor_uo?newnode=this.createMunderoverNode():index===EDMmlFormulaIndex.Lor_u?newnode=this.createMunderNode():index===EDMmlFormulaIndex.Lor_bp?newnode=this.createMsubsupNode():index===EDMmlFormulaIndex.Lor_b?newnode=this.createMsubNode():index===EDMmlFormulaIndex.Lor&&((newnode=this.textChangeType("<mo>&#x22C1;</mo>")).fontSizeLevel=EdrawMathDate.EDStatic.g_largeop_multiplier),null==newnode)return!1;this.insertText(newnode.firstChild,"<mo>&#x22C1;</mo>",!1)}else if(index>=EDMmlFormulaIndex.Land_uo&&index<=EDMmlFormulaIndex.Land_b){if(index===EDMmlFormulaIndex.Land_uo?newnode=this.createMunderoverNode():index===EDMmlFormulaIndex.Land_u?newnode=this.createMunderNode():index===EDMmlFormulaIndex.Land_bp?newnode=this.createMsubsupNode():index===EDMmlFormulaIndex.Land_b?newnode=this.createMsubNode():index===EDMmlFormulaIndex.Land&&((newnode=this.textChangeType("<mo>&#x22C0;</mo>")).fontSizeLevel=EdrawMathDate.EDStatic.g_largeop_multiplier),null==newnode)return!1;this.insertText(newnode.firstChild,"<mo>&#x22C0;</mo>",!1)}else if(index>=EDMmlFormulaIndex.Int_u&&index<=EDMmlFormulaIndex.Int_b){if(index===EDMmlFormulaIndex.Int_uo?newnode=this.createMunderoverNode():index===EDMmlFormulaIndex.Int_u?newnode=this.createMunderNode():index===EDMmlFormulaIndex.Int_bp?newnode=this.createMsubsupNode():index===EDMmlFormulaIndex.Int_b?newnode=this.createMsubNode():index===EDMmlFormulaIndex.Int&&((newnode=this.textChangeType("<mo>&#x222B;</mo>")).fontSizeLevel=EdrawMathDate.EDStatic.g_largeop_multiplier),null==newnode)return!1;this.insertText(newnode.firstChild,"<mo>&#x222B;</mo>",!1)}else if(index>=EDMmlFormulaIndex.DoubleInt_u&&index<=EDMmlFormulaIndex.DoubleInt_b){if(index===EDMmlFormulaIndex.DoubleInt_u?newnode=this.createMunderNode():index===EDMmlFormulaIndex.DoubleInt_uo?newnode=this.createMunderoverNode():index===EDMmlFormulaIndex.DoubleInt_b?newnode=this.createMsubNode():index===EDMmlFormulaIndex.DoubleInt_bp?newnode=this.createMsubsupNode():index===EDMmlFormulaIndex.DoubleInt&&((newnode=this.textChangeType("<mo>&#x222C;</mo>")).fontSizeLevel=EdrawMathDate.EDStatic.g_largeop_multiplier),null==newnode)return!1;this.insertText(newnode.firstChild,"<mo>&#x222C;</mo>",!1)}else if(index>=EDMmlFormulaIndex.TripleInt_u&&index<=EDMmlFormulaIndex.TripleInt_b){if(index===EDMmlFormulaIndex.TripleInt_u?newnode=this.createMunderNode():index===EDMmlFormulaIndex.TripleInt_uo?newnode=this.createMunderoverNode():index===EDMmlFormulaIndex.TripleInt_bp?newnode=this.createMsubsupNode():index===EDMmlFormulaIndex.TripleInt_b?newnode=this.createMsubNode():index===EDMmlFormulaIndex.TripleInt&&((newnode=this.textChangeType("<mo>&#x222D;</mo>")).fontSizeLevel=EdrawMathDate.EDStatic.g_largeop_multiplier),null==newnode)return!1;this.insertText(newnode.firstChild,"<mo>&#x222D;</mo>",!1)}else if(index>=EDMmlFormulaIndex.QuadrupleInt_u&&index<=EDMmlFormulaIndex.QuadrupleInt_b){if(index===EDMmlFormulaIndex.QuadrupleInt_u?newnode=this.createMunderNode():index===EDMmlFormulaIndex.QuadrupleInt_uo?newnode=this.createMunderoverNode():index===EDMmlFormulaIndex.QuadrupleInt_bp?newnode=this.createMsubsupNode():index===EDMmlFormulaIndex.QuadrupleInt_b?newnode=this.createMsubNode():index===EDMmlFormulaIndex.QuadrupleInt&&((newnode=this.textChangeType("<mo>&#x2A0C;</mo>")).fontSizeLevel=EdrawMathDate.EDStatic.g_largeop_multiplier),null==newnode)return!1;this.insertText(newnode.firstChild,"<mo>&#x2A0C;</mo>",!1)}else if(index>=EDMmlFormulaIndex.ContourInt_u&&index<=EDMmlFormulaIndex.ContourInt_b){if(index===EDMmlFormulaIndex.ContourInt_u?newnode=this.createMunderNode():index===EDMmlFormulaIndex.ContourInt_uo?newnode=this.createMunderoverNode():index===EDMmlFormulaIndex.ContourInt_bp?newnode=this.createMsubsupNode():index===EDMmlFormulaIndex.ContourInt_b?newnode=this.createMsubNode():index===EDMmlFormulaIndex.ContourInt&&((newnode=this.textChangeType("<mo>&#x222E;</mo>")).fontSizeLevel=EdrawMathDate.EDStatic.g_largeop_multiplier),null==newnode)return!1;this.insertText(newnode.firstChild,"<mo>&#x222E;</mo>",!1)}else if(index>=EDMmlFormulaIndex.SurfaceInt_u&&index<=EDMmlFormulaIndex.SurfaceInt_b){if(index===EDMmlFormulaIndex.SurfaceInt_u?newnode=this.createMunderNode():index===EDMmlFormulaIndex.SurfaceInt_uo?newnode=this.createMunderoverNode():index===EDMmlFormulaIndex.SurfaceInt_bp?newnode=this.createMsubsupNode():index===EDMmlFormulaIndex.SurfaceInt_b?newnode=this.createMsubNode():index===EDMmlFormulaIndex.SurfaceInt&&((newnode=this.textChangeType("<mo>&#x222F;</mo>")).fontSizeLevel=EdrawMathDate.EDStatic.g_largeop_multiplier),null==newnode)return!1;this.insertText(newnode.firstChild,"<mo>&#x222F;</mo>",!1)}else if(index>=EDMmlFormulaIndex.VolumeInt_u&&index<=EDMmlFormulaIndex.VolumeInt_b){if(index===EDMmlFormulaIndex.VolumeInt_u?newnode=this.createMunderNode():index===EDMmlFormulaIndex.VolumeInt_uo?newnode=this.createMunderoverNode():index===EDMmlFormulaIndex.VolumeInt_bp?newnode=this.createMsubsupNode():index===EDMmlFormulaIndex.VolumeInt_b?newnode=this.createMsubNode():index===EDMmlFormulaIndex.VolumeInt&&((newnode=this.textChangeType("<mo>&#x2230;</mo>")).fontSizeLevel=EdrawMathDate.EDStatic.g_largeop_multiplier),null==newnode)return!1;this.insertText(newnode.firstChild,"<mo>&#x2230;</mo>",!1)}else if(index>=EDMmlFormulaIndex.ClockwiseInt_u&&index<=EDMmlFormulaIndex.ClockwiseInt_b){if(index===EDMmlFormulaIndex.ClockwiseInt_u?newnode=this.createMunderNode():index===EDMmlFormulaIndex.ClockwiseInt_uo?newnode=this.createMunderoverNode():index===EDMmlFormulaIndex.ClockwiseInt_bp?newnode=this.createMsubsupNode():index===EDMmlFormulaIndex.ClockwiseInt_b?newnode=this.createMsubNode():index===EDMmlFormulaIndex.ClockwiseInt&&((newnode=this.textChangeType("<mo>&#x2231;</mo>")).fontSizeLevel=EdrawMathDate.EDStatic.g_largeop_multiplier),null==newnode)return!1;this.insertText(newnode.firstChild,"<mo>&#x2231;</mo>",!1)}else if(index>=EDMmlFormulaIndex.CtClockwiseInt_u&&index<=EDMmlFormulaIndex.CtClockwiseInt_b){if(index===EDMmlFormulaIndex.CtClockwiseInt_u?newnode=this.createMunderNode():index===EDMmlFormulaIndex.CtClockwiseInt_uo?newnode=this.createMunderoverNode():index===EDMmlFormulaIndex.CtClockwiseInt_bp?newnode=this.createMsubsupNode():index===EDMmlFormulaIndex.CtClockwiseInt_b?newnode=this.createMsubNode():index===EDMmlFormulaIndex.CtClockwiseInt&&((newnode=this.textChangeType("<mo>&#x2A11;</mo>")).fontSizeLevel=EdrawMathDate.EDStatic.g_largeop_multiplier),null==newnode)return!1;this.insertText(newnode.firstChild,"<mo>&#x2A11;</mo>",!1)}else if(index>=EDMmlFormulaIndex.ClockwiseContInt_u&&index<=EDMmlFormulaIndex.ClockwiseContInt_b){if(index===EDMmlFormulaIndex.ClockwiseContInt_u?newnode=this.createMunderNode():index===EDMmlFormulaIndex.ClockwiseContInt_uo?newnode=this.createMunderoverNode():index===EDMmlFormulaIndex.ClockwiseContInt_bp?newnode=this.createMsubsupNode():index===EDMmlFormulaIndex.ClockwiseContInt_b?newnode=this.createMsubNode():index===EDMmlFormulaIndex.ClockwiseContInt&&((newnode=this.textChangeType("<mo>&#x2232;</mo>")).fontSizeLevel=EdrawMathDate.EDStatic.g_largeop_multiplier),null==newnode)return!1;this.insertText(newnode.firstChild,"<mo>&#x2232;</mo>",!1)}else{if(!(index>=EDMmlFormulaIndex.CtClockwiseContInt_u&&index<=EDMmlFormulaIndex.CtClockwiseContInt_b))return!1;if(index===EDMmlFormulaIndex.CtClockwiseContInt_u?newnode=this.createMunderNode():index===EDMmlFormulaIndex.CtClockwiseContInt_uo?newnode=this.createMunderoverNode():index===EDMmlFormulaIndex.CtClockwiseContInt_bp?newnode=this.createMsubsupNode():index===EDMmlFormulaIndex.CtClockwiseContInt_b?newnode=this.createMsubNode():index===EDMmlFormulaIndex.CtClockwiseContInt&&((newnode=this.textChangeType("<mo>&#x2233;</mo>")).fontSizeLevel=EdrawMathDate.EDStatic.g_largeop_multiplier),null==newnode)return!1;this.insertText(newnode.firstChild,"<mo>&#x2233;</mo>",!1)}return null!=newnode&&(index=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[]),mrow_node2=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[]),this.insertChild(index,mrow_node2,[],!1),mrow_node2.firstChild.firstChild.toTextNode().text="isNuLL!",ok=this.insertPreSibling(mrow_node2,newnode,[]),this.deleteNode(newnode.firstChild),this.ifParentNotMrow(node),!!this.insertNextSibling(node,index,[]))&&(outnode[0]=mrow_node2.firstChild.lastSibling,ok)},EDMmlDocument.prototype.insertArr=function(node,index,outnode){var newnode=null;if(index>=EDMmlFormulaIndex.LeftArr_uo&&index<=EDMmlFormulaIndex.LeftArr_o){if(index===EDMmlFormulaIndex.LeftArr_uo?newnode=this.createMunderoverNode():index===EDMmlFormulaIndex.LeftArr_u?newnode=this.createMunderNode():index===EDMmlFormulaIndex.LeftArr_o&&(newnode=this.createMoverNode()),null==newnode)return!1;this.insertText(newnode.firstChild,"<mo>&#x2190;</mo>",!1)}else if(index>=EDMmlFormulaIndex.LongLeftArr_uo&&index<=EDMmlFormulaIndex.LongLeftArr_o){if(index===EDMmlFormulaIndex.LongLeftArr_uo?newnode=this.createMunderoverNode():index===EDMmlFormulaIndex.LongLeftArr_u?newnode=this.createMunderNode():index===EDMmlFormulaIndex.LongLeftArr_o&&(newnode=this.createMoverNode()),null==newnode)return!1;this.insertText(newnode.firstChild,"<mo>&#x27F5;</mo>",!1)}else if(index>=EDMmlFormulaIndex.LeftTeeArr_uo&&index<=EDMmlFormulaIndex.LeftTeeArr_o){if(index===EDMmlFormulaIndex.LeftTeeArr_uo?newnode=this.createMunderoverNode():index===EDMmlFormulaIndex.LeftTeeArr_u?newnode=this.createMunderNode():EDMmlFormulaIndex.LeftTeeArr_o,null==(newnode=this.createMoverNode()))return!1;this.insertText(newnode.firstChild,"<mo>&#x21A4;</mo>",!1)}else if(index>=EDMmlFormulaIndex.DoubleLeftArr_uo&&index<=EDMmlFormulaIndex.DoubleLeftArr_o){if(index===EDMmlFormulaIndex.DoubleLeftArr_uo?newnode=this.createMunderoverNode():index===EDMmlFormulaIndex.DoubleLeftArr_u?newnode=this.createMunderNode():index===EDMmlFormulaIndex.DoubleLeftArr_o&&(newnode=this.createMoverNode()),null==newnode)return!1;this.insertText(newnode.firstChild,"<mo>&#x21D0;</mo>",!1)}else if(index>=EDMmlFormulaIndex.DbLongLeftArr_uo&&index<=EDMmlFormulaIndex.DbLongLeftArr_o){if(index===EDMmlFormulaIndex.DbLongLeftArr_uo?newnode=this.createMunderoverNode():index===EDMmlFormulaIndex.DbLongLeftArr_u?newnode=this.createMunderNode():index===EDMmlFormulaIndex.DbLongLeftArr_o&&(newnode=this.createMoverNode()),null==newnode)return!1;this.insertText(newnode.firstChild,"<mo>&#x27F8;</mo>",!1)}else if(index>=EDMmlFormulaIndex.RightArr_uo&&index<=EDMmlFormulaIndex.RightArr_o){if(index===EDMmlFormulaIndex.RightArr_uo&&(newnode=this.createMunderoverNode()),index===EDMmlFormulaIndex.RightArr_u&&(newnode=this.createMunderNode()),null==(newnode=index===EDMmlFormulaIndex.RightArr_o?this.createMoverNode():newnode))return!1;this.insertText(newnode.firstChild,"<mo>&#x2192;</mo>",!1)}else if(index>=EDMmlFormulaIndex.LongRightArr_uo&&index<=EDMmlFormulaIndex.LongRightArr_o){if(index===EDMmlFormulaIndex.LongRightArr_uo?newnode=this.createMunderoverNode():index===EDMmlFormulaIndex.LongRightArr_u?newnode=this.createMunderNode():index===EDMmlFormulaIndex.LongRightArr_o&&(newnode=this.createMoverNode()),null==newnode)return!1;this.insertText(newnode.firstChild,"<mo>&#x27F6;</mo>",!1)}else if(index>=EDMmlFormulaIndex.RightTeeArr_uo&&index<=EDMmlFormulaIndex.RightTeeArr_o){if(index===EDMmlFormulaIndex.RightTeeArr_uo?newnode=this.createMunderoverNode():index===EDMmlFormulaIndex.RightTeeArr_u?newnode=this.createMunderNode():index===EDMmlFormulaIndex.RightTeeArr_o&&(newnode=this.createMoverNode()),null==newnode)return!1;this.insertText(newnode.firstChild,"<mo>&#x21A6;</mo>",!1)}else if(index>=EDMmlFormulaIndex.DoubleRightArr_uo&&index<=EDMmlFormulaIndex.DoubleRightArr_o){if(index===EDMmlFormulaIndex.DoubleRightArr_uo?newnode=this.createMunderoverNode():index===EDMmlFormulaIndex.DoubleRightArr_u?newnode=this.createMunderNode():index===EDMmlFormulaIndex.DoubleRightArr_o&&(newnode=this.createMoverNode()),null==newnode)return!1;this.insertText(newnode.firstChild,"<mo>&#x21D2;</mo>",!1)}else if(index>=EDMmlFormulaIndex.DbLongRightArr_uo&&index<=EDMmlFormulaIndex.DbLongRightArr_o){if(index===EDMmlFormulaIndex.DbLongRightArr_uo?newnode=this.createMunderoverNode():index===EDMmlFormulaIndex.DbLongRightArr_u?newnode=this.createMunderNode():index===EDMmlFormulaIndex.DbLongRightArr_o&&(newnode=this.createMoverNode()),null==newnode)return!1;this.insertText(newnode.firstChild,"<mo>&#x27F9;</mo>",!1)}else if(index>=EDMmlFormulaIndex.LeftRightArr_uo&&index<=EDMmlFormulaIndex.LeftRightArr_o){if(index===EDMmlFormulaIndex.LeftRightArr_uo?newnode=this.createMunderoverNode():index===EDMmlFormulaIndex.LeftRightArr_u?newnode=this.createMunderNode():index===EDMmlFormulaIndex.LeftRightArr_o&&(newnode=this.createMoverNode()),null==newnode)return!1;this.insertText(newnode.firstChild,"<mo>&#x2194;</mo>",!1)}else if(index>=EDMmlFormulaIndex.LongLeftRightArr_uo&&index<=EDMmlFormulaIndex.LongLeftRightArr_o){if(index===EDMmlFormulaIndex.LongLeftRightArr_uo?newnode=this.createMunderoverNode():index===EDMmlFormulaIndex.LongLeftRightArr_u?newnode=this.createMunderNode():index===EDMmlFormulaIndex.LongLeftRightArr_o&&(newnode=this.createMoverNode()),null==newnode)return!1;this.insertText(newnode.firstChild,"<mo>&#x27F7;</mo>",!1)}else if(index>=EDMmlFormulaIndex.LeftArrRightArr_uo&&index<=EDMmlFormulaIndex.LeftArrRightArr_o){if(index===EDMmlFormulaIndex.LeftArrRightArr_uo?newnode=this.createMunderoverNode():index===EDMmlFormulaIndex.LeftArrRightArr_u?newnode=this.createMunderNode():index===EDMmlFormulaIndex.LeftArrRightArr_o&&(newnode=this.createMoverNode()),null==newnode)return!1;this.insertText(newnode.firstChild,"<mo>&#x21C6;</mo>",!1)}else if(index>=EDMmlFormulaIndex.RightArrLeftArr_uo&&index<=EDMmlFormulaIndex.RightArrLeftArr_o){if(index===EDMmlFormulaIndex.RightArrLeftArr_uo?newnode=this.createMunderoverNode():index===EDMmlFormulaIndex.RightArrLeftArr_u?newnode=this.createMunderNode():index===EDMmlFormulaIndex.RightArrLeftArr_o&&(newnode=this.createMoverNode()),null==newnode)return!1;this.insertText(newnode.firstChild,"<mo>&#x21C4;</mo>",!1)}else if(index>=EDMmlFormulaIndex.ReverseEquilibrium_uo&&index<=EDMmlFormulaIndex.ReverseEquilibrium_o){if(index===EDMmlFormulaIndex.ReverseEquilibrium_uo?newnode=this.createMunderoverNode():index===EDMmlFormulaIndex.ReverseEquilibrium_u?newnode=this.createMunderNode():index===EDMmlFormulaIndex.ReverseEquilibrium_o&&(newnode=this.createMoverNode()),null==newnode)return!1;this.insertText(newnode.firstChild,"<mo>&#x021CB;</mo>",!1)}else if(index>=EDMmlFormulaIndex.Equilibrium_uo&&index<=EDMmlFormulaIndex.Equilibrium_o){if(index===EDMmlFormulaIndex.Equilibrium_uo?newnode=this.createMunderoverNode():index===EDMmlFormulaIndex.Equilibrium_u?newnode=this.createMunderNode():index===EDMmlFormulaIndex.Equilibrium_o&&(newnode=this.createMoverNode()),null==newnode)return!1;this.insertText(newnode.firstChild,"<mo>&#x21CC;</mo>",!1)}else if(index>=EDMmlFormulaIndex.LongRArrShortLArr_uo&&index<=EDMmlFormulaIndex.LongRArrShortLArr_o){if(index===EDMmlFormulaIndex.LongRArrShortLArr_uo?newnode=this.createMunderoverNode():index===EDMmlFormulaIndex.LongRArrShortLArr_u?newnode=this.createMunderNode():index===EDMmlFormulaIndex.LongRArrShortLArr_o&&(newnode=this.createMoverNode()),null==newnode)return!1;this.insertText(newnode.firstChild,"<mo>&#x02942;</mo>",!1)}else if(index>=EDMmlFormulaIndex.ShortRArrLongLArr_uo&&index<=EDMmlFormulaIndex.ShortRArrLongLArr_o){if(index===EDMmlFormulaIndex.ShortRArrLongLArr_uo?newnode=this.createMunderoverNode():index===EDMmlFormulaIndex.ShortRArrLongLArr_u?newnode=this.createMunderNode():index===EDMmlFormulaIndex.ShortRArrLongLArr_o&&(newnode=this.createMoverNode()),null==newnode)return!1;this.insertText(newnode.firstChild,"<mo>&#x02944;</mo>",!1)}else if(index>=EDMmlFormulaIndex.LRightArrSLeftArr_uo&&index<=EDMmlFormulaIndex.LRightArrSLeftArr_o){if(index===EDMmlFormulaIndex.LRightArrSLeftArr_uo?newnode=this.createMunderoverNode():index===EDMmlFormulaIndex.LRightArrSLeftArr_u?newnode=this.createMunderNode():index===EDMmlFormulaIndex.LRightArrSLeftArr_o&&(newnode=this.createMoverNode()),null==newnode)return!1;this.insertText(newnode.firstChild,"<mo>&#xF2192;</mo>",!1)}else if(index>=EDMmlFormulaIndex.SRightArrLLeftArr_uo&&index<=EDMmlFormulaIndex.SRightArrLLeftArr_o){if(index===EDMmlFormulaIndex.SRightArrLLeftArr_uo?newnode=this.createMunderoverNode():index===EDMmlFormulaIndex.SRightArrLLeftArr_u?newnode=this.createMunderNode():index===EDMmlFormulaIndex.SRightArrLLeftArr_o&&(newnode=this.createMoverNode()),null==newnode)return!1;this.insertText(newnode.firstChild,"<mo>&#xF2190;</mo>",!1)}else if(index>=EDMmlFormulaIndex.LRightVerSLeftVer_uo&&index<=EDMmlFormulaIndex.LRightVerSLeftVer_o){if(index===EDMmlFormulaIndex.LRightVerSLeftVer_uo?newnode=this.createMunderoverNode():index===EDMmlFormulaIndex.LRightVerSLeftVer_u?newnode=this.createMunderNode():index===EDMmlFormulaIndex.LRightVerSLeftVer_o&&(newnode=this.createMoverNode()),null==newnode)return!1;this.insertText(newnode.firstChild,"<mo>&#xF21C0;</mo>",!1)}else{if(!(index>=EDMmlFormulaIndex.SRightVerLLeftVer_uo&&index<=EDMmlFormulaIndex.SRightVerLLeftVer_o))return!1;if(index===EDMmlFormulaIndex.SRightVerLLeftVer_uo?newnode=this.createMunderoverNode():index===EDMmlFormulaIndex.SRightVerLLeftVer_u?newnode=this.createMunderNode():index===EDMmlFormulaIndex.SRightVerLLeftVer_o&&(newnode=this.createMoverNode()),null==newnode)return!1;this.insertText(newnode.firstChild,"<mo>&#xF21BD;</mo>",!1)}return null!=newnode&&(this.deleteNode(newnode.firstChild),null==outnode[0]&&(outnode[0]=newnode.firstChild.nextSibling.firstChild.lastSibling),this.ifParentNotMrow(node),this.insertNextSibling(node,newnode,[]))},EDMmlDocument.prototype.insertFunc=function(node,functype,outnode){var new_node=this.createBracket_LeftRight("<mo>&#x0028;</mo>","<mo>&#x0029;</mo>"),mo_node1=this.createNode(EDMathMlNodeType.MoNode,new Map,null,[]),text_node1=this.createNode(EDMathMlNodeType.TextNode,new Map,"",[]),node_x=(this.insertChild(mo_node1,text_node1,[]),null);switch(outnode[0]=new_node.firstChild.nextSibling.nextSibling.firstChild,functype){case EDMmlFormulaIndex.sinX:this.insertNextSibling(new_node.firstChild,mo_node1,[]),text_node1.toTextNode().text="sin";break;case EDMmlFormulaIndex.cosX:this.insertNextSibling(new_node.firstChild,mo_node1,[]),text_node1.toTextNode().text="cos";break;case EDMmlFormulaIndex.tanX:this.insertNextSibling(new_node.firstChild,mo_node1,[]),text_node1.toTextNode().text="tan";break;case EDMmlFormulaIndex.secX:this.insertNextSibling(new_node.firstChild,mo_node1,[]),text_node1.toTextNode().text="sec";break;case EDMmlFormulaIndex.cscX:this.insertNextSibling(new_node.firstChild,mo_node1,[]),text_node1.toTextNode().text="csc";break;case EDMmlFormulaIndex.cotX:this.insertNextSibling(new_node.firstChild,mo_node1,[]),text_node1.toTextNode().text="cot";break;case EDMmlFormulaIndex.arcsinX:this.insertNextSibling(new_node.firstChild,mo_node1,[]),text_node1.toTextNode().text="arcsin";break;case EDMmlFormulaIndex.arccosX:this.insertNextSibling(new_node.firstChild,mo_node1,[]),text_node1.toTextNode().text="arccos";break;case EDMmlFormulaIndex.arctanX:this.insertNextSibling(new_node.firstChild,mo_node1,[]),text_node1.toTextNode().text="arctan";break;case EDMmlFormulaIndex.arccotX:this.insertNextSibling(new_node.firstChild,mo_node1,[]),text_node1.toTextNode().text="arccot";break;case EDMmlFormulaIndex.lgX:this.insertNextSibling(new_node.firstChild,mo_node1,[]),text_node1.toTextNode().text="lg";break;case EDMmlFormulaIndex.lnX:this.insertNextSibling(new_node.firstChild,mo_node1,[]),text_node1.toTextNode().text="ln";break;case EDMmlFormulaIndex.expX:this.insertNextSibling(new_node.firstChild,mo_node1,[]),text_node1.toTextNode().text="exp";break;case EDMmlFormulaIndex.sin_X:node_x=this.createMsupNode(),this.insertNextSibling(new_node.firstChild,node_x,[]),this.insertNextSibling(node_x.firstChild.firstChild,mo_node1,[]),this.deleteNode(node_x.firstChild.firstChild),this.insertText(node_x.firstChild.nextSibling.firstChild,"1",!1),this.insertText(node_x.firstChild.nextSibling.firstChild,"-",!1),this.deleteNode(node_x.firstChild.nextSibling.firstChild),text_node1.toTextNode().text="sin";break;case EDMmlFormulaIndex.cos_X:node_x=this.createMsupNode(),this.insertNextSibling(new_node.firstChild,node_x,[]),this.insertNextSibling(node_x.firstChild.firstChild,mo_node1,[]),this.deleteNode(node_x.firstChild.firstChild),this.insertText(node_x.firstChild.nextSibling.firstChild,"1",!1),this.insertText(node_x.firstChild.nextSibling.firstChild,"-",!1),this.deleteNode(node_x.firstChild.nextSibling.firstChild),text_node1.toTextNode().text="cos";break;case EDMmlFormulaIndex.tan_X:node_x=this.createMsupNode(),this.insertNextSibling(new_node.firstChild,node_x,[]),this.insertNextSibling(node_x.firstChild.firstChild,mo_node1,[]),this.deleteNode(node_x.firstChild.firstChild),this.insertText(node_x.firstChild.nextSibling.firstChild,"1",!1),this.insertText(node_x.firstChild.nextSibling.firstChild,"-",!1),this.deleteNode(node_x.firstChild.nextSibling.firstChild),text_node1.toTextNode().text="tan";break;case EDMmlFormulaIndex.sin2X:node_x=this.createMsupNode(),this.insertNextSibling(new_node.firstChild,node_x,[]),this.insertNextSibling(node_x.firstChild.firstChild,mo_node1,[]),this.deleteNode(node_x.firstChild.firstChild),this.insertText(node_x.firstChild.nextSibling.firstChild,"2",!1),this.deleteNode(node_x.firstChild.nextSibling.firstChild),text_node1.toTextNode().text="sin";break;case EDMmlFormulaIndex.cos2X:node_x=this.createMsupNode(),this.insertNextSibling(new_node.firstChild,node_x,[]),this.insertNextSibling(node_x.firstChild.firstChild,mo_node1,[]),this.deleteNode(node_x.firstChild.firstChild),this.insertText(node_x.firstChild.nextSibling.firstChild,"2",!1),this.deleteNode(node_x.firstChild.nextSibling.firstChild),text_node1.toTextNode().text="cos";break;case EDMmlFormulaIndex.tan2X:node_x=this.createMsupNode(),this.insertNextSibling(new_node.firstChild,node_x,[]),this.insertNextSibling(node_x.firstChild.firstChild,mo_node1,[]),this.deleteNode(node_x.firstChild.firstChild),this.insertText(node_x.firstChild.nextSibling.firstChild,"2",!1),this.deleteNode(node_x.firstChild.nextSibling.firstChild),text_node1.toTextNode().text="tan";break;case EDMmlFormulaIndex.sec2X:node_x=this.createMsupNode(),this.insertNextSibling(new_node.firstChild,node_x,[]),this.insertNextSibling(node_x.firstChild.firstChild,mo_node1,[]),this.deleteNode(node_x.firstChild.firstChild),this.insertText(node_x.firstChild.nextSibling.firstChild,"2",!1),this.deleteNode(node_x.firstChild.nextSibling.firstChild),text_node1.toTextNode().text="sec";break;case EDMmlFormulaIndex.csc2X:node_x=this.createMsupNode(),this.insertNextSibling(new_node.firstChild,node_x,[]),this.insertNextSibling(node_x.firstChild.firstChild,mo_node1,[]),this.deleteNode(node_x.firstChild.firstChild),this.insertText(node_x.firstChild.nextSibling.firstChild,"2",!1),this.deleteNode(node_x.firstChild.nextSibling.firstChild),text_node1.toTextNode().text="csc";break;case EDMmlFormulaIndex.cot2X:node_x=this.createMsupNode(),this.insertNextSibling(new_node.firstChild,node_x,[]),this.insertNextSibling(node_x.firstChild.firstChild,mo_node1,[]),this.deleteNode(node_x.firstChild.firstChild),this.insertText(node_x.firstChild.nextSibling.firstChild,"2",!1),this.deleteNode(node_x.firstChild.nextSibling.firstChild),text_node1.toTextNode().text="cot";break;case EDMmlFormulaIndex.logX:node_x=this.createMsubNode(),this.insertNextSibling(new_node.firstChild,node_x,[]),this.insertNextSibling(node_x.firstChild.firstChild,mo_node1,[]),this.deleteNode(node_x.firstChild.firstChild),text_node1.toTextNode().text="log";break;case EDMmlFormulaIndex.limX:this.insertNextSibling(new_node.firstChild,mo_node1,[]),text_node1.toTextNode().text="lim"}return null!=new_node&&(this.ifParentNotMrow(node),this.insertNextSibling(node,new_node,[]))},EDMmlDocument.prototype.insertBracket=function(node,brackettype,outnode){var mover,mrow_node2,new_node=null,type=EDMmlNodeLayoutType.None;switch(brackettype){case EDMmlFormulaIndex.VerticalBars_lr:new_node=this.createBracket_LeftRight("<mo>&#x007C;</mo>","<mo>&#x007C;</mo>"),type=EDMmlNodeLayoutType.LeftRight;break;case EDMmlFormulaIndex.VerticalBars_l:new_node=this.createBracket_Left("<mo>&#x007C;</mo>"),type=EDMmlNodeLayoutType.Left;break;case EDMmlFormulaIndex.VerticalBars_r:new_node=this.createBracket_Right("<mo>&#x007C;</mo>"),type=EDMmlNodeLayoutType.Right;break;case EDMmlFormulaIndex.DoubleVerticalBars_lr:new_node=this.createBracket_LeftRight("<mo>&#x2016;</mo>","<mo>&#x2016;</mo>"),type=EDMmlNodeLayoutType.LeftRight;break;case EDMmlFormulaIndex.DoubleVerticalBars_l:new_node=this.createBracket_Left("<mo>&#x2016;</mo>"),type=EDMmlNodeLayoutType.Left;break;case EDMmlFormulaIndex.DoubleVerticalBars_r:new_node=this.createBracket_Right("<mo>&#x2016;</mo>"),type=EDMmlNodeLayoutType.Right;break;case EDMmlFormulaIndex.DoubleBracket_lr:new_node=this.createBracket_LeftRight("<mo>&#x27E6;</mo>","<mo>&#x27E7;</mo>"),type=EDMmlNodeLayoutType.LeftRight;break;case EDMmlFormulaIndex.DoubleBracket_l:new_node=this.createBracket_Left("<mo>&#x27E6;</mo>"),type=EDMmlNodeLayoutType.Left;break;case EDMmlFormulaIndex.DoubleBracket_r:new_node=this.createBracket_Right("<mo>&#x27E7;</mo>"),type=EDMmlNodeLayoutType.Right;break;case EDMmlFormulaIndex.AngleBracket_lr:new_node=this.createBracket_LeftRight("<mo>&#x2329;</mo>","<mo>&#x232A;</mo>"),type=EDMmlNodeLayoutType.LeftRight;break;case EDMmlFormulaIndex.AngleBracket_l:new_node=this.createBracket_Left("<mo>&#x2329;</mo>"),type=EDMmlNodeLayoutType.Left;break;case EDMmlFormulaIndex.AngleBracket_r:new_node=this.createBracket_Right("<mo>&#x232A;</mo>"),type=EDMmlNodeLayoutType.Right;break;case EDMmlFormulaIndex.Floor_lr:new_node=this.createBracket_LeftRight("<mo>&#x230A;</mo>","<mo>&#x230B;</mo>"),type=EDMmlNodeLayoutType.LeftRight;break;case EDMmlFormulaIndex.Ceiling_lr:new_node=this.createBracket_LeftRight("<mo>&#x2308;</mo>","<mo>&#x2309;</mo>"),type=EDMmlNodeLayoutType.LeftRight;break;case EDMmlFormulaIndex.Floor_Ceiling:new_node=this.createBracket_LeftRight("<mo>&#x230A;</mo>","<mo>&#x2309;</mo>"),type=EDMmlNodeLayoutType.LeftRight;break;case EDMmlFormulaIndex.AngleBracketWithBar:new_node=this.createBracket_LeftRight("<mo>&#x2329;</mo>","<mo>&#x232A;</mo>"),type=EDMmlNodeLayoutType.WithBar;break;case EDMmlFormulaIndex.ParenthesesWithBar:new_node=this.createBracket_LeftRight("<mo>&#x0028;</mo>","<mo>&#x0029;</mo>"),type=EDMmlNodeLayoutType.WithBar;break;case EDMmlFormulaIndex.SquareBracketWithBar:new_node=this.createBracket_LeftRight("<mo>&#x005B;</mo>","<mo>&#x005D;</mo>"),type=EDMmlNodeLayoutType.WithBar;break;case EDMmlFormulaIndex.CurlyBracketWithBar:new_node=this.createBracket_LeftRight("<mo>&#x007B;</mo>","<mo>&#x007D;</mo>"),type=EDMmlNodeLayoutType.WithBar;break;case EDMmlFormulaIndex.CurlyBracket_lr:new_node=this.createBracket_LeftRight("<mo>&#x007B;</mo>","<mo>&#x007D;</mo>"),type=EDMmlNodeLayoutType.LeftRight;break;case EDMmlFormulaIndex.CurlyBracket_l:new_node=this.createBracket_Left("<mo>&#x007B;</mo>"),type=EDMmlNodeLayoutType.Left;break;case EDMmlFormulaIndex.CurlyBracket_r:new_node=this.createBracket_Right("<mo>&#x007D;</mo>"),type=EDMmlNodeLayoutType.Right;break;case EDMmlFormulaIndex.CurlyBracket_o:new_node=this.createBracket_Over("<mo>&#x0FE37;</mo>"),type=EDMmlNodeLayoutType.Over;break;case EDMmlFormulaIndex.CurlyBracket_u:new_node=this.createBracket_Under("<mo>&#x0FE38;</mo>"),type=EDMmlNodeLayoutType.Under;break;case EDMmlFormulaIndex.CurlyBracket_uo:new_node=this.createBracket_UnderOver("<mo>&#x0FE37;</mo>","<mo>&#x0FE38;</mo>"),type=EDMmlNodeLayoutType.UnerOver;break;case EDMmlFormulaIndex.CurlyBracket_io:new_node=this.createBracket_Over("<mo>&#x0FE37;</mo>",!0),type=EDMmlNodeLayoutType.IndexOver;break;case EDMmlFormulaIndex.CurlyBracket_iu:new_node=this.createBracket_Under("<mo>&#x0FE38;</mo>",!0),type=EDMmlNodeLayoutType.IndexUnder;break;case EDMmlFormulaIndex.CurlyBracket_iuo:new_node=this.createBracket_UnderOver("<mo>&#x0FE37;</mo>","<mo>&#x0FE38;</mo>",!0),type=EDMmlNodeLayoutType.IndexUnderOver;break;case EDMmlFormulaIndex.SquareBracket_lr:new_node=this.createBracket_LeftRight("<mo>&#x005B;</mo>","<mo>&#x005D;</mo>"),type=EDMmlNodeLayoutType.LeftRight;break;case EDMmlFormulaIndex.SquareBracket_l:new_node=this.createBracket_Left("<mo>&#x005B;</mo>"),type=EDMmlNodeLayoutType.Left;break;case EDMmlFormulaIndex.SquareBracket_r:new_node=this.createBracket_Right("<mo>&#x005D;</mo>"),type=EDMmlNodeLayoutType.Right;break;case EDMmlFormulaIndex.SquareBracket_ll:new_node=this.createBracket_LeftRight("<mo>&#x005B;</mo>","<mo>&#x005B;</mo>"),type=EDMmlNodeLayoutType.LeftRight;break;case EDMmlFormulaIndex.SquareBracket_rr:new_node=this.createBracket_LeftRight("<mo>&#x005D;</mo>","<mo>&#x005D;</mo>"),type=EDMmlNodeLayoutType.LeftRight;break;case EDMmlFormulaIndex.SquareBracket_rl:new_node=this.createBracket_LeftRight("<mo>&#x005D;</mo>","<mo>&#x005B;</mo>"),type=EDMmlNodeLayoutType.LeftRight;break;case EDMmlFormulaIndex.SquareBracket_u:new_node=this.createBracket_Under("<mo>&#x023B5;</mo>"),type=EDMmlNodeLayoutType.Under;break;case EDMmlFormulaIndex.SquareBracket_o:new_node=this.createBracket_Over("<mo>&#x023B4;</mo>"),type=EDMmlNodeLayoutType.Over;break;case EDMmlFormulaIndex.SquareBracket_uo:new_node=this.createBracket_UnderOver("<mo>&#x023B4;</mo>","<mo>&#x023B5;</mo>"),type=EDMmlNodeLayoutType.UnerOver;break;case EDMmlFormulaIndex.SquareBracket_io:new_node=this.createBracket_Over("<mo>&#x023B4;</mo>",!0),type=EDMmlNodeLayoutType.IndexOver;break;case EDMmlFormulaIndex.SquareBracket_iu:new_node=this.createBracket_Under("<mo>&#x023B5;</mo>",!0),type=EDMmlNodeLayoutType.IndexUnder;break;case EDMmlFormulaIndex.SquareBracket_iuo:new_node=this.createBracket_UnderOver("<mo>&#x023B4;</mo>","<mo>&#x023B5;</mo>",!0),type=EDMmlNodeLayoutType.IndexUnderOver;break;case EDMmlFormulaIndex.Parentheses_lr:new_node=this.createBracket_LeftRight("<mo>&#x0028;</mo>","<mo>&#x0029;</mo>"),type=EDMmlNodeLayoutType.LeftRight;break;case EDMmlFormulaIndex.Parentheses_l:new_node=this.createBracket_Left("<mo>&#x0028;</mo>"),type=EDMmlNodeLayoutType.Left;break;case EDMmlFormulaIndex.Parentheses_r:new_node=this.createBracket_Right("<mo>&#x0029;</mo>"),type=EDMmlNodeLayoutType.Right;break;case EDMmlFormulaIndex.Parentheses_u:new_node=this.createBracket_Under("<mo>&#x0FE36;</mo>"),type=EDMmlNodeLayoutType.Under;break;case EDMmlFormulaIndex.Parentheses_o:new_node=this.createBracket_Over("<mo>&#x0FE35;</mo>"),type=EDMmlNodeLayoutType.Over;break;case EDMmlFormulaIndex.Parentheses_uo:new_node=this.createBracket_UnderOver("<mo>&#x0FE35;</mo>","<mo>&#x0FE36;</mo>"),type=EDMmlNodeLayoutType.UnerOver;break;case EDMmlFormulaIndex.Parentheses_io:new_node=this.createBracket_Over("<mo>&#x0FE35;</mo>",!0),type=EDMmlNodeLayoutType.IndexOver;break;case EDMmlFormulaIndex.Parentheses_iu:new_node=this.createBracket_Under("<mo>&#x0FE36;</mo>",!0),type=EDMmlNodeLayoutType.IndexUnder;break;case EDMmlFormulaIndex.Parentheses_iuo:new_node=this.createBracket_UnderOver("<mo>&#x0FE35;</mo>","<mo>&#x0FE36;</mo>",!0),type=EDMmlNodeLayoutType.IndexUnderOver;break;case EDMmlFormulaIndex.OverBar:new_node=this.createBracket_Over("<mo>&#x000AF;</mo>"),type=EDMmlNodeLayoutType.Over;break;case EDMmlFormulaIndex.UnderBar:new_node=this.createBracket_Under("<mo>&#x000AF;</mo>"),type=EDMmlNodeLayoutType.Under;break;case EDMmlFormulaIndex.OverShortRightArr:new_node=this.createBracket_Over("<mo>&#x2192;</mo>"),type=EDMmlNodeLayoutType.Over;break;case EDMmlFormulaIndex.UnderShortRightArr:new_node=this.createBracket_Under("<mo>&#x2192;</mo>"),type=EDMmlNodeLayoutType.Under;break;case EDMmlFormulaIndex.OverShortLeftArr:new_node=this.createBracket_Over("<mo>&#x02190;</mo>"),type=EDMmlNodeLayoutType.Over;break;case EDMmlFormulaIndex.UnderShortLeftArr:new_node=this.createBracket_Under("<mo>&#x02190;</mo>"),type=EDMmlNodeLayoutType.Under;break;case EDMmlFormulaIndex.OverRightVector:new_node=this.createBracket_Over("<mo>&#x21C0;</mo>"),type=EDMmlNodeLayoutType.Over;break;case EDMmlFormulaIndex.UnderRightVector:new_node=this.createBracket_Under("<mo>&#x21C1;</mo>"),type=EDMmlNodeLayoutType.Under;break;case EDMmlFormulaIndex.OverLeftVector:new_node=this.createBracket_Over("<mo>&#x21BC;</mo>"),type=EDMmlNodeLayoutType.Over;break;case EDMmlFormulaIndex.UnderLeftVector:new_node=this.createBracket_Under("<mo>&#x21BD;</mo>"),type=EDMmlNodeLayoutType.Under;break;case EDMmlFormulaIndex.OverLeftRightArrow:new_node=this.createBracket_Over("<mo>&#x2194;</mo>"),type=EDMmlNodeLayoutType.Over;break;case EDMmlFormulaIndex.UnderLeftRightArrow:new_node=this.createBracket_Under("<mo>&#x2194;</mo>"),type=EDMmlNodeLayoutType.Under;break;case EDMmlFormulaIndex.OverLeftRightVector:new_node=this.createBracket_Over("<mo>&#x294E;</mo>"),type=EDMmlNodeLayoutType.Over;break;case EDMmlFormulaIndex.UnderLeftRightVector:new_node=this.createBracket_Under("<mo>&#x2950;</mo>"),type=EDMmlNodeLayoutType.Under;break;case EDMmlFormulaIndex.OverDot:new_node=this.createBracket_Over("<mo>&#x02D9;</mo>"),type=EDMmlNodeLayoutType.Over;break;case EDMmlFormulaIndex.OverDoubleDot:new_node=this.createBracket_Over("<mo>&#x00A8;</mo>"),type=EDMmlNodeLayoutType.Over;break;case EDMmlFormulaIndex.OverTripleDot:new_node=this.createBracket_Over("<mo>&#x20DB;</mo>"),type=EDMmlNodeLayoutType.Over;break;case EDMmlFormulaIndex.OverDotDot:new_node=this.createBracket_Over("<mo>&#x20DC;</mo>"),type=EDMmlNodeLayoutType.Over;break;case EDMmlFormulaIndex.UnderDot:new_node=this.createBracket_Under("<mo>&#x02D9;</mo>"),type=EDMmlNodeLayoutType.Under;break;case EDMmlFormulaIndex.UnderDoubleDot:new_node=this.createBracket_Under("<mo>&#x00A8;</mo>"),type=EDMmlNodeLayoutType.Under;break;case EDMmlFormulaIndex.UnderTripleDot:new_node=this.createBracket_Under("<mo>&#x20DB;</mo>"),type=EDMmlNodeLayoutType.Under;break;case EDMmlFormulaIndex.UnderDotDot:new_node=this.createBracket_Under("<mo>&#x20DC;</mo>"),type=EDMmlNodeLayoutType.Under;break;case EDMmlFormulaIndex.OverTilde:new_node=this.createBracket_Over("<mo>&#x0223C;</mo>"),type=EDMmlNodeLayoutType.Over;break;case EDMmlFormulaIndex.OverHat:new_node=this.createBracket_Over("<mo>&#x1a08;</mo>"),type=EDMmlNodeLayoutType.Over;break;case EDMmlFormulaIndex.UnderHat:new_node=this.createBracket_Under("<mo>&#x1a06;</mo>"),type=EDMmlNodeLayoutType.Under;break;case EDMmlFormulaIndex.OverShellBracket:new_node=this.createBracket_Over("<mo>&#x023E0;</mo>"),type=EDMmlNodeLayoutType.Over;break;case EDMmlFormulaIndex.UnderShellBracket:new_node=this.createBracket_Under("<mo>&#x023E1;</mo>"),type=EDMmlNodeLayoutType.Under;break;case EDMmlFormulaIndex.UnderTilde:new_node=this.createBracket_Under("<mo>&#x0223C;</mo>"),type=EDMmlNodeLayoutType.Under;break;case EDMmlFormulaIndex.LSquareBracketRParentheses:new_node=this.createBracket_LeftRight("<mo>&#x005B;</mo>","<mo>&#x0029;</mo>"),type=EDMmlNodeLayoutType.LeftRight;break;case EDMmlFormulaIndex.LParenthesesRSquareBracket:new_node=this.createBracket_LeftRight("<mo>&#x0028;</mo>","<mo>&#x005D;</mo>"),type=EDMmlNodeLayoutType.LeftRight;break;case EDMmlFormulaIndex.LVerticalBarsRAngleBracket:new_node=this.createBracket_LeftRight("<mo>&#x007C;</mo>","<mo>&#x232A;</mo>"),type=EDMmlNodeLayoutType.LeftRight;break;case EDMmlFormulaIndex.LAngleBracketRVerticalBars:new_node=this.createBracket_LeftRight("<mo>&#x2329;</mo>","<mo>&#x007C;</mo>"),type=EDMmlNodeLayoutType.LeftRight;break;case EDMmlFormulaIndex.OverDot_s:new_node=this.createBracket_Over("<mo>&#x02D9;</mo>"),type=EDMmlNodeLayoutType.Single;break;case EDMmlFormulaIndex.OverDoubleDot_s:new_node=this.createBracket_Over("<mo>&#x00A8;</mo>"),type=EDMmlNodeLayoutType.Single;break;case EDMmlFormulaIndex.OverTripleDot_s:new_node=this.createBracket_Over("<mo>&#x20DB;</mo>"),type=EDMmlNodeLayoutType.Single;break;case EDMmlFormulaIndex.OverDotDot_s:new_node=this.createBracket_Over("<mo>&#x20DC;</mo>"),type=EDMmlNodeLayoutType.Single;break;case EDMmlFormulaIndex.OverShortRightArr_s:new_node=this.createBracket_Over("<mo>&#x2192;</mo>"),type=EDMmlNodeLayoutType.Single;break;case EDMmlFormulaIndex.OverLeftRightArrow_s:new_node=this.createBracket_Over("<mo>&#x2194;</mo>"),type=EDMmlNodeLayoutType.Single;break;case EDMmlFormulaIndex.OverShortLeftArr_s:new_node=this.createBracket_Over("<mo>&#x02190;</mo>"),type=EDMmlNodeLayoutType.Single;break;case EDMmlFormulaIndex.OverRightVector_s:new_node=this.createBracket_Over("<mo>&#x21C0;</mo>"),type=EDMmlNodeLayoutType.Single;break;case EDMmlFormulaIndex.OverLeftRightVector_s:new_node=this.createBracket_Over("<mo>&#x294E;</mo>"),type=EDMmlNodeLayoutType.Single;break;case EDMmlFormulaIndex.OverLeftVector_s:new_node=this.createBracket_Over("<mo>&#x21BC;</mo>"),type=EDMmlNodeLayoutType.Single;break;case EDMmlFormulaIndex.Enclosedown_s:new_node=this.createMencloseNode_s("downdiagonalstrike"),type=EDMmlNodeLayoutType.Enclose;break;case EDMmlFormulaIndex.UnderDot_s:new_node=this.createBracket_Under("<mo>&#x02D9;</mo>"),type=EDMmlNodeLayoutType.Single;break;case EDMmlFormulaIndex.UnderDoubleDot_s:new_node=this.createBracket_Under("<mo>&#x00A8;</mo>"),type=EDMmlNodeLayoutType.Single;break;case EDMmlFormulaIndex.UnderTripleDot_s:new_node=this.createBracket_Under("<mo>&#x20DB;</mo>"),type=EDMmlNodeLayoutType.Single;break;case EDMmlFormulaIndex.UnderDotDot_s:new_node=this.createBracket_Under("<mo>&#x20DC;</mo>"),type=EDMmlNodeLayoutType.Single;break;case EDMmlFormulaIndex.UnderShortRightArr_s:new_node=this.createBracket_Under("<mo>&#x2192;</mo>"),type=EDMmlNodeLayoutType.Single;break;case EDMmlFormulaIndex.UnderLeftRightArrow_s:new_node=this.createBracket_Under("<mo>&#x2194;</mo>"),type=EDMmlNodeLayoutType.Single;break;case EDMmlFormulaIndex.UnderShortLeftArr_s:new_node=this.createBracket_Under("<mo>&#x02190;</mo>"),type=EDMmlNodeLayoutType.Single;break;case EDMmlFormulaIndex.UnderRightVector_s:new_node=this.createBracket_Under("<mo>&#x21C1;</mo>"),type=EDMmlNodeLayoutType.Single;break;case EDMmlFormulaIndex.UnderLeftRightVector_s:new_node=this.createBracket_Under("<mo>&#x2950;</mo>"),type=EDMmlNodeLayoutType.Single;break;case EDMmlFormulaIndex.UnderLeftVector_s:new_node=this.createBracket_Under("<mo>&#x21BD;</mo>"),type=EDMmlNodeLayoutType.Single;break;case EDMmlFormulaIndex.Encloseup_s:new_node=this.createMencloseNode_s("updiagonalstrike"),type=EDMmlNodeLayoutType.Enclose;break;case EDMmlFormulaIndex.OverBar_s:new_node=this.createBracket_Over("<mo>&#x000AF;</mo>"),type=EDMmlNodeLayoutType.Single;break;case EDMmlFormulaIndex.OverTilde_s:new_node=this.createBracket_Over("<mo>&#x0223C;</mo>"),type=EDMmlNodeLayoutType.Single;break;case EDMmlFormulaIndex.Parentheses_os:new_node=this.createBracket_Over("<mo>&#x0FE35;</mo>"),type=EDMmlNodeLayoutType.Single;break;case EDMmlFormulaIndex.OverParentheses_s:new_node=this.createBracket_Over("<mo>&#x0FE36;</mo>"),type=EDMmlNodeLayoutType.Single;break;case EDMmlFormulaIndex.OverHat_s:new_node=this.createBracket_Over("<mo>&#x1a08;</mo>"),type=EDMmlNodeLayoutType.Single;break;case EDMmlFormulaIndex.OverDownhat_s:new_node=this.createBracket_Over("<mo>&#x01a06;</mo>"),type=EDMmlNodeLayoutType.Single;break;case EDMmlFormulaIndex.SupMin_s:new_node=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[]),this.insertText(new_node.firstChild,"<mo>&#x2032;</mo>"),type=EDMmlNodeLayoutType.SupSingle;break;case EDMmlFormulaIndex.SupSec_s:new_node=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[]),this.insertText(new_node.firstChild,"<mo>&#x2033;</mo>"),type=EDMmlNodeLayoutType.SupSingle;break;case EDMmlFormulaIndex.SupMilliSec_s:new_node=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[]),this.insertText(new_node.firstChild,"<mo>&#x2034;</mo>"),type=EDMmlNodeLayoutType.SupSingle;break;case EDMmlFormulaIndex.SupDegree_s:new_node=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[]),this.insertText(new_node.firstChild,"<mo>&#xB0;</mo>"),type=EDMmlNodeLayoutType.SupSingle;break;case EDMmlFormulaIndex.Enclosehor_s:new_node=this.createMencloseNode_s("horizontalstrike"),type=EDMmlNodeLayoutType.Enclose;break;case EDMmlFormulaIndex.UnderBar_s:new_node=this.createBracket_Under("<mo>&#x000AF;</mo>"),type=EDMmlNodeLayoutType.Single;break;case EDMmlFormulaIndex.UnderTilde_s:new_node=this.createBracket_Under("<mo>&#x0223C;</mo>"),type=EDMmlNodeLayoutType.Single;break;case EDMmlFormulaIndex.UnderParentheses_s:new_node=this.createBracket_Under("<mo>&#x0FE35;</mo>"),type=EDMmlNodeLayoutType.Single;break;case EDMmlFormulaIndex.Parentheses_us:new_node=this.createBracket_Under("<mo>&#x0FE36;</mo>"),type=EDMmlNodeLayoutType.Single;break;case EDMmlFormulaIndex.UnderHat_s:new_node=this.createBracket_Under("<mo>&#x1a08;</mo>"),type=EDMmlNodeLayoutType.Single;break;case EDMmlFormulaIndex.UnderDownhat_s:new_node=this.createBracket_Under("<mo>&#x01a06;</mo>"),type=EDMmlNodeLayoutType.Single;break;case EDMmlFormulaIndex.OverMin_s:new_node=this.createBracket_Over("<mo>&#x2E1D;</mo>"),type=EDMmlNodeLayoutType.Single;break;case EDMmlFormulaIndex.OverLefmin_s:new_node=this.createBracket_Over("<mo>&#x2E1C;</mo>"),type=EDMmlNodeLayoutType.Single;break;case EDMmlFormulaIndex.SupT_s:new_node=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[]),this.insertText(new_node.firstChild,"<mo>&#x142A;</mo>"),type=EDMmlNodeLayoutType.SupSingle;break;case EDMmlFormulaIndex.Encloseupdown_s:new_node=this.createMencloseNode_s("updiagonalstrike downdiagonalstrike"),type=EDMmlNodeLayoutType.Enclose}return brackettype===EDMmlFormulaIndex.OverDoubleBar&&(new_node=this.createNode(EDMathMlNodeType.MoverNode,new Map,null,[]),mover=this.createBracket_Over("<mo>&#x000AF;</mo>"),this.insertChild(new_node,mover,[]),this.insertText(new_node.firstChild,"<mo>&#x000AF;</mo>",!1),outnode[0]=new_node.firstChild.firstChild.firstChild.lastSibling),brackettype===EDMmlFormulaIndex.UnderDoubleBar&&(new_node=this.createNode(EDMathMlNodeType.MunderNode,new Map,null,[]),mover=this.createBracket_Under("<mo>&#x000AF;</mo>"),this.insertChild(new_node,mover,[]),this.insertText(new_node.firstChild,"<mo>&#x000AF;</mo>",!1),outnode[0]=new_node.firstChild.firstChild.firstChild.lastSibling),brackettype===EDMmlFormulaIndex.Frac_old&&(new_node=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[]),mover=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[]),this.insertChild(new_node,mover,[],!1),mover.firstChild.firstChild.toTextNode().text="isNuLL!",outnode[0]=new_node.firstChild.nextSibling.firstChild,mrow_node2=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[]),this.insertNextSibling(new_node.firstChild.nextSibling,mrow_node2,[]),mrow_node2.firstChild.firstChild.toTextNode().text="isNuLL!",this.insertText(new_node.firstChild.nextSibling,"<mo>&#x2F;</mo>")),type==EDMmlNodeLayoutType.LeftRight||type==EDMmlNodeLayoutType.Left?outnode[0]=new_node.firstChild.nextSibling.nextSibling.firstChild:type==EDMmlNodeLayoutType.Right?outnode[0]=new_node.firstChild.nextSibling.firstChild:type==EDMmlNodeLayoutType.WithBar?(outnode[0]=new_node.firstChild.nextSibling.nextSibling.firstChild,mrow_node2=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[]),this.insertNextSibling(new_node.firstChild.nextSibling.nextSibling,mrow_node2,[]),mrow_node2.firstChild.firstChild.toTextNode().text="isNuLL!",this.insertText(new_node.firstChild.nextSibling.nextSibling,"<mo>&#x007C;</mo>")):type==EDMmlNodeLayoutType.Under||type==EDMmlNodeLayoutType.Over||type==EDMmlNodeLayoutType.UnerOver?outnode[0]=new_node.firstChild.firstChild.lastSibling:type==EDMmlNodeLayoutType.IndexOver||type==EDMmlNodeLayoutType.IndexUnder||type==EDMmlNodeLayoutType.IndexUnderOver?outnode[0]=new_node.firstChild.firstChild.firstChild.lastSibling:type==EDMmlNodeLayoutType.Single?(outnode[1]=new_node.firstChild.firstChild.lastSibling,outnode[0]=new_node.firstChild):type==EDMmlNodeLayoutType.Enclose?(outnode[1]=new_node.firstChild,outnode[0]=new_node.firstChild):type==EDMmlNodeLayoutType.SupSingle&&(new_node.firstChild.firstChild.toTextNode().text="",outnode[1]=new_node.firstChild,outnode[0]=new_node.firstChild),null!=new_node&&(this.ifParentNotMrow(node),this.insertNextSibling(node,new_node,[]))},EDMmlDocument.prototype.insertText=function(node,text,checkparent){void 0===checkparent&&(checkparent=!0);text=this.textChangeType(text);return checkparent&&this.ifParentNotMrow(node),this.insertNextSibling(node,text,[])},EDMmlDocument.prototype.insertPreText=function(node,text,checkparent){void 0===checkparent&&(checkparent=!0);text=this.textChangeType(text);return checkparent&&this.ifParentNotMrow(node),this.insertPreSibling(node,text,[])},EDMmlDocument.prototype.insertMtable=function(node,row,col,frametype,rowlinestype){void 0===frametype&&(frametype=0),void 0===rowlinestype&&(rowlinestype=0);var mml_attr=new Map,catype="left";switch(this._ColAlignType){case ColAlign.ColAlignLeft:catype="left";break;case ColAlign.ColAlignRight:catype="right";break;case ColAlign.ColAlignCenter:catype="center";break;default:catype="left"}mml_attr.set("columnalign",catype),1===frametype&&mml_attr.set("frame","solid"),2===frametype&&mml_attr.set("frame","dashed"),1===rowlinestype&&mml_attr.set("rowlines","solid"),2===rowlinestype&&mml_attr.set("rowlines","dashed");var mtable=this.createNode(EDMathMlNodeType.MtableNode,mml_attr,null,[]);if(null==mtable)return null;for(var i=0;i<row;++i){var mtr=this.createNode(EDMathMlNodeType.MtrNode,new Map,null,[]);if(!this.insertChild(mtable,mtr,[]))return null;for(var j=0;j<col;++j){var mtd=this.createMtdNode();if(!this.insertChild(mtr,mtd,[]))return null}}return this.insertNextSibling(node,mtable,[])?mtable:null},EDMmlDocument.prototype.insertEnter=function(node,axis1){void 0===axis1&&(axis1=!1);var mml_attr=new Map,catype="left";switch(this._ColAlignType){case ColAlign.ColAlignLeft:catype="left";break;case ColAlign.ColAlignRight:catype="right";break;case ColAlign.ColAlignCenter:catype="center";break;default:catype="left"}var parent=node.parent,axis1=(mml_attr.set("columnalign",catype),axis1&&mml_attr.set("align","axis 1"),this.createNode(EDMathMlNodeType.MtableNode,mml_attr,null,[])),mml_attr=this.createNode(EDMathMlNodeType.MtrNode,new Map,null,[]),mtd2=this.createNode(EDMathMlNodeType.MtdNode,new Map,null,[]),mrow=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[]),mtd2=(this.insertChild(mtd2,mrow,[]),mrow.firstChild.firstChild.toTextNode().text="isNuLL!",this.insertChild(mml_attr,mtd2,[]),!1);if(this.ifParentNotMrow(node),parent=node.parent,EDMathMlNodeType.MrowNode===parent.nodeType){var mtr,mtd,mtd2=EDMathMlNodeType.MtdNode===parent.parent.nodeType&&null!=parent.parent.parent.parent.explicitAttribute("columnalign")?this.insertNextSibling(parent.parent.parent,mml_attr,[]):(null!=parent._ele&&null!=parent._ele.parentNode&&parent._ele.parentNode.contains(parent._ele)&&parent._ele.parentNode.removeChild(parent._ele),mtr=this.createNode(EDMathMlNodeType.MtrNode,new Map,null,[]),this.insertChild(axis1,mtr,[]),mtd=this.createNode(EDMathMlNodeType.MtdNode,new Map,null,[]),this.insertChild(mtr,mtd,[]),axis1.parent=parent.parent,parent===parent.parent.firstChild&&(parent.parent.firstChild=axis1),axis1.nextSibling=parent.nextSibling,parent.nextSibling&&(parent.nextSibling.previousSibling=axis1),axis1.previousSibling=parent.previousSibling,parent.previousSibling&&(parent.previousSibling.nextSibling=axis1),parent.parent=null,parent.nextSibling=null,parent.previousSibling=null,this.insertChild(mtd,parent,[]),this.insertChild(axis1,mml_attr,[]));if(node.nextSibling){node.previousSibling||""===node.firstChild.toTextNode().text&&(node.firstChild.toTextNode().text="isNuLL!");var next=node.nextSibling;for(node.nextSibling=null,next.previousSibling=null,mrow.firstChild.firstChild.toTextNode().text="",(mrow.firstChild.nextSibling=next).previousSibling=mrow.firstChild,null!=next._ele&&null!=next._ele.parentNode&&next._ele.parentNode.contains(next._ele)&&next._ele.parentNode.removeChild(next._ele),next.parent=mrow;next.nextSibling;)(next=next.nextSibling).parent=mrow,null!=next._ele&&null!=next._ele.parentNode&&next._ele.parentNode.contains(next._ele)&&next._ele.parentNode.removeChild(next._ele)}}return mtd2},EDMmlDocument.prototype.deleteNode=function(deletenode){var haspresibling,hasnextsibling;return null!=deletenode.firstChild&&(hasnextsibling=haspresibling=!1,null!=deletenode.previousSibling?(haspresibling=!0,deletenode.previousSibling.nextSibling=null):deletenode.parent.firstChild=null,null!=deletenode.nextSibling&&(hasnextsibling=!0,deletenode.nextSibling.previousSibling=null),haspresibling&&hasnextsibling&&(deletenode.previousSibling.nextSibling=deletenode.nextSibling,deletenode.nextSibling.previousSibling=deletenode.previousSibling),!haspresibling&&hasnextsibling&&(deletenode.parent.firstChild=deletenode.nextSibling),deletenode.delete(),!(deletenode=null))},EDMmlDocument.prototype.deleteMtr=function(mousenode){var newparent=mousenode.parent.parent.parent.previousSibling.firstChild.firstChild,nextnode=mousenode.nextSibling;for(null!=nextnode._ele&&null!=nextnode._ele.parentNode&&nextnode._ele.parentNode.contains(nextnode._ele)&&nextnode._ele.parentNode.removeChild(nextnode._ele),nextnode.previousSibling=newparent.firstChild.lastSibling,newparent.firstChild.lastSibling.nextSibling=nextnode,mousenode.nextSibling=null,mousenode.firstChild.toTextNode().text="isNuLL!";nextnode;nextnode=nextnode.nextSibling)nextnode.parent=newparent,null!=nextnode._ele&&null!=nextnode._ele.parentNode&&nextnode._ele.parentNode.contains(nextnode._ele)&&nextnode._ele.parentNode.removeChild(nextnode._ele);return!0},EDMmlDocument.prototype.deleteMtable=function(mrow,mtable){return null!=mrow&&null!=mtable&&(null!=mtable._ele&&null!=mrow._ele&&null!=mtable._ele.parentNode&&null!=mrow._ele.parentNode&&mtable._ele.parentNode.replaceChild(mrow._ele,mtable._ele),mrow.previousSibling=mtable.previousSibling,mtable.previousSibling&&(mtable.previousSibling.nextSibling=mrow),mrow.nextSibling=mtable.nextSibling,mtable.nextSibling&&(mtable.nextSibling.previousSibling=mrow),mrow.parent.firstChild=null,mrow.parent=mtable.parent,mtable.parent.firstChild===mtable&&(mtable.parent.firstChild=mrow),!0)},EDMmlDocument.prototype.pasteTextNode=function(mousenode,newnodetext,isPreInsert,setMouseNode){void 0===setMouseNode&&(setMouseNode=null);var newnodetext=[newnodetext],prefix=EdrawMathDate.EDStatic.mmlEntityTable.entities(newnodetext),newtext=newnodetext[0],newnodetext=new RegExp(/\n*\r*/,"g");newtext=(newtext=(newtext=(newtext=newtext.replace(newnodetext,"")).replace(/<mtext><\/mtext>/g,"")).replace(/  <  /g,"")).replace(/<mtext><\/mtext>/g,"<mtext>#x2009;</mtext>"),EdrawMathDate.EDStatic.g_arrowtext4replace.forEach(function(value,key){value=new RegExp(value,"g");newtext=newtext.replace(value,key)}),EdrawMathDate.EDStatic.g_special_conversion.forEach(function(value,key){var newvalue=value.replace(/#x/g,"&#x"),newvalue=new RegExp(newvalue,"g");newtext=newtext.replace(newvalue,value)});var newnodetext=(new DOMParser).parseFromString(prefix+newtext,"text/xml"),ok=[!1],prefix=this.domToMml(newnodetext,ok,[""]);if(!ok[0])return!1;if(ok[0]=!0,null==prefix)return!1;for(var newnode=prefix;EDMathMlNodeType.UnknownNode===newnode.nodeType&&newnode.hasChildNodes();)newnode=newnode.firstChild;if(null==newnode)return!1;var childnode=newnode.firstChild,ismrowtype1=!1,ismrowtype2=!1;if(newnode.nodeType===EDMathMlNodeType.MrowNode&&childnode&&childnode.nextSibling&&!childnode.noneditable&&(childnode=(childnode=childnode.nextSibling)&&childnode.nextSibling))if(childnode.nodeType==EDMathMlNodeType.MoNode)for(childnode.previousSibling.nodeType===EDMathMlNodeType.MrowNode&&(ismrowtype2=!0),childnode=childnode.nextSibling,ismrowtype1=!0;childnode;)childnode.nodeType!==EDMathMlNodeType.MoNode?ismrowtype1=!1:childnode.previousSibling.nodeType===EDMathMlNodeType.MrowNode&&(ismrowtype2=!0),childnode=childnode.nextSibling;else childnode.nodeType==EDMathMlNodeType.MrowNode&&childnode.previousSibling.nodeType===EDMathMlNodeType.MoNode&&(ismrowtype2=!0);if(ismrowtype1||ismrowtype2){newnodetext=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[]);if(newnodetext.firstChild.firstChild.toTextNode().text="",isPreInsert?this.insertPreSibling(mousenode,newnodetext,[""])||(ok[0]=!1):this.insertNextSibling(mousenode,newnodetext,[""])||(ok[0]=!1),!ok[0])return!1;mousenode=newnodetext.firstChild,isPreInsert=!1}if(newnode.firstChild){if(null!=(newnode=newnode.firstChild).nextSibling)newnode=newnode.nextSibling;else if(newnode.nodeType===EDMathMlNodeType.MtextNode)if(newnode.firstChild.nodeType===EDMathMlNodeType.TextNode)if(newnode.firstChild.nodeType===EDMathMlNodeType.TextNode)return newnode.firstChild.toTextNode().text,this.insertLayout(mousenode,EDMmlFormulaIndex.insertMrow,[null],1),!0;if(null==newnode)return!1}newnode.previousSibling&&(newnode.previousSibling.nextSibling=null),newnode.previousSibling=null,prefix.delete(),newnode.parent=prefix=null;for(var nextnode=newnode.nextSibling;nextnode;)newnode.nextSibling=null,nextnode.previousSibling=null,isPreInsert?this.insertPreSibling(mousenode,newnode,[""])||(ok[0]=!1):(this.insertNextSibling(mousenode,newnode,[""])||(ok[0]=!1),mousenode=mousenode.nextSibling),nextnode=(newnode=nextnode).nextSibling,newnode.parent=null;return isPreInsert?this.insertPreSibling(mousenode,newnode,[""])||(ok[0]=!1):this.insertNextSibling(mousenode,newnode,[""])||(ok[0]=!1),newnode.parent.updateChildFont(),setMouseNode&&setMouseNode(mousenode),ok[0]},EDMmlDocument.prototype.isChildNode=function(parentnode,childnode){if(null==parentnode)return!1;if(null==childnode)return!1;for(var child=parentnode.firstChild;null!=child;child=child.nextSibling)if(this.isChildNode(child,childnode))return!0;return parentnode===childnode},EDMmlDocument.prototype.adjustCharPositions=function(){for(var key,data,rect=new egRect(0,0,0,0),i=(new EdrawMathDate.EDRenderingPosition,0);i<this._renderingData.length;i++)key=(data=this._renderingData[i])._subPos<<32|data._nodeId,0===data._subPos?rect=data._itemRect:this._nodeIdLookup.has(key)&&(this._nodeIdLookup.get(key)._bits&EDRendAdjustBits.translateTxt)!==EDRendAdjustBits.Nothing&&this._renderingData[i]._itemRect.translate(rect.x,rect.y)},EDMmlDocument.prototype.doPostProcessing=function(){var _this=this,lspace=0;this._nodeIdLookup.forEach(function(value,key){value._bits!==EDRendAdjustBits.Nothing&&null!=value._node&&(value._bits&EDRendAdjustBits.translateLspace)!==EDRendAdjustBits.Nothing&&(value._node.nodeType===EDMathMlNodeType.MoNode&&(lspace=value._node.lspace),value._node.nodeType===EDMathMlNodeType.MpaddedNode&&(lspace=value._node.lspace),_this._renderingData[value._index]._itemRect.translate(lspace,0))})},EDMmlDocument.prototype.optimizeSize=function(){this._nodeIdLookup.clear()},EDMmlDocument.prototype.getRenderingPositions=function(){return this._renderingData},EDMmlDocument.prototype.appendRenderingData=function(nodeId,index,node,data){var retval=!1;return null==nodeId||this._nodeIdLookup.has(index<<32|nodeId)||this._renderingComplete||(retval=!0,node=new EdrawMathDate.EDAddRendData(this._renderingData.length,node,data),(data=new EdrawMathDate.EDRenderingPosition)._nodeId=nodeId,data._subPos=index,this._renderingData.push(data),this._nodeIdLookup.set(index<<32|nodeId,node)),retval},EDMmlDocument.prototype.updateRenderingData=function(nodeId,index,position){null!=nodeId&&this._nodeIdLookup.has(index<<32|nodeId)&&(index=this._nodeIdLookup.get(index<<32|nodeId),this._renderingData[index._index]._itemRect=position)},EDMmlDocument.prototype.clearRendering=function(){this._renderingData.splice(0),this._nodeIdLookup.clear(),this._renderingComplete=!1},Object.defineProperty(EDMmlDocument.prototype,"renderingComplete",{get:function(){return this._renderingComplete},enumerable:!1,configurable:!0}),EDMmlDocument.prototype.setRenderingComplete=function(){this._renderingComplete=!0},EDMmlDocument.prototype.init=function(){this._root_node=null,this._foreground_color="rgb(0, 0, 0)",this._background_color="rgb(255, 255, 255)",this._draw_frames=!1,this._defaultMode=!1;var i=this._base_font_pixel_size*EdrawMathDate.EDStatic.g_relorigin_of_fontsize;this._RelOrigin=new egPoint(i,i),this._bMiBold=!1,this._bMnBold=!1,this._bMiItalic=!0,this._bMnItalic=!1,this.clearRendering(),EDMmlDocument.s_initialized||EDMmlDocument.static_init()},EDMmlDocument.static_init=function(){this.s_normal_font_name="Times New Roman",this.s_initialized=!0},EDMmlDocument.prototype.insertChild=function(parent,new_node,errorMsg,checkmrow){if(void 0===checkmrow&&(checkmrow=!0),null==new_node)return!1;if(null!=new_node.parent||null!=new_node.nextSibling||null!=new_node.previousSibling)return 0<errorMsg.length&&(errorMsg[0]="error: is not new node."),!1;if(null!=parent&&!EdrawMathDate.EDStatic.mmlCheckChildType(parent.nodeType,new_node.nodeType,errorMsg))return!1;if(null==parent)null==this._root_node?this._root_node=new_node:((n=this._root_node.lastSibling).nextSibling=new_node).previousSibling=n;else{if(checkmrow&&this.checkMrow(parent,new_node))return!0;var n;(new_node.parent=parent).hasChildNodes()?((n=parent.firstChild.lastSibling).nextSibling=new_node).previousSibling=n:parent.firstChild=new_node}return!0},EDMmlDocument.prototype.insertNextSibling=function(old_node,new_node,errorMsg){if(null!=new_node){if(null!=new_node.parent||null!=new_node.nextSibling||null!=new_node.previousSibling)return 0<errorMsg.length&&(errorMsg[0]="error: is not new node."),!1;if(null!=old_node.parent&&!EdrawMathDate.EDStatic.mmlCheckChildType(old_node.parent.nodeType,new_node.nodeType,errorMsg))return!1;null!=old_node.nextSibling&&(errorMsg=old_node.nextSibling,(new_node.nextSibling=errorMsg).previousSibling=new_node),((new_node.previousSibling=old_node).nextSibling=new_node).parent=old_node.parent}return!0},EDMmlDocument.prototype.insertPreSibling=function(old_node,new_node,errorMsg){if(null!=new_node){if(null!=new_node.parent||null!=new_node.nextSibling||null!=new_node.previousSibling)return 0<errorMsg.length&&(errorMsg[0]="error: is not new node."),!1;if(null!=old_node.parent&&!EdrawMathDate.EDStatic.mmlCheckChildType(old_node.parent.nodeType,new_node.nodeType,errorMsg))return!1;null!=old_node.previousSibling?(errorMsg=old_node.previousSibling,(new_node.previousSibling=errorMsg).nextSibling=new_node):old_node.parent.firstChild=new_node,((new_node.nextSibling=old_node).previousSibling=new_node).parent=old_node.parent}return!0},EDMmlDocument.prototype.createMfracNode=function(bevelled,script){void 0===script&&(script=!1);var mml_attr=new Map,bevelled=(bevelled&&mml_attr.set("bevelled","true"),this.createNode(EDMathMlNodeType.MfracNode,mml_attr,null,[])),mml_attr=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[]),mrow_node2=(this.insertChild(bevelled,mml_attr,[]),this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[]));return this.insertChild(bevelled,mrow_node2,[]),mml_attr.firstChild.firstChild.toTextNode().text="isNuLL!",mrow_node2.firstChild.firstChild.toTextNode().text="isNuLL!",script?((mml_attr=new Map).set("scriptlevel","+1"),mrow_node2=this.createNode(EDMathMlNodeType.MstyleNode,mml_attr,null,[]),this.insertChild(mrow_node2,bevelled,[]),mrow_node2):bevelled},EDMmlDocument.prototype.createMencloseNode=function(notation){var mml_attr=new Map,notation=(mml_attr.set("notation",notation),this.createNode(EDMathMlNodeType.MencloseNode,mml_attr,null,[])),mml_attr=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[]);return this.insertChild(notation,mml_attr,[]),mml_attr.firstChild.firstChild.toTextNode().text="isNuLL!",notation},EDMmlDocument.prototype.createMencloseNode_s=function(notation){var mml_attr=new Map,notation=(mml_attr.set("notation",notation),this.createNode(EDMathMlNodeType.MencloseNode,mml_attr,null,[])),mml_attr=new EdrawMathDate.EDMmlMtextNode(this,mml_attr),text_node=(this.insertChild(notation,mml_attr,[]),new EdrawMathDate.EDMmlTextNode("",this));this.insertChild(mml_attr,text_node,[]);return notation},EDMmlDocument.prototype.createMunderoverNode=function(){var underover_node=this.createNode(EDMathMlNodeType.MunderoverNode,new Map,null,[]),mrow_node1=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[]),mrow_node2=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[]),mrow_node3=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[]);return this.insertChild(underover_node,mrow_node1,[])&&this.insertChild(underover_node,mrow_node2,[])&&this.insertChild(underover_node,mrow_node3,[])?(mrow_node1.firstChild.firstChild.toTextNode().text="isNuLL!",mrow_node2.firstChild.firstChild.toTextNode().text="isNuLL!",mrow_node3.firstChild.firstChild.toTextNode().text="isNuLL!",underover_node):(mrow_node1.delete(),mrow_node2.delete(),mrow_node3.delete(),underover_node.delete(),null)},EDMmlDocument.prototype.createMunderNode=function(){var under_node=this.createNode(EDMathMlNodeType.MunderNode,new Map,null,[]),mrow_node=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[]),mrow_node2=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[]);return this.insertChild(under_node,mrow_node,[])&&this.insertChild(under_node,mrow_node2,[])?(mrow_node.firstChild.firstChild.toTextNode().text="isNuLL!",mrow_node2.firstChild.firstChild.toTextNode().text="isNuLL!",under_node):(mrow_node.delete(),mrow_node2.delete(),under_node.delete(),null)},EDMmlDocument.prototype.createMoverNode=function(){var over_node=this.createNode(EDMathMlNodeType.MoverNode,new Map,null,[]),mrow_node=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[]),mrow_node2=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[]);return this.insertChild(over_node,mrow_node,[])&&this.insertChild(over_node,mrow_node2,[])?(mrow_node.firstChild.firstChild.toTextNode().text="isNuLL!",mrow_node2.firstChild.firstChild.toTextNode().text="isNuLL!",over_node):(mrow_node.delete(),mrow_node2.delete(),over_node.delete(),null)},EDMmlDocument.prototype.createMmultiscriptsNode=function(sub,sup,presub,presup){void 0===sub&&(sub=!0),void 0===sup&&(sup=!0),void 0===presub&&(presub=!0),void 0===presup&&(presup=!0);var mmultiscriptes_node=this.createNode(EDMathMlNodeType.MmultiscriptsNode,new Map,null,[]),sub_node=null,sup_node=null,presub_node=null,presup_node=null,mprescripts_node=this.createNode(EDMathMlNodeType.MprescriptsNode,new Map,null,[]),base_node=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[]);return this.insertChild(mmultiscriptes_node,base_node,[]),sub?(sub_node=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[])).firstChild.firstChild.toTextNode().text="isNuLL!":sub_node=this.createNode(EDMathMlNodeType.NoneNode,new Map,null,[]),this.insertChild(mmultiscriptes_node,sub_node,[]),sup?(sup_node=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[])).firstChild.firstChild.toTextNode().text="isNuLL!":sup_node=this.createNode(EDMathMlNodeType.NoneNode,new Map,null,[]),this.insertChild(mmultiscriptes_node,sup_node,[]),this.insertChild(mmultiscriptes_node,mprescripts_node,[]),presub?(presub_node=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[])).firstChild.firstChild.toTextNode().text="isNuLL!":presub_node=this.createNode(EDMathMlNodeType.NoneNode,new Map,null,[]),this.insertChild(mmultiscriptes_node,presub_node,[]),presup?(presup_node=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[])).firstChild.firstChild.toTextNode().text="isNuLL!":presup_node=this.createNode(EDMathMlNodeType.NoneNode,new Map,null,[]),this.insertChild(mmultiscriptes_node,presup_node,[]),mmultiscriptes_node},EDMmlDocument.prototype.createMsubsupNode=function(){var subsup_node=this.createNode(EDMathMlNodeType.MsubsupNode,new Map,null,[]),mrow_node1=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[]),mrow_node2=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[]),mrow_node3=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[]);return this.insertChild(subsup_node,mrow_node1,[])&&this.insertChild(subsup_node,mrow_node2,[])&&this.insertChild(subsup_node,mrow_node3,[])?(mrow_node1.firstChild.firstChild.toTextNode().text="isNuLL!",mrow_node2.firstChild.firstChild.toTextNode().text="isNuLL!",mrow_node3.firstChild.firstChild.toTextNode().text="isNuLL!",subsup_node):(mrow_node1.delete(),mrow_node2.delete(),mrow_node3.delete(),subsup_node.delete(),null)},EDMmlDocument.prototype.createMsubNode=function(){var sub_node=this.createNode(EDMathMlNodeType.MsubNode,new Map,null,[]),mrow_node=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[]),mrow_node2=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[]);return this.insertChild(sub_node,mrow_node,[])&&this.insertChild(sub_node,mrow_node2,[])?(mrow_node.firstChild.firstChild.toTextNode().text="isNuLL!",mrow_node2.firstChild.firstChild.toTextNode().text="isNuLL!",sub_node):(mrow_node.delete(),mrow_node2.delete(),sub_node.delete(),null)},EDMmlDocument.prototype.createMsupNode=function(){var sup_node=this.createNode(EDMathMlNodeType.MsupNode,new Map,null,[]),mrow_node=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[]),mrow_node2=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[]);return this.insertChild(sup_node,mrow_node,[])&&this.insertChild(sup_node,mrow_node2,[])||(mrow_node.delete(),mrow_node2.delete(),sup_node.delete()),mrow_node.firstChild.firstChild.toTextNode().text="isNuLL!",mrow_node2.firstChild.firstChild.toTextNode().text="isNuLL!",sup_node},EDMmlDocument.prototype.createMtdNode=function(){var mtd=this.createNode(EDMathMlNodeType.MtdNode,new Map,null,[]),mrow=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[]);return this.insertChild(mtd,mrow,[]),mrow.firstChild.firstChild.toTextNode().text="isNuLL!",mtd},EDMmlDocument.prototype.createBracket_LeftRight=function(motext1,motext2){var mrow_node=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[]),mrow_node2=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[]);return this.insertChild(mrow_node,mrow_node2,[],!1),mrow_node2.firstChild.firstChild.toTextNode().text="isNuLL!",this.insertText(mrow_node2,motext2),this.insertPreText(mrow_node2,motext1),mrow_node},EDMmlDocument.prototype.createBracket_Left=function(motext){var mrow_node=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[]),mrow_node2=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[]);return this.insertChild(mrow_node,mrow_node2,[],!1),mrow_node2.firstChild.firstChild.toTextNode().text="isNuLL!",this.insertPreText(mrow_node2,motext),mrow_node},EDMmlDocument.prototype.createBracket_Right=function(motext){var mrow_node=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[]),mrow_node2=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[]);return this.insertChild(mrow_node,mrow_node2,[],!1),mrow_node2.firstChild.firstChild.toTextNode().text="isNuLL!",this.insertText(mrow_node2,motext),mrow_node},EDMmlDocument.prototype.createBracket_Over=function(motext,index){void 0===index&&(index=!1);var over_node=this.createMoverNode();return this.insertText(over_node.firstChild,motext,!1),this.deleteNode(over_node.firstChild.lastSibling),index?(motext=this.createNode(EDMathMlNodeType.MoverNode,new Map,null,[]),this.insertChild(motext,over_node,[]),index=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[]),this.insertChild(motext,index,[]),index.firstChild.firstChild.toTextNode().text="isNuLL!",motext):over_node},EDMmlDocument.prototype.createBracket_Under=function(motext,index){void 0===index&&(index=!1);var under_node=this.createMunderNode();return this.insertText(under_node.firstChild,motext,!1),this.deleteNode(under_node.firstChild.lastSibling),index?(motext=this.createNode(EDMathMlNodeType.MunderNode,new Map,null,[]),this.insertChild(motext,under_node,[]),index=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[]),this.insertChild(motext,index,[]),index.firstChild.firstChild.toTextNode().text="isNuLL!",motext):under_node},EDMmlDocument.prototype.createBracket_UnderOver=function(undertext,overtext,index){void 0===index&&(index=!1);var underover_node=this.createMunderoverNode();return this.insertText(underover_node.firstChild,undertext,!1),this.insertText(underover_node.firstChild,overtext,!1),this.deleteNode(underover_node.firstChild.lastSibling),this.deleteNode(underover_node.firstChild.lastSibling),index?(undertext=this.createNode(EDMathMlNodeType.MunderoverNode,new Map,null,[]),this.insertChild(undertext,underover_node,[]),overtext=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[]),this.insertChild(undertext,overtext,[]),index=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[]),this.insertChild(undertext,index,[]),overtext.firstChild.firstChild.toTextNode().text="isNuLL!",index.firstChild.firstChild.toTextNode().text="isNuLL!",undertext):underover_node},EDMmlDocument.prototype.textChangeType=function(text){var mo=!1,mi=!1;if(text.startsWith("<mo>"))if(mo=!0,null!=text.match("&#x")){if(null==(dom=(new DOMParser).parseFromString(text,"text/xml")))return null;text=dom.firstChild.firstChild.nodeValue}else text=text.slice(4,text.length-5);if(text.startsWith("<mi>")){mi=!0;if(null==(dom=(new DOMParser).parseFromString(text,"text/xml")))return null;text=dom.firstChild.firstChild.nodeValue}var dom=null,error=[""],mi=((1===text.length&&null!=text.match(/[a-zA-Z]{1}/)||mi)&&(dom=this.createNode(EDMathMlNodeType.MiNode,new Map,null,error)),(1===text.length&&null!=text.match(/[|(){}!<>+-=*]{1}/)||mo||"]"===text||"["===text)&&(dom=this.createNode(EDMathMlNodeType.MoNode,new Map,null,error),null!=text.match(/[\u0370-\u03ff]{1}/))&&(dom.fontItalic=this._bMiItalic),null==(dom=1===text.length&&null!=text.match(/[0-9]{1}/)?this.createNode(EDMathMlNodeType.MnNode,new Map,null,error):dom)&&(dom=this.createNode(EDMathMlNodeType.MtextNode,new Map,null,error)),this.createNode(EDMathMlNodeType.TextNode,new Map,text,error));return this.insertChild(dom,mi,error),dom},EDMmlDocument.prototype.ifParentNotMrow=function(node,createmrow4special2){var mrow;return void 0===createmrow4special2&&(createmrow4special2=!1),!(EDMathMlNodeType.MrowNode===node.parent.nodeType&&!createmrow4special2||((mrow=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,[])).parent=node.parent,node===node.parent.firstChild&&(node.parent.firstChild=mrow),mrow.nextSibling=node.nextSibling,node.nextSibling&&(node.nextSibling.previousSibling=mrow),mrow.previousSibling=node.previousSibling,node.previousSibling&&(node.previousSibling.nextSibling=mrow),node.parent=null,node.nextSibling=null,node.previousSibling=null,createmrow4special2?this.insertChild(mrow,node,[],!1):this.insertChild(mrow,node,[]),0))},EDMmlDocument.prototype.domToMml=function(do_node,ok,errorMsg){if(ok.length<=0)return null;var mml_type=this.domToEDMmlNodeType(do_node);if(mml_type===EDMathMlNodeType.NoNode)return ok[0]=!0,null;var do_attr=null,mml_attr=new Map;if(do_node.nodeType===Node.ELEMENT_NODE&&"math"!==do_node.nodeName&&do_node.hasAttributes())for(var do_attr=do_node.attributes,i=0;i<do_attr.length;i++){var attrNode=do_attr.item(i);mml_attr.set(attrNode.nodeName,attrNode.nodeValue)}var mml_value="";if(mml_type===EDMathMlNodeType.TextNode){var trans_1=!1;if(EdrawMathDate.EDStatic.g_special_conversion.forEach(function(value,key){do_node.nodeValue===value&&(mml_value=key,trans_1=!0)}),!trans_1&&(null!=(mml_value=(mml_value=do_node.nodeValue).replace(/ /g,"")).match(/\n+| +|\s+/)||""==mml_value))return ok[0]=!0,null}var mml_node=this.createNode(mml_type,mml_attr,mml_value,errorMsg);if(null==mml_node)return ok[0]=!1,null;var spec=EdrawMathDate.EDStatic.mmlFindNodeSpec_type(mml_type),do_child_list=do_node.childNodes,child_cnt=do_child_list.length,mml_child=null,separator_list="";switch(mml_type===EDMathMlNodeType.MfencedNode&&(separator_list=mml_node.explicitAttribute("separators",",")),spec.child_spec){case ChildSpec.ChildIgnore:break;case ChildSpec.ImplicitMrow:if(0<child_cnt){if(mml_child=this.createImplicitMrowNode(do_node,ok,errorMsg),!ok[0])return mml_node.delete(),null;if(mml_child&&!this.insertChild(mml_node,mml_child,errorMsg))return mml_node&&mml_node.delete(),mml_child&&mml_child.delete(),ok[0]=!1,null}break;case 2:case 3:case 6:var tmp_child,creat4child=!0;if(mml_type!=EDMathMlNodeType.MoverNode&&mml_type!=EDMathMlNodeType.MunderNode||2==child_cnt&&((tmp_child=this.domToMml(do_child_list.item(0),ok,errorMsg)).nodeType==EDMathMlNodeType.MoverNode&&mml_type==EDMathMlNodeType.MoverNode||tmp_child.nodeType==EDMathMlNodeType.MunderNode&&mml_type==EDMathMlNodeType.MunderNode)&&(creat4child=!1),creat4child){if(this.createMrowForChild(do_node,ok,errorMsg,mml_node))break;return mml_node.delete(),ok[0]=!1,null}default:if(spec.child_spec!==child_cnt)return 0<errorMsg.length&&(errorMsg[0]="element ".concat(spec.tag,"  requires exactly ").concat(spec.child_spec,"  arguments, got ").concat(child_cnt)),mml_node.delete(),ok[0]=!1,null;case ChildSpec.ChildAny:mml_type===EDMathMlNodeType.MfencedNode&&this.insertOperator(mml_node,mml_node.explicitAttribute("open","("));for(i=0;i<child_cnt;++i){var do_child=do_child_list.item(i),do_child=this.domToMml(do_child,ok,errorMsg);if(!ok[0])return mml_node.delete(),null;if(!ok[0]||null!=do_child){if(mml_type===EDMathMlNodeType.MtableNode&&do_child.nodeType!==EDMathMlNodeType.MtrNode){var mtr_node=this.createNode(EDMathMlNodeType.MtrNode,new Map,null,[]);if(this.insertChild(mml_node,mtr_node,[]),do_child&&!this.insertChild(mtr_node,do_child,errorMsg))return mml_node.delete(),do_child.delete(),ok[0]=!1,null}else if(mml_type===EDMathMlNodeType.MtrNode&&do_child.nodeType!==EDMathMlNodeType.MtdNode){mtr_node=this.createNode(EDMathMlNodeType.MtdNode,new Map,null,[]);if(this.insertChild(mml_node,mtr_node,[]),do_child&&!this.insertChild(mtr_node,do_child,errorMsg))return mml_node.delete(),do_child.delete(),ok[0]=!1,null}else if(do_child&&!this.insertChild(mml_node,do_child,errorMsg,!1))return mml_node.delete(),do_child.delete(),ok[0]=!1,null;i<child_cnt-1&&mml_type===EDMathMlNodeType.MfencedNode&&0<separator_list.length&&(do_child="",do_child=i>=separator_list.length?separator_list.charAt(separator_list.length-1):separator_list.charAt(i),this.insertOperator(mml_node,do_child))}}mml_type===EDMathMlNodeType.MfencedNode&&this.insertOperator(mml_node,mml_node.explicitAttribute("close",")"))}return ok[0]=!0,mml_node},EDMmlDocument.prototype.createNode=function(type,mml_attr,mml_value,errorMsg){if(type===EDMathMlNodeType.NoNode)return 0<errorMsg.length&&(errorMsg[0]="createNode error: type == EDMathMlNodeType.NoNode"),null;var mml_node=null;if(!EdrawMathDate.EDStatic.mmlCheckAttributes(type,mml_attr,errorMsg))return null;switch(type){case EDMathMlNodeType.MiNode:mml_node=new EdrawMathDate.EDMmlMiNode(this,mml_attr);break;case EDMathMlNodeType.MnNode:mml_node=new EdrawMathDate.EDMmlMnNode(this,mml_attr);break;case EDMathMlNodeType.MfracNode:mml_node=new EdrawMathDate.EDMmlMfracNode(this,mml_attr);break;case EDMathMlNodeType.MrowNode:var mml_node=new EdrawMathDate.EDMmlMrowNode(this,mml_attr),mtext_node=new EdrawMathDate.EDMmlMtextNode(this,mml_attr),text_node=(this.insertChild(mml_node,mtext_node,errorMsg),new EdrawMathDate.EDMmlTextNode("",this));this.insertChild(mtext_node,text_node,errorMsg);break;case EDMathMlNodeType.MsqrtNode:mml_node=new EdrawMathDate.EDMmlMsqrtNode(this,mml_attr);break;case EDMathMlNodeType.MrootNode:mml_node=new EdrawMathDate.EDMmlMrootNode(this,mml_attr);break;case EDMathMlNodeType.MsupNode:mml_node=new EdrawMathDate.EDMmlMsupNode(this,mml_attr);break;case EDMathMlNodeType.MsubNode:mml_node=new EdrawMathDate.EDMmlMsubNode(this,mml_attr);break;case EDMathMlNodeType.MsubsupNode:mml_node=new EdrawMathDate.EDMmlMsubsupNode(this,mml_attr);break;case EDMathMlNodeType.MoNode:mml_node=new EdrawMathDate.EDMmlMoNode(this,mml_attr);break;case EDMathMlNodeType.MstyleNode:mml_node=new EdrawMathDate.EDMmlMstyleNode(this,mml_attr);break;case EDMathMlNodeType.MencloseNode:mml_node=new EdrawMathDate.EDMmlMencloseNode(this,mml_attr);break;case EDMathMlNodeType.TextNode:mml_node=new EdrawMathDate.EDMmlTextNode(mml_value,this);break;case EDMathMlNodeType.MphantomNode:mml_node=new EdrawMathDate.EDMmlMphantomNodekenNode(this,mml_attr);break;case EDMathMlNodeType.MfencedNode:mml_node=new EdrawMathDate.EDMmlMfencedNode(this,mml_attr);break;case EDMathMlNodeType.MtableNode:mml_node=new EdrawMathDate.EDMmlMtableNode(this,mml_attr);break;case EDMathMlNodeType.MtrNode:mml_node=new EdrawMathDate.EDMmlMtrNode(this,mml_attr);break;case EDMathMlNodeType.MtdNode:mml_node=new EdrawMathDate.EDMmlMtdNode(this,mml_attr);break;case EDMathMlNodeType.MoverNode:mml_node=new EdrawMathDate.EDMmlMoverNode(this,mml_attr);break;case EDMathMlNodeType.MunderNode:mml_node=new EdrawMathDate.EDMmlMunderNode(this,mml_attr);break;case EDMathMlNodeType.MunderoverNode:mml_node=new EdrawMathDate.EDMmlMunderoverNode(this,mml_attr);break;case EDMathMlNodeType.MprescriptsNode:mml_node=new EdrawMathDate.EDMmlMprescriptsNode(this,mml_attr);break;case EDMathMlNodeType.NoneNode:mml_node=new EdrawMathDate.EDMmlNoneNode(this,mml_attr);break;case EDMathMlNodeType.MmultiscriptsNode:mml_node=new EdrawMathDate.EDMmlMmultiscriptsNode(this,mml_attr);break;case EDMathMlNodeType.MalignMarkNode:mml_node=new EdrawMathDate.EDMmlMalignMarkNode(this);break;case EDMathMlNodeType.MerrorNode:mml_node=new EdrawMathDate.EDMmlMerrorNode(this,mml_attr);break;case EDMathMlNodeType.MtextNode:mml_node=new EdrawMathDate.EDMmlMtextNode(this,mml_attr);break;case EDMathMlNodeType.MpaddedNode:mml_node=new EdrawMathDate.EDMmlMpaddedNode(this,mml_attr);break;case EDMathMlNodeType.MspaceNode:mml_node=new EdrawMathDate.EDMmlMspaceNode(this,mml_attr);break;case EDMathMlNodeType.UnknownNode:mml_node=new EdrawMathDate.EDMmlUnknownNode(this,mml_attr);break;default:mml_node=null}return mml_node&&mml_attr.has("id")&&(mml_node.nodeId=mml_attr.get("id").toInt()),mml_node},EDMmlDocument.prototype.createImplicitMrowNode=function(do_node,ok,errorMsg){var do_child_list=do_node.childNodes,child_cnt=do_child_list.length;if(0===child_cnt)return ok[0]=!0,null;if(1===child_cnt)return this.domToMml(do_child_list.item(0),ok,errorMsg);for(var mml_node=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,errorMsg),i=0;i<child_cnt;++i){var do_child=do_child_list.item(i),do_child=this.domToMml(do_child,ok,errorMsg);if(!ok[0])return mml_node.delete(),null;if((!ok[0]||null!=do_child)&&(do_child&&!this.insertChild(mml_node,do_child,errorMsg)))return mml_node&&mml_node.delete(),do_child&&do_child.delete(),ok[0]=!1,null}return mml_node},EDMmlDocument.prototype.createMrowForChild=function(do_node,ok,errorMsg,parent){var do_child_list=do_node.childNodes,cnt=do_child_list.length;if(0===cnt)return ok[0]=!0,null;if(1===cnt)return null;for(var i=0;i<cnt;++i){var do_child=do_child_list.item(i);if("#comment"!==do_child.nodeName){var mrow=null,do_child=this.domToMml(do_child,ok,errorMsg);if(!ok[0]||null!=do_child){if(EDMathMlNodeType.MoNode!==do_child.nodeType&&EDMathMlNodeType.MrowNode!==do_child.nodeType&&EDMathMlNodeType.MprescriptsNode!==do_child.nodeType&&EDMathMlNodeType.NoneNode!==do_child.nodeType){if(!ok[0])return null;if(mrow=this.createNode(EDMathMlNodeType.MrowNode,new Map,null,errorMsg),!this.insertChild(mrow,do_child,errorMsg))return mrow.delete(),do_child.delete(),ok[0]=!1,null}else mrow=do_child;if(!this.insertChild(parent,mrow,errorMsg))return mrow.delete(),ok[0]=!1,null}}}return!0},EDMmlDocument.prototype.insertOperator=function(node,text){var text=this.createNode(EDMathMlNodeType.TextNode,new Map,text,[""]),mo_node=this.createNode(EDMathMlNodeType.MoNode,new Map,null,[""]);this.insertChild(node,mo_node,[""])&&this.insertChild(mo_node,text,[""])},EDMmlDocument.prototype.insertMstyleNode=function(node,mml_attr){if(node.length<=0)return!1;node=node[0];if(null==node)return!1;null!=node._ele&&null!=node._ele.parentNode&&node._ele.parentNode.contains(node._ele)&&node._ele.parentNode.removeChild(node._ele);mml_attr=this.createNode(EDMathMlNodeType.MstyleNode,mml_attr,null,[""]);return mml_attr.parent=node.parent,node.parent.firstChild===node&&(node.parent.firstChild=mml_attr),(node.parent=mml_attr).previousSibling=node.previousSibling,node.previousSibling&&(node.previousSibling.nextSibling=mml_attr),node.previousSibling=null,mml_attr.nextSibling=node.nextSibling,node.nextSibling&&(node.nextSibling.previousSibling=mml_attr),node.nextSibling=null,mml_attr.firstChild=node,!0},EDMmlDocument.prototype.checkMrow=function(parentnode,childnode){if(parentnode.nodeType===EDMathMlNodeType.MrowNode&&childnode.nodeType===EDMathMlNodeType.MrowNode){if(parentnode.parent&&parentnode.parent.nodeType===EDMathMlNodeType.UnknownNode)return!1;if(parentnode.firstChild.nodeType===EDMathMlNodeType.MtextNode){for(var childList=[],child=childnode.firstChild;null!=child;child=child.nextSibling)childList.push(child);for(var i=0;i<childList.length;i++)if(((child=childList[i]).nodeType!==EDMathMlNodeType.MtextNode||""!==child.firstChild.toTextNode().text&&"isNuLL!"!==child.firstChild.toTextNode().text)&&(this.checkMrow(parentnode,child),child.nodeType!=EDMathMlNodeType.MrowNode)){for(var lastChild=parentnode.firstChild;lastChild.nextSibling;)lastChild=lastChild.nextSibling;null==lastChild.nextSibling&&(child.previousSibling&&(child.previousSibling.nextSibling=null),child.nextSibling=null,(child.previousSibling=lastChild).nextSibling=child),childnode.firstChild&&childnode.firstChild===child&&(childnode.firstChild=null),child.parent=parentnode}return childnode.delete(),!(childnode=null)}}return!1},EDMmlDocument}();EdrawMathDate.EDMmlDocument=EDMmlDocument}(EdrawMathDate=EdrawMathDate||{}),this&&this.__extends||function(){var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])}))(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}()),__extends=(!function(EdrawMathDate){var EDMmlNode=function(){function EDMmlNode(type,document,attribute_map){this._parent=null,this._first_child=null,this._next_sibling=null,this._previous_sibling=null,this._node_type=type,this._document=document,this._ctx=document.ctx,this._attribute_map=attribute_map,this._parent_rect=new egRect(0,0,0,0),this._my_rect=new egRect(0,0,0,0),this._rel_origin=new egPoint(0,0),this._stretched=!1,this._noneditable=!1,this._nodeId=0,this._color="",this._background="",this._bShowRect=!1,this._fFontSizeLevel=1,this._nSymbolType=SymbolType.Normal,this._bFontItalic=!1,this._bFontBold=!1,this._doublewidth=!1,this._ele=null,this._mathcolor="";type=EdrawMathDate.EDStatic.collectFontAttributes(this),this._node_type!=EDMathMlNodeType.MoNode&&this._node_type!==EDMathMlNodeType.MnNode&&this._node_type!==EDMathMlNodeType.MtextNode||(this._bFontItalic=!1,this._bFontBold=!1),type.has("mathvariant")||type.has("fontstyle")||(this._node_type===EDMathMlNodeType.MiNode&&(this._bFontItalic=this._document.miItalic,this._bFontBold=this._document.miBold),this._node_type===EDMathMlNodeType.MnNode&&(this._bFontItalic=this._document.mnItalic,this._bFontBold=this._document.mnBold)),type.has("mathvariant")&&(null!=(document=type.get("mathvariant")).match("bold")?this._bFontBold=!0:this._bFontBold=!1,null!=document.match("italic")?this._bFontItalic=!0:this._bFontItalic=!1),this._scriptlevel=-1,attribute_map=this.inheritAttributeFromMrow("mathcolor"),null==(attribute_map=null==attribute_map?this.inheritAttributeFromMrow("color"):attribute_map)?this._color=this._document.foregroundColor:(this._mathcolor=attribute_map,this._color=attribute_map),type=this.inheritAttributeFromMrow("mathbackground");null==type&&(type=this.inheritAttributeFromMrow("background")),this._background=null==type?this._document.backgroundColor:type,this.updateFont()}return EDMmlNode.prototype.delete=function(){null!=this._ele&&null!=this._ele.parentNode&&this._ele.parentNode.contains(this._ele)&&this._ele.parentNode.removeChild(this._ele);for(var n=this._first_child;null!=n;){var tmp=n.nextSibling;n.delete(),n=tmp}null!=this.parent&&this.parent.firstChild===this&&(this.parent.firstChild=null),null!=this.previousSibling&&this.previousSibling.nextSibling===this&&(this.previousSibling.nextSibling=null),null!=this.nextSibling&&this.nextSibling.previousSibling===this&&(this.nextSibling.previousSibling=null),this.parent=null,this.previousSibling=null,this.nextSibling=null},Object.defineProperty(EDMmlNode.prototype,"nodeType",{get:function(){return this._node_type},enumerable:!1,configurable:!0}),EDMmlNode.prototype.toStr=function(){var spec=EdrawMathDate.EDStatic.mmlFindNodeSpec_type(this._node_type);return null==spec?" error: spec is null.".concat(this):"nodetype = ".concat(spec.type_str)},Object.defineProperty(EDMmlNode.prototype,"relOrigin",{set:function(rel_origin){this._rel_origin=rel_origin.add(new egPoint(-this._my_rect.left(),0)),this._stretched=!1},enumerable:!1,configurable:!0}),EDMmlNode.prototype.stretchTo=function(rect){this._parent_rect=rect,this._stretched=!0},EDMmlNode.prototype.devicePoint=function(pos){var dr=this.deviceRect,dp=dr.topLeft();return this._stretched?(dr=new egPoint((pos.x-this._my_rect.left())*dr.width/this._my_rect.width,(pos.y-this._my_rect.top())*dr.height/this._my_rect.height),dp.add(dr)):(dp=dp.add(pos)).subtract(this._my_rect.topLeft())},Object.defineProperty(EDMmlNode.prototype,"myRect",{get:function(){return this._my_rect},enumerable:!1,configurable:!0}),EDMmlNode.prototype.setMyRect=function(rect){null!=rect&&(this._my_rect=rect)},EDMmlNode.prototype.updateMyRect=function(){this._my_rect=this.symbolRect();for(var child=this._first_child;null!=child;child=child.nextSibling)this._my_rect.united(child.parentRect);this._doublewidth&&(this._my_rect.width=2*this._my_rect.width)},Object.defineProperty(EDMmlNode.prototype,"parentRect",{get:function(){return this._stretched?this._parent_rect:new egRect(this._rel_origin.x+this._my_rect.left(),this._rel_origin.y+this._my_rect.top(),this._my_rect.width,this._my_rect.height)},enumerable:!1,configurable:!0}),Object.defineProperty(EDMmlNode.prototype,"deviceRect",{get:function(){var pdr,pr,pmr,scale_w,scale_h;return null==this._parent?new egRect(this._rel_origin.x+this._my_rect.left(),this._rel_origin.y+this._my_rect.top(),this._my_rect.width,this._my_rect.height):(pdr=this._parent.deviceRect,pr=this.parentRect,(scale_w=0)!==(pmr=this._parent.myRect).width&&(scale_w=pdr.width/pmr.width),(scale_h=0)!==pmr.height&&(scale_h=pdr.height/pmr.height),new egRect(pdr.left()+(pr.left()-pmr.left())*scale_w,pdr.top()+(pr.top()-pmr.top())*scale_h,pr.width*scale_w,pr.height*scale_h))},enumerable:!1,configurable:!0}),EDMmlNode.prototype.updateChildFont=function(){this.updateFont();for(var child=this._first_child;null!=child;child=child.nextSibling)child.updateChildFont()},EDMmlNode.prototype.nodeStretch=function(){for(var child=this._first_child;null!=child;child=child.nextSibling)child.nodeStretch()},EDMmlNode.prototype.nodeLayout=function(){this._parent_rect=new egRect(0,0,0,0),this._stretched=!1,this._rel_origin=new egPoint(0,0);"true"===this.explicitAttribute("largeop")&&(this._fFontSizeLevel=EdrawMathDate.EDStatic.g_largeop_multiplier);for(var mathsize=this.explicitAttribute("mathsize"),child=(null!=mathsize&&null!=mathsize.match("%")&&(mathsize.replace(/%/g,""),this._fFontSizeLevel=.01*mathsize.toFloat()),1!==this._fFontSizeLevel&&(this.fontSizeLevel=this._fFontSizeLevel,this.updateChildFont()),this._first_child),i=0;null!=child;child=child.nextSibling)this.layoutHook(i),child.nodeLayout(),i++;this.layoutSymbol(),this.updateMyRect(),null==this._parent&&(this._rel_origin=new egPoint(0,0))},EDMmlNode.prototype.layoutHook=function(childIndex){},EDMmlNode.prototype.paint=function(painter,x_scaling,y_scaling,outputPng){if(void 0===outputPng&&(outputPng=!1),null!=this._my_rect){painter.save(),0<this._color.length?painter.strokeStyle=this._color:painter.strokeStyle=this._document.foregroundColor;for(var d_rect=this.deviceRect,child=(this._stretched&&(x_scaling*=d_rect.width/this._my_rect.width,y_scaling*=d_rect.height/this._my_rect.height),this._node_type!==EDMathMlNodeType.UnknownNode&&(this._background,0<(d_rect=this._color).length?this._ctx.fillStyle=d_rect:this._ctx.fillStyle=this._document.foregroundColor),this._first_child);null!=child;child=child.nextSibling)child.paint(painter,x_scaling,y_scaling,outputPng);this._node_type!==EDMathMlNodeType.UnknownNode&&this.paintSymbol(painter,x_scaling,y_scaling,outputPng),painter.restore()}},EDMmlNode.prototype.saveTo=function(elem,onlythis){var _this=this,xmldoc=(void 0===onlythis&&(onlythis=!1),elem.ownerDocument);if(null!=this._ele&&this._ele.ownerDocument===xmldoc){for(var newele_1=!1,child_1=(this._node_type===EDMathMlNodeType.TextNode?null!=this.toTextNode()&&(newele_1=!0):this._node_type!==EDMathMlNodeType.UnknownNode&&(skip=!1,this.parent.nodeType===EDMathMlNodeType.UnknownNode&&this.firstChild.nextSibling&&this.firstChild.nextSibling.nodeType===EDMathMlNodeType.MrowNode&&!this.firstChild.nextSibling.nextSibling&&(elem.contains(this._ele)&&elem.removeChild(this._ele),skip=!0),skip||(null==this._ele.parentNode&&null!=this._ele.firstChild?elem.appendChild(this._ele):(oldele=this._ele,this.myAttrMap.forEach(function(value,key){_this._ele.setAttribute(key,value)}),(!(this._bFontBold||this._bFontItalic||0<this._ele.attributes.length)||this._node_type!==EDMathMlNodeType.MoNode&&this._node_type!==EDMathMlNodeType.MnNode&&this._node_type!==EDMathMlNodeType.MtextNode)&&this._node_type!==EDMathMlNodeType.MiNode||(mathvariant="normal",!this._bFontBold&&this._bFontItalic&&(mathvariant="italic"),this._bFontBold&&!this._bFontItalic&&(mathvariant="bold"),this._bFontBold&&this._bFontItalic&&(mathvariant="bold-italic"),this._ele.setAttribute("mathvariant",mathvariant)),repalce=!0,this._node_type===EDMathMlNodeType.MtextNode&&(""===this.firstChild.toTextNode().text&&(repalce=this.firstChild.isShowRect=!1,elem.contains(this._ele))&&elem.removeChild(this._ele),"isNuLL!"===this.firstChild.toTextNode().text)&&(repalce=!(this.firstChild.isShowRect=!0),elem.contains(this._ele))&&elem.removeChild(this._ele),repalce&&(this._ele!==oldele&&elem.replaceChild(this._ele,oldele),newele_1=!0)))),this._first_child);null!=child_1;child_1=child_1.nextSibling)this._first_child.nodeType!==EDMathMlNodeType.TextNode&&onlythis?newele_1&&onlythis&&(elem=this._ele):newele_1?child_1.saveTo(this._ele):child_1.saveTo(elem);return}var repalce=this.tag,newele=(this._node_type===EDMathMlNodeType.MfencedNode&&(repalce="mrow"),this._ele=xmldoc.createElement(repalce),!1);if(this._node_type===EDMathMlNodeType.TextNode)null!=this.toTextNode()&&(repalce=void 0,repalce="isNuLL!"===(text=this.toTextNode().text)?(this.isShowRect=!0,xmldoc.createTextNode("")):EdrawMathDate.EDStatic.g_special_conversion.has(text)?(this.isShowRect=!1,xmldoc.createTextNode(EdrawMathDate.EDStatic.g_special_conversion.get(text))):(this.parent.nodeType===EDMathMlNodeType.MoNode&&1===text.length&&(text="#x"+(text=text.charCodeAt(0).toString(16).toLocaleUpperCase())+";"),this.isShowRect=!1,xmldoc.createTextNode(text)),elem.appendChild(repalce),this._ele=xmldoc.createElement("text"),newele=!0);else if(this._node_type!==EDMathMlNodeType.UnknownNode){var skip=!1;if(this.parent.nodeType!==EDMathMlNodeType.UnknownNode||this.firstChild.nextSibling&&this.firstChild.nextSibling.nodeType===EDMathMlNodeType.MrowNode&&!this.firstChild.nextSibling.nextSibling&&(skip=!0),!skip){this.myAttrMap.forEach(function(value,key){_this._ele.setAttribute(key,value)}),(!this._bFontBold&&!this._bFontItalic||this._node_type!==EDMathMlNodeType.MoNode&&this._node_type!==EDMathMlNodeType.MnNode&&this._node_type!==EDMathMlNodeType.MtextNode)&&this._node_type!==EDMathMlNodeType.MiNode||(mathvariant="normal",!this._bFontBold&&this._bFontItalic&&(mathvariant="italic"),this._bFontBold&&!this._bFontItalic&&(mathvariant="bold"),this._bFontBold&&this._bFontItalic&&(mathvariant="bold-italic"),this._ele.setAttribute("mathvariant",mathvariant));var mathvariant,text=!0;if(text=this._node_type===EDMathMlNodeType.MtextNode&&(""===this.firstChild.toTextNode().text&&(text=!1),"isNuLL!"===this.firstChild.toTextNode().text)?!1:text){for(var nextele=void 0,oldele=void 0,nextnode=this.nextSibling,nextele=this._ele;null!=nextnode;)null!=this.nextSibling._ele&&"text"!==(oldele=nextnode._ele).nodeName&&(nextele=elem.replaceChild(nextele,oldele)),nextnode=nextnode.nextSibling;elem.appendChild(nextele),newele=!0}}}for(var child=this._first_child;null!=child;child=child.nextSibling)this._first_child.nodeType!==EDMathMlNodeType.TextNode&&onlythis?newele&&onlythis&&(elem=this._ele):newele?child.saveTo(this._ele):child.saveTo(elem)},EDMmlNode.prototype.saveToForCopy=function(elem,onlythis){void 0===onlythis&&(onlythis=!1);for(var text,xmldoc=elem.ownerDocument,tagstr=this.tag,node=(this._node_type===EDMathMlNodeType.MfencedNode&&(tagstr="mrow"),xmldoc.createElement(tagstr)),newele=!1,child=(this._node_type===EDMathMlNodeType.TextNode?null!=this.toTextNode()&&(tagstr=void 0,tagstr="isNuLL!"===(text=this.toTextNode().text)?(this.isShowRect=!0,xmldoc.createTextNode("")):EdrawMathDate.EDStatic.g_special_conversion.has(text)?(this.isShowRect=!1,xmldoc.createTextNode(EdrawMathDate.EDStatic.g_special_conversion.get(text))):(this.parent.nodeType===EDMathMlNodeType.MoNode&&1===text.length&&(text="#x"+(text=text.charCodeAt(0).toString(16).toLocaleUpperCase())+";"),this.isShowRect=!1,xmldoc.createTextNode(text)),elem.appendChild(tagstr),newele=!0):this._node_type!==EDMathMlNodeType.UnknownNode&&(xmldoc=!1,!(xmldoc=this.parent.nodeType===EDMathMlNodeType.UnknownNode&&this.firstChild.nextSibling&&this.firstChild.nextSibling.nodeType===EDMathMlNodeType.MrowNode&&!this.firstChild.nextSibling.nextSibling?!0:xmldoc))&&(this.myAttrMap.forEach(function(value,key){node.setAttribute(key,value)}),(!(this._bFontBold||this._bFontItalic||0<node.attributes.length)||this._node_type!==EDMathMlNodeType.MoNode&&this._node_type!==EDMathMlNodeType.MnNode&&this._node_type!==EDMathMlNodeType.MtextNode)&&this._node_type!==EDMathMlNodeType.MiNode||(text="normal",!this._bFontBold&&this._bFontItalic&&(text="italic"),this._bFontBold&&!this._bFontItalic&&(text="bold"),this._bFontBold&&this._bFontItalic&&(text="bold-italic"),node.setAttribute("mathvariant",text)),tagstr=!0,tagstr=(this._node_type!==EDMathMlNodeType.MtextNode||(""===this.firstChild.toTextNode().text&&(tagstr=!1),"isNuLL!"!==this.firstChild.toTextNode().text))&&tagstr)&&(elem.appendChild(node),newele=!0),this._first_child);null!=child;child=child.nextSibling)this.firstChild.nodeType!==EDMathMlNodeType.TextNode&&onlythis?newele&&onlythis&&(elem=node):newele?child.saveToForCopy(node):child.saveToForCopy(elem)},EDMmlNode.prototype.appendTo=function(nodevector,edited,checkSpecialType){if(void 0===edited&&(edited=!0),void 0===checkSpecialType&&(checkSpecialType=!1),this._node_type!==EDMathMlNodeType.UnknownNode&&this._node_type!==EDMathMlNodeType.TextNode&&this._node_type!==EDMathMlNodeType.MiNode&&this._node_type!==EDMathMlNodeType.MoNode&&this._node_type!==EDMathMlNodeType.MnNode&&this._node_type!==EDMathMlNodeType.MtextNode&&this._node_type!==EDMathMlNodeType.MprescriptsNode&&this._node_type!==EDMathMlNodeType.NoneNode)if(checkSpecialType){var noneditable=[!1];if(this.checkSpecialType_1(noneditable)&&this.firstChild.noneditable!=noneditable[0]&&(this.noneditable4child=noneditable[0]),this.noneditable){if(!this.firstChild)return;if(this.firstChild.noneditable)return}this.checkSpecialType_2(noneditable)&&(this.noneditable4child=noneditable[0]),this.checkSpecialType_3(noneditable)&&(this.noneditable4child=noneditable[0])}else edited||nodevector.push(this);for(var child=this._first_child;null!=child;child=child.nextSibling)child.appendTo(nodevector,edited,checkSpecialType);if(this._node_type!==EDMathMlNodeType.UnknownNode&&this._node_type!==EDMathMlNodeType.TextNode){if(edited){if(this._node_type===EDMathMlNodeType.MtdNode||this._node_type===EDMathMlNodeType.MtrNode||this._node_type===EDMathMlNodeType.MprescriptsNode||this._node_type===EDMathMlNodeType.NoneNode)return;noneditable=EdrawMathDate.EDStatic.mmlFindNodeSpec_type(this.parent.nodeType);if(ChildSpec.ChildAny!==noneditable.child_spec)return;if(this._node_type===EDMathMlNodeType.MoNode&&EdrawMathDate.EDStatic.g_largeop_multiplier===this._fFontSizeLevel)return;if(this.noneditable)return}checkSpecialType||nodevector.push(this)}},EDMmlNode.prototype.checkSpecialType_1=function(noneditable){if(noneditable.length<0)return!1;noneditable[0]=!1;for(var parentnode=this,childnode=this._first_child,isthis=!1;(parentnode._node_type===EDMathMlNodeType.MunderNode||parentnode._node_type===EDMathMlNodeType.MoverNode)&&childnode;){if(isthis=!0,childnode.nodeType!==EDMathMlNodeType.MrowNode){noneditable[0]=!1;break}if(!(childnode=childnode.firstChild)){noneditable[0]=!1;break}if(!childnode.nextSibling){noneditable[0]=!1;break}var tmpbool=[!1];if(childnode.parent.checkSpecialType_2(tmpbool),childnode.nextSibling.nextSibling&&!tmpbool[0]){noneditable[0]=!1;break}if(childnode=(parentnode=childnode.nextSibling).firstChild,!parentnode){noneditable[0]=!1;break}if(noneditable[0]=!0,parentnode.nodeType==EDMathMlNodeType.MtextNode){if("isNuLL!"!=parentnode.firstChild.toTextNode().text)break;noneditable[0]=!1;break}}return isthis},EDMmlNode.prototype.checkSpecialType_2=function(noneditable){if(noneditable.length<0)return!1;noneditable[0]=!1;var childnode=this._first_child,isthis=!1,isbracket=!1;if(this.nodeType===EDMathMlNodeType.MrowNode&&childnode&&(isthis=!0,childnode.nextSibling)&&!childnode.noneditable&&(childnode=(childnode=childnode.nextSibling)&&childnode.nextSibling)&&(childnode.nodeType==EDMathMlNodeType.MoNode||childnode.nodeType==EDMathMlNodeType.MrowNode||childnode.nodeType==EDMathMlNodeType.MtableNode)){if(childnode.nodeType==EDMathMlNodeType.MrowNode||childnode.nodeType==EDMathMlNodeType.MtableNode)if(noneditable[0]=!1,childnode.previousSibling.nodeType===EDMathMlNodeType.MoNode)for(var _i=0,_a=EdrawMathDate.EDStatic.g_special_bracket;_i<_a.length;_i++){var text=_a[_i];childnode.previousSibling.toMoNode().text==text&&(this.firstChild.noneditable=!0,this.firstChild.noneditable4child=!0,childnode.previousSibling.noneditable=!0,childnode.previousSibling.noneditable4child=!0,childnode.noneditable=!0,isbracket=!(childnode.noneditable4child=!1))}else childnode.previousSibling.nodeType!==EDMathMlNodeType.MunderNode&&childnode.previousSibling.nodeType!==EDMathMlNodeType.MunderoverNode&&childnode.previousSibling.nodeType!==EDMathMlNodeType.MsubNode&&childnode.previousSibling.nodeType!==EDMathMlNodeType.MsubsupNode||(this.firstChild.noneditable=!0,this.firstChild.noneditable4child=!0,childnode.previousSibling.noneditable=!0,childnode.noneditable=!0,isbracket=!(childnode.noneditable4child=!1));if(childnode.nodeType==EDMathMlNodeType.MoNode){for(var _b=0,_c=EdrawMathDate.EDStatic.g_special_mo;_b<_c.length;_b++){var motext=_c[_b];childnode.toMoNode().text==motext&&(noneditable[0]=!0)}if(childnode.previousSibling.nodeType===EDMathMlNodeType.MrowNode||childnode.previousSibling.nodeType==EDMathMlNodeType.MtableNode)for(var _d=0,_e=EdrawMathDate.EDStatic.g_special_bracket;_d<_e.length;_d++){var yes,text=_e[_d];childnode.toMoNode().text==text&&(yes=!0,"/"==text&&childnode.nextSibling&&(childnode.nextSibling.nodeType!==EDMathMlNodeType.MrowNode&&childnode.nextSibling.nodeType!=EDMathMlNodeType.MtableNode||childnode.nextSibling.nextSibling?yes=!1:(childnode.nextSibling.noneditable=!0,childnode.nextSibling.noneditable4child=!1)),yes)&&(this.firstChild.noneditable=!0,this.firstChild.noneditable4child=!0,childnode.previousSibling.noneditable=!0,childnode.previousSibling.noneditable4child=!1,childnode.noneditable=!0,isbracket=childnode.noneditable4child=!0)}}for(childnode=childnode.nextSibling;childnode;){if(childnode.nodeType!==EDMathMlNodeType.MoNode)noneditable[0]=!1;else if(childnode.previousSibling.nodeType===EDMathMlNodeType.MrowNode||childnode.previousSibling.nodeType==EDMathMlNodeType.MtableNode)for(var _f=0,_g=EdrawMathDate.EDStatic.g_special_bracket;_f<_g.length;_f++){text=_g[_f];childnode.toMoNode().text==text&&(this.firstChild.noneditable=!0,this.firstChild.noneditable4child=!0,childnode.previousSibling.noneditable=!0,childnode.previousSibling.noneditable4child=!1,childnode.noneditable=!0,isbracket=childnode.noneditable4child=!0)}childnode=childnode.nextSibling}}return isbracket?(1<noneditable.length&&(noneditable[1]=!0),!1):isthis},EDMmlNode.prototype.checkSpecialType_3=function(noneditable){if(noneditable.length<0)return!1;noneditable[0]=!1;for(var parentnode=this,childnode=this._first_child,isthis=!1;parentnode._node_type===EDMathMlNodeType.MencloseNode&&childnode;){var isthis=!0,tmpbool=[!1];if(childnode.checkSpecialType_2(tmpbool),childnode.nextSibling||!tmpbool[0]&&childnode._node_type===EDMathMlNodeType.MrowNode){noneditable[0]=!1;break}if(noneditable[0]=!0,childnode.nodeType!==EDMathMlNodeType.MencloseNode||childnode.noneditable)break;childnode=(parentnode=childnode).firstChild}return isthis},EDMmlNode.prototype.appendEduStr=function(str,edudata){if(void 0===edudata&&(edudata=null),!(str.length<=0)){this._node_type!==EDMathMlNodeType.UnknownNode&&this._node_type!==EDMathMlNodeType.TextNode&&this._node_type!==EDMathMlNodeType.MiNode&&this._node_type!==EDMathMlNodeType.MoNode&&this._node_type!==EDMathMlNodeType.MnNode&&this._node_type!==EDMathMlNodeType.MtextNode&&this._node_type!==EDMathMlNodeType.MprescriptsNode&&this._node_type!==EDMathMlNodeType.NoneNode&&(this._node_type===EDMathMlNodeType.MrowNode?str[0]=str[0]+"(":str[0]=str[0]+this.tag);for(var text,child=this._first_child;null!=child;child=child.nextSibling)child._node_type===EDMathMlNodeType.TextNode&&"isNuLL!"!=(text=(text=(text=(text=child.toTextNode().text).replace("","*")).replace("","*")).replace("","/"))&&(str[0]=str[0]+text),child.appendEduStr(str,edudata);this._node_type!==EDMathMlNodeType.UnknownNode&&this._node_type!==EDMathMlNodeType.TextNode&&this._node_type===EDMathMlNodeType.MrowNode&&(str[0]=str[0]+")")}},EDMmlNode.prototype.mousePress=function(mousepos){for(var spec,mouse=null,child=(this._node_type!==EDMathMlNodeType.UnknownNode&&this._node_type!==EDMathMlNodeType.TextNode&&this.deviceRect.containsPt(mousepos)&&((mouse=this)._node_type!==EDMathMlNodeType.MtdNode&&this._node_type!==EDMathMlNodeType.MtrNode&&this._node_type!==EDMathMlNodeType.MprescriptsNode&&this._node_type!==EDMathMlNodeType.NoneNode||(mouse=null),spec=EdrawMathDate.EDStatic.mmlFindNodeSpec_type(this.parent.nodeType),ChildSpec.ChildAny!==spec.child_spec&&(mouse=null),this._node_type===EDMathMlNodeType.MoNode&&EdrawMathDate.EDStatic.g_largeop_multiplier===this._fFontSizeLevel&&(mouse=null),this.noneditable)&&(mouse=null),this._first_child),childnode=null;null!=child;child=child.nextSibling)if(null!=(childnode=child.mousePress(mousepos)))return childnode;return null!=childnode?childnode:mouse},EDMmlNode.prototype.toTextNode=function(){return null},EDMmlNode.prototype.toMoNode=function(){return null},Object.defineProperty(EDMmlNode.prototype,"tag",{get:function(){var spec=EdrawMathDate.EDStatic.mmlFindNodeSpec_type(this._node_type);return null==spec?"".concat(this," error: spec is null\n"):spec.tag},enumerable:!1,configurable:!0}),Object.defineProperty(EDMmlNode.prototype,"isShowRect",{get:function(){return this._bShowRect},set:function(isshowrect){null!=isshowrect&&(this._bShowRect=isshowrect)},enumerable:!1,configurable:!0}),Object.defineProperty(EDMmlNode.prototype,"myAttrMap",{get:function(){return this._attribute_map},enumerable:!1,configurable:!0}),EDMmlNode.prototype.basePos=function(){return this._font.strikeOutPos},Object.defineProperty(EDMmlNode.prototype,"em",{get:function(){return this._ctx.font!==this.font.fontstring()&&(this._ctx.font=this.font.fontstring()),.5*this._ctx.measureText("m").width},enumerable:!1,configurable:!0}),Object.defineProperty(EDMmlNode.prototype,"ex",{get:function(){return this.font.pixelSize},enumerable:!1,configurable:!0}),EDMmlNode.prototype.explicitAttribute=function(name,def){return void 0===def&&(def=null),this.myAttrMap.has(name)?this.myAttrMap.get(name):def},EDMmlNode.prototype.inheritAttributeFromMrow=function(name,def){void 0===def&&(def=null);for(var p=this;null!=p;p=p.parent)if(p===this||p.nodeType===EDMathMlNodeType.MstyleNode){var value=p.explicitAttribute(name);if(null!=value)return value}return def},Object.defineProperty(EDMmlNode.prototype,"font",{get:function(){return this._font},enumerable:!1,configurable:!0}),EDMmlNode.prototype.updateFont=function(){var fn=new EdrawMathDate.EDFont,ps=(fn.pixelSize=this._document.baseFontPixelSize,fn.pixelSize),sl=0;if(-1===this._scriptlevel?(sl=this.scriptlevel(),null!=this.parent&&(this._scriptlevel=sl)):sl=this._scriptlevel,0<=sl)for(var i=0;i<sl;++i)ps*=EdrawMathDate.EDStatic.g_script_size_multiplier;else for(i=0;sl<i;--i)ps/=EdrawMathDate.EDStatic.g_script_size_multiplier;ps<EdrawMathDate.EDStatic.g_min_font_pixel_size_calc&&(ps=EdrawMathDate.EDStatic.g_min_font_pixel_size_calc),fn.pixelSize=ps*this._fFontSizeLevel*EdrawMathDate.EDStatic.g_dpi_font_size,this._node_type!==EDMathMlNodeType.UnknownNode&&this.parent&&this.parent._node_type!==EDMathMlNodeType.UnknownNode&&!this._mathcolor&&(this._color=this.parent._color),this._node_type===EDMathMlNodeType.TextNode?null!=this.parent&&(fn.bold=this.parent.fontBold,fn.italic=this.parent.fontItalic,this._color=this.parent._color):(fn.bold=this._bFontBold,fn.italic=this._bFontItalic),this._font=fn},Object.defineProperty(EDMmlNode.prototype,"color",{get:function(){return this._color},enumerable:!1,configurable:!0}),Object.defineProperty(EDMmlNode.prototype,"background",{get:function(){return this.background},enumerable:!1,configurable:!0}),EDMmlNode.prototype.scriptlevel=function(child){void 0===child&&(child=null);var expl_sl_1,child=0,child=null==this._parent?0:this._parent.scriptlevel(this),expl_sl_str=this.explicitAttribute("scriptlevel");return null==expl_sl_str?child:expl_sl_str.startsWith("+")||expl_sl_str.startsWith("-")?NaN!==(expl_sl_1=expl_sl_str.toInt())?child+expl_sl_1:child:NaN!==(expl_sl_1=expl_sl_str.toInt())?expl_sl_1:"+"===expl_sl_str?child+1:"-"===expl_sl_str?child-1:child},Object.defineProperty(EDMmlNode.prototype,"symbolType",{get:function(){return this._nSymbolType},set:function(type){null!=type&&(this._nSymbolType=type)},enumerable:!1,configurable:!0}),Object.defineProperty(EDMmlNode.prototype,"noneditable",{get:function(){return this._noneditable},set:function(noneditable){this._noneditable=noneditable},enumerable:!1,configurable:!0}),Object.defineProperty(EDMmlNode.prototype,"noneditable4child",{set:function(noneditable){for(var child=this._first_child;null!=child;child=child.nextSibling)child.nodeType!==EDMathMlNodeType.TextNode?(child.noneditable=noneditable,child.noneditable4child=noneditable):"isNuLL!"==child.toTextNode().text&&(child._noneditable=!1,child.parent.noneditable=!1)},enumerable:!1,configurable:!0}),Object.defineProperty(EDMmlNode.prototype,"fontSizeLevel",{set:function(level){if(0<level){this._fFontSizeLevel=level;for(var child=this._first_child;null!=child;child=child.nextSibling)child.fontSizeLevel=level}},enumerable:!1,configurable:!0}),Object.defineProperty(EDMmlNode.prototype,"baseFontPixelSize",{get:function(){return this._document.baseFontPixelSize},enumerable:!1,configurable:!0}),Object.defineProperty(EDMmlNode.prototype,"fontBold",{get:function(){return this._bFontBold},set:function(isbold){this._bFontBold=isbold;for(var child=this._first_child;null!=child;child=child.nextSibling)child.nodeType!==EDMathMlNodeType.TextNode&&(child.fontBold=isbold)},enumerable:!1,configurable:!0}),Object.defineProperty(EDMmlNode.prototype,"fontItalic",{get:function(){return this._bFontItalic},set:function(isitalic){this._bFontItalic=isitalic;for(var child=this._first_child;null!=child;child=child.nextSibling)child.nodeType!==EDMathMlNodeType.TextNode&&(child.fontItalic=isitalic)},enumerable:!1,configurable:!0}),EDMmlNode.prototype.getChildBold=function(){if(this._bFontBold)return!0;for(var child=this._first_child;null!=child;child=child.nextSibling)if(child.nodeType!==EDMathMlNodeType.TextNode&&child.getChildBold())return!0;return!1},EDMmlNode.prototype.getChildItalic=function(){if(this._bFontItalic)return!0;for(var child=this._first_child;null!=child;child=child.nextSibling)if(child.nodeType!==EDMathMlNodeType.TextNode&&child.getChildItalic())return!0;return!1},EDMmlNode.prototype.setColAlignType=function(colaligntype){for(var p=this;null!=p;p=p.parent)if(p.nodeType===EDMathMlNodeType.MtableNode)return p.addmyAttrMap("columnalign",colaligntype),!0;return!1},EDMmlNode.prototype.hasMtable=function(curtype){for(var map,columnalign,p=this;null!=p;p=p.parent)if(p.nodeType===EDMathMlNodeType.MtableNode)return columnalign="left",(map=p.myAttrMap).has("columnalign")&&(columnalign=map.get("columnalign")),0<curtype.length&&(curtype[0]=columnalign),!0;return!1},EDMmlNode.prototype.childhasMtable=function(){if(this.nodeType===EDMathMlNodeType.MtableNode)return!0;for(var child=this._first_child;null!=child;child=child.nextSibling)if(child.nodeType!==EDMathMlNodeType.TextNode&&child.nodeType===EDMathMlNodeType.MtableNode)return!0;return!1},Object.defineProperty(EDMmlNode.prototype,"parent",{get:function(){return this._parent},set:function(newnode){this._parent=newnode},enumerable:!1,configurable:!0}),Object.defineProperty(EDMmlNode.prototype,"firstChild",{get:function(){return this._first_child},set:function(newnode){this._first_child=newnode},enumerable:!1,configurable:!0}),Object.defineProperty(EDMmlNode.prototype,"nextSibling",{get:function(){return this._next_sibling},set:function(newnode){this._next_sibling=newnode},enumerable:!1,configurable:!0}),Object.defineProperty(EDMmlNode.prototype,"previousSibling",{get:function(){return this._previous_sibling},set:function(newnode){this._previous_sibling=newnode},enumerable:!1,configurable:!0}),Object.defineProperty(EDMmlNode.prototype,"lastSibling",{get:function(){for(var n=this;!n.isLastSibling();)n=n.nextSibling;return n},enumerable:!1,configurable:!0}),Object.defineProperty(EDMmlNode.prototype,"firstSibling",{get:function(){for(var n=this;!n.isFirstSibling();)n=n.previousSibling;return n},enumerable:!1,configurable:!0}),Object.defineProperty(EDMmlNode.prototype,"nodeId",{get:function(){return this._nodeId},set:function(id){this._nodeId=id},enumerable:!1,configurable:!0}),EDMmlNode.prototype.addmyAttrMap=function(key,value){return this._attribute_map.has(key),this._attribute_map.set(key,value),!0},EDMmlNode.prototype.isLastSibling=function(){return null==this._next_sibling},EDMmlNode.prototype.isFirstSibling=function(){return null==this._previous_sibling},EDMmlNode.prototype.hasChildNodes=function(){return null!=this._first_child},EDMmlNode.prototype.layoutSymbol=function(){for(var w=0,child=this._first_child;null!=child;child=child.nextSibling){var space=-1;child.nodeType===EDMathMlNodeType.MoNode&&child.firstChild&&1<=child.firstChild.toTextNode().text.length&&("isIndentation!"===child.firstChild.toTextNode().text?(child.firstChild.updateMyRect(),w=w+child.firstChild.myRect.x-child.firstChild.myRect.width-space):"isSpace_1!"===child.firstChild.toTextNode().text?space=-space+.1*child.font.pixelSize:"isSpace_2!"===child.firstChild.toTextNode().text?space=-space+.2*child.font.pixelSize:"isSpace_3!"===child.firstChild.toTextNode().text?space=-space+.3*child.font.pixelSize:"isSpace_4!"===child.firstChild.toTextNode().text?space=-space+.4*child.font.pixelSize:"isSpace_5!"===child.firstChild.toTextNode().text&&(space=-space+.5*child.font.pixelSize)),child.relOrigin=new egPoint(w,0),w+=child.parentRect.width+space}},EDMmlNode.prototype.paintSymbol=function(painter,x_scaling,y_scaling,outputPng){void 0===outputPng&&(outputPng=!1);var d_rect=this.deviceRect;null==d_rect||outputPng||!this._document.drawFrames&&!this.isShowRect||(painter.save(),1!==painter.lineWidth&&(painter.lineWidth=1),"rgb(255, 0, 0)"!==painter.strokeStyle&&(painter.strokeStyle="rgb(255, 0, 0)"),painter.setLineDash([5,5]),painter.moveTo(d_rect.left(),d_rect.top()),painter.beginPath(),painter.lineTo(d_rect.right(),d_rect.top()),painter.lineTo(d_rect.right(),d_rect.bottom()),painter.lineTo(d_rect.left(),d_rect.bottom()),painter.lineTo(d_rect.left(),d_rect.top()),painter.closePath(),painter.stroke(),painter.restore())},EDMmlNode.prototype.symbolRect=function(){return new egRect(0,0,0,0)},EDMmlNode.prototype.interpretSpacing=function(value,ok,base_value){return EdrawMathDate.EDStatic.mmlInterpretSpacing(value,this.em,this.ex,ok,this._document.baseFontPixelSize,EdrawMathDate.EDMmlDocument.mmToPixelFactor)},Object.defineProperty(EDMmlNode.prototype,"lineWidth",{get:function(){return 1<this.font.pixelSize*EdrawMathDate.EDStatic.g_base_line_multiplier?this.font.pixelSize*EdrawMathDate.EDStatic.g_base_line_multiplier:1},enumerable:!1,configurable:!0}),EDMmlNode}(),EDMmlTokenNode=function(_super){function EDMmlTokenNode(type,document,attribute_map){return _super.call(this,type,document,attribute_map)||this}return __extends(EDMmlTokenNode,_super),Object.defineProperty(EDMmlTokenNode.prototype,"text",{get:function(){for(var result="",child=this.firstChild;null!=child;child=child.nextSibling)child.nodeType===EDMathMlNodeType.TextNode&&(0<result.length&&(result+=""),null!=child.toTextNode())&&(result+=child.toTextNode().text);return result},enumerable:!1,configurable:!0}),EDMmlTokenNode}(EdrawMathDate.EDMmlNode=EDMmlNode),EDMmlTokenNode=(EdrawMathDate.EDMmlTokenNode=EDMmlTokenNode,function(_super){function EDMmlUnknownNode(document,attribute_map){return _super.call(this,EDMathMlNodeType.UnknownNode,document,attribute_map)||this}return __extends(EDMmlUnknownNode,_super),EDMmlUnknownNode}(EDMmlNode)),EDMmlTokenNode=(EdrawMathDate.EDMmlUnknownNode=EDMmlTokenNode,function(_super){function EDMmlMphantomNodekenNode(document,attribute_map){return _super.call(this,EDMathMlNodeType.MphantomNode,document,attribute_map)||this}return __extends(EDMmlMphantomNodekenNode,_super),EDMmlMphantomNodekenNode.prototype.paint=function(painter,x_scaling,y_scaling,outputPng){},EDMmlMphantomNodekenNode}(EDMmlNode)),EDMmlTokenNode=(EdrawMathDate.EDMmlMphantomNodekenNode=EDMmlTokenNode,function(_super){function EDMmlMfencedNode(document,attribute_map){return _super.call(this,EDMathMlNodeType.MfencedNode,document,attribute_map)||this}return __extends(EDMmlMfencedNode,_super),EDMmlMfencedNode}(EDMmlNode)),EDMmlTokenNode=(EdrawMathDate.EDMmlMfencedNode=EDMmlTokenNode,function(_super){function EDMmlMalignMarkNode(document){return _super.call(this,EDMathMlNodeType.MalignMarkNode,document,new Map)||this}return __extends(EDMmlMalignMarkNode,_super),EDMmlMalignMarkNode}(EDMmlNode)),EDMmlTokenNode=(EdrawMathDate.EDMmlMalignMarkNode=EDMmlTokenNode,function(_super){function EDMmlMstyleNode(document,attribute_map){return _super.call(this,EDMathMlNodeType.MstyleNode,document,attribute_map)||this}return __extends(EDMmlMstyleNode,_super),EDMmlMstyleNode}(EDMmlNode)),EDMmlTokenNode=(EdrawMathDate.EDMmlMstyleNode=EDMmlTokenNode,function(_super){function EDMmlMrowNode(document,attribute_map){return _super.call(this,EDMathMlNodeType.MrowNode,document,attribute_map)||this}return __extends(EDMmlMrowNode,_super),EDMmlMrowNode}(EDMmlNode)),EDMmlTokenNode=(EdrawMathDate.EDMmlMrowNode=EDMmlTokenNode,function(_super){function EDMmlMerrorNode(document,attribute_map){return _super.call(this,EDMathMlNodeType.MerrorNode,document,attribute_map)||this}return __extends(EDMmlMerrorNode,_super),EDMmlMerrorNode}(EDMmlNode)),EDMmlTokenNode=(EdrawMathDate.EDMmlMerrorNode=EDMmlTokenNode,function(_super){function EDMmlSpacingNode(type,document,attribute_map){return _super.call(this,type,document,attribute_map)||this}return __extends(EDMmlSpacingNode,_super),Object.defineProperty(EDMmlSpacingNode.prototype,"width",{get:function(){var w,child_width=0,value=(null!=this.firstChild&&(child_width=this.firstChild.myRect.width),this.explicitAttribute("width"));return null!=value&&(w=this.interpretSpacing(value,value=[!1],child_width),value[0])?w:child_width},enumerable:!1,configurable:!0}),Object.defineProperty(EDMmlSpacingNode.prototype,"height",{get:function(){var h,cr=new egRect(0,0,0,0),value=(null!=this.firstChild&&(cr=this.firstChild.myRect),this.explicitAttribute("height"));return null!=value&&(h=this.interpretSpacing(value,value=[!1],-cr.top()),value[0])?h:-cr.top()},enumerable:!1,configurable:!0}),Object.defineProperty(EDMmlSpacingNode.prototype,"depth",{get:function(){var h,cr=new egRect(0,0,0,0),value=(null!=this.firstChild&&(cr=this.firstChild.myRect),this.explicitAttribute("depth"));return null!=value&&(h=this.interpretSpacing(value,value=[!1],cr.bottom()),value[0])?h:cr.bottom()},enumerable:!1,configurable:!0}),EDMmlSpacingNode.prototype.layoutSymbol=function(){null!=this.firstChild&&(this.firstChild.relOrigin=new egPoint(0,0))},EDMmlSpacingNode.prototype.symbolRect=function(){return new egRect(0,-this.height,this.width,this.height+this.depth)},EDMmlSpacingNode.prototype.interpretSpacing=function(value,ok,base_value){0<ok.length&&(ok[0]=!1),value.replace(" ","");var sign="",factor_str="",percent=!1,idx=0;for(idx<value.length&&("+"===value.charAt(idx)||"-"===value.charAt(idx))&&(sign=value.charAt(idx++));idx<value.length&&(0<value.charAt(idx).toInt()||"."===value.charAt(idx));)factor_str+=value.charAt(idx++);""===factor_str&&(factor_str="1.0"),idx<value.length&&"%"===value.charAt(idx)&&(percent=!0,++idx);var pseudo_unit=value.slice(idx),factor=factor_str.toFloat();if(factor<0)return 0;percent&&(factor*=.01);var percent=new egRect(0,0,0,0),unit_size=(null!=this.firstChild&&(percent=this.firstChild.myRect),0);if(pseudo_unit.length<=0)unit_size=base_value;else if("width"===pseudo_unit)unit_size=percent.width;else if("height"===pseudo_unit)unit_size=-percent.top();else if("depth"===pseudo_unit)unit_size=percent.bottom();else{percent=[!1],unit_size="em"===pseudo_unit||"ex"===pseudo_unit||"cm"===pseudo_unit||"mm"===pseudo_unit||"in"===pseudo_unit||"px"===pseudo_unit?this.interpretSpacing("1"+pseudo_unit,percent):this.interpretSpacing(pseudo_unit,percent);if(!percent[0])return 0}return 0<ok.length&&(ok[0]=!0),sign.length<=0?factor*unit_size:"+"===sign?base_value+factor*unit_size:base_value-factor*unit_size},EDMmlSpacingNode}(EDMmlNode)),EDMmlNode=function(_super){function EDMmlMpaddedNode(document,attribute_map){return _super.call(this,EDMathMlNodeType.MpaddedNode,document,attribute_map)||this}return __extends(EDMmlMpaddedNode,_super),Object.defineProperty(EDMmlMpaddedNode.prototype,"lspace",{get:function(){var lspace,value=this.explicitAttribute("lspace");return null!=value&&(lspace=this.interpretSpacing(value,value=[!1],0),value[0])?lspace:0},enumerable:!1,configurable:!0}),EDMmlMpaddedNode.prototype.symbolRect=function(){return new egRect(-this.lspace,-this.height,this.lspace+this.width,this.height+this.depth)},EDMmlMpaddedNode}(EdrawMathDate.EDMmlSpacingNode=EDMmlTokenNode),EDMmlNode=(EdrawMathDate.EDMmlMpaddedNode=EDMmlNode,function(_super){function EDMmlMspaceNode(document,attribute_map){return _super.call(this,EDMathMlNodeType.MspaceNode,document,attribute_map)||this}return __extends(EDMmlMspaceNode,_super),EDMmlMspaceNode}(EDMmlTokenNode));EdrawMathDate.EDMmlMspaceNode=EDMmlNode}(EdrawMathDate=EdrawMathDate||{}),this&&this.__extends||function(){var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])}))(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}()),__extends=(!function(EdrawMathDate){var EDMmlTextNode=function(_super){function EDMmlTextNode(text,document){document=_super.call(this,EDMathMlNodeType.TextNode,document,new Map)||this;return document._text=text,document}return __extends(EDMmlTextNode,_super),Object.defineProperty(EDMmlTextNode.prototype,"text",{get:function(){return this._text},set:function(text){this._text=text},enumerable:!1,configurable:!0}),Object.defineProperty(EDMmlTextNode.prototype,"font",{get:function(){var myfont=this.parent.font;return""!==this._text&&(null==this._text.match(/[[|(){}<>!a-zA-Z0-9\u0370-\u03ff]{1}/)&&(myfont.fontfamily="Cambria"),""!=this._text&&""!=this._text&&""!=this._text||(myfont.fontfamily="Symbol")),myfont},enumerable:!1,configurable:!0}),Object.defineProperty(EDMmlTextNode.prototype,"color",{get:function(){return null==this.parent?this._color:this.parent.color},enumerable:!1,configurable:!0}),Object.defineProperty(EDMmlTextNode.prototype,"background",{get:function(){return null==this.parent?this._background:this.parent.background},enumerable:!1,configurable:!0}),EDMmlTextNode.prototype.toStr=function(){return _super.prototype.toStr.call(this)+" text = "+this._text},EDMmlTextNode.prototype.toTextNode=function(){return this},EDMmlTextNode.prototype.scriptlevel=function(child){return void 0===child&&(child=null),null==this.parent?this._scriptlevel:this.parent.scriptlevel(this)},EDMmlTextNode.prototype.paintSymbol=function(painter,x_scaling,y_scaling,outputPng){var mr,isHStretch,isVStretch,s_pos;_super.prototype.paintSymbol.call(this,painter,x_scaling,y_scaling,outputPng=void 0===outputPng?!1:outputPng),this.isInvisibleOperator()||(painter.save(),outputPng=this.devicePoint(new egPoint),s_pos=(mr=this.symbolRect()).topLeft(),painter.translate(outputPng.x+s_pos.x,outputPng.y+s_pos.y),outputPng=new egPoint(0,this.basePos()),""!=this._text&&""!=this._text&&""!=this._text&&""!=this._text||(y_scaling=1.15,x_scaling=1.1,outputPng.x=outputPng.x-.05*this.myRect.width),outputPng=outputPng.subtract(s_pos),this.parent.nodeType===EDMathMlNodeType.MoNode&&(outputPng.x=outputPng.x+this.font.pixelSize*EdrawMathDate.EDStatic.g_node_space*1),this.parent.nodeType===EDMathMlNodeType.MiNode&&(outputPng.x=outputPng.x+this.font.pixelSize*EdrawMathDate.EDStatic.g_node_space*.5),s_pos=null,isVStretch=isHStretch=!1,EDMathMlNodeType.MoNode===this.parent.nodeType&&"^"!==this._text&&"~"!==this._text&&""!==this._text&&((s_pos=this.parent.toMoNode()).stretch===StretchDir.HStretch&&this.paintHStretch(painter,this._text,outputPng,x_scaling,y_scaling)&&(isHStretch=!0),s_pos.stretch===StretchDir.VStretch)&&this.paintVStretch(painter,this._text,outputPng,x_scaling,y_scaling)&&(isVStretch=!0,this.nodeLayout()),isHStretch||isVStretch||(this._nSymbolType===SymbolType.Symbol?(this._ctx.font!==this.font.fontstring()&&(this._ctx.font=this.font.fontstring()),s_pos=this._ctx.measureText(this.text).width,painter.scale(+mr.width/s_pos,+mr.height/this.font.pixelSize)):painter.scale(x_scaling,y_scaling),painter.font!==this.font.fontstring()&&(painter.font=this.font.fontstring()),"alphabetic"!==painter.textBaseline&&(painter.textBaseline="alphabetic"),"isNuLL!"===this._text||"isIndentation!"===this._text||"isSpace_1!"===this._text||"isSpace_2!"===this._text||"isSpace_3!"===this._text||"isSpace_4!"===this._text||"isSpace_5!"===this._text?painter.fillText("",outputPng.x,.75*outputPng.y):("f"==this.text&&this.parent.previousSibling&&this.parent.previousSibling.nodeType!=EDMathMlNodeType.MiNode&&(outputPng.x=outputPng.x+.5*this._ctx.measureText(this._text).width),painter.fillText(this._text,outputPng.x,.75*outputPng.y))),painter.restore())},EDMmlTextNode.prototype.symbolRect=function(){var pretext,tmpnode,widthnode,prefont,width2,br=new egRect(0,0,0,0);return this._ctx.font!==this.font.fontstring()&&(this._ctx.font=this.font.fontstring()),this.isInvisibleOperator()||(this._document.defaultMode,this._ctx.font=this.font.fontstring(),br.x=0,br.y=0,br.height=this.font.pixelSize,br.width=this._ctx.measureText(this._text).width,""==this._text&&(br.width=this._ctx.measureText("").width),this.parent.nodeType===EDMathMlNodeType.MoNode?br.width=br.width+this.font.pixelSize*EdrawMathDate.EDStatic.g_node_space*2:this.parent.nodeType===EDMathMlNodeType.MiNode&&(br.width=br.width+this.font.pixelSize*EdrawMathDate.EDStatic.g_node_space*1),"isIndentation!"===this._text?(pretext=this._text,prefont=this.font.fontstring(),null!=this.parent.previousSibling&&(pretext=this.parent.previousSibling.firstChild.toTextNode().text,prefont=this.parent.previousSibling.firstChild.font.fontstring()),this._ctx.font=prefont,prefont=this._ctx.measureText(pretext).width,"isIndentation!"===this._text&&(br.x=.2*-prefont),br.y=0,br.height=.5*this.font.pixelSize,br.width=1):"isSpace_1!"===this._text||"isSpace_2!"===this._text||"isSpace_3!"===this._text||"isSpace_4!"===this._text||"isSpace_5!"===this._text?br.width=1:""===this._text||""===this._text||""===this._text||""===this._text?br.width=this._ctx.measureText("").width:"isNuLL!"===this._text?br.width=this._ctx.measureText("0").width:""===this._text?(br.x=-2,br.width=1):"f"!=this.text||(this.parent.previousSibling&&this.parent.previousSibling.nodeType!=EDMathMlNodeType.MiNode&&(br.width=br.width+.5*this._ctx.measureText(this._text).width),this.parent.nextSibling&&this.parent.nextSibling.nodeType==EDMathMlNodeType.MiNode)||(br.width=br.width+.5*this._ctx.measureText(this._text).width),this._nSymbolType===SymbolType.Over&&(br.translate(0,.5*this.font.pixelSize),this.parent.parent.nodeType===EDMathMlNodeType.MunderoverNode&&(br.height=.5*br.height),this.parent.parent.nodeType===EDMathMlNodeType.MoverNode&&(br.height=.5*br.height,br.translate(0,-1*this.font.pixelSize*.5)),this.parent.parent.nodeType===EDMathMlNodeType.MunderNode)&&(br.height=.5*br.height,br.translate(0,-1*this.font.pixelSize*.5)),this._nSymbolType===SymbolType.Under&&(br.translate(0,.5*this.font.pixelSize),this.parent.parent.nodeType===EDMathMlNodeType.MunderoverNode&&(br.height=.5*br.height),this.parent.parent.nodeType===EDMathMlNodeType.MoverNode&&(br.height=.5*br.height,br.translate(0,.5*+this.font.pixelSize)),this.parent.parent.nodeType===EDMathMlNodeType.MunderNode)&&(br.height=.5*br.height,br.translate(0,.5*+this.font.pixelSize)),this._nSymbolType!==SymbolType.Center||this.parent.parent.nodeType!==EDMathMlNodeType.MunderoverNode&&this.parent.parent.nodeType!==EDMathMlNodeType.MoverNode&&this.parent.parent.nodeType!==EDMathMlNodeType.MunderNode||(br.translate(0,.5*this.font.pixelSize),br.height=.5*br.height,br.translate(0,-.25*this.font.pixelSize)),this._nSymbolType!==SymbolType.Arrow)||this.parent.parent.nodeType!==EDMathMlNodeType.MunderoverNode&&this.parent.parent.nodeType!==EDMathMlNodeType.MoverNode&&this.parent.parent.nodeType!==EDMathMlNodeType.MunderNode||(br.translate(0,.5*this.font.pixelSize),br.height=.25*br.height,br.translate(0,-.125*this.font.pixelSize),pretext=!1,this.parent.parent.firstChild===this.parent&&(!this.parent.parent.parent||(tmpnode=this.parent.parent.parent).nodeType!=EDMathMlNodeType.MunderoverNode&&tmpnode.nodeType!=EDMathMlNodeType.MoverNode&&tmpnode.nodeType!=EDMathMlNodeType.MunderNode||((widthnode=tmpnode.firstChild.nextSibling).updateMyRect(),prefont=widthnode.myRect.width,tmpnode.nodeType==EDMathMlNodeType.MunderoverNode&&((widthnode=tmpnode.firstChild.nextSibling.nextSibling).updateMyRect(),prefont<(width2=widthnode.myRect.width))&&(prefont=width2),br.width=2*br.width+prefont,pretext=!0),this.parent.nextSibling)&&!pretext&&this.parent.nextSibling.symbolType!=SymbolType.Arrow&&((widthnode=this.parent.nextSibling).updateMyRect(),prefont=widthnode.myRect.width,this.parent.parent.nodeType==EDMathMlNodeType.MunderoverNode&&((widthnode=this.parent.nextSibling.nextSibling).updateMyRect(),prefont<(width2=widthnode.myRect.width))&&(prefont=width2),br.width=2*br.width+prefont)),br.translate(0,-.5*this.font.pixelSize),this.generateTxtRenderingData(br),br},EDMmlTextNode.prototype.isInvisibleOperator=function(){return!1},EDMmlTextNode.prototype.generateTxtRenderingData=function(rect){if(!this.isInvisibleOperator()){var previousWidth=0,size=this._text.length;if(!(size<=0)&&null!=this._parent&&0!==this._parent.nodeId){for(var i=1;i<=size;i++)previousWidth=this.TxtRenderingDataHelper(rect,this._text.charAt(i),previousWidth);return null}}},EDMmlTextNode.prototype.TxtRenderingDataHelper=function(parentRect,text,previousWidth){this._ctx.font=this.font.fontstring();var adjBits,parentId=0,nodeType=EDMathMlNodeType.UnknownNode,newWidth=0;return null==this._parent?0:(parentId=this._parent.nodeId,nodeType=this._parent.nodeType,adjBits=EDRendAdjustBits.Nothing,nodeType!==EDMathMlNodeType.MoNode&&nodeType!==EDMathMlNodeType.MpaddedNode||(adjBits=EDRendAdjustBits.translateLspace),nodeType=text.length,this._document.appendRenderingData(parentId,nodeType,this._parent,adjBits|EDRendAdjustBits.translateTxt),(adjBits=new egRect(0,0,this.parentRect.width,this.parentRect.height)).translate(previousWidth,0),adjBits.width=this._ctx.measureText(text.charAt(text.length-1)).width,adjBits.height=this.font.pixelSize,adjBits.width+previousWidth>parentRect.width?(newWidth=0<adjBits.width+previousWidth-parentRect.width?parentRect.width:adjBits.width+previousWidth,adjBits.width=parentRect.width-previousWidth):newWidth=adjBits.width+previousWidth,adjBits.moveTop(this.basePos()+parentRect.bottom()),this._document.updateRenderingData(parentId,nodeType,adjBits),newWidth)},EDMmlTextNode.prototype.paintHStretch=function(painter,symboltext,baseline,x_scaling,y_scaling){void 0===x_scaling&&(x_scaling=1),void 0===y_scaling&&(y_scaling=1);var mid_tmpy,mid_tmpx,del_x,h2,h3,h4,y,y_scaling=this.parent.parentRect,symbolwidth=(this._ctx.font!==this.font.fontstring()&&(this._ctx.font=this.font.fontstring()),painter.measureText(symboltext).width),x1=baseline.x+this.font.pixelSize*EdrawMathDate.EDStatic.g_draw_linewidth,h=this.symbolRect().height,x2=baseline.x+y_scaling.width-this.font.pixelSize*EdrawMathDate.EDStatic.g_draw_linewidth,y1=0+this.symbolRect().height*EdrawMathDate.EDStatic.g_draw_linewidth,y2=y_scaling.height-this.symbolRect().height*EdrawMathDate.EDStatic.g_draw_linewidth,mid_y=(y1+y2)/2,mid_x=(x1+x2)/2,drawtext=(painter.font!==this.font.fontstring()&&(painter.font=this.font.fontstring()),"bevel"!==painter.lineJoin&&(painter.lineJoin="bevel"),"middle"!==painter.textBaseline&&(painter.textBaseline="middle"),!1);return this._nSymbolType==SymbolType.Normal||this.parent.parent.nodeType!=EDMathMlNodeType.MunderoverNode&&this.parent.parent.nodeType!=EDMathMlNodeType.MoverNode&&this.parent.parent.nodeType!=EDMathMlNodeType.MunderNode||(painter.lineWidth=this.font.pixelSize*EdrawMathDate.EDStatic.g_draw_linewidth,drawtext=!0),""!=symboltext||drawtext||(symbolwidth=1.5*painter.measureText("").width,baseline.x=baseline.x+symbolwidth/2,baseline.y=baseline.y+this.symbolRect().height),this._nSymbolType!==SymbolType.Arrow&&this._nSymbolType!==SymbolType.Center||this.parent.parent.nodeType!==EDMathMlNodeType.MunderoverNode&&this.parent.parent.nodeType!==EDMathMlNodeType.MoverNode&&this.parent.parent.nodeType!==EDMathMlNodeType.MunderNode||(baseline.y=baseline.y-2*this.symbolRect().height),""==symboltext&&drawtext?(painter.beginPath(),painter.moveTo(x1,.5*h),painter.lineTo(x2,.5*h),painter.stroke()):""==symboltext&&drawtext?(mid_tmpx=(x1+x2)/2,mid_tmpy=x_scaling<2?(y1+y2)/3:y1,x_scaling>EdrawMathDate.EDStatic.g_v_stretchsize&&(mid_tmpx=baseline.x+symbolwidth*EdrawMathDate.EDStatic.g_v_stretchsize/2+this.font.pixelSize*EdrawMathDate.EDStatic.g_draw_linewidth),painter.beginPath(),painter.moveTo(x1,y2),painter.bezierCurveTo(x1,mid_tmpy,mid_tmpx,mid_tmpy,mid_tmpx,mid_tmpy),2<x_scaling&&painter.lineTo(mid_tmpx=x2-(mid_tmpx-x1),mid_tmpy),painter.bezierCurveTo(mid_tmpx,mid_tmpy,x2,mid_tmpy,x2,y2),painter.stroke()):""==symboltext&&drawtext?(mid_tmpx=(x1+x2)/2,mid_tmpy=x_scaling<2?2*(y1+y2)/3:y2,x_scaling>EdrawMathDate.EDStatic.g_v_stretchsize&&(mid_tmpx=baseline.x+symbolwidth*EdrawMathDate.EDStatic.g_v_stretchsize/2+this.font.pixelSize*EdrawMathDate.EDStatic.g_draw_linewidth),painter.beginPath(),painter.moveTo(x1,y1),painter.bezierCurveTo(x1,mid_tmpy,mid_tmpx,mid_tmpy,mid_tmpx,mid_tmpy),2<x_scaling&&painter.lineTo(mid_tmpx=x2-(mid_tmpx-x1),mid_tmpy),painter.bezierCurveTo(mid_tmpx,mid_tmpy,x2,mid_tmpy,x2,y1),painter.stroke()):""==symboltext&&drawtext?(painter.beginPath(),painter.moveTo(x1,h),painter.lineTo(.5*(x1+x2),.5*h),painter.lineTo(x2,h),painter.stroke()):""==symboltext&&drawtext?(painter.beginPath(),painter.moveTo(x1,0),painter.lineTo(.5*(x1+x2),.5*h),painter.lineTo(x2,0),painter.stroke()):""==symboltext&&drawtext?(painter.beginPath(),painter.moveTo(x1,h),painter.lineTo(x1,.5*h),painter.lineTo(x2,.5*h),painter.lineTo(x2,h),painter.stroke()):""==symboltext&&drawtext?(painter.beginPath(),painter.moveTo(x1,0),painter.lineTo(x1,.5*h),painter.lineTo(x2,.5*h),painter.lineTo(x2,0),painter.stroke()):""==symboltext&&drawtext?(painter.beginPath(),painter.moveTo(x1,h),painter.lineTo(x1+.5*h,.5*h),painter.lineTo(x2-.5*h,.5*h),painter.lineTo(x2,h),painter.stroke()):""==symboltext&&drawtext?(painter.beginPath(),painter.moveTo(x1,0),painter.lineTo(x1+.5*h,.5*h),painter.lineTo(x2-.5*h,.5*h),painter.lineTo(x2,0),painter.stroke()):""==symboltext&&drawtext?(mid_tmpx=(x1+x2)/4,del_x=0,x_scaling>EdrawMathDate.EDStatic.g_v_stretchsize&&(mid_tmpx=del_x=(baseline.x+symbolwidth*EdrawMathDate.EDStatic.g_v_stretchsize/2-this.font.pixelSize*EdrawMathDate.EDStatic.g_draw_linewidth)/2),painter.beginPath(),painter.moveTo(x1,y2),painter.bezierCurveTo(x1,mid_y,mid_tmpx,mid_y,mid_tmpx,mid_y),x_scaling>EdrawMathDate.EDStatic.g_v_stretchsize&&painter.lineTo(mid_tmpx=mid_x-(del_x=mid_tmpx-x1),mid_y),painter.bezierCurveTo(mid_tmpx,mid_y,mid_x,mid_y,mid_x,y1),mid_tmpx=3*(x1+x2)/4,x_scaling>EdrawMathDate.EDStatic.g_v_stretchsize&&(mid_tmpx=mid_x+del_x),painter.bezierCurveTo(mid_x,mid_y,mid_tmpx,mid_y,mid_tmpx,mid_y),x_scaling>EdrawMathDate.EDStatic.g_v_stretchsize&&painter.lineTo(mid_tmpx=x2-del_x,mid_y),painter.bezierCurveTo(mid_tmpx,mid_y,x2,mid_y,x2,y2),painter.stroke()):""==symboltext&&drawtext?(mid_tmpx=(x1+x2)/4,del_x=0,x_scaling>EdrawMathDate.EDStatic.g_v_stretchsize&&(mid_tmpx=del_x=(baseline.x+symbolwidth*EdrawMathDate.EDStatic.g_v_stretchsize/2-this.font.pixelSize*EdrawMathDate.EDStatic.g_draw_linewidth)/2),painter.beginPath(),painter.moveTo(x1,y1),painter.bezierCurveTo(x1,mid_y,mid_tmpx,mid_y,mid_tmpx,mid_y),x_scaling>EdrawMathDate.EDStatic.g_v_stretchsize&&painter.lineTo(mid_tmpx=mid_x-(del_x=mid_tmpx-x1),mid_y),painter.bezierCurveTo(mid_tmpx,mid_y,mid_x,mid_y,mid_x,y2),mid_tmpx=3*(x1+x2)/4,x_scaling>EdrawMathDate.EDStatic.g_v_stretchsize&&(mid_tmpx=mid_x+del_x),painter.bezierCurveTo(mid_x,mid_y,mid_tmpx,mid_y,mid_tmpx,mid_y),x_scaling>EdrawMathDate.EDStatic.g_v_stretchsize&&painter.lineTo(mid_tmpx=x2-del_x,mid_y),painter.bezierCurveTo(mid_tmpx,mid_y,x2,mid_y,x2,y1),painter.stroke()):""==symboltext&&drawtext?(painter.beginPath(),painter.moveTo(x1,.5*h),painter.lineTo(x2,.5*h),painter.stroke(),painter.moveTo(x2-h,0),painter.lineTo(x2,.5*h),painter.lineTo(x2-h,h),painter.stroke()):""==symboltext&&drawtext?(painter.beginPath(),painter.moveTo(x1,.5*h),painter.lineTo(x2,.5*h),painter.stroke(),painter.moveTo(x1+h,0),painter.lineTo(x1,.5*h),painter.lineTo(x1+h,h),painter.stroke(),painter.moveTo(x2-h,0),painter.lineTo(x2,.5*h),painter.lineTo(x2-h,h),painter.stroke()):""==symboltext&&drawtext?(painter.beginPath(),painter.moveTo(x1,.5*h),painter.lineTo(x2,.5*h),painter.stroke(),painter.moveTo(x1+h,0),painter.lineTo(x1,.5*h),painter.lineTo(x1+h,h),painter.stroke()):""==symboltext&&drawtext?(painter.beginPath(),painter.moveTo(x1,h),painter.lineTo(x2,h),painter.stroke(),painter.moveTo(x1+h,.5*h),painter.lineTo(x1,h),painter.lineTo(x1+h,1.5*h),painter.stroke(),painter.moveTo(x1,0),painter.lineTo(x2,0),painter.stroke(),painter.moveTo(x2-h,.5*-h),painter.lineTo(x2,0),painter.lineTo(x2-h,.5*h),painter.stroke()):""==symboltext&&drawtext?(painter.beginPath(),painter.moveTo(x1,.5*h),painter.lineTo(x2,.5*h),painter.lineTo(x2-h,0),painter.stroke()):""==symboltext&&drawtext?(painter.beginPath(),painter.moveTo(x1,.5*h),painter.lineTo(x2,.5*h),painter.lineTo(x2-h,h),painter.stroke()):""==symboltext&&drawtext?(painter.beginPath(),painter.moveTo(x1+h,0),painter.lineTo(x1,.5*h),painter.lineTo(x2,.5*h),painter.lineTo(x2-h,0),painter.stroke()):""==symboltext&&drawtext?(painter.beginPath(),painter.moveTo(x1+h,+h),painter.lineTo(x1,.5*h),painter.lineTo(x2,.5*h),painter.lineTo(x2-h,+h),painter.stroke()):""==symboltext&&drawtext?(painter.beginPath(),painter.moveTo(x1+h,0),painter.lineTo(x1,.5*h),painter.lineTo(x2,.5*h),painter.stroke()):""==symboltext&&drawtext?(painter.beginPath(),painter.moveTo(x1+h,+h),painter.lineTo(x1,.5*h),painter.lineTo(x2,.5*h),painter.stroke()):""==symboltext&&drawtext?(painter.beginPath(),painter.moveTo(x1+h,1.5*h),painter.lineTo(x1,h),painter.lineTo(x2,h),painter.stroke(),painter.moveTo(x1,0),painter.lineTo(x2,0),painter.lineTo(x2-h,.5*-h),painter.stroke()):""==symboltext&&this._nSymbolType==SymbolType.Arrow?(h3=h2=h,y=0,drawtext||(h2=.35*h,y=.5*h-2*(h3=.15*h)/3),painter.lineWidth=this.font.pixelSize*EdrawMathDate.EDStatic.g_draw_linewidth,painter.beginPath(),painter.moveTo(x1+h3,y+h2),painter.lineTo(x2-h3,y+h2),painter.stroke(),painter.moveTo(x1+2*h3,y+.5*h2),painter.lineTo(x1+h3,y+h2),painter.lineTo(x1+2*h3,y+1.5*h2),painter.stroke(),painter.moveTo(x1,y+0),painter.lineTo(x2,y+0),painter.stroke(),painter.moveTo(x2-h3,y-.5*h2),painter.lineTo(x2,y+0),painter.lineTo(x2-h3,y+.5*h2),painter.stroke()):""==symboltext&&this._nSymbolType==SymbolType.Arrow?(h3=h2=h,y=0,drawtext||(h2=.35*h,y=.5*h-2*(h3=.15*h)/3),painter.lineWidth=this.font.pixelSize*EdrawMathDate.EDStatic.g_draw_linewidth,painter.beginPath(),painter.moveTo(x1,y+h2),painter.lineTo(x2,y+h2),painter.stroke(),painter.moveTo(x1+h3,y+.5*h2),painter.lineTo(x1,y+h2),painter.lineTo(x1+h3,y+1.5*h2),painter.stroke(),painter.moveTo(x1+h3,y+0),painter.lineTo(x2-h3,y+0),painter.stroke(),painter.moveTo(x2-2*h3,y+.5*-h2),painter.lineTo(x2-h3,y+0),painter.lineTo(x2-2*h3,y+.5*h2),painter.stroke()):""==symboltext&&this._nSymbolType==SymbolType.Arrow?(h3=h2=h,y=h4=0,drawtext||(h4=.25*(h2=.35*h),y=.5*h-2*(h3=.15*h)/3),painter.lineWidth=this.font.pixelSize*EdrawMathDate.EDStatic.g_draw_linewidth,painter.beginPath(),painter.moveTo(x1+2*h3,y+1.5*h2-h4),painter.lineTo(x1+h3,y+h2-h4),painter.lineTo(x2-h3,y+h2-h4),painter.stroke(),painter.moveTo(x1,y+h4),painter.lineTo(x2,y+h4),painter.lineTo(x2-h3,y-.5*h2+h4),painter.stroke()):""==symboltext&&this._nSymbolType==SymbolType.Arrow?(h3=h2=h,y=h4=0,drawtext||(h4=.25*(h2=.35*h),y=.5*h-2*(h3=.15*h)/3),painter.lineWidth=this.font.pixelSize*EdrawMathDate.EDStatic.g_draw_linewidth,painter.beginPath(),painter.moveTo(x1+h3,y+1.5*h2-h4),painter.lineTo(x1,y+h2-h4),painter.lineTo(x2,y+h2-h4),painter.stroke(),painter.moveTo(x1+h3,y+h4),painter.lineTo(x2-h3,y+h4),painter.lineTo(x2-2*h3,y+.5*-h2+h4),painter.stroke()):(painter.scale(+y_scaling.width/symbolwidth,1),painter.fillText(symboltext,baseline.x,.5*baseline.y)),!0},EDMmlTextNode.prototype.paintVStretch=function(painter,symboltext,baseline,x_scaling,y_scaling){if(void 0===x_scaling&&(x_scaling=1),(y_scaling=void 0===y_scaling?1:y_scaling)<=1.5)return this._doublewidth=!1;this._doublewidth=!0;var mid_tmpy,del_y,tmpx,x_scaling=this.parent.parentRect,x1=baseline.x+this.font.pixelSize*EdrawMathDate.EDStatic.g_draw_linewidth*4,baseline=-baseline.x+x_scaling.width+baseline.x-this.font.pixelSize*EdrawMathDate.EDStatic.g_draw_linewidth*4,y1=0+this.font.pixelSize*EdrawMathDate.EDStatic.g_draw_linewidth/4,x_scaling=x_scaling.height-this.font.pixelSize*EdrawMathDate.EDStatic.g_draw_linewidth/4,mid_y=(y1+x_scaling)/2,mid_x=(x1+baseline)/2;return painter.lineWidth=this.font.pixelSize*EdrawMathDate.EDStatic.g_draw_linewidth,painter.font!==this.font.fontstring()&&(painter.font=this.font.fontstring(),painter.lineJoin="bevel"),"bevel"!=painter.lineJoin&&(painter.lineJoin="bevel"),"middle"!==painter.textBaseline&&(painter.textBaseline="middle"),"("==symboltext?(mid_tmpy=(y1+x_scaling)/2,y_scaling>EdrawMathDate.EDStatic.g_v_stretchsize&&(mid_tmpy=y1+this.font.pixelSize*EdrawMathDate.EDStatic.g_v_stretchsize/2-this.font.pixelSize*EdrawMathDate.EDStatic.g_draw_linewidth/4),painter.beginPath(),painter.moveTo(baseline,y1),painter.bezierCurveTo(x1,y1,x1,mid_y,x1,mid_y),y_scaling>EdrawMathDate.EDStatic.g_v_stretchsize&&(mid_tmpy=x_scaling-(mid_y-y1),painter.lineTo(x1,mid_y)),painter.bezierCurveTo(x1,mid_y,x1,x_scaling,baseline,x_scaling),painter.stroke(),!0):")"==symboltext?(mid_tmpy=(y1+x_scaling)/2,y_scaling>EdrawMathDate.EDStatic.g_v_stretchsize&&(mid_tmpy=y1+this.font.pixelSize*EdrawMathDate.EDStatic.g_v_stretchsize/2-this.font.pixelSize*EdrawMathDate.EDStatic.g_draw_linewidth/4),painter.beginPath(),painter.moveTo(x1,y1),painter.bezierCurveTo(baseline,y1,baseline,mid_y,baseline,mid_y),y_scaling>EdrawMathDate.EDStatic.g_v_stretchsize&&(mid_tmpy=x_scaling-(mid_y-y1),painter.lineTo(baseline,mid_y)),painter.bezierCurveTo(baseline,mid_y,baseline,x_scaling,x1,x_scaling),painter.stroke(),!0):"{"==symboltext?(mid_tmpy=(y1+x_scaling)/4,del_y=0,y_scaling>EdrawMathDate.EDStatic.g_v_stretchsize&&(mid_tmpy=del_y=(y1+this.font.pixelSize*EdrawMathDate.EDStatic.g_v_stretchsize/2-this.font.pixelSize*EdrawMathDate.EDStatic.g_draw_linewidth/4)/2),painter.beginPath(),painter.moveTo(baseline,y1),painter.bezierCurveTo(mid_x,y1,mid_x,mid_tmpy,mid_x,mid_tmpy),y_scaling>EdrawMathDate.EDStatic.g_v_stretchsize&&painter.lineTo(mid_x,mid_tmpy=mid_y-(del_y=mid_tmpy-y1)),painter.bezierCurveTo(mid_x,mid_tmpy,mid_x,mid_y,x1,mid_y),mid_tmpy=3*(y1+x_scaling)/4,y_scaling>EdrawMathDate.EDStatic.g_v_stretchsize&&(mid_tmpy=mid_y+del_y),painter.bezierCurveTo(mid_x,mid_y,mid_x,mid_tmpy,mid_x,mid_tmpy),y_scaling>EdrawMathDate.EDStatic.g_v_stretchsize&&painter.lineTo(mid_x,mid_tmpy=x_scaling-del_y),painter.bezierCurveTo(mid_x,mid_tmpy,mid_x,x_scaling,baseline,x_scaling),painter.stroke(),!0):"}"==symboltext?(mid_tmpy=(y1+x_scaling)/4,del_y=0,y_scaling>EdrawMathDate.EDStatic.g_v_stretchsize&&(mid_tmpy=del_y=(y1+this.font.pixelSize*EdrawMathDate.EDStatic.g_v_stretchsize/2-this.font.pixelSize*EdrawMathDate.EDStatic.g_draw_linewidth/4)/2),painter.beginPath(),painter.moveTo(x1,y1),painter.bezierCurveTo(mid_x,y1,mid_x,mid_tmpy,mid_x,mid_tmpy),y_scaling>EdrawMathDate.EDStatic.g_v_stretchsize&&painter.lineTo(mid_x,mid_tmpy=mid_y-(del_y=mid_tmpy-y1)),painter.bezierCurveTo(mid_x,mid_tmpy,mid_x,mid_y,baseline,mid_y),mid_tmpy=3*(y1+x_scaling)/4,y_scaling>EdrawMathDate.EDStatic.g_v_stretchsize&&(mid_tmpy=mid_y+del_y),painter.bezierCurveTo(mid_x,mid_y,mid_x,mid_tmpy,mid_x,mid_tmpy),y_scaling>EdrawMathDate.EDStatic.g_v_stretchsize&&painter.lineTo(mid_x,mid_tmpy=x_scaling-del_y),painter.bezierCurveTo(mid_x,mid_tmpy,mid_x,x_scaling,x1,x_scaling),painter.stroke(),!0):"["==symboltext?(tmpx=+(x1+baseline)/3,painter.beginPath(),painter.moveTo(baseline,y1),painter.lineTo(tmpx,y1),painter.lineTo(tmpx,x_scaling),painter.lineTo(baseline,x_scaling),painter.stroke(),!0):"]"==symboltext?(tmpx=2*(x1+baseline)/3,painter.beginPath(),painter.moveTo(x1,y1),painter.lineTo(tmpx,y1),painter.lineTo(tmpx,x_scaling),painter.lineTo(x1,x_scaling),painter.stroke(),!0):""==symboltext?(painter.beginPath(),painter.moveTo(baseline,y1),painter.lineTo(x1,mid_y),painter.lineTo(baseline,x_scaling),painter.stroke(),!0):""==symboltext?(painter.beginPath(),painter.moveTo(x1,y1),painter.lineTo(baseline,mid_y),painter.lineTo(x1,x_scaling),painter.stroke(),!0):"|"==symboltext?(painter.beginPath(),painter.moveTo(mid_x,y1),painter.lineTo(mid_x,x_scaling),painter.stroke(),!0):""==symboltext?(tmpx=2*(x1+baseline)/3,painter.beginPath(),painter.moveTo(tmpx,y1),painter.lineTo(tmpx,x_scaling),painter.stroke(),tmpx=(x1+baseline)/3,painter.beginPath(),painter.moveTo(tmpx,y1),painter.lineTo(tmpx,x_scaling),painter.stroke(),!0):""==symboltext?(painter.beginPath(),painter.moveTo(mid_x,y1),painter.lineTo(mid_x,x_scaling),painter.lineTo(baseline,x_scaling),painter.stroke(),!0):""==symboltext?(painter.beginPath(),painter.moveTo(mid_x,y1),painter.lineTo(mid_x,x_scaling),painter.lineTo(x1,x_scaling),painter.stroke(),!0):""==symboltext?(painter.beginPath(),painter.moveTo(baseline,y1),painter.lineTo(mid_x,y1),painter.lineTo(mid_x,x_scaling),painter.stroke(),!0):""==symboltext?(painter.beginPath(),painter.moveTo(x1,y1),painter.lineTo(mid_x,y1),painter.lineTo(mid_x,x_scaling),painter.stroke(),!0):""==symboltext?(painter.beginPath(),painter.moveTo(baseline,y1),painter.lineTo(x1,y1),painter.lineTo(x1,x_scaling),painter.lineTo(baseline,x_scaling),painter.stroke(),painter.beginPath(),painter.moveTo(mid_x,y1),painter.lineTo(mid_x,x_scaling),painter.stroke(),!0):""==symboltext&&(painter.beginPath(),painter.moveTo(x1,y1),painter.lineTo(baseline,y1),painter.lineTo(baseline,x_scaling),painter.lineTo(x1,x_scaling),painter.stroke(),painter.beginPath(),painter.moveTo(mid_x,y1),painter.lineTo(mid_x,x_scaling),painter.stroke(),!0)},EDMmlTextNode}(EdrawMathDate.EDMmlNode),EDMmlTextNode=(EdrawMathDate.EDMmlTextNode=EDMmlTextNode,function(_super){function EDMmlMoNode(document,attribute_map){document=_super.call(this,EDMathMlNodeType.MoNode,document,attribute_map)||this;return document._oper_spec=null,document._lspace=-1,document._rspace=-1,document}return __extends(EDMmlMoNode,_super),Object.defineProperty(EDMmlMoNode.prototype,"lspace",{get:function(){return-1!==this._lspace?this._lspace:null==this._oper_spec||null==this.parent||this.parent.nodeType!==EDMathMlNodeType.MrowNode&&this.parent.nodeType!==EDMathMlNodeType.MfencedNode&&this.parent.nodeType!==EDMathMlNodeType.UnknownNode||null==this.previousSibling||null==this.previousSibling&&null==this.nextSibling?0:this.interpretSpacing(this.dictionaryAttribute("lspace"),[!1])},enumerable:!1,configurable:!0}),Object.defineProperty(EDMmlMoNode.prototype,"rspace",{get:function(){return-1!==this._rspace?this._rspace:null==this._oper_spec||null==this.parent||this.parent.nodeType!==EDMathMlNodeType.MrowNode&&this.parent.nodeType!==EDMathMlNodeType.MfencedNode&&this.parent.nodeType!==EDMathMlNodeType.UnknownNode||null==this.previousSibling&&null==this.nextSibling?0:this.interpretSpacing(this.dictionaryAttribute("rspace"),[!1])},enumerable:!1,configurable:!0}),Object.defineProperty(EDMmlMoNode.prototype,"stretch",{get:function(){return this._oper_spec.stretch_dir},enumerable:!1,configurable:!0}),Object.defineProperty(EDMmlMoNode.prototype,"operSpec",{get:function(){return this._oper_spec},enumerable:!1,configurable:!0}),EDMmlMoNode.prototype.dictionaryAttribute=function(name){for(var p=this;null!=p;p=p.parent)if(p===this||p.nodeType===EDMathMlNodeType.MstyleNode){var expl_attr=p.explicitAttribute(name);if(null!=expl_attr)return expl_attr}return EdrawMathDate.EDStatic.mmlDictAttribute(name,this._oper_spec)},EDMmlMoNode.prototype.nodeStretch=function(){if(null!=this.parent&&null!=this._oper_spec&&(this._oper_spec.stretch_dir!==StretchDir.HStretch||this.parent.nodeType!==EDMathMlNodeType.MrowNode||null==this.previousSibling&&null==this.nextSibling)){var pmr=this.parent.myRect,pr=this.parentRect;switch(this._oper_spec.stretch_dir){case StretchDir.VStretch:var b=[this.parent.noneditable4child=!1,!1];this.parent.checkSpecialType_2(b),pr.height;b[1]&&this.stretchTo(new egRect(pr.left(),pmr.top(),pr.width,pmr.height));break;case StretchDir.HStretch:this.nodeType!=EDMathMlNodeType.MoNode||this.symbolType!=SymbolType.Arrow||this.parent.nodeType!=EDMathMlNodeType.MoverNode&&this.parent.nodeType!=EDMathMlNodeType.MunderNode||this.parent.firstChild==this||this.parent.firstChild.symbolType!==SymbolType.Arrow?this.stretchTo(new egRect(pmr.left(),pr.y,pmr.width,pr.height)):this.stretchTo(new egRect(pmr.left()+pmr.width/4,pr.y,pmr.width/2,pr.height));break;case StretchDir.HVStretch:this.stretchTo(pmr);break;case StretchDir.NoStretch:}}},EDMmlMoNode.prototype.toStr=function(){_super.prototype.toStr.call(this);return"str form = ".concat(this.form,"\n")},EDMmlMoNode.prototype.toMoNode=function(){return this},EDMmlMoNode.prototype.scriptlevel=function(child){return void 0===child&&(child=null),_super.prototype.scriptlevel.call(this)},EDMmlMoNode.prototype.layoutSymbol=function(){null!=this.firstChild&&(null==this._oper_spec&&(this._oper_spec=EdrawMathDate.EDStatic.mmlFindOperSpec(this.text,this.form()),"true"===this.dictionaryAttribute("largeop")&&this.parent.nodeType!==EDMathMlNodeType.MrowNode&&(this.fontSizeLevel=EdrawMathDate.EDStatic.g_largeop_multiplier,this.updateChildFont()),SymbolType.Normal!==this._oper_spec.symboltype&&(this.firstChild.symbolType=this._oper_spec.symboltype,this.symbolType=this._oper_spec.symboltype),this._lspace=this.lspace,this._rspace=this.rspace,null!=this.parent)&&(this.parent.updateFont(),this.parent.nodeLayout()),this.firstChild.relOrigin=new egPoint(0,0))},EDMmlMoNode.prototype.symbolRect=function(){var cmr;return null==this.firstChild?new egRect(0,0,0,0):(cmr=this.firstChild.myRect,new egRect(-this._lspace,cmr.top(),cmr.width+this._lspace+this._rspace,cmr.height))},EDMmlMoNode.prototype.form=function(){var value_str=this.inheritAttributeFromMrow("form");if(null!=value_str){var ok=[!1],value_str=EdrawMathDate.EDStatic.mmlInterpretForm(value_str,ok);if(ok[0])return value_str}return this.firstSibling===this&&this.lastSibling!==this?FormType.PrefixForm:this.lastSibling===this&&this.firstSibling!==this?FormType.PostfixForm:FormType.InfixForm},EDMmlMoNode}(EdrawMathDate.EDMmlTokenNode)),EDMmlTextNode=(EdrawMathDate.EDMmlMoNode=EDMmlTextNode,function(_super){function EDMmlMiNode(document,attribute_map){return _super.call(this,EDMathMlNodeType.MiNode,document,attribute_map)||this}return __extends(EDMmlMiNode,_super),EDMmlMiNode}(EdrawMathDate.EDMmlTokenNode)),EDMmlTextNode=(EdrawMathDate.EDMmlMiNode=EDMmlTextNode,function(_super){function EDMmlMnNode(document,attribute_map){return _super.call(this,EDMathMlNodeType.MnNode,document,attribute_map)||this}return __extends(EDMmlMnNode,_super),EDMmlMnNode}(EdrawMathDate.EDMmlTokenNode)),EDMmlTextNode=(EdrawMathDate.EDMmlMnNode=EDMmlTextNode,function(_super){function EDMmlMtextNode(document,attribute_map){return _super.call(this,EDMathMlNodeType.MtextNode,document,attribute_map)||this}return __extends(EDMmlMtextNode,_super),EDMmlMtextNode}(EdrawMathDate.EDMmlNode)),EDMmlTextNode=(EdrawMathDate.EDMmlMtextNode=EDMmlTextNode,function(_super){function EDMmlMfracNode(document,attribute_map){document=_super.call(this,EDMathMlNodeType.MfracNode,document,attribute_map)||this,attribute_map=document.explicitAttribute("bevelled");return document._bBevelled="true"===attribute_map,document}return __extends(EDMmlMfracNode,_super),Object.defineProperty(EDMmlMfracNode.prototype,"lineThickness",{get:function(){var line_thickness,linethickness_str=this.inheritAttributeFromMrow("linethickness",(.75*this.lineWidth).toString());return linethickness_str.toFloat()<1?1:"0.75"===linethickness_str?this.lineWidth:0!==linethickness_str.toFloat()?(line_thickness=this.interpretSpacing(linethickness_str,linethickness_str=[!1]),linethickness_str[0]&&0===line_thickness?line_thickness:1):0},enumerable:!1,configurable:!0}),Object.defineProperty(EDMmlMfracNode.prototype,"numerator",{get:function(){return null==this.firstChild?null:this.firstChild},enumerable:!1,configurable:!0}),Object.defineProperty(EDMmlMfracNode.prototype,"denominator",{get:function(){return null==this.numerator.nextSibling?null:this.numerator.nextSibling},enumerable:!1,configurable:!0}),EDMmlMfracNode.prototype.appendEduStr=function(str,edudata){void 0===edudata&&(edudata=null),str.length<=0||(this.numerator.appendEduStr(str,edudata),str[0]=str[0]+"/",this.denominator.appendEduStr(str,edudata))},EDMmlMfracNode.prototype.layoutHook=function(childIndex){1===childIndex&&this._document.appendRenderingData(this._nodeId,childIndex,this,EDRendAdjustBits.Nothing)},EDMmlMfracNode.prototype.scriptlevel=function(child){return void 0===child&&(child=null),_super.prototype.scriptlevel.call(this)},EDMmlMfracNode.prototype.layoutSymbol=function(){var num=this.numerator,denom=this.denominator,nu_rect=num.myRect,deno_rect=denom.myRect,spacing=0,line_thickness=(this._document.defaultMode&&(spacing=EdrawMathDate.EDStatic.g_mfrac_spacing*(nu_rect.height+deno_rect.height)),this.lineThickness);this._bBevelled?(num.relOrigin=new egPoint(-nu_rect.width,-nu_rect.bottom()),denom.relOrigin=new egPoint(0,-deno_rect.top())):(num.relOrigin=new egPoint(-.5*nu_rect.width,-spacing-nu_rect.bottom()-3*line_thickness),denom.relOrigin=new egPoint(-.5*deno_rect.width,spacing-deno_rect.top()+3*line_thickness))},EDMmlMfracNode.prototype.paintSymbol=function(painter,x_scaling,y_scaling,outputPng){var deno_rect,tan,ddrect;_super.prototype.paintSymbol.call(this,painter,x_scaling,y_scaling,outputPng=void 0===outputPng?!1:outputPng),0!==this.lineThickness&&(painter.save(),x_scaling=1<this.font.pixelSize*EdrawMathDate.EDStatic.g_base_line_multiplier?this.font.pixelSize*EdrawMathDate.EDStatic.g_base_line_multiplier:1,painter.lineWidth!==x_scaling&&(painter.lineWidth=x_scaling),painter.strokeStyle,(y_scaling=this.symbolRect()).moveTopLeft(this.devicePoint(y_scaling.topLeft())),outputPng=y_scaling,this._document.updateRenderingData(this._nodeId,1,outputPng),painter.save(),this._bBevelled?(this._ctx.font!==this.font.fontstring()&&(this._ctx.font=this.font.fontstring()),x_scaling=this.deviceRect,outputPng=this.numerator.myRect,deno_rect=this.denominator.myRect,ddrect=this.denominator.deviceRect,tan=+this._ctx.measureText("0").width/this.font.pixelSize,deno_rect=(0-deno_rect.height)*tan,outputPng=+outputPng.height*tan,tan=new egPoint(ddrect.x+outputPng,x_scaling.top()),ddrect=new egPoint(ddrect.x+deno_rect,x_scaling.bottom()),painter.beginPath(),painter.moveTo(ddrect.x,ddrect.y),painter.lineTo(tan.x,tan.y)):(tan=new egPoint(y_scaling.left()+.1*this.font.pixelSize,y_scaling.center().y),ddrect=new egPoint(y_scaling.right()-.1*this.font.pixelSize,y_scaling.center().y),painter.beginPath(),painter.moveTo(tan.x,tan.y),painter.lineTo(ddrect.x,ddrect.y)),painter.closePath(),painter.stroke(),painter.restore())},EDMmlMfracNode.prototype.symbolRect=function(){var tan,nu_rect=this.numerator.myRect,deno_rect=this.denominator.myRect,spacing=EdrawMathDate.EDStatic.g_mfrac_spacing*(nu_rect.height+deno_rect.height),my_width=nu_rect.width,spacing=(0<deno_rect.width-nu_rect.width&&(my_width=deno_rect.width),my_width+=2*spacing,this.lineThickness);return this._bBevelled?(nu_rect.unite(deno_rect),this._ctx.font!==this.font.fontstring()&&(this._ctx.font=this.font.fontstring()),tan=+this._ctx.measureText("0").width/this.font.pixelSize,deno_rect=(0-deno_rect.height)*tan,nu_rect=+nu_rect.height*tan,new egRect(deno_rect,this.denominator.deviceRect.top(),nu_rect-deno_rect,1)):new egRect(-.5*(my_width+spacing),-.5*spacing,my_width+spacing,spacing)},EDMmlMfracNode}(EdrawMathDate.EDMmlNode)),EDMmlTextNode=(EdrawMathDate.EDMmlMfracNode=EDMmlTextNode,function(_super){function EDMmlRootBaseNode(type,document,attribute_map){return _super.call(this,type,document,attribute_map)||this}return __extends(EDMmlRootBaseNode,_super),Object.defineProperty(EDMmlRootBaseNode.prototype,"base",{get:function(){return this.firstChild},enumerable:!1,configurable:!0}),Object.defineProperty(EDMmlRootBaseNode.prototype,"index",{get:function(){var b=this.base;return null==b?null:b.nextSibling},enumerable:!1,configurable:!0}),EDMmlRootBaseNode.prototype.scriptlevel=function(child){void 0===child&&(child=null);var sl=_super.prototype.scriptlevel.call(this),i=this.index;return null!=child&&child===i?sl+1:sl},EDMmlRootBaseNode.prototype.appendEduStr=function(str,edudata){if(void 0===edudata&&(edudata=null),!(str.length<=0)){str[0]=str[0]+"(";this.base.appendEduStr(str,edudata),str[0]=str[0]+")^(1.0/";var index=this.index;if(null!=index){var tmp=str[0],index=(index.appendEduStr(str,edudata),str[0].replace(tmp,"")),tmp=math.simplify(math.parse(index)).toString();try{var mathresult=math.eval(tmp).toString().toFloat();isNaN(mathresult)||null==edudata||edudata.rootnum.push(mathresult),str[0]=str[0]+")"}catch(exception){str[0]=str[0]+")"}}else str[0]=str[0]+"2)"}},EDMmlRootBaseNode.prototype.layoutSymbol=function(){var i_rect,b=this.base,b=(null!=b&&(b.relOrigin=new egPoint(0,0)),this.index);null!=b&&(i_rect=b.myRect,b.relOrigin=new egPoint(-.35*this.radicalRect().width-i_rect.width,this.symbolRect().center().y-.5*i_rect.height))},EDMmlRootBaseNode.prototype.paintSymbol=function(painter,x_scaling,y_scaling,outputPng){_super.prototype.paintSymbol.call(this,painter,x_scaling,y_scaling,outputPng=void 0===outputPng?!1:outputPng),painter.save(),painter.lineWidth=this.font.pixelSize*EdrawMathDate.EDStatic.g_draw_linewidth;for(var x_scaling=this.symbolRect(),radical_rect=(x_scaling.moveTopLeft(this.devicePoint(x_scaling.topLeft())),this.radicalRect()),rect=new egRect(x_scaling.x,x_scaling.y,x_scaling.width,x_scaling.height),radical_points=(painter.translate(rect.left(),rect.bottom()),[]),i=0;i<EdrawMathDate.EDStatic.g_radical_points_size;++i)radical_points.push(new egPoint(radical_rect.width*EdrawMathDate.EDStatic.g_radical_points[i].x,-rect.height*EdrawMathDate.EDStatic.g_radical_points[i].y));var y_scaling=radical_points[2].x,outputPng=radical_points[2].y,x3=radical_points[3].x,y3=radical_points[3].y,x_scaling=(radical_points[4].x=x_scaling.width,radical_points[5].x=x_scaling.width,radical_points[3].y=-x_scaling.height,radical_points[4].y=-x_scaling.height,radical_points[3].y);radical_points[3].x=y_scaling+(x3-y_scaling)*(x_scaling-outputPng)/(y3-outputPng),painter.strokeStyle,painter.lineWidth=1,painter.beginPath(),painter.moveTo(radical_points[0].x,radical_points[0].y);for(i=1;i<radical_points.length;++i)painter.lineTo(radical_points[i].x,radical_points[i].y);painter.closePath(),painter.stroke(),painter.fill(),painter.restore()},EDMmlRootBaseNode.prototype.symbolRect=function(){var base_rect=this.baseRect(),radical_margin=this.radicalMargin(),radical_width=this.radicalRect().width,radical_line_width=this.radicalLineWidth(),height=base_rect.height+radical_line_width+ +radical_margin;return new egRect(-radical_width,base_rect.top()-+radical_margin-radical_line_width,radical_width+base_rect.width,height)},EDMmlRootBaseNode.prototype.baseRect=function(){var b=this.base;return null==b?(this._ctx.font!==this.font.fontstring()&&(this._ctx.font=this.font.fontstring()),new egRect(0,this.basePos(),this._ctx.measureText("0").width,this.font.pixelSize)):b.myRect},EDMmlRootBaseNode.prototype.radicalRect=function(){return this._ctx.font!==this.font.fontstring()&&(this._ctx.font=this.font.fontstring()),new egRect(0,this.basePos(),this._ctx.measureText("").width,this.font.pixelSize)},EDMmlRootBaseNode.prototype.radicalMargin=function(){return EdrawMathDate.EDStatic.g_mroot_base_margin*this.baseRect().height},EDMmlRootBaseNode.prototype.radicalLineWidth=function(){return EdrawMathDate.EDStatic.g_mroot_base_line*this.lineWidth},EDMmlRootBaseNode}(EdrawMathDate.EDMmlNode)),EDMmlMrootNode=function(_super){function EDMmlMrootNode(document,attribute_map){return _super.call(this,EDMathMlNodeType.MrootNode,document,attribute_map)||this}return __extends(EDMmlMrootNode,_super),EDMmlMrootNode}(EdrawMathDate.EDMmlRootBaseNode=EDMmlTextNode),EDMmlMrootNode=(EdrawMathDate.EDMmlMrootNode=EDMmlMrootNode,function(_super){function EDMmlMsqrtNode(document,attribute_map){return _super.call(this,EDMathMlNodeType.MsqrtNode,document,attribute_map)||this}return __extends(EDMmlMsqrtNode,_super),EDMmlMsqrtNode}(EDMmlTextNode));EdrawMathDate.EDMmlMsqrtNode=EDMmlMrootNode}(EdrawMathDate=EdrawMathDate||{}),this&&this.__extends||function(){var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])}))(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}()),EDMathMLDocument=(!function(EdrawMathDate){var EDMmlSubsupBaseNode=function(_super){function EDMmlSubsupBaseNode(type,document,attribute_map){return _super.call(this,type,document,attribute_map)||this}return __extends(EDMmlSubsupBaseNode,_super),Object.defineProperty(EDMmlSubsupBaseNode.prototype,"base",{get:function(){return null==this.firstChild?null:this.firstChild},enumerable:!1,configurable:!0}),Object.defineProperty(EDMmlSubsupBaseNode.prototype,"sscript",{get:function(){return null==this.base.nextSibling?null:this.base.nextSibling},enumerable:!1,configurable:!0}),EDMmlSubsupBaseNode.prototype.scriptlevel=function(child){void 0===child&&(child=null);var base=this.base;if(null!=base){var sl,base=this.sscript;if(null!=base)return sl=_super.prototype.scriptlevel.call(this),null!=child&&child===base?sl+1:sl}},EDMmlSubsupBaseNode}(EdrawMathDate.EDMmlNode),EDMmlMsupNode=function(_super){function EDMmlMsupNode(document,attribute_map){return _super.call(this,EDMathMlNodeType.MsupNode,document,attribute_map)||this}return __extends(EDMmlMsupNode,_super),EDMmlMsupNode.prototype.appendEduStr=function(str,edudata){var sscript;void 0===edudata&&(edudata=null),str.length<=0||(str[0]=str[0]+"(",this.base.appendEduStr(str,edudata),str[0]=str[0]+")^(",null!=(sscript=this.sscript)?(sscript.appendEduStr(str,edudata),str[0]=str[0]+")"):str[0]=str[0]+"1)")},EDMmlMsupNode.prototype.layoutSymbol=function(){var b=this.base,s=this.sscript,ispre=!1;b.firstChild.nodeType!=EDMathMlNodeType.MtextNode||""!=b.firstChild.firstChild.toTextNode().text||b.firstChild.nextSibling||this.previousSibling&&(ispre=!0),b.relOrigin=new egPoint(-b.myRect.width,0),s.relOrigin=new egPoint(this.interpretSpacing(EdrawMathDate.EDStatic.g_subsup_spacing,[!1]),ispre?this.previousSibling.myRect.top()+EdrawMathDate.EDStatic.g_sub_shift_multiplier*s.myRect.height*.5:b.myRect.top()+EdrawMathDate.EDStatic.g_sup_shift_multiplier*s.myRect.height*.5)},EDMmlMsupNode}(EdrawMathDate.EDMmlSubsupBaseNode=EDMmlSubsupBaseNode),EDMmlMsupNode=(EdrawMathDate.EDMmlMsupNode=EDMmlMsupNode,function(_super){function EDMmlMsubNode(document,attribute_map){return _super.call(this,EDMathMlNodeType.MsubNode,document,attribute_map)||this}return __extends(EDMmlMsubNode,_super),EDMmlMsubNode.prototype.appendEduStr=function(str,edudata){if(void 0===edudata&&(edudata=null),!(str.length<=0)){var islog=!1,tmpstr=str[0],sscript=(this.base.appendEduStr(str,edudata),"(log)"===str[0].replace(tmpstr,"")&&(islog=!0,str[0]=str[0].replace("(log)","")),tmpstr=str[0],this.sscript);if(null!=sscript&&(sscript.appendEduStr(str,edudata),islog)){sscript=tmpstr=str[0].replace(tmpstr,""),islog=(str[0]=str[0].replace(tmpstr,""),math.simplify(math.parse(sscript)).toString());try{var mathresult=math.eval(islog).toString().toFloat();isNaN(mathresult)||null==edudata||(edudata.lognum.push(mathresult),str[0]=str[0]+"log".concat(islog))}catch(exception){}}}},EDMmlMsubNode.prototype.layoutSymbol=function(){var b=this.base,s=this.sscript,ispre=!1;b.firstChild.nodeType!=EDMathMlNodeType.MtextNode||""!=b.firstChild.firstChild.toTextNode().text||b.firstChild.nextSibling||this.previousSibling&&(ispre=!0),b.relOrigin=new egPoint(-b.myRect.width,0),s.relOrigin=new egPoint(this.interpretSpacing(EdrawMathDate.EDStatic.g_subsup_spacing,[!1]),ispre?this.previousSibling.myRect.bottom()-EdrawMathDate.EDStatic.g_sub_shift_multiplier*s.myRect.height*.5:b.myRect.bottom()-EdrawMathDate.EDStatic.g_sub_shift_multiplier*s.myRect.height*.5)},EDMmlMsubNode}(EDMmlSubsupBaseNode)),EDMmlSubsupBaseNode=(EdrawMathDate.EDMmlMsubNode=EDMmlMsupNode,function(_super){function EDMmlMsubsupNode(document,attribute_map){return _super.call(this,EDMathMlNodeType.MsubsupNode,document,attribute_map)||this}return __extends(EDMmlMsubsupNode,_super),Object.defineProperty(EDMmlMsubsupNode.prototype,"base",{get:function(){return null==this.firstChild?null:this.firstChild},enumerable:!1,configurable:!0}),Object.defineProperty(EDMmlMsubsupNode.prototype,"superscript",{get:function(){return null==this.subscript.nextSibling?null:this.subscript.nextSibling},enumerable:!1,configurable:!0}),Object.defineProperty(EDMmlMsubsupNode.prototype,"subscript",{get:function(){return null==this.base.nextSibling?null:this.base.nextSibling},enumerable:!1,configurable:!0}),EDMmlMsubsupNode.prototype.scriptlevel=function(child){void 0===child&&(child=null);var sl=_super.prototype.scriptlevel.call(this),base=this.base;if(null!=base){base=this.subscript;if(null!=base){var sup=this.superscript;if(null!=sup)return null==child||child!==sup&&child!==base?sl:sl+1}}},EDMmlMsubsupNode.prototype.layoutSymbol=function(){var b=this.base,sub=this.subscript,sup=this.superscript,subsup_spacing=(b.relOrigin=new egPoint(-b.myRect.width,0),sub.myRect,sup.myRect,this.interpretSpacing(EdrawMathDate.EDStatic.g_subsup_spacing,[!1])),ispre=!1;b.firstChild.nodeType!=EDMathMlNodeType.MtextNode||""!=b.firstChild.firstChild.toTextNode().text||b.firstChild.nextSibling||this.previousSibling&&(ispre=!0),ispre?(sub.relOrigin=new egPoint(subsup_spacing,this.previousSibling.myRect.bottom()-EdrawMathDate.EDStatic.g_sub_shift_multiplier*sub.myRect.height*.5),sup.relOrigin=new egPoint(subsup_spacing,this.previousSibling.myRect.top()+EdrawMathDate.EDStatic.g_sup_shift_multiplier*sup.myRect.height*.5)):(sub.relOrigin=new egPoint(subsup_spacing,b.myRect.bottom()-EdrawMathDate.EDStatic.g_sub_shift_multiplier*sub.myRect.height*.5),sup.relOrigin=new egPoint(subsup_spacing,b.myRect.top()+EdrawMathDate.EDStatic.g_sup_shift_multiplier*sup.myRect.height*.5))},EDMmlMsubsupNode}(EdrawMathDate.EDMmlNode)),EDMmlMsupNode=(EdrawMathDate.EDMmlMsubsupNode=EDMmlSubsupBaseNode,function(_super){function EDMmlMencloseNode(document,attribute_map){document=_super.call(this,EDMathMlNodeType.MencloseNode,document,attribute_map)||this;return attribute_map.has("notation")?document._strSymbol=attribute_map.get("notation"):document._strSymbol="longdiv",document}return __extends(EDMmlMencloseNode,_super),EDMmlMencloseNode.prototype.layoutSymbol=function(){_super.prototype.layoutSymbol.call(this)},EDMmlMencloseNode.prototype.symbolRect=function(){for(var text,longdiv,child=this.firstChild,rectf=child.deviceRect;null!=child;child=child.nextSibling)rectf.united(child.deviceRect);return rectf.x=0,rectf.y=.5*-rectf.height,this._ctx.font!==this.font.fontstring()&&(this._ctx.font=this.font.fontstring()),null!=this._strSymbol.match("longdiv")&&(text=new egRect(0,0,.5*this._ctx.measureText(")").width,this.font.pixelSize),longdiv=new egRect(-text.width,.5*-rectf.height,rectf.width+.5*text.width,rectf.height),rectf.united(longdiv)),null!=this._strSymbol.match("radical")&&(text=new egRect(0,0,this._ctx.measureText("").width,this.font.pixelSize),longdiv=new egRect(-text.width,.5*-rectf.height,rectf.width+text.width,rectf.height),rectf.united(longdiv)),null!=this._strSymbol.match("circle")&&rectf.united(new egRect(.25*-rectf.width,.5*-rectf.height-.125*rectf.height,1.5*rectf.width,1.25*rectf.height)),null!=this._strSymbol.match("updiagonalarrow")&&(text=new egRect(0,0,this._ctx.measureText(")").width,this.font.pixelSize),longdiv=new egRect(0,.5*-rectf.height,rectf.width,rectf.height),rectf.united(longdiv)),null!=this._strSymbol.match("phasorangle")&&(text=new egRect(0,0,this._ctx.measureText("").width,this.font.pixelSize),longdiv=new egRect(-text.width,.5*-rectf.height,rectf.width+text.width,rectf.height),rectf.united(longdiv)),rectf},EDMmlMencloseNode.prototype.paintSymbol=function(painter,x_scaling,y_scaling,outputPng){_super.prototype.paintSymbol.call(this,painter,x_scaling,y_scaling,outputPng=void 0===outputPng?!1:outputPng),painter.save();var r,ratioX,ratioY,text,x_scaling=this.deviceRect,y_scaling=1<this.font.pixelSize*EdrawMathDate.EDStatic.g_base_line_multiplier?this.font.pixelSize*EdrawMathDate.EDStatic.g_base_line_multiplier:1;painter.lineWidth!==y_scaling&&(painter.lineWidth=y_scaling),painter.strokeStyle,"bevel"!==painter.lineJoin&&(painter.lineJoin="bevel"),this._ctx.font!==this.font.fontstring()&&(this._ctx.font=this.font.fontstring()),null!=this._strSymbol.match("longdiv")&&(text=new egRect(0,0,this._ctx.measureText(")").width,this.font.pixelSize),painter.beginPath(),painter.moveTo(x_scaling.left(),x_scaling.bottom()),painter.quadraticCurveTo(x_scaling.left()+text.width,x_scaling.center().y,x_scaling.left(),x_scaling.top()),painter.lineTo(x_scaling.right(),x_scaling.top()),painter.stroke()),null!=this._strSymbol.match("actuarial")&&(painter.beginPath(),painter.moveTo(x_scaling.left(),x_scaling.top()),painter.lineTo(x_scaling.right(),x_scaling.top()),painter.lineTo(x_scaling.right(),x_scaling.bottom()),painter.closePath(),painter.stroke()),null!=this._strSymbol.match("radical")&&(painter.restore(),painter.save(),text=new egRect(0,0,this._ctx.measureText("").width,this.font.pixelSize),painter.font!==this.font.fontstring()&&(painter.font=this.font.fontstring()),painter.restore(),painter.save()),null!=this._strSymbol.match("roundedbox")?(text=new egRect(0,0,this._ctx.measureText("1").width,this.font.pixelSize),painter.beginPath(),painter.moveTo(x_scaling.left(),x_scaling.top()+.5*text.width),painter.lineTo(x_scaling.left(),x_scaling.bottom()-.5*text.width),painter.arc(x_scaling.left(),x_scaling.bottom(),x_scaling.left()+.5*text.width,x_scaling.bottom(),.5*text.width),painter.lineTo(x_scaling.right()-.5*text.width,x_scaling.bottom()),painter.arc(x_scaling.right(),x_scaling.bottom(),x_scaling.right(),x_scaling.bottom()-.5*text.width,.5*text.width),painter.lineTo(x_scaling.right(),x_scaling.top()+.5*text.width),painter.arc(x_scaling.right(),x_scaling.top(),x_scaling.right()-.5*text.width,x_scaling.top(),.5*text.width),painter.lineTo(x_scaling.left()-.5*text.width,x_scaling.top()),painter.arc(x_scaling.left(),x_scaling.top(),x_scaling.left(),x_scaling.top()-.5*text.width,.5*text.width),painter.closePath(),painter.stroke()):null!=this._strSymbol.match("box")&&(painter.beginPath(),painter.moveTo(x_scaling.left(),x_scaling.top()),painter.lineTo(x_scaling.left(),x_scaling.bottom()),painter.lineTo(x_scaling.right(),x_scaling.bottom()),painter.lineTo(x_scaling.right(),x_scaling.top()),painter.lineTo(x_scaling.left(),x_scaling.top()),painter.closePath(),painter.stroke()),null!=this._strSymbol.match("circle")&&(painter.restore(),painter.save(),ratioX=(outputPng=.5*x_scaling.width)/(r=(y_scaling=.5*x_scaling.height)<outputPng?outputPng:y_scaling),ratioY=y_scaling/r,painter.translate(x_scaling.left(),x_scaling.top()),painter.scale(ratioX,ratioY),painter.beginPath(),painter.arc(outputPng/ratioX,y_scaling/ratioY,r,0,2*Math.PI,!1),painter.closePath(),painter.stroke(),painter.restore()),null!=this._strSymbol.match("left")&&(painter.beginPath(),painter.moveTo(x_scaling.left(),x_scaling.top()),painter.lineTo(x_scaling.left(),x_scaling.bottom()),painter.closePath(),painter.stroke()),null!=this._strSymbol.match("right")&&(painter.beginPath(),painter.moveTo(x_scaling.right(),x_scaling.top()),painter.lineTo(x_scaling.right(),x_scaling.bottom()),painter.closePath(),painter.stroke()),null!=this._strSymbol.match("top")&&(painter.beginPath(),painter.moveTo(x_scaling.left(),x_scaling.top()),painter.lineTo(x_scaling.right(),x_scaling.top()),painter.closePath(),painter.stroke()),null!=this._strSymbol.match("bottom")&&(painter.beginPath(),painter.moveTo(x_scaling.left(),x_scaling.bottom()),painter.lineTo(x_scaling.right(),x_scaling.bottom()),painter.closePath(),painter.stroke()),null!=this._strSymbol.match("updiagonalstrike")&&(painter.beginPath(),painter.moveTo(x_scaling.left(),x_scaling.bottom()),painter.lineTo(x_scaling.right(),x_scaling.top()),painter.closePath(),painter.stroke()),null!=this._strSymbol.match("downdiagonalstrike")&&(painter.beginPath(),painter.moveTo(x_scaling.left(),x_scaling.top()),painter.lineTo(x_scaling.right(),x_scaling.bottom()),painter.closePath(),painter.stroke()),null!=this._strSymbol.match("verticalstrike")&&(painter.beginPath(),painter.moveTo(x_scaling.center().x,x_scaling.top()),painter.lineTo(x_scaling.center().x,x_scaling.bottom()),painter.closePath(),painter.stroke()),null!=this._strSymbol.match("horizontalstrike")&&(painter.beginPath(),painter.moveTo(x_scaling.left(),x_scaling.center().y),painter.lineTo(x_scaling.right(),x_scaling.center().y),painter.closePath(),painter.stroke()),null!=this._strSymbol.match("madruwb")&&(painter.beginPath(),painter.moveTo(x_scaling.left(),x_scaling.bottom()),painter.lineTo(x_scaling.right(),x_scaling.bottom()),painter.lineTo(x_scaling.right(),x_scaling.top()),painter.closePath(),painter.stroke()),null!=this._strSymbol.match("updiagonalarrow")&&(painter.restore(),painter.save(),painter.translate(x_scaling.left(),x_scaling.bottom()),text=new egRect(0,0,this._ctx.measureText("").width,this.font.pixelSize),outputPng=-Math.atan(x_scaling.height/x_scaling.width),painter.rotate(outputPng),painter.font!==this.font.fontstring()&&(painter.font=this.font.fontstring()),x_scaling.width>x_scaling.height?painter.scale(+x_scaling.width/text.width,+x_scaling.height/text.height):painter.scale(+x_scaling.height/text.width,+x_scaling.width/text.height),"middle"!==painter.textBaseline&&(painter.textBaseline="middle"),painter.fillText("",0,0),painter.restore(),painter.save()),null!=this._strSymbol.match("phasorangle")&&(painter.restore(),painter.save(),painter.translate(x_scaling.left(),x_scaling.center().y),text=new egRect(0,0,this._ctx.measureText("").width,this.font.pixelSize),painter.font!==this.font.fontstring()&&(painter.font=this.font.fontstring()),painter.scale(1,+x_scaling.height/text.height),"middle"!==painter.textBaseline&&(painter.textBaseline="middle"),painter.fillText("",0,0),painter.restore(),painter.save()),painter.restore()},EDMmlMencloseNode}(EdrawMathDate.EDMmlNode)),EDMmlSubsupBaseNode=(EdrawMathDate.EDMmlMencloseNode=EDMmlMsupNode,function(_super){function EDMmlTableBaseNode(type,document,attribute_map){return _super.call(this,type,document,attribute_map)||this}return __extends(EDMmlTableBaseNode,_super),EDMmlTableBaseNode}(EdrawMathDate.EDMmlNode)),EDMmlMsupNode=function(_super){function EDMmlMtableNode(document,attribute_map){document=_super.call(this,EDMathMlNodeType.MtableNode,document,attribute_map)||this;return document._cell_size_data=new EdrawMathDate.CellSizeData,document._content_width=0,document._content_height=0,document}return __extends(EDMmlMtableNode,_super),Object.defineProperty(EDMmlMtableNode.prototype,"frame",{get:function(){var value=this.explicitAttribute("frame","none");return EdrawMathDate.EDStatic.mmlInterpretFrameType(value,0,[!1])},enumerable:!1,configurable:!0}),EDMmlMtableNode.prototype.rowspacing=function(){var spacing,value=this.explicitAttribute("rowspacing");return null==value?.5*this.ex:(spacing=this.interpretSpacing(value,value=[!1]),value[0]?spacing:this.ex)},EDMmlMtableNode.prototype.columnspacing=function(){var spacing,value=this.explicitAttribute("columnspacing");return null==value?+this.ex:(spacing=this.interpretSpacing(value,value=[!1]),value[0]?spacing:this.em)},EDMmlMtableNode.prototype.framespacing_hor=function(){var value,fs;return this.frame===FrameType.FrameNone?0*this.em:(value=this.explicitAttribute("framespacing","0.25em 0.25ex"),fs=EdrawMathDate.EDStatic.mmlInterpretFrameSpacing(value,this.em,this.ex,value=[!1],this.baseFontPixelSize),value[0]?fs.hor:.125*this.em)},EDMmlMtableNode.prototype.framespacing_ver=function(){var value,fs;return this.frame===FrameType.FrameNone?0*this.em:(value=this.explicitAttribute("framespacing","0.25em 0.25ex"),fs=EdrawMathDate.EDStatic.mmlInterpretFrameSpacing(value,this.em,this.ex,value=[!1],this.baseFontPixelSize),value[0]?fs.ver:.125*this.ex)},EDMmlMtableNode.prototype.columnlines=function(idx){var value=this.explicitAttribute("columnlines","none");return EdrawMathDate.EDStatic.mmlInterpretFrameType(value,idx,[!1])},EDMmlMtableNode.prototype.rowlines=function(idx){var value=this.explicitAttribute("rowlines","none");return EdrawMathDate.EDStatic.mmlInterpretFrameType(value,idx,[!1])},EDMmlMtableNode.prototype.axisalign=function(){var val=this.explicitAttribute("align"),axis=-1;return null==val?-1:null!=val.match("axis ")?val.slice(5).toInt():axis},EDMmlMtableNode.prototype.layoutSymbol=function(){this._cell_size_data.init(this.firstChild);for(var col_spc=this.columnspacing(),row_spc=this.rowspacing(),frame_spc_hor=this.framespacing_hor(),columnwidth_attr=this.explicitAttribute("columnwidth","auto"),col_width_sum=this._cell_size_data.colWidthSum(),width_set_by_user=!1,width_str=this.explicitAttribute("width","auto"),fixed_width_sum=("auto"!==width_str&&(w=this.interpretSpacing(width_str,ok=[!1]),ok[0])&&(col_width_sum=w-col_spc*(this._cell_size_data.numCols()-1)-2*frame_spc_hor,width_set_by_user=!0),0),auto_width_sum=0,relative_width_sum=0,relative_fraction_sum=0,i=0;i<this._cell_size_data.numCols();++i)if("auto"===(value=EdrawMathDate.EDStatic.mmlInterpretListAttr(columnwidth_attr,i,"auto"))||"fit"===value)auto_width_sum+=this._cell_size_data.col_widths[i];else{var ok=[!1],w=this.interpretSpacing(value,ok);if(ok[0])fixed_width_sum+=this._cell_size_data.col_widths[i]=w;else{if(value.endsWith("%")){var factor=(value=value.slice(0,value.length-1)).toFloat();if(ok[0]&&0<factor){factor*=.01,relative_width_sum+=this._cell_size_data.col_widths[i],relative_fraction_sum+=factor,width_set_by_user||col_width_sum<(factor=this._cell_size_data.col_widths[i]/factor)&&(col_width_sum=factor);continue}}auto_width_sum+=this._cell_size_data.col_widths[i]}}var width_str=col_width_sum-relative_fraction_sum*col_width_sum-fixed_width_sum,auto_width_scale=(!width_set_by_user&&width_str<auto_width_sum&&(col_width_sum=relative_fraction_sum<1?(fixed_width_sum+auto_width_sum)/(1-relative_fraction_sum):fixed_width_sum+auto_width_sum+relative_width_sum,width_str=auto_width_sum),1);0<auto_width_sum&&(auto_width_scale=width_str/auto_width_sum);for(var value,i=0;i<this._cell_size_data.numCols();++i)(value=EdrawMathDate.EDStatic.mmlInterpretListAttr(columnwidth_attr,i,"auto")).endsWith("%")?(w=EdrawMathDate.EDStatic.mmlInterpretPercentSpacing(value,col_width_sum,ok=[!1]),ok[0]?this._cell_size_data.col_widths[i]=w:this._cell_size_data.col_widths[i]=auto_width_scale*this._cell_size_data.col_widths[i]):"auto"===value&&(this._cell_size_data.col_widths[i]=auto_width_scale*this._cell_size_data.col_widths[i]);this._content_width=this._cell_size_data.colWidthSum()+col_spc*(this._cell_size_data.numCols()-1),this._content_height=this._cell_size_data.rowHeightSum()+row_spc*(this._cell_size_data.numRows()-1);var bottom=.5*-this._content_height,frame_spc_hor=this.axisalign(),axis_spac=0;if(frame_spc_hor<=this._cell_size_data.numRows()&&0<frame_spc_hor)for(axis_spac=.5*this._cell_size_data.row_heights[frame_spc_hor-1],i=frame_spc_hor;i<this._cell_size_data.numRows();++i)axis_spac=axis_spac+this._cell_size_data.row_heights[i]+row_spc;0!==axis_spac&&(bottom=-this._content_height+axis_spac);for(var child=this.firstChild;null!=child;child=child.nextSibling){if(child.nodeType!==EDMathMlNodeType.MtrNode)return;var row=child,rmr=(row.layoutCells(this._cell_size_data.col_widths,col_spc),row.myRect);row.relOrigin=new egPoint(0,bottom-rmr.top()),bottom+=rmr.height+row_spc}},EDMmlMtableNode.prototype.symbolRect=function(){var frame_spc_hor=this.framespacing_hor(),frame_spc_ver=this.framespacing_ver(),axis=this.axisalign(),axis_spac=0;if(axis<=this._cell_size_data.numRows()&&0<axis)for(var axis_spac=.5*this._cell_size_data.row_heights[axis-1],i=axis;i<this._cell_size_data.numRows();++i)axis_spac=(axis_spac+=this._cell_size_data.row_heights[i])+this.rowspacing();axis=.5*(-this._content_height-2*frame_spc_ver);return 0!==axis_spac&&(axis=-this._content_height-+frame_spc_ver+axis_spac),new egRect(-frame_spc_hor,axis,this._content_width+2*frame_spc_hor,this._content_height+2*frame_spc_ver)},EDMmlMtableNode.prototype.paintSymbol=function(painter,x_scaling,y_scaling,outputPng){_super.prototype.paintSymbol.call(this,painter,x_scaling,y_scaling,outputPng=void 0===outputPng?!1:outputPng),painter.save();for(var x_scaling=this.devicePoint(new egPoint(0,0)),y_scaling=(painter.translate(x_scaling.x,x_scaling.y),this.frame),col_spc=(y_scaling!==FrameType.FrameNone&&(y_scaling===FrameType.FrameDashed&&painter.setLineDash([5,5]),painter.strokeRect(this.myRect.x,this.myRect.y,this.myRect.width,this.myRect.height)),this.columnspacing()),row_spc=this.rowspacing(),col_offset=0,i=0;i<this._cell_size_data.numCols()-1;++i){var frame_type_1=this.columnlines(i);col_offset+=this._cell_size_data.col_widths[i],frame_type_1!==FrameType.FrameNone&&(frame_type_1===FrameType.FrameDashed?painter.setLineDash([5,5]):frame_type_1===FrameType.FrameSolid&&painter.setLineDash([]),frame_type_1=col_offset+.5*col_spc,painter.beginPath(),painter.moveTo(frame_type_1,-.5*this._content_height),painter.lineTo(frame_type_1,.5*this._content_height),painter.closePath(),painter.stroke()),col_offset+=col_spc}for(var row_offset=0,i=0;i<this._cell_size_data.numRows()-1;++i){var frame_type_2=this.rowlines(i);row_offset+=this._cell_size_data.row_heights[i],frame_type_2!==FrameType.FrameNone&&(frame_type_2===FrameType.FrameDashed?painter.setLineDash([1,5]):frame_type_2===FrameType.FrameSolid&&painter.setLineDash([]),frame_type_2=row_offset+.5*(row_spc-this._content_height),painter.beginPath(),painter.moveTo(0,frame_type_2),painter.lineTo(this._content_width,frame_type_2),painter.closePath(),painter.stroke()),row_offset+=row_spc}painter.restore()},EDMmlMtableNode}(EdrawMathDate.EDMmlTableBaseNode=EDMmlSubsupBaseNode),EDMmlMsupNode=(EdrawMathDate.EDMmlMtableNode=EDMmlMsupNode,function(_super){function EDMmlMtrNode(document,attribute_map){return _super.call(this,EDMathMlNodeType.MtrNode,document,attribute_map)||this}return __extends(EDMmlMtrNode,_super),EDMmlMtrNode.prototype.layoutCells=function(col_widths,col_spc){for(var mr=this.myRect,child=this.firstChild,col_offset=0,colnum=0;null!=child;child=child.nextSibling,++colnum){if(child.nodeType!==EDMathMlNodeType.MtdNode)return;var mtd=child,rect=new egRect(0,mr.top(),col_widths[colnum],mr.height);mtd.setMyRect(rect),mtd.relOrigin=new egPoint(col_offset,0),col_offset+=col_widths[colnum]+col_spc}this.updateMyRect()},EDMmlMtrNode}(EDMmlSubsupBaseNode)),EDMmlMsupNode=(EdrawMathDate.EDMmlMtrNode=EDMmlMsupNode,function(_super){function EDMmlMtdNode(document,attribute_map){document=_super.call(this,EDMathMlNodeType.MtdNode,document,attribute_map)||this;return document._scriptlevel_adjust=0,document}return __extends(EDMmlMtdNode,_super),EDMmlMtdNode.prototype.setMyRect=function(rect){_super.prototype.setMyRect.call(this,rect);var child=this.firstChild;if(null!=child){if(rect.width<child.myRect.width)for(;rect.width<child.myRect.width&&child.font.pixelSize>EdrawMathDate.EDStatic.g_min_font_pixel_size_calc;)++this._scriptlevel_adjust,child.nodeLayout();var mr=this.myRect,cmr=child.myRect,child_rel_origin=new egPoint(0,0);switch(this.columnalign()){case ColAlign.ColAlignLeft:child_rel_origin.x=0;break;case ColAlign.ColAlignCenter:child_rel_origin.x=mr.left()+.5*(mr.width-cmr.width);break;case ColAlign.ColAlignRight:child_rel_origin.x=mr.right()-cmr.width}switch(this.rowalign()){case RowAlign.RowAlignTop:child_rel_origin.y=mr.top()-cmr.top();break;case RowAlign.RowAlignCenter:case RowAlign.RowAlignBaseline:child_rel_origin.y=mr.top()-cmr.top()+.5*(mr.height-cmr.height);break;case RowAlign.RowAlignBottom:child_rel_origin.y=mr.bottom()-cmr.bottom();break;case RowAlign.RowAlignAxis:child_rel_origin.y=0}child.relOrigin=child_rel_origin}},EDMmlMtdNode.prototype.columnalign=function(){var node,colnum,val=this.explicitAttribute("columnalign");return null!=val?EdrawMathDate.EDStatic.mmlInterpretColAlign(val,0,[!1]):null!=(node=this.parent)&&(colnum=this.colNum(),null!=(val=node.explicitAttribute("columnalign"))||null!=(node=node.parent)&&null!=(val=node.explicitAttribute("columnalign")))?EdrawMathDate.EDStatic.mmlInterpretColAlign(val,colnum,[!1]):ColAlign.ColAlignCenter},EDMmlMtdNode.prototype.rowalign=function(){var node,rownum,val=this.explicitAttribute("rowalign");return null!=val?EdrawMathDate.EDStatic.mmlInterpretRowAlign(val,0,[!1]):null!=(node=this.parent)&&(rownum=this.rowNum(),null!=(val=node.explicitAttribute("rowalign"))||null!=(node=node.parent)&&null!=(val=node.explicitAttribute("rowalign")))?EdrawMathDate.EDStatic.mmlInterpretRowAlign(val,rownum,[!1]):RowAlign.RowAlignAxis},EDMmlMtdNode.prototype.colNum=function(){for(var syb=this.previousSibling,i=0;null!=syb;syb=syb.previousSibling)++i;return i},EDMmlMtdNode.prototype.rowNum=function(){for(var row=this.parent.previousSibling,i=0;null!=row;row=row.previousSibling)++i;return i},EDMmlMtdNode.prototype.scriptlevel=function(child){void 0===child&&(child=null);var sl=_super.prototype.scriptlevel.call(this);return null!=child&&child===this.firstChild?sl+this._scriptlevel_adjust:sl},EDMmlMtdNode}(EDMmlSubsupBaseNode)),EDMmlSubsupBaseNode=(EdrawMathDate.EDMmlMtdNode=EDMmlMsupNode,function(_super){function EDMmlMoverNode(document,attribute_map){return _super.call(this,EDMathMlNodeType.MoverNode,document,attribute_map)||this}return __extends(EDMmlMoverNode,_super),EDMmlMoverNode.prototype.scriptlevel=function(child){void 0===child&&(child=null);var base=this.firstChild;if(null!=base){var sl,base=base.nextSibling;if(null!=base)return sl=_super.prototype.scriptlevel.call(this),null!=child&&child===base?sl+1:sl}},EDMmlMoverNode.prototype.layoutSymbol=function(){var over,base_rect,over_rect,spacing,align_value,base=this.firstChild;null!=base&&null!=(over=base.nextSibling)&&(base_rect=base.myRect,over_rect=over.myRect,spacing=0,this._document.defaultMode&&(spacing="true"===this.explicitAttribute("accent")?0:4*EdrawMathDate.EDStatic.g_mfrac_spacing*over_rect.height),align_value="left"===(align_value=this.explicitAttribute("align"))?1:"right"===align_value?0:.5,base.relOrigin=new egPoint(-.5*base_rect.width,0),over.relOrigin=new egPoint(-align_value*over_rect.width,base_rect.top()-spacing-over_rect.bottom()))},EDMmlMoverNode}(EdrawMathDate.EDMmlNode)),EDMmlMsupNode=(EdrawMathDate.EDMmlMoverNode=EDMmlSubsupBaseNode,function(_super){function EDMmlMunderNode(document,attribute_map){return _super.call(this,EDMathMlNodeType.MunderNode,document,attribute_map)||this}return __extends(EDMmlMunderNode,_super),EDMmlMunderNode.prototype.scriptlevel=function(child){void 0===child&&(child=null);var base=this.firstChild;if(null!=base){var sl,base=base.nextSibling;if(null!=base)return sl=_super.prototype.scriptlevel.call(this),null!=child&&child===base?sl+1:sl}},EDMmlMunderNode.prototype.layoutSymbol=function(){var under,base_rect,under_rect,spacing,align_value,base=this.firstChild;null!=base&&null!=(under=base.nextSibling)&&(base_rect=base.myRect,under_rect=under.myRect,spacing=0,this._document.defaultMode&&(spacing="true"===this.explicitAttribute("accentunder")?0:4*EdrawMathDate.EDStatic.g_mfrac_spacing*under_rect.height),align_value="left"===(align_value=this.explicitAttribute("align"))?1:"right"===align_value?0:.5,base.relOrigin=new egPoint(-.5*base_rect.width,0),under.relOrigin=new egPoint(-align_value*under_rect.width,base_rect.bottom()+spacing-under_rect.top()))},EDMmlMunderNode}(EdrawMathDate.EDMmlNode)),EDMmlSubsupBaseNode=(EdrawMathDate.EDMmlMunderNode=EDMmlMsupNode,function(_super){function EDMmlMunderoverNode(document,attribute_map){return _super.call(this,EDMathMlNodeType.MunderoverNode,document,attribute_map)||this}return __extends(EDMmlMunderoverNode,_super),EDMmlMunderoverNode.prototype.appendEduStr=function(str,edudata){var base;void 0===edudata&&(edudata=null),str.length<=0||((base=this.firstChild).appendEduStr(str,edudata),null!=base&&null!=(base=base.nextSibling)&&(base.appendEduStr(str,edudata),null!=(base=base.nextSibling))&&base.appendEduStr(str,edudata))},EDMmlMunderoverNode.prototype.scriptlevel=function(child){void 0===child&&(child=null);var base=this.firstChild;if(null!=base){base=base.nextSibling;if(null!=base){var sl,over=base.nextSibling;if(null!=over)return sl=_super.prototype.scriptlevel.call(this),null==child||child!==base&&child!==over?sl:sl+1}}},EDMmlMunderoverNode.prototype.layoutSymbol=function(){var under,over,base_rect,under_rect,over_rect,over_spacing,under_spacing,align_value,base=this.firstChild;null!=base&&null!=(under=base.nextSibling)&&null!=(over=under.nextSibling)&&(base_rect=base.myRect,under_rect=under.myRect,over_rect=over.myRect,under_spacing=over_spacing=0,this._document.defaultMode&&(over_spacing="true"===this.explicitAttribute("accent")?0:2*EdrawMathDate.EDStatic.g_mfrac_spacing*(under_rect.height+over_rect.height),under_spacing="true"===this.explicitAttribute("accentunder")?0:2*EdrawMathDate.EDStatic.g_mfrac_spacing*(under_rect.height+over_rect.height)),align_value="left"===(align_value=this.explicitAttribute("align"))?1:"right"===align_value?0:.5,base.relOrigin=new egPoint(-.5*base_rect.width,0),under.relOrigin=new egPoint(-align_value*under_rect.width,0+base_rect.bottom()+under_spacing-under_rect.top()),over.relOrigin=new egPoint(-align_value*over_rect.width,0+base_rect.top()-over_spacing-over_rect.bottom()))},EDMmlMunderoverNode}(EdrawMathDate.EDMmlNode)),EDMmlMsupNode=(EdrawMathDate.EDMmlMunderoverNode=EDMmlSubsupBaseNode,function(_super){function EDMmlMprescriptsNode(document,attribute_map){return _super.call(this,EDMathMlNodeType.MprescriptsNode,document,attribute_map)||this}return __extends(EDMmlMprescriptsNode,_super),EDMmlMprescriptsNode}(EdrawMathDate.EDMmlNode)),EDMmlSubsupBaseNode=(EdrawMathDate.EDMmlMprescriptsNode=EDMmlMsupNode,function(_super){function EDMmlNoneNode(document,attribute_map){return _super.call(this,EDMathMlNodeType.NoneNode,document,attribute_map)||this}return __extends(EDMmlNoneNode,_super),EDMmlNoneNode}(EdrawMathDate.EDMmlNode)),EDMmlMsupNode=(EdrawMathDate.EDMmlNoneNode=EDMmlSubsupBaseNode,function(_super){function EDMmlMmultiscriptsNode(document,attribute_map){return _super.call(this,EDMathMlNodeType.MmultiscriptsNode,document,attribute_map)||this}return __extends(EDMmlMmultiscriptsNode,_super),EDMmlMmultiscriptsNode.prototype.scriptlevel=function(child){void 0===child&&(child=null);var base=this.firstChild;if(null!=base){base=base.nextSibling;if(null!=base){var postsup=base.nextSibling;if(null!=postsup){var mprescripts=postsup.nextSibling;if(null!=mprescripts){mprescripts=mprescripts.nextSibling;if(null!=mprescripts){var sl,presup=mprescripts.nextSibling;if(null!=presup)return sl=_super.prototype.scriptlevel.call(this),null==child||child!==base&&child!==postsup&&child!==mprescripts&&child!==presup?sl:sl+1}}}}}},EDMmlMmultiscriptsNode.prototype.layoutSymbol=function(){var postsub,postsup,presub,presup,base_rect,postsub_rect,postsup_rect,mprescripts_rect,presub_rect,presup_rect,isnext,mprescripts,base=this.firstChild;null!=base&&null!=(postsub=base.nextSibling)&&null!=(postsup=postsub.nextSibling)&&null!=(mprescripts=postsup.nextSibling)&&null!=(presub=mprescripts.nextSibling)&&null!=(presup=presub.nextSibling)&&(base_rect=base.myRect,postsub_rect=postsub.myRect,postsup_rect=postsup.myRect,mprescripts_rect=mprescripts.myRect,presub_rect=presub.myRect,presup_rect=presup.myRect,isnext=!1,base.firstChild.nodeType!=EDMathMlNodeType.MtextNode||""!=base.firstChild.firstChild.toTextNode().text||base.firstChild.nextSibling||this.nextSibling&&(this.nextSibling.nodeLayout(),isnext=!0),base.relOrigin=new egPoint(-base_rect.width,0),mprescripts.relOrigin=new egPoint(-mprescripts_rect.width,0),mprescripts=this.interpretSpacing(EdrawMathDate.EDStatic.g_subsup_spacing,[!1]),postsub.relOrigin=new egPoint(mprescripts,base.myRect.bottom()-EdrawMathDate.EDStatic.g_sub_shift_multiplier*postsub_rect.height*.5),postsup.relOrigin=new egPoint(mprescripts,base.myRect.top()+EdrawMathDate.EDStatic.g_sup_shift_multiplier*postsup_rect.height*.5),isnext?(presub.relOrigin=new egPoint(-base_rect.width-mprescripts-presub_rect.width,this.nextSibling.myRect.bottom()-EdrawMathDate.EDStatic.g_sub_shift_multiplier*presub_rect.height*.5),presup.relOrigin=new egPoint(-base_rect.width-mprescripts-presup_rect.width,this.nextSibling.myRect.top()+EdrawMathDate.EDStatic.g_sup_shift_multiplier*presup_rect.height*.5)):(presub.relOrigin=new egPoint(-base_rect.width-mprescripts-presub_rect.width,base.myRect.bottom()-EdrawMathDate.EDStatic.g_sub_shift_multiplier*presub_rect.height*.5),presup.relOrigin=new egPoint(-base_rect.width-mprescripts-presup_rect.width,base.myRect.top()+EdrawMathDate.EDStatic.g_sup_shift_multiplier*presup_rect.height*.5)))},EDMmlMmultiscriptsNode}(EdrawMathDate.EDMmlNode));EdrawMathDate.EDMmlMmultiscriptsNode=EDMmlMsupNode}(EdrawMathDate=EdrawMathDate||{}),!function(EdrawMathDate){var EDMathMLDocument=function(){function EDMathMLDocument(ctx){this._ctx=ctx,this._ctx.clearRect(0,0,this._ctx.canvas.width,this._ctx.canvas.height),this._ctx.setLineDash([]),this._ctx.globalAlpha=1;ctx=new EdrawMathDate.EDFont;this._ctx.font=ctx.fontstring(),this._ctx.textBaseline="middle",this._ctx.lineWidth=1,this._ctx.strokeStyle="rgb(0, 0, 0)",this._ctx.lineJoin="bevel",this._size=new egSize(0,0),this._mousenode=null,this._mousepressed=null,this._copyTextType=EDTextType.MathML,this._mousePoint=EdrawMathDate.EDStatic.g_init_mousepoint,this._doc=new EdrawMathDate.EDMmlDocument(this),this._p2latex=new EdrawMathDate.EDMMLtoLatex,this._pDocToSave=document.implementation.createDocument("","",null),this._strDocument="",this._strCopyText="",this._mmlPixmap=null,this._vecEditedNode=[],this._vecSelectedNode=[],this._vecMouseSelectedNode=[],this._vecSaveData=[],this.clear(),EdrawMathDate.EDStatic.g_exe_name="."}return Object.defineProperty(EDMathMLDocument.prototype,"ctx",{get:function(){return this._ctx},enumerable:!1,configurable:!0}),EDMathMLDocument.prototype.clear=function(clearsavedata){if(void 0===clearsavedata&&(clearsavedata=!0),null!=this._mousenode){for(var noderectf=this._mousenode.deviceRect,parentrectf=new egRect(0,0,0,0),tmpnode=this._mousenode.firstSibling;null!=tmpnode;tmpnode=tmpnode.nextSibling)parentrectf.united(tmpnode.deviceRect);this._bSelectedPre?this._mousePoint=new egPoint(noderectf.left(),parentrectf.bottom()):this._mousePoint=new egPoint(noderectf.right(),parentrectf.bottom())}if(this._mousenode=null,this._mousepressed=null,this._bSelectedPre=!1,this._bSelectedPre_presee=!1,this._vecEditedNode.splice(0),this._vecSelectedNode.splice(0),this._vecMouseSelectedNode.splice(0),this._strSelectedText="",this._tmpSelectedText="",this._pDocToSave.hasChildNodes()){var child=this._pDocToSave.firstElementChild;for(this._pDocToSave.contains(child)&&this._pDocToSave.removeChild(child),child=child.nextElementSibling;null!=child;)this._pDocToSave.contains(child)&&this._pDocToSave.removeChild(child),child=child.nextElementSibling}clearsavedata&&(this._vecSaveData.splice(0),this._nSaveDataIndex=-1),this._doc.clear(),this._size=new egSize(0,0)},EDMathMLDocument.prototype.getEduStr=function(edudata){return this._doc.getEduStr(edudata=void 0===edudata?null:edudata)},EDMathMLDocument.prototype.setContent=function(text,errorMsg,errorLine,errorColumn){void 0===errorMsg&&(errorMsg=[]),void 0===errorLine&&(errorLine=[0]),void 0===errorColumn&&(errorColumn=[0]),this._size=new egSize(0,0),this._strDocument=text;text=this._doc.setContent(this._strDocument,errorMsg,errorLine,errorColumn);return this.updateSetContent(),text},EDMathMLDocument.prototype.setMouseNode=function(node){this._mousenode=node},EDMathMLDocument.prototype.paint=function(pos,outputPng){this._doc.paint(this._ctx,pos,outputPng=void 0===outputPng?!1:outputPng)},EDMathMLDocument.prototype.insertStdMml=function(text){var _this=this;if(this._doc.rootisEmpty())return!1;if(null==this._mousenode)return!1;this._strSelectedText="",this._tmpSelectedText="",this._strSelectedText=this.getCopyText(),0<this._vecMouseSelectedNode.length&&this.deletedMouseSelected();var editednode=this._mousenode;return this._bSelectedPre&&(this._bSelectedPre=!1,this._mousenode.previousSibling)&&(editednode=this._mousenode.previousSibling),!!this._doc.pasteTextNode(editednode,text,!1,function(t){_this.setMouseNode(t)})&&(this.insertFinished(null,!1),this.updateSetContent(),!0)},EDMathMLDocument.prototype.outputMml=function(){return this._strDocument},EDMathMLDocument.prototype.outputLatex=function(){return this._p2latex.mmlFromStr(this._strDocument)},EDMathMLDocument.prototype.size=function(){var relorgin=this._doc.relOrgin,sizef=this._doc.size();return sizef.width=sizef.width+2*relorgin.x,sizef.height=sizef.height+2*relorgin.y,sizef},EDMathMLDocument.prototype.fontName=function(type){return this._doc.fontName(type)},EDMathMLDocument.prototype.setFontName=function(type,name){this._size=new egSize(0,0),name!==this._doc.fontName(type)&&(this._doc.setfontName(type,name),this._doc.layout(),this.savePainter())},Object.defineProperty(EDMathMLDocument.prototype,"baseFontPixelSize",{get:function(){return this._doc.baseFontPixelSize},set:function(size){this._size=new egSize(0,0),(size=size<EdrawMathDate.EDStatic.g_min_font_pixel_size_calc?EdrawMathDate.EDStatic.g_min_font_pixel_size_calc:size)!==this._doc.baseFontPixelSize&&(this._doc.baseFontPixelSize=size,this._doc.updateNodeFont(),this._doc.layout(),this.savePainter())},enumerable:!1,configurable:!0}),Object.defineProperty(EDMathMLDocument.prototype,"fontDPI",{set:function(dpi){dpi!==EdrawMathDate.EDStatic.g_dpi_font_size&&(EdrawMathDate.EDStatic.g_dpi_font_size=dpi,this._doc.updateNodeFont())},enumerable:!1,configurable:!0}),Object.defineProperty(EDMathMLDocument.prototype,"foregroundColor",{get:function(){return this._doc.foregroundColor},set:function(color){color!==this._doc.foregroundColor&&(this._doc.foregroundColor=color,this.savePainter())},enumerable:!1,configurable:!0}),Object.defineProperty(EDMathMLDocument.prototype,"backgroundColor",{get:function(){return this._doc.backgroundColor},set:function(color){color!==this._doc.backgroundColor&&(this._doc.backgroundColor=color,this.savePainter())},enumerable:!1,configurable:!0}),Object.defineProperty(EDMathMLDocument.prototype,"drawFrames",{get:function(){return this._doc.drawFrames},set:function(isdraw){isdraw!==this._doc.drawFrames&&(this._doc.drawFrames=isdraw,this.savePainter())},enumerable:!1,configurable:!0}),Object.defineProperty(EDMathMLDocument.prototype,"colAlignType",{set:function(colaligntype){if(!this._doc.rootisEmpty()){var catype="left";switch(colaligntype){case ColAlign.ColAlignLeft:catype="left";break;case ColAlign.ColAlignRight:catype="right";break;case ColAlign.ColAlignCenter:catype="center";break;default:catype="left"}var hasmtable=!1;if(0<this._vecMouseSelectedNode.length)for(var i=0;i<this._vecMouseSelectedNode.length;++i){var node=this._vecMouseSelectedNode[i];this._vecMouseSelectedNode[i].nodeType===EDMathMlNodeType.MtableNode?(this._vecMouseSelectedNode[i].addmyAttrMap("columnalign",catype),hasmtable=!0):node.nodeType!=EDMathMlNodeType.MoNode&&node.nodeType!=EDMathMlNodeType.MiNode&&node.nodeType!=EDMathMlNodeType.MnNode&&node.nodeType!=EDMathMlNodeType.MtextNode||node.setColAlignType(catype)&&(hasmtable=!0)}else null!=this._mousenode&&(this._mousenode.setColAlignType(catype),hasmtable=!0);hasmtable&&this.saveTo()}},enumerable:!1,configurable:!0}),Object.defineProperty(EDMathMLDocument.prototype,"inputMiItalic",{set:function(isitalic){this._doc.miItalic=isitalic},enumerable:!1,configurable:!0}),Object.defineProperty(EDMathMLDocument.prototype,"inputMiBold",{set:function(isbold){this._doc.miBold=isbold},enumerable:!1,configurable:!0}),Object.defineProperty(EDMathMLDocument.prototype,"inputMnItalic",{set:function(isitalic){this._doc.mnItalic=isitalic},enumerable:!1,configurable:!0}),Object.defineProperty(EDMathMLDocument.prototype,"inputMnBold",{set:function(isbold){this._doc.mnBold=isbold},enumerable:!1,configurable:!0}),EDMathMLDocument.prototype.setSelectFontItalic=function(isitalic){if(this._vecMouseSelectedNode.length<=0)return!1;for(var i=0;i<this._vecMouseSelectedNode.length;++i)this._vecMouseSelectedNode[i].fontItalic=isitalic,this._vecMouseSelectedNode[i].updateChildFont();return this.saveTo(),!0},EDMathMLDocument.prototype.setSelectFontBold=function(isbold){if(this._vecMouseSelectedNode.length<=0)return!1;for(var i=0;i<this._vecMouseSelectedNode.length;++i)this._vecMouseSelectedNode[i].fontBold=isbold,this._vecMouseSelectedNode[i].updateChildFont();return this.saveTo(),!0},Object.defineProperty(EDMathMLDocument.prototype,"clipBoardTextType",{set:function(texttype){this._copyTextType=texttype},enumerable:!1,configurable:!0}),Object.defineProperty(EDMathMLDocument.prototype,"mmlPixmap",{get:function(){return this._mmlPixmap},enumerable:!1,configurable:!0}),EDMathMLDocument.prototype.outPutMmlPixmap=function(){var relorgin=this._doc.relOrgin,relorgin=new egRect(0,0,this._doc.size().width+2*relorgin.x,this._doc.size().height+2*relorgin.y);this._ctx.createImageData(relorgin.width,relorgin.height);return this._ctx.clearRect(0,0,relorgin.width,relorgin.height),this._ctx.setLineDash([]),this._ctx.globalAlpha=1,this.paint(relorgin.topLeft(),!0),this._ctx.getImageData(0,0,relorgin.width,relorgin.height)},EDMathMLDocument.prototype.outPutMmlPixmapWhite=function(){var relorgin=this._doc.relOrgin,relorgin=new egRect(0,0,this._doc.size().width+2*relorgin.x,this._doc.size().height+2*relorgin.y);this._ctx.createImageData(relorgin.width,relorgin.height);return this._ctx.clearRect(0,0,relorgin.width,relorgin.height),this._ctx.setLineDash([]),this._ctx.globalAlpha=1,this._ctx.fillStyle="#fff",this._ctx.fillRect(0,0,relorgin.width,relorgin.height),this.paint(relorgin.topLeft(),!0),this._ctx.getImageData(0,0,relorgin.width,relorgin.height)},EDMathMLDocument.prototype.emptyNode=function(isbold,isitalic){var isempty=this._vecMouseSelectedNode.length<=0;if(0<isbold.length&&(isbold[0]=!1,0<isitalic.length)&&(isitalic[0]=!1,!isempty))for(var i=0;i<this._vecMouseSelectedNode.length;++i)this._vecMouseSelectedNode[i].getChildBold()&&(isbold[0]=!0),this._vecMouseSelectedNode[i].getChildItalic()&&(isitalic[0]=!0);return isempty},EDMathMLDocument.prototype.hasMtable=function(type){if(type.length<=0)return!1;var hasmtable=!1;if(0<this._vecMouseSelectedNode.length){for(var map,columnalign,i=0;i<this._vecMouseSelectedNode.length;++i)this._vecMouseSelectedNode[i].nodeType===EDMathMlNodeType.MtableNode&&(columnalign="left",(map=this._vecMouseSelectedNode[i].myAttrMap).has("columnalign")&&(columnalign=map.get("columnalign")),type[0]=columnalign,hasmtable=!0);if(!hasmtable)for(i=0;i<this._vecMouseSelectedNode.length;++i)this._mousenode.hasMtable(type)&&(hasmtable=!0)}else null!=this._mousenode&&(hasmtable=this._mousenode.hasMtable(type));return hasmtable},EDMathMLDocument.prototype.copyMathmlText=function(str){if(void 0===str&&(str=[]),this._strCopyText=this.getCopyText(),!(this._strCopyText.length<=0)&&0<str.length)switch(this._copyTextType){case EDTextType.MathML:return str[0]=this._strCopyText,!0;case EDTextType.Latex:return str[0]=this._p2latex.mmlFromStr(this._strCopyText),""!==str[0]?!0:!1}return!1},EDMathMLDocument.prototype.pasteMathmlText=function(str){if(void 0===str&&(str=""),this._doc.rootisEmpty())return!1;0<this._vecMouseSelectedNode.length&&this.deletedMouseSelected();var ok=!1,latex2mml=new EdrawMathDate.EDLatextoMML,text="";if((text=""!==str?str:this._strCopyText).length<=0)return!1;if(null!=text.match("<math")&&null!=text.match("</math>")?(ok=!0,this.setPasteText(text)):(null!=text.match("\\[")&&null!=text.match("\\]")||null!=text.match("$$"))&&""!==(str=latex2mml.latexFromStr(text))&&this.setPasteText(text=str)&&(ok=!0),!ok&&0<text.length){for(var i=0;i<text.length;++i){var onetext=text.charAt(i);i===text.length-1?this.insertText(onetext):this.insertText(onetext,!1)}this.insertFinished(null,!1)}return!0},EDMathMLDocument.prototype.mouseMove=function(mousepos,eventype){var newnode,textisnull;return void 0===eventype&&(eventype=0),!this._doc.rootisEmpty()&&null!=(newnode=this._doc.getNode(mousepos))&&(textisnull=this._bSelectedPre=!1,(textisnull=EDMathMlNodeType.MtextNode===newnode.nodeType&&"isNuLL!"===newnode.firstChild.toTextNode().text?!0:textisnull)||(textisnull=newnode.deviceRect.center().x,mousepos.x<=textisnull&&newnode.previousSibling&&newnode.nodeType!=EDMathMlNodeType.MrowNode&&(this._bSelectedPre=!0)),newnode===this._mousenode?1!==eventype:(this.setMouseNode(newnode),!0))},EDMathMLDocument.prototype.mousePress=function(mousepos){return!!this.mouseMove(mousepos)&&(this._mousepressed=this._mousenode,this._bSelectedPre_presee=this._bSelectedPre,!0)},EDMathMLDocument.prototype.mouseDoubleClicked=function(mousepos){return!(!this.mouseMove(mousepos)||(this._mousepressed=this._mousenode.firstSibling,this._bSelectedPre_presee=!0,this.setMouseNode(this._mousenode.lastSibling),this._bSelectedPre=!1))},EDMathMLDocument.prototype.selectedLeft=function(){if(this._doc.rootisEmpty())return!1;if(0<this._vecEditedNode.length&&(this._bSelectedPre&&(this._bSelectedPre=!1,this._mousenode.previousSibling)&&this.setMouseNode(this._mousenode.previousSibling),0<this._vecEditedNode.length)){for(var index=-1,i=0;i<this._vecEditedNode.length;++i)this._mousenode===this._vecEditedNode[i]&&(index=i);-1!==index&&0<index&&this.setMouseNode(this._vecEditedNode[index-1])}return!0},EDMathMLDocument.prototype.selectedRight=function(){if(this._doc.rootisEmpty())return!1;if(0<this._vecEditedNode.length&&(this._bSelectedPre&&(this._bSelectedPre=!1,this._mousenode.previousSibling)&&this.setMouseNode(this._mousenode.previousSibling),0<this._vecEditedNode.length)){for(var index=-1,i=0;i<this._vecEditedNode.length;++i)this._mousenode===this._vecEditedNode[i]&&(index=i);-1!==index&&index<this._vecEditedNode.length-1&&(index+1===this._vecEditedNode.length-1&&EDMathMlNodeType.MrowNode===this._vecEditedNode[index+1].nodeType||this.setMouseNode(this._vecEditedNode[index+1]))}return!0},EDMathMLDocument.prototype.selectedAll=function(){return!this._doc.rootisEmpty()&&(0<this._vecEditedNode.length&&(this._mousepressed=this._vecEditedNode[0],this._bSelectedPre_presee=!0,this.setMouseNode(this._vecEditedNode.last()),this._bSelectedPre=!1),!0)},EDMathMLDocument.prototype.getCursor=function(vline,hline,selected,mousenodepos){var node=new egRect(0,0,0,0),parent=new egRect(0,0,0,0),select=new egRect(0,0,0,0);return this.getEditedNodePos(node,parent,select),selected.x=select.x,selected.y=select.y,selected.width=select.width,selected.height=select.height,this._bSelectedPre?(vline._px=node.left(),vline._py=parent.top(),vline._vx=node.left()):(vline._px=node.right(),vline._py=parent.top(),vline._vx=node.right()),vline._vy=parent.bottom(),this._mousenode&&this._mousenode.nodeType==EDMathMlNodeType.MtextNode&&null!=this._mousenode.firstChild&&this._mousenode.firstChild.nodeType==EDMathMlNodeType.TextNode&&"isNuLL!"==this._mousenode.firstChild.toTextNode().text&&(vline._px=node.left(),vline._py=parent.top(),vline._vx=node.left(),vline._vy=parent.bottom()),hline._px=parent.left(),hline._py=parent.bottom(),hline._vx=parent.right(),hline._vy=parent.bottom(),this._mousenode&&(mousenodepos.x=this._mousenode.deviceRect.center().x,mousenodepos.y=this._mousenode.deviceRect.center().y),!0},EDMathMLDocument.prototype.insertText=function(text,saveto){if(void 0===saveto&&(saveto=!0),this._doc.rootisEmpty())return!1;if(0<this._vecMouseSelectedNode.length&&this.deletedMouseSelected(),this._bSelectedPre){if(!this._doc.insertPreText(this._mousenode,text))return!1}else if(!this._doc.insertText(this._mousenode,text))return!1;return this._mousenode.parent&&this._mousenode.parent.updateChildFont(),this.insertFinished(null,saveto),!0},EDMathMLDocument.prototype.updateMtext=function(text,saveto){return void 0===saveto&&(saveto=!0),!this._doc.rootisEmpty()&&(this._bSelectedPre?this._mousenode.previousSibling.nodeType===EDMathMlNodeType.MtextNode&&(this._mousenode.previousSibling.firstChild.toTextNode().text=text):this._mousenode.nodeType===EDMathMlNodeType.MtextNode&&(this._mousenode.firstChild.toTextNode().text=text),saveto&&this.saveTo(),!0)},EDMathMLDocument.prototype.insertMtable=function(row,col,frametype,rowlinestype){if(void 0===frametype&&(frametype=0),void 0===rowlinestype&&(rowlinestype=0),this._doc.rootisEmpty())return!1;0<this._vecMouseSelectedNode.length&&this.deletedMouseSelected();row=this._doc.insertMtable(this._mousenode,row,col,frametype,rowlinestype);return null!=row&&(this._mousenode.firstChild.toTextNode()&&"isNuLL!"===this._mousenode.firstChild.toTextNode().text&&this.deleteMouseNode(),this._mousenode.nextSibling&&this.setMouseNode(this._mousenode.nextSibling),this._mousenode.parent&&this._mousenode.parent.updateChildFont(),this.setMouseNode(row.firstChild.firstChild.firstChild.firstChild),this._mousepressed=this._mousenode,this._bSelectedPre=!1,this._bSelectedPre_presee=this._bSelectedPre,this.saveTo(),!0)},EDMathMLDocument.prototype.insertFormula=function(index){var _this=this;if(this._doc.rootisEmpty())return!1;if(null==this._mousenode)return!1;this._strSelectedText="",this._strSelectedText=this.getCopyText();var delselected=!0;if(index>=EDMmlFormulaIndex.OverDot_s&&index<=EDMmlFormulaIndex.Last_s&&(delselected=!1,0<this._vecMouseSelectedNode.length))return!1;0<this._vecMouseSelectedNode.length&&delselected&&this.deletedMouseSelected();var editednode=this._mousenode,outnode=(this._bSelectedPre&&(this._bSelectedPre=!1,this._mousenode.previousSibling)&&(editednode=this._mousenode.previousSibling),[null]);switch(index){case EDMmlFormulaIndex.Frac_s:if(this._doc.insertFrac(editednode,outnode,!1,!0))return this.insertFinished(outnode),!0;break;case EDMmlFormulaIndex.Frac:if(this._doc.insertFrac(editednode,outnode,!1))return this.insertFinished(outnode),!0;break;case EDMmlFormulaIndex.FracBevelled_s:if(this._doc.insertFrac(editednode,outnode,!0,!0))return this.insertFinished(outnode),!0;break;case EDMmlFormulaIndex.FracBevelled:if(this._doc.insertFrac(editednode,outnode,!0))return this.insertFinished(outnode),!0;break;case EDMmlFormulaIndex.Sqrt:if(this._doc.insertSqrt(editednode,outnode))return this.insertFinished(outnode),!0;break;case EDMmlFormulaIndex.Root:if(this._doc.insertRoot(editednode,outnode))return this.insertFinished(outnode),!0;case EDMmlFormulaIndex.Enclose_div:case EDMmlFormulaIndex.Enclose_tl:case EDMmlFormulaIndex.Enclose_tr:case EDMmlFormulaIndex.Enclose_bl:case EDMmlFormulaIndex.Enclose_br:case EDMmlFormulaIndex.Enclose_box:case EDMmlFormulaIndex.Enclose_up:case EDMmlFormulaIndex.Enclose_down:case EDMmlFormulaIndex.Enclose_updown:case EDMmlFormulaIndex.Enclose_ver:case EDMmlFormulaIndex.Enclose_hor:if(this._doc.insertEnclose(editednode,index,outnode))return this.insertFinished(outnode),!0;break;case EDMmlFormulaIndex.divided:outnode.push(null),outnode.push(editednode),this._tmpSelectedText="";var tmpnodelist=[];(editednode.nodeType!=EDMathMlNodeType.MtextNode||""!=editednode.firstChild.toTextNode().text)&&tmpnodelist.push(editednode),this._tmpSelectedText=this.getCopyText(tmpnodelist);case EDMmlFormulaIndex.SubSup:case EDMmlFormulaIndex.Sub:case EDMmlFormulaIndex.Sup:case EDMmlFormulaIndex.PreSubSup:case EDMmlFormulaIndex.PreSub:case EDMmlFormulaIndex.PreSup:case EDMmlFormulaIndex.Empty_uo:case EDMmlFormulaIndex.Empty_u:case EDMmlFormulaIndex.Empty_o:case EDMmlFormulaIndex.Empty_bp:case EDMmlFormulaIndex.Empty_b:case EDMmlFormulaIndex.Empty_p:case EDMmlFormulaIndex.PreEmpty_p:case EDMmlFormulaIndex.PreEmpty_b:case EDMmlFormulaIndex.PreEmpty_bp:case EDMmlFormulaIndex.sup2:case EDMmlFormulaIndex.eX:case EDMmlFormulaIndex.tenX:case EDMmlFormulaIndex.SupMin:case EDMmlFormulaIndex.SupSec:case EDMmlFormulaIndex.SupMilliSec:case EDMmlFormulaIndex.LeftMin:case EDMmlFormulaIndex.insertMrow:if(this._doc.insertLayout(editednode,index,outnode,1))return this.insertFinished(outnode),!0;break;case EDMmlFormulaIndex.LargeEmpty_uo:case EDMmlFormulaIndex.LargeEmpty_u:case EDMmlFormulaIndex.LargeEmpty_o:case EDMmlFormulaIndex.LargeEmpty_bp:case EDMmlFormulaIndex.LargeEmpty_b:case EDMmlFormulaIndex.LargeEmpty_p:case EDMmlFormulaIndex.PreLargeEmpty_p:case EDMmlFormulaIndex.PreLargeEmpty_b:case EDMmlFormulaIndex.PreLargeEmpty_bp:if(this._doc.insertLayout(editednode,index,outnode,2))return this.insertFinished(outnode),!0;break;case EDMmlFormulaIndex.Sum_uo:case EDMmlFormulaIndex.Sum:case EDMmlFormulaIndex.Sum_u:case EDMmlFormulaIndex.Sum_bp:case EDMmlFormulaIndex.Sum_b:case EDMmlFormulaIndex.Product_uo:case EDMmlFormulaIndex.Product:case EDMmlFormulaIndex.Product_u:case EDMmlFormulaIndex.Product_bp:case EDMmlFormulaIndex.Product_b:case EDMmlFormulaIndex.CoProduct_uo:case EDMmlFormulaIndex.CoProduct:case EDMmlFormulaIndex.CoProduct_u:case EDMmlFormulaIndex.CoProduct_bp:case EDMmlFormulaIndex.CoProduct_b:case EDMmlFormulaIndex.Intersection_uo:case EDMmlFormulaIndex.Intersection:case EDMmlFormulaIndex.Intersection_u:case EDMmlFormulaIndex.Intersection_bp:case EDMmlFormulaIndex.Intersection_b:case EDMmlFormulaIndex.Union_uo:case EDMmlFormulaIndex.Union:case EDMmlFormulaIndex.Union_u:case EDMmlFormulaIndex.Union_bp:case EDMmlFormulaIndex.Union_b:case EDMmlFormulaIndex.Lor_uo:case EDMmlFormulaIndex.Lor:case EDMmlFormulaIndex.Lor_u:case EDMmlFormulaIndex.Lor_bp:case EDMmlFormulaIndex.Lor_b:case EDMmlFormulaIndex.Land_uo:case EDMmlFormulaIndex.Land:case EDMmlFormulaIndex.Land_u:case EDMmlFormulaIndex.Land_bp:case EDMmlFormulaIndex.Land_b:case EDMmlFormulaIndex.Int_uo:case EDMmlFormulaIndex.Int:case EDMmlFormulaIndex.Int_u:case EDMmlFormulaIndex.Int_bp:case EDMmlFormulaIndex.Int_b:case EDMmlFormulaIndex.DoubleInt_u:case EDMmlFormulaIndex.DoubleInt_uo:case EDMmlFormulaIndex.DoubleInt:case EDMmlFormulaIndex.DoubleInt_bp:case EDMmlFormulaIndex.DoubleInt_b:case EDMmlFormulaIndex.TripleInt_u:case EDMmlFormulaIndex.TripleInt_uo:case EDMmlFormulaIndex.TripleInt:case EDMmlFormulaIndex.TripleInt_bp:case EDMmlFormulaIndex.TripleInt_b:case EDMmlFormulaIndex.QuadrupleInt_u:case EDMmlFormulaIndex.QuadrupleInt_uo:case EDMmlFormulaIndex.QuadrupleInt:case EDMmlFormulaIndex.QuadrupleInt_bp:case EDMmlFormulaIndex.QuadrupleInt_b:case EDMmlFormulaIndex.ContourInt_u:case EDMmlFormulaIndex.ContourInt_uo:case EDMmlFormulaIndex.ContourInt:case EDMmlFormulaIndex.ContourInt_bp:case EDMmlFormulaIndex.ContourInt_b:case EDMmlFormulaIndex.SurfaceInt_u:case EDMmlFormulaIndex.SurfaceInt_uo:case EDMmlFormulaIndex.SurfaceInt:case EDMmlFormulaIndex.SurfaceInt_bp:case EDMmlFormulaIndex.SurfaceInt_b:case EDMmlFormulaIndex.VolumeInt_u:case EDMmlFormulaIndex.VolumeInt_uo:case EDMmlFormulaIndex.VolumeInt:case EDMmlFormulaIndex.VolumeInt_bp:case EDMmlFormulaIndex.VolumeInt_b:case EDMmlFormulaIndex.ClockwiseInt_u:case EDMmlFormulaIndex.ClockwiseInt_uo:case EDMmlFormulaIndex.ClockwiseInt:case EDMmlFormulaIndex.ClockwiseInt_bp:case EDMmlFormulaIndex.ClockwiseInt_b:case EDMmlFormulaIndex.CtClockwiseInt_u:case EDMmlFormulaIndex.CtClockwiseInt_uo:case EDMmlFormulaIndex.CtClockwiseInt:case EDMmlFormulaIndex.CtClockwiseInt_bp:case EDMmlFormulaIndex.CtClockwiseInt_b:case EDMmlFormulaIndex.ClockwiseContInt_u:case EDMmlFormulaIndex.ClockwiseContInt_uo:case EDMmlFormulaIndex.ClockwiseContInt:case EDMmlFormulaIndex.ClockwiseContInt_bp:case EDMmlFormulaIndex.ClockwiseContInt_b:case EDMmlFormulaIndex.CtClockwiseContInt_u:case EDMmlFormulaIndex.CtClockwiseContInt_uo:case EDMmlFormulaIndex.CtClockwiseContInt:case EDMmlFormulaIndex.CtClockwiseContInt_bp:case EDMmlFormulaIndex.CtClockwiseContInt_b:if(this._doc.insertInt(editednode,index,outnode))return this.insertFinished(outnode),!0;break;case EDMmlFormulaIndex.Infin:if(this._doc.insertInfin(editednode))return this.insertFinished(),!0;break;case EDMmlFormulaIndex.Npart:if(this._doc.insertNpart(editednode,outnode))return this.insertFinished(outnode),!0;break;case EDMmlFormulaIndex.LeftArr_uo:case EDMmlFormulaIndex.LeftArr_u:case EDMmlFormulaIndex.LeftArr_o:case EDMmlFormulaIndex.LongLeftArr_uo:case EDMmlFormulaIndex.LongLeftArr_u:case EDMmlFormulaIndex.LongLeftArr_o:case EDMmlFormulaIndex.LeftTeeArr_uo:case EDMmlFormulaIndex.LeftTeeArr_u:case EDMmlFormulaIndex.LeftTeeArr_o:case EDMmlFormulaIndex.DoubleLeftArr_uo:case EDMmlFormulaIndex.DoubleLeftArr_u:case EDMmlFormulaIndex.DoubleLeftArr_o:case EDMmlFormulaIndex.DbLongLeftArr_uo:case EDMmlFormulaIndex.DbLongLeftArr_u:case EDMmlFormulaIndex.DbLongLeftArr_o:case EDMmlFormulaIndex.RightArr_uo:case EDMmlFormulaIndex.RightArr_u:case EDMmlFormulaIndex.RightArr_o:case EDMmlFormulaIndex.LongRightArr_uo:case EDMmlFormulaIndex.LongRightArr_u:case EDMmlFormulaIndex.LongRightArr_o:case EDMmlFormulaIndex.RightTeeArr_uo:case EDMmlFormulaIndex.RightTeeArr_u:case EDMmlFormulaIndex.RightTeeArr_o:case EDMmlFormulaIndex.DoubleRightArr_uo:case EDMmlFormulaIndex.DoubleRightArr_u:case EDMmlFormulaIndex.DoubleRightArr_o:case EDMmlFormulaIndex.DbLongRightArr_uo:case EDMmlFormulaIndex.DbLongRightArr_u:case EDMmlFormulaIndex.DbLongRightArr_o:case EDMmlFormulaIndex.LeftRightArr_uo:case EDMmlFormulaIndex.LeftRightArr_u:case EDMmlFormulaIndex.LeftRightArr_o:case EDMmlFormulaIndex.LongLeftRightArr_uo:case EDMmlFormulaIndex.LongLeftRightArr_u:case EDMmlFormulaIndex.LongLeftRightArr_o:case EDMmlFormulaIndex.LeftArrRightArr_uo:case EDMmlFormulaIndex.LeftArrRightArr_u:case EDMmlFormulaIndex.LeftArrRightArr_o:case EDMmlFormulaIndex.RightArrLeftArr_uo:case EDMmlFormulaIndex.RightArrLeftArr_u:case EDMmlFormulaIndex.RightArrLeftArr_o:case EDMmlFormulaIndex.ReverseEquilibrium_uo:case EDMmlFormulaIndex.ReverseEquilibrium_u:case EDMmlFormulaIndex.ReverseEquilibrium_o:case EDMmlFormulaIndex.Equilibrium_uo:case EDMmlFormulaIndex.Equilibrium_u:case EDMmlFormulaIndex.Equilibrium_o:case EDMmlFormulaIndex.LongRArrShortLArr_uo:case EDMmlFormulaIndex.LongRArrShortLArr_u:case EDMmlFormulaIndex.LongRArrShortLArr_o:case EDMmlFormulaIndex.ShortRArrLongLArr_uo:case EDMmlFormulaIndex.ShortRArrLongLArr_u:case EDMmlFormulaIndex.ShortRArrLongLArr_o:case EDMmlFormulaIndex.LRightArrSLeftArr_uo:case EDMmlFormulaIndex.LRightArrSLeftArr_u:case EDMmlFormulaIndex.LRightArrSLeftArr_o:case EDMmlFormulaIndex.SRightArrLLeftArr_uo:case EDMmlFormulaIndex.SRightArrLLeftArr_u:case EDMmlFormulaIndex.SRightArrLLeftArr_o:case EDMmlFormulaIndex.LRightVerSLeftVer_uo:case EDMmlFormulaIndex.LRightVerSLeftVer_u:case EDMmlFormulaIndex.LRightVerSLeftVer_o:case EDMmlFormulaIndex.SRightVerLLeftVer_uo:case EDMmlFormulaIndex.SRightVerLLeftVer_u:case EDMmlFormulaIndex.SRightVerLLeftVer_o:if(this._doc.insertArr(editednode,index,outnode))return this.insertFinished(outnode),!0;break;case EDMmlFormulaIndex.OverDot_s:case EDMmlFormulaIndex.OverDoubleDot_s:case EDMmlFormulaIndex.OverTripleDot_s:case EDMmlFormulaIndex.OverDotDot_s:case EDMmlFormulaIndex.OverShortRightArr_s:case EDMmlFormulaIndex.OverLeftRightArrow_s:case EDMmlFormulaIndex.OverShortLeftArr_s:case EDMmlFormulaIndex.OverRightVector_s:case EDMmlFormulaIndex.OverLeftRightVector_s:case EDMmlFormulaIndex.OverLeftVector_s:case EDMmlFormulaIndex.Enclosedown_s:case EDMmlFormulaIndex.UnderDot_s:case EDMmlFormulaIndex.UnderDoubleDot_s:case EDMmlFormulaIndex.UnderTripleDot_s:case EDMmlFormulaIndex.UnderDotDot_s:case EDMmlFormulaIndex.UnderShortRightArr_s:case EDMmlFormulaIndex.UnderLeftRightArrow_s:case EDMmlFormulaIndex.UnderShortLeftArr_s:case EDMmlFormulaIndex.UnderRightVector_s:case EDMmlFormulaIndex.UnderLeftRightVector_s:case EDMmlFormulaIndex.UnderLeftVector_s:case EDMmlFormulaIndex.Encloseup_s:case EDMmlFormulaIndex.OverBar_s:case EDMmlFormulaIndex.OverTilde_s:case EDMmlFormulaIndex.Parentheses_os:case EDMmlFormulaIndex.OverParentheses_s:case EDMmlFormulaIndex.OverHat_s:case EDMmlFormulaIndex.OverDownhat_s:case EDMmlFormulaIndex.SupMin_s:case EDMmlFormulaIndex.SupSec_s:case EDMmlFormulaIndex.SupMilliSec_s:case EDMmlFormulaIndex.SupDegree_s:case EDMmlFormulaIndex.Enclosehor_s:case EDMmlFormulaIndex.UnderBar_s:case EDMmlFormulaIndex.UnderTilde_s:case EDMmlFormulaIndex.UnderParentheses_s:case EDMmlFormulaIndex.Parentheses_us:case EDMmlFormulaIndex.UnderHat_s:case EDMmlFormulaIndex.UnderDownhat_s:case EDMmlFormulaIndex.OverMin_s:case EDMmlFormulaIndex.OverLefmin_s:case EDMmlFormulaIndex.SupT_s:case EDMmlFormulaIndex.Encloseupdown_s:case EDMmlFormulaIndex.OverDot_s:if(editednode.nodeType==EDMathMlNodeType.MtextNode&&editednode.firstChild.nodeType==EDMathMlNodeType.TextNode&&("isNuLL!"==editednode.firstChild.toTextNode().text||""==editednode.firstChild.toTextNode().text))return!1;outnode.push(null),outnode.push(editednode),this._tmpSelectedText="",this._tmpSelectedText=this.getCopyText([editednode]);case EDMmlFormulaIndex.Parentheses_lr:case EDMmlFormulaIndex.Parentheses_l:case EDMmlFormulaIndex.Parentheses_r:case EDMmlFormulaIndex.Parentheses_uo:case EDMmlFormulaIndex.Parentheses_u:case EDMmlFormulaIndex.Parentheses_o:case EDMmlFormulaIndex.Parentheses_iuo:case EDMmlFormulaIndex.Parentheses_iu:case EDMmlFormulaIndex.Parentheses_io:case EDMmlFormulaIndex.SquareBracket_lr:case EDMmlFormulaIndex.SquareBracket_l:case EDMmlFormulaIndex.SquareBracket_r:case EDMmlFormulaIndex.SquareBracket_uo:case EDMmlFormulaIndex.SquareBracket_u:case EDMmlFormulaIndex.SquareBracket_o:case EDMmlFormulaIndex.SquareBracket_iuo:case EDMmlFormulaIndex.SquareBracket_iu:case EDMmlFormulaIndex.SquareBracket_io:case EDMmlFormulaIndex.SquareBracket_ll:case EDMmlFormulaIndex.SquareBracket_rr:case EDMmlFormulaIndex.SquareBracket_rl:case EDMmlFormulaIndex.VerticalBars_lr:case EDMmlFormulaIndex.VerticalBars_l:case EDMmlFormulaIndex.VerticalBars_r:case EDMmlFormulaIndex.DoubleVerticalBars_lr:case EDMmlFormulaIndex.DoubleVerticalBars_l:case EDMmlFormulaIndex.DoubleVerticalBars_r:case EDMmlFormulaIndex.DoubleBracket_lr:case EDMmlFormulaIndex.DoubleBracket_l:case EDMmlFormulaIndex.DoubleBracket_r:case EDMmlFormulaIndex.AngleBracket_lr:case EDMmlFormulaIndex.AngleBracket_l:case EDMmlFormulaIndex.AngleBracket_r:case EDMmlFormulaIndex.Floor_lr:case EDMmlFormulaIndex.Ceiling_lr:case EDMmlFormulaIndex.Floor_Ceiling:case EDMmlFormulaIndex.AngleBracketWithBar:case EDMmlFormulaIndex.ParenthesesWithBar:case EDMmlFormulaIndex.SquareBracketWithBar:case EDMmlFormulaIndex.CurlyBracketWithBar:case EDMmlFormulaIndex.CurlyBracket_o:case EDMmlFormulaIndex.CurlyBracket_u:case EDMmlFormulaIndex.CurlyBracket_uo:case EDMmlFormulaIndex.CurlyBracket_lr:case EDMmlFormulaIndex.CurlyBracket_l:case EDMmlFormulaIndex.CurlyBracket_r:case EDMmlFormulaIndex.CurlyBracket_io:case EDMmlFormulaIndex.CurlyBracket_iu:case EDMmlFormulaIndex.CurlyBracket_iuo:case EDMmlFormulaIndex.Int:case EDMmlFormulaIndex.OverBar:case EDMmlFormulaIndex.UnderBar:case EDMmlFormulaIndex.OverDoubleBar:case EDMmlFormulaIndex.UnderDoubleBar:case EDMmlFormulaIndex.OverShortRightArr:case EDMmlFormulaIndex.UnderShortRightArr:case EDMmlFormulaIndex.OverShortLeftArr:case EDMmlFormulaIndex.UnderShortLeftArr:case EDMmlFormulaIndex.OverRightVector:case EDMmlFormulaIndex.UnderRightVector:case EDMmlFormulaIndex.OverLeftVector:case EDMmlFormulaIndex.UnderLeftVector:case EDMmlFormulaIndex.OverLeftRightArrow:case EDMmlFormulaIndex.UnderLeftRightArrow:case EDMmlFormulaIndex.OverLeftRightVector:case EDMmlFormulaIndex.UnderLeftRightVector:case EDMmlFormulaIndex.OverDot:case EDMmlFormulaIndex.OverDoubleDot:case EDMmlFormulaIndex.OverTripleDot:case EDMmlFormulaIndex.OverDotDot:case EDMmlFormulaIndex.UnderDot:case EDMmlFormulaIndex.UnderDoubleDot:case EDMmlFormulaIndex.UnderTripleDot:case EDMmlFormulaIndex.UnderDotDot:case EDMmlFormulaIndex.OverTilde:case EDMmlFormulaIndex.OverHat:case EDMmlFormulaIndex.UnderHat:case EDMmlFormulaIndex.OverShellBracket:case EDMmlFormulaIndex.UnderShellBracket:case EDMmlFormulaIndex.UnderTilde:case EDMmlFormulaIndex.LSquareBracketRParentheses:case EDMmlFormulaIndex.LParenthesesRSquareBracket:case EDMmlFormulaIndex.LVerticalBarsRAngleBracket:case EDMmlFormulaIndex.LAngleBracketRVerticalBars:case EDMmlFormulaIndex.Frac_old:if(this._doc.insertBracket(editednode,index,outnode))return index>=EDMmlFormulaIndex.OverDot_s&&index<=EDMmlFormulaIndex.Last_s?(this.insertFinished(outnode,!1),outnode[0].parent.noneditable4child=!0,this.setMouseNode(outnode[0].parent),this._mousepressed=this._mousenode,this._bSelectedPre_presee=this._bSelectedPre,this._mousenode.nodeType==EDMathMlNodeType.MencloseNode&&this._doc.deleteNode(outnode[0]),this.saveTo()):this.insertFinished(outnode),!0;break;case EDMmlFormulaIndex.sinX:case EDMmlFormulaIndex.sin_X:case EDMmlFormulaIndex.sin2X:case EDMmlFormulaIndex.cosX:case EDMmlFormulaIndex.cos_X:case EDMmlFormulaIndex.cos2X:case EDMmlFormulaIndex.tanX:case EDMmlFormulaIndex.tan_X:case EDMmlFormulaIndex.tan2X:case EDMmlFormulaIndex.secX:case EDMmlFormulaIndex.sec2X:case EDMmlFormulaIndex.cscX:case EDMmlFormulaIndex.csc2X:case EDMmlFormulaIndex.cotX:case EDMmlFormulaIndex.cot2X:case EDMmlFormulaIndex.arcsinX:case EDMmlFormulaIndex.arccosX:case EDMmlFormulaIndex.arctanX:case EDMmlFormulaIndex.arccotX:case EDMmlFormulaIndex.logX:case EDMmlFormulaIndex.lgX:case EDMmlFormulaIndex.lnX:case EDMmlFormulaIndex.expX:if(this._doc.insertFunc(editednode,index,outnode))return this.insertFinished(outnode),!0;break;case EDMmlFormulaIndex.limX:if(this._doc.insertOther(editednode,index,outnode))return this.insertFinished(outnode),!0}return index===EDMmlFormulaIndex.Enclose_tablediv?(this._doc.pasteTextNode(editednode,"<math display='block'>\n                        <mtable rowspacing = '5'>\n                            <mtr>\n                                <mtd columnalign='right'>\n                                    <mrow></mrow>\n                                </mtd>\n                            </mtr>\n                            <mtr>\n                                <mtd columnalign='right'>\n                                    <menclose notation='longdiv'>\n                                        <mrow></mrow>\n                                    </menclose>\n                                </mtd>\n                            </mtr>\n                        </mtable>\n                    </math>",!1,function(t){_this.setMouseNode(t)}),editednode.nextSibling&&(outnode[0]=editednode.nextSibling.firstChild.nextSibling.firstChild.firstChild.firstChild.nextSibling.firstChild.firstChild),this.insertFinished(outnode,!1),this.updateSetContent(),!0):index===EDMmlFormulaIndex.Enclose_tablediv2?(this._doc.pasteTextNode(editednode,"<math display='block'>\n                     <mtable rowspacing = '5'  columnalign='right'>\n                      <mtr>\n                       <mtd>\n                       <mo>&#x2009;</mo>\n                       </mtd>\n                       <mtd>\n                        <mrow></mrow>\n                       </mtd>\n                      </mtr>\n                      <mtr>\n                       <mtd>\n                        <mrow></mrow>\n                       </mtd>\n                       <mtd>\n                        <menclose notation=\"longdiv\">\n                          <mrow></mrow>\n                         </menclose>\n                       </mtd>\n                      </mtr>\n                     </mtable>\n                    </math>",!1,function(t){_this.setMouseNode(t)}),editednode.nextSibling&&(outnode[0]=editednode.nextSibling.firstChild.nextSibling.firstChild.nextSibling.firstChild.firstChild.nextSibling.firstChild.firstChild),this.insertFinished(outnode,!1),this.updateSetContent(),!0):index===EDMmlFormulaIndex.Symbol_LRightArrSLeftArr?(this._doc.pasteTextNode(editednode,"<math display='block'><munder><mo>&#x2192;</mo><mo>&#x2190;</mo></munder></math>",!1,function(t){_this.setMouseNode(t)}),outnode[0]=editednode.nextSibling,this.insertFinished(outnode,!1),this.updateSetContent(),!0):index===EDMmlFormulaIndex.Symbol_SRightArrLLeftArr?(this._doc.pasteTextNode(editednode,"<math display='block'><mover><mo>&#x2190;</mo><mo>&#x2192;</mo></mover></math>",!1,function(t){_this.setMouseNode(t)}),outnode[0]=editednode.nextSibling,this.insertFinished(outnode,!1),this.updateSetContent(),!0):index===EDMmlFormulaIndex.Symbol_LRightVerSLeftVer?(this._doc.pasteTextNode(editednode,"<math display='block'><munder><mo>&#x21C0;</mo><mo>&#x21BD;</mo></munder></math>",!1,function(t){_this.setMouseNode(t)}),outnode[0]=editednode.nextSibling,this.insertFinished(outnode,!1),this.updateSetContent(),!0):index===EDMmlFormulaIndex.Symbol_SRightVerLLeftVer?(this._doc.pasteTextNode(editednode,"<math display='block'><mover><mo>&#x21BD;</mo><mo>&#x21C0;</mo></mover></math>",!1,function(t){_this.setMouseNode(t)}),outnode[0]=editednode.nextSibling,this.insertFinished(outnode,!1),this.updateSetContent(),!0):index===EDMmlFormulaIndex.fX?(this._doc.pasteTextNode(editednode,'<math display="block"><mi mathvariant="italic">f</mi><mo>&#x28;</mo><mi mathvariant="italic">x</mi><mo>&#x29;</mo><mo>&#x3D;</mo><mrow></mrow></math>',!1,function(t){_this.setMouseNode(t)}),outnode[0]=editednode.lastSibling.firstChild,this.insertFinished(outnode,!1),this.updateSetContent(),!0):index===EDMmlFormulaIndex.derivativeX&&(this._doc.pasteTextNode(editednode,'<math display="block"><mi mathvariant="italic">f</mi><mo>&#x2032;</mo><mo>&#x28;</mo><mi mathvariant="italic">x</mi><mo>&#x29;</mo><mo>&#x3D;</mo><mrow></mrow></math>',!1,function(t){_this.setMouseNode(t)}),outnode[0]=editednode.lastSibling.firstChild,this.insertFinished(outnode,!1),this.updateSetContent(),!0)},EDMathMLDocument.prototype.insertSymbol=function(index){if(this._doc.rootisEmpty())return!1;if(null==this._mousenode)return!1;var str="";if(index<EDMmlFormulaIndex.le)str="<mo>&#x"+index.toString(16)+";</mo>";else if(this._mousenode.nodeType==EDMathMlNodeType.MoNode&&index==EDMmlFormulaIndex.Indentation){if("isIndentation!"==this._mousenode.firstChild.toTextNode().text)return!1}else if(null==(str=EdrawMathDate.EDStatic.g_symboldata.get(index)))return!1;return this.insertText(str)},EDMathMLDocument.prototype.insertEnter=function(){return!this._doc.rootisEmpty()&&(this._bSelectedPre&&(this._bSelectedPre=!1,this._mousenode.previousSibling)&&this.setMouseNode(this._mousenode.previousSibling),!!this._doc.insertEnter(this._mousenode))&&(this._mousenode.parent.parent.parent.nextSibling.firstChild.firstChild.firstChild&&(this._mousenode.parent.parent.parent.nextSibling.updateChildFont(),this.setMouseNode(this._mousenode.parent.parent.parent.nextSibling.firstChild.firstChild.firstChild)),this._mousepressed=this._mousenode,this._bSelectedPre=!1,this._bSelectedPre_presee=this._bSelectedPre,this.saveTo(),!0)},EDMathMLDocument.prototype.deleteNode=function(){if(this._doc.rootisEmpty())return!1;if(this._vecMouseSelectedNode.length<=0){if(this._bSelectedPre&&(this._bSelectedPre=!1),!this._mousenode.previousSibling)return this.selectedLeft(),!1;this.setMouseNode(this._mousenode.previousSibling);var deletemtr=[!1];this.delMtable(deletemtr),deletemtr[0]||(this.deleteSpecialNode(deletemtr=[!1]),deletemtr[0])||this.deleteMouseNode()}else this.deletedMouseSelected();return this.saveTo(),!0},EDMathMLDocument.prototype.deleteNextNode=function(){if(this._doc.rootisEmpty())return!1;if(this._vecMouseSelectedNode.length<=0){if(this._bSelectedPre,!this._mousenode.nextSibling)return this.selectedRight(),!1;this.setMouseNode(this._mousenode.nextSibling);var deletemtr=[!1];this.delMtable(deletemtr),deletemtr[0]||(this.deleteSpecialNode(deletemtr=[!1]),deletemtr[0])||this.deleteMouseNode()}else this.deletedMouseSelected();return this.saveTo(),!0},EDMathMLDocument.prototype.delMtable=function(deletemtr){if(this._mousenode.parent.parent&&EDMathMlNodeType.MtdNode===this._mousenode.parent.parent.nodeType){var mtr=this._mousenode.parent.parent.parent;if(null!=mtr.parent.explicitAttribute("columnalign")&&mtr.previousSibling&&this._mousenode.firstChild.nodeType===EDMathMlNodeType.TextNode&&(""===this._mousenode.firstChild.toTextNode().text||"isNuLL!"===this._mousenode.firstChild.toTextNode().text)){var tmp=mtr.previousSibling,newmouse=tmp.firstChild.firstChild.firstChild.lastSibling;if(""===this._mousenode.firstChild.toTextNode().text&&(newmouse.firstChild.nodeType===EDMathMlNodeType.TextNode&&"isNuLL!"===newmouse.firstChild.toTextNode().text&&(newmouse.firstChild.toTextNode().text=""),this._doc.deleteMtr(this._mousenode)),!this._doc.deleteNode(mtr))return!1;if(this.setMouseNode(newmouse),this._mousepressed=this._mousenode,this._bSelectedPre=!1,this._bSelectedPre_presee=this._bSelectedPre,0<deletemtr.length&&(deletemtr[0]=!0),!tmp.previousSibling&&!tmp.nextSibling){mtr=tmp.firstChild.firstChild,newmouse=tmp.parent;if(!this._doc.deleteMtable(mtr,newmouse))return!1}}}return!0},EDMathMLDocument.prototype.deleteSpecialNode=function(delnull){if(delnull.length<1)return!1;var selectdright,ps;if(this._mousenode.nodeType==EDMathMlNodeType.MtextNode)null!=this._mousenode.firstChild&&this._mousenode.firstChild.nodeType==EDMathMlNodeType.TextNode&&"isNuLL!"==this._mousenode.firstChild.toTextNode().text&&(selectdright=!(delnull[0]=!0),(selectdright=this._mousenode.parent&&!this._mousenode.noneditable&&this._mousenode.parent.nodeType==EDMathMlNodeType.MrowNode&&this._mousenode.parent.noneditable&&(!this._mousenode.parent.previousSibling||(ps=this._mousenode.parent.previousSibling).nodeType!=EDMathMlNodeType.MunderNode&&ps.nodeType!=EDMathMlNodeType.MunderoverNode&&ps.nodeType!=EDMathMlNodeType.MsubNode&&ps.nodeType!=EDMathMlNodeType.MsubsupNode||(selectdright=!0),!this._mousenode.parent.nextSibling||this._mousenode.parent.nextSibling.noneditable&&!this._mousenode.parent.nextSibling.nextSibling)?!0:selectdright)?this.selectedRight():((ps=(ps=this._mousenode.parent)&&ps.parent)&&ps.nodeType==EDMathMlNodeType.MencloseNode&&"longdiv"==ps.myAttrMap.get("notation")&&(ps=(ps=ps.parent)&&ps.parent)&&ps.nodeType==EDMathMlNodeType.MtdNode&&this.selectedLeft(),this.selectedLeft()));else if(this._mousenode.nodeType!=EDMathMlNodeType.MunderNode&&this._mousenode.nodeType!=EDMathMlNodeType.MoverNode||!this._mousenode.firstChild.noneditable)if(this._mousenode.nodeType==EDMathMlNodeType.MencloseNode&&this._mousenode.firstChild.noneditable)(outnode=this._mousenode.firstChild)&&(this._tmpSelectedText="",this._tmpSelectedText=this.getCopyText([outnode]),""!==this._tmpSelectedText)&&(this.deleteMouseNode(),this.setPasteText(this._tmpSelectedText),delnull[0]=!0);else if(this._mousenode.nodeType==EDMathMlNodeType.MrowNode&&this._mousenode.firstChild.noneditable){var outnode,ismo=!1,lastnode=this._mousenode.firstChild.lastSibling;if(lastnode&&lastnode.nodeType==EDMathMlNodeType.MoNode)for(var _i=0,_a=EdrawMathDate.EDStatic.g_special_mo;_i<_a.length;_i++){var motext=_a[_i];lastnode.toMoNode().text==motext&&(ismo=!0)}ismo?(this._doc.deleteNode(this._mousenode.firstChild.lastSibling),(outnode=this._mousenode.firstChild.nextSibling)&&!outnode.nextSibling&&(this._mousenode.noneditable4child=!1,this._tmpSelectedText="",this._tmpSelectedText=this.getCopyText([outnode]),""!==this._tmpSelectedText)&&(this.deleteMouseNode(),this.setPasteText(this._tmpSelectedText))):this.selectedLeft(),delnull[0]=!0}else this._mousenode.nodeType==EDMathMlNodeType.MoNode||this._mousenode.nodeType==EDMathMlNodeType.MiNode||this._mousenode.nodeType==EDMathMlNodeType.MnNode||delnull[0]||(delnull[0]=!0,this.selectedLeft());else(outnode=this._mousenode.firstChild.firstChild.nextSibling)&&(this._tmpSelectedText="",this._tmpSelectedText=this.getCopyText([outnode]),""!==this._tmpSelectedText)&&(this.deleteMouseNode(),this.setPasteText(this._tmpSelectedText),delnull[0]=!0)},EDMathMLDocument.prototype.addSaveData=function(){if(this._doc.rootisEmpty())return!1;for(var length=this._vecSaveData.length,i=this._nSaveDataIndex+1;i<length;++i)this._vecSaveData.removeAt(i);if(null!=this._mousenode){for(var noderectf=this._mousenode.deviceRect,parentrectf=new egRect(0,0,0,0),tmpnode=this._mousenode.firstSibling;null!=tmpnode;tmpnode=tmpnode.nextSibling)parentrectf.united(tmpnode.deviceRect);this._bSelectedPre?this._mousePoint=new egPoint(noderectf.left(),parentrectf.bottom()):this._mousePoint=new egPoint(noderectf.right(),parentrectf.bottom())}noderectf=new EdrawMathDate.EDSaveData(this._strDocument,this._mousePoint);return!(1<this._vecSaveData.length&&this._vecSaveData[this._vecSaveData.length-1].mmltext===this._strDocument||(this._vecSaveData.push(noderectf),this._nSaveDataIndex++,0))},EDMathMLDocument.prototype.mmlRedo=function(){if(this._nSaveDataIndex+1>=this._vecSaveData.length)return!1;this._nSaveDataIndex++;var mmltext=this._vecSaveData[this._nSaveDataIndex].mmltext,mmltext=(this.clear(!1),this.setContent(mmltext),this._vecSaveData[this._nSaveDataIndex].mousepoint);return this.mousePress(mmltext),!0},EDMathMLDocument.prototype.mmlUndo=function(){if(this._vecSaveData.length<=0||this._nSaveDataIndex-1<0)return!1;this._nSaveDataIndex--;var mmltext=this._vecSaveData[this._nSaveDataIndex].mmltext,mmltext=(this.clear(!1),this.setContent(mmltext),this._vecSaveData[this._nSaveDataIndex].mousepoint);return this.mousePress(mmltext),!0},Object.defineProperty(EDMathMLDocument.prototype,"undoEnable",{get:function(){return 0!==this._nSaveDataIndex},enumerable:!1,configurable:!0}),Object.defineProperty(EDMathMLDocument.prototype,"redoEnable",{get:function(){return this._nSaveDataIndex!==this._vecSaveData.length-1},enumerable:!1,configurable:!0}),Object.defineProperty(EDMathMLDocument.prototype,"renderingPositions",{get:function(){return this._doc.getRenderingPositions()},enumerable:!1,configurable:!0}),EDMathMLDocument.prototype.moveLeft=function(){if(this._doc.rootisEmpty())return!1;if(null==this._mousenode)return!1;if(this._bSelectedPre&&(this._bSelectedPre=!1,this._mousenode.previousSibling)&&this.setMouseNode(this._mousenode.previousSibling),0<this._vecEditedNode.length){for(var index=-1,i=0;i<this._vecEditedNode.length;++i)this._mousenode===this._vecEditedNode[i]&&(index=i);-1!==index&&0<index&&this.setMouseNode(this._vecEditedNode[index-1])}return this._mousepressed=this._mousenode,this._bSelectedPre_presee=this._bSelectedPre,!0},EDMathMLDocument.prototype.moveRight=function(){if(this._doc.rootisEmpty())return!1;if(null==this._mousenode)return!1;if(this._bSelectedPre&&(this._bSelectedPre=!1,this._mousenode.previousSibling)&&this.setMouseNode(this._mousenode.previousSibling),0<this._vecEditedNode.length){for(var index=-1,i=0;i<this._vecEditedNode.length;++i)this._mousenode===this._vecEditedNode[i]&&(index=i);-1!==index&&index<this._vecEditedNode.length-1&&(index+1===this._vecEditedNode.length-1&&EDMathMlNodeType.MrowNode===this._vecEditedNode[index+1].nodeType||this.setMouseNode(this._vecEditedNode[index+1]))}return this._mousepressed=this._mousenode,this._bSelectedPre_presee=this._bSelectedPre,!0},EDMathMLDocument.prototype.moveEnd=function(){return!this._doc.rootisEmpty()&&null!=this._mousenode&&(this._bSelectedPre&&(this._bSelectedPre=!1),this.setMouseNode(this._vecEditedNode[this._vecEditedNode.length-2]),this._mousepressed=this._mousenode,this._bSelectedPre_presee=this._bSelectedPre,!0)},EDMathMLDocument.prototype.moveUp=function(){if(this._doc.rootisEmpty())return!1;if(null==this._mousenode)return!1;if(this._bSelectedPre&&(this._bSelectedPre=!1,this._mousenode.previousSibling)&&this.setMouseNode(this._mousenode.previousSibling),0<this._vecEditedNode.length){for(var rect,bottomy,bottomx,newnodeindex=-1,miny=99999,minx=99999,mousey=this._mousenode.deviceRect.bottom(),mousex=this._mousenode.deviceRect.center().x,i=(this._mousenode.firstSibling.deviceRect.left(),this._mousenode.lastSibling.deviceRect.right(),0);i<this._vecEditedNode.length;++i)this._mousenode===this._vecEditedNode[i]||EDMathMlNodeType.MtextNode===this._vecEditedNode[i].nodeType&&""===this._vecEditedNode[i].firstChild.toTextNode().text||((bottomy=mousey-(rect=this._vecEditedNode[i].deviceRect).bottom())===miny&&(bottomx=(bottomx=mousex-rect.center().x)<0?-bottomx:bottomx)<minx&&(minx=bottomx,newnodeindex=i),bottomy<miny&&0<bottomy&&(miny=bottomy,newnodeindex=i,minx=mousex-rect.center().x));-1!==newnodeindex&&this.setMouseNode(this._vecEditedNode[newnodeindex])}return this._mousepressed=this._mousenode,this._bSelectedPre_presee=this._bSelectedPre,!0},EDMathMLDocument.prototype.moveDowm=function(){if(this._doc.rootisEmpty())return!1;if(null==this._mousenode)return!1;if(this._bSelectedPre&&(this._bSelectedPre=!1,this._mousenode.previousSibling)&&this.setMouseNode(this._mousenode.previousSibling),0<this._vecEditedNode.length){for(var rect,topy,topx,newnodeindex=-1,miny=99999,minx=99999,mousey=this._mousenode.deviceRect.top(),mousex=this._mousenode.deviceRect.center().x,i=(this._mousenode.firstSibling.deviceRect.left(),this._mousenode.lastSibling.deviceRect.right(),0);i<this._vecEditedNode.length;++i)this._mousenode===this._vecEditedNode[i]||EDMathMlNodeType.MtextNode===this._vecEditedNode[i].nodeType&&""===this._vecEditedNode[i].firstChild.toTextNode().text||((topy=(rect=this._vecEditedNode[i].deviceRect).top()-mousey)===miny&&(topx=(topx=mousex-rect.center().x)<0?-topx:topx)<minx&&(minx=topx,newnodeindex=i),topy<miny&&0<topy&&(miny=topy,newnodeindex=i,minx=mousex-rect.center().x));-1!==newnodeindex&&this.setMouseNode(this._vecEditedNode[newnodeindex])}return this._mousepressed=this._mousenode,this._bSelectedPre_presee=this._bSelectedPre,!0},EDMathMLDocument.prototype.deleteMouseNode=function(){var editednode,mrow,deletemrow,spec;return!this._doc.rootisEmpty()&&null!=this._mousenode&&(editednode=null,this._mousenode.previousSibling?(editednode=this._mousenode.previousSibling).firstChild.toTextNode()&&!this._mousenode.nextSibling&&""===editednode.firstChild.toTextNode().text&&(editednode.firstChild.toTextNode().text="isNuLL!"):this._mousenode.firstChild.toTextNode()&&"isNuLL!"===this._mousenode.firstChild.toTextNode().text&&this._mousenode.nextSibling&&(this._mousenode.firstChild.toTextNode().text="",this._mousenode.updateChildFont()),(this._mousenode.previousSibling||this._mousenode.nextSibling)&&EDMathMlNodeType.MrowNode===this._mousenode.parent.nodeType||(mrow=this._mousenode.parent,deletemrow=!1,(deletemrow=EDMathMlNodeType.MrowNode===mrow.nodeType&&mrow.parent&&(spec=EdrawMathDate.EDStatic.mmlFindNodeSpec_type(mrow.parent.nodeType),ChildSpec.ChildAny===spec.child_spec)&&(mrow.nextSibling||mrow.previousSibling&&(mrow.previousSibling.nodeType!==EDMathMlNodeType.MtextNode||""!==mrow.previousSibling.firstChild.toTextNode().text))?!0:deletemrow)?(editednode=mrow.previousSibling,this.setMouseNode(mrow)):(this._doc.insertText(this._mousenode,"isNuLL!"),(editednode=this._mousenode.nextSibling).updateChildFont())),null!=editednode)&&!!this._doc.deleteNode(this._mousenode)&&(this.setMouseNode(editednode),this._mousepressed=this._mousenode,this._bSelectedPre=!1,this._bSelectedPre_presee=this._bSelectedPre,!0)},EDMathMLDocument.prototype.insertFinished=function(outnode,saveto){void 0===outnode&&(outnode=null),void 0===saveto&&(saveto=!0),this._mousenode.parent&&this._mousenode.parent.updateChildFont(),this._mousenode.firstChild.toTextNode()&&"isNuLL!"===this._mousenode.firstChild.toTextNode().text&&this.deleteMouseNode(),this._bSelectedPre?(this._bSelectedPre=!1,this._mousenode.previousSibling&&this.setMouseNode(this._mousenode.previousSibling)):this._mousenode.nextSibling&&this.setMouseNode(this._mousenode.nextSibling),null!=outnode&&0<outnode.length&&(2<outnode.length&&null!=outnode[1]&&(this.setMouseNode(outnode[1]),""!==this._tmpSelectedText)&&(this.setPasteText(this._tmpSelectedText),outnode[1].firstChild)&&(outnode[1].firstChild.toTextNode()&&"isNuLL!"===outnode[1].firstChild.toTextNode().text&&this.deleteMouseNode(),this._doc.deleteNode(outnode[2])),null!=outnode[0])&&(this.setMouseNode(outnode[0]),""!==this._strSelectedText)&&(this.setPasteText(this._strSelectedText),outnode[0].firstChild)&&outnode[0].firstChild.toTextNode()&&"isNuLL!"===outnode[0].firstChild.toTextNode().text&&this.deleteMouseNode(),this._mousepressed=this._mousenode,this._bSelectedPre_presee=this._bSelectedPre,saveto&&this.saveTo()},EDMathMLDocument.prototype.saveTo=function(){return this.updateDocument(),this._doc.setContent(this._strDocument),this.savePainter(),this._doc.getNodeVector(this._vecEditedNode,this._vecSelectedNode),!0},EDMathMLDocument.prototype.savePainter=function(){var relorgin=this._doc.relOrgin,relorgin=new egRect(0,0,this._doc.size().width+2*relorgin.x,this._doc.size().height+2*relorgin.y),pixmap=(this._ctx.createImageData(relorgin.width,relorgin.height),this._ctx.clearRect(0,0,relorgin.width,relorgin.height),this._ctx.setLineDash([]),this._ctx.globalAlpha=1,this.paint(relorgin.topLeft()),pixmap=this._ctx.getImageData(0,0,relorgin.width,relorgin.height),this._mmlPixmap=pixmap,!1);this._ctx.canvas.width!==Math.round(relorgin.width)&&(this._ctx.canvas.width=Math.round(relorgin.width),pixmap=!0),this._ctx.canvas.height!==Math.round(relorgin.height)&&(this._ctx.canvas.height=Math.round(relorgin.height),pixmap=!0),pixmap&&this.saveTo()},EDMathMLDocument.prototype.getEditedNodePos=function(node,parent,selected){if(this._doc.rootisEmpty())return!1;if(null==this._mousenode)return!1;if(null==this._mousepressed)return!1;for(var noderectf=this._mousenode.deviceRect,parentrectf=new egRect(0,0,0,0),tmpnode=this._mousenode.firstSibling;null!=tmpnode;tmpnode=tmpnode.nextSibling)parentrectf.united(tmpnode.deviceRect);var vecSelected=[],nodeseledcted=(this.getVecNode(vecSelected),node.x=noderectf.x,node.y=noderectf.y,node.width=noderectf.width,node.height=noderectf.height,parent.x=parentrectf.x,parent.y=parentrectf.y,parent.width=parentrectf.width,parent.height=parentrectf.height,new egRect(0,0,0,0));if(this._vecMouseSelectedNode.splice(0),0<vecSelected.length)for(var i=0;i<vecSelected.length;++i){nodeseledcted.united(vecSelected[i].deviceRect);var tmp=vecSelected[i];if(this._vecMouseSelectedNode.push(vecSelected[i]),i<vecSelected.length-1&&this._doc.isChildNode(tmp,vecSelected[i+1]))break}return selected.x=nodeseledcted.x,selected.y=nodeseledcted.y,selected.width=nodeseledcted.width,selected.height=nodeseledcted.height,!0},EDMathMLDocument.prototype.getVecNode=function(getvector){if(null!=this._mousepressed&&!(this._vecSelectedNode.length<=0)){for(var tmp,comparevecotr=this._vecSelectedNode,startindex=-1,endindex=-1,length_1=comparevecotr.length,i=0;i<length_1;++i)this._mousepressed===comparevecotr[i]&&(startindex=i),this._mousenode===comparevecotr[i]&&(endindex=i);if(-1!==startindex&&-1!==endindex&&startindex===endindex)this._bSelectedPre_presee!==this._bSelectedPre&&getvector.push(comparevecotr[startindex]);else if(-1!==startindex&&-1!==endindex&&startindex<endindex?(this._bSelectedPre_presee||(startindex+=1),this._bSelectedPre&&(endindex-=1)):-1!==startindex&&-1!==endindex&&endindex<startindex&&(this._bSelectedPre_presee&&(startindex-=1),this._bSelectedPre||(endindex+=1),tmp=startindex,startindex=endindex,endindex=tmp),-1!==startindex&&-1!==endindex)for(i=startindex;i<=endindex;++i){var appendnode=null,spec=EdrawMathDate.EDStatic.mmlFindNodeSpec_type(comparevecotr[i].parent.nodeType),appendnode=ChildSpec.ChildAny===spec.child_spec?comparevecotr[i]:comparevecotr[i].parent;this.removeDuplicates(appendnode,getvector),EDMathMlNodeType.MtdNode===appendnode.nodeType||EDMathMlNodeType.MtrNode===appendnode.nodeType?(spec=(EDMathMlNodeType.MtrNode===appendnode.nodeType?appendnode.firstChild:appendnode).parent.parent,this.removeDuplicates(spec,getvector),getvector.push(spec)):getvector.push(appendnode)}}},EDMathMLDocument.prototype.removeDuplicates=function(rootnode,removevector){for(var length=removevector.length,j=0;j<length;++j)rootnode===removevector[j]&&removevector.removeAt(j);if(EDMathMlNodeType.MprescriptsNode!==rootnode.nodeType&&EDMathMlNodeType.NoneNode!==rootnode.nodeType&&EDMathMlNodeType.UnknownNode!==rootnode.nodeType&&null!=rootnode.firstChild&&EDMathMlNodeType.TextNode!==rootnode.firstChild.nodeType)for(var child=rootnode.firstChild;null!=child;child=child.nextSibling)this.removeDuplicates(child,removevector)},EDMathMLDocument.prototype.getCopyText=function(SelectedNode){if((SelectedNode=(SelectedNode=void 0===SelectedNode?[]:SelectedNode).length<=0?this._vecMouseSelectedNode:SelectedNode).length<=0)return"";var doc=document.implementation.createDocument("","",null),ele=doc.createElement("math");ele.setAttribute("display","block"),ele.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),doc.appendChild(ele);for(var i=0;i<SelectedNode.length;++i){var tmp=SelectedNode[i];tmp&&tmp.saveToForCopy(ele)}var copytext=(copytext=(new XMLSerializer).serializeToString(doc)).replace(/#x/g,"&#x");return EdrawMathDate.EDStatic.g_arrowtext4replace.forEach(function(value,key){key=new RegExp(key,"g");copytext=copytext.replace(key,value)}),copytext},EDMathMLDocument.prototype.setPasteText=function(pastetext){var _this=this;if(this._doc.rootisEmpty())return!1;if(this._bSelectedPre){if(!this._doc.pasteTextNode(this._mousenode,pastetext,!0,function(t){_this.setMouseNode(t)}))return!1}else if(!this._doc.pasteTextNode(this._mousenode,pastetext,!1,function(t){_this.setMouseNode(t)}))return!1;return this.insertFinished(null,!1),this.updateSetContent(),!0},EDMathMLDocument.prototype.deletedMouseSelected=function(){if(!(this._vecMouseSelectedNode.length<=0)){for(var isbracket,i=this._vecMouseSelectedNode.length-1;0<=i;--i)this.setMouseNode(this._vecMouseSelectedNode[i]),this._mousenode&&(isbracket=!1,(isbracket=this._mousenode.parent&&this._mousenode.parent.nodeType==EDMathMlNodeType.MrowNode&&this._mousenode.parent.noneditable&&this._mousenode.nodeType==EDMathMlNodeType.MtextNode&&this._mousenode==this._mousenode.parent.firstChild?!0:isbracket)?(this.setMouseNode(this._mousenode),this._mousepressed=this._mousenode,this._bSelectedPre=!1,this._bSelectedPre_presee=this._bSelectedPre):this.deleteMouseNode());this._vecMouseSelectedNode.splice(0)}},EDMathMLDocument.prototype.updateSetContent=function(){if(this._doc.getNodeVector(this._vecEditedNode,this._vecSelectedNode,!1),!(this._vecEditedNode.length<=0||this._vecSelectedNode.length<=0)){for(var mrow,node=null,i=0;i<this._vecEditedNode.length;++i){if((node=this._vecEditedNode[i]).nodeType===EDMathMlNodeType.MtextNode){var mtext=node.firstChild.toTextNode().text;if(1<mtext.length&&"isNuLL!"!==mtext){node.firstChild.toTextNode().text=mtext[0];for(var j=mtext.length-1;0<j;--j)this._doc.insertText(node,mtext),node.nextSibling&&(node.nextSibling.firstChild.toTextNode().text=mtext[j])}}if(node.nodeType===EDMathMlNodeType.MtextNode&&null==node.nextSibling&&null==node.previousSibling&&(node.firstChild.toTextNode().text="isNuLL!"),node.parent.nodeType!==EDMathMlNodeType.MrowNode||(mrow=node.parent).parent.nodeType!==EDMathMlNodeType.MsubsupNode&&mrow.parent.nodeType!==EDMathMlNodeType.MsubNode&&mrow.parent.nodeType!==EDMathMlNodeType.MsupNode&&mrow.parent.nodeType!==EDMathMlNodeType.MmultiscriptsNode||mrow!==mrow.parent.firstChild||node.firstChild.nodeType!==EDMathMlNodeType.TextNode||"isNuLL!"===node.firstChild.toTextNode().text&&(node.firstChild.toTextNode().text=""),i===this._vecEditedNode.length-1&&EDMathMlNodeType.MrowNode===node.nodeType)break;(EDMathMlNodeType.MtextNode!==node.firstSibling.nodeType||""!==node.firstSibling.firstChild.toTextNode().text&&"isNuLL!"!==node.firstSibling.firstChild.toTextNode().text)&&this._doc.insertPreText(node.firstSibling,"")}this.saveTo()}},EDMathMLDocument.prototype.updateDocument=function(){var text,ele=null,is4copy=!1;this._pDocToSave.hasChildNodes()?(is4copy=!0,(ele=this._pDocToSave.createElement("math")).setAttribute("display","block"),ele.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),ele.setAttribute("mathcolor",this.foregroundColor),this._pDocToSave.replaceChild(ele,this._pDocToSave.firstChild)):((ele=this._pDocToSave.createElement("math")).setAttribute("display","block"),ele.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),ele.setAttribute("mathcolor",this.foregroundColor),this._pDocToSave.appendChild(ele)),this._doc.saveTo(ele,is4copy)&&(text=(text=(new XMLSerializer).serializeToString(this._pDocToSave)).replace(/#x/g,"&#x"),EdrawMathDate.EDStatic.g_arrowtext4replace.forEach(function(value,key){key=new RegExp(key,"g");text=text.replace(key,value)}),this._strDocument=text)},EDMathMLDocument.prototype.renderColor=function(){},EDMathMLDocument}();EdrawMathDate.EDMathMLDocument=EDMathMLDocument}(EdrawMathDate=EdrawMathDate||{}),EdrawMathDate.EDMathMLDocument),EDStatic=EdrawMathDate.EDStatic,EDRenderingPosition=EdrawMathDate.EDRenderingPosition;!function(EdrawMath){var EDFormulaView=function(){function EDFormulaView(parent,uifunc){void 0===uifunc&&(uifunc=null);var _this=this,myself=this,uifunc=(this._defaultFontSize=40,this._fFontSize=40,this._bDrawFrames=!1,this._bColors="",this._isDark=!1,EDFormulaView._uifunc=uifunc,void 0!==parent&&null!=parent||(parent=document.createElement("div")),this._parent=parent,this._canvas=document.createElement("canvas"),parent.appendChild(this._canvas),this._pMmlDoc=new EDMathMLDocument(this._canvas.getContext("2d")),parent.setAttribute("display","inline-block"),EDStatic.g_init_mousepoint.x+this._canvas.offsetLeft),y=EDStatic.g_init_mousepoint.y+this._canvas.offsetTop,ta=(this._canvas.style.cssText="position:absolute;z-index:1;",this._background=document.createElement("canvas"),parent.appendChild(this._background),this._background.style.cssText="position:absolute;z-index:0;",this._background.getContext("2d").fillStyle=this._isDark?"#39393b":"#f3f4f5",this._background.getContext("2d").fillRect(0,0,this._canvas.width,this._canvas.height),this._textarea=document.createElement("input"),parent.appendChild(this._textarea),this._textarea),btdown=(this._textarea.id="edta4Math",this._textarea.style.cssText="opacity: 0;position:absolute;left:".concat(uifunc,"px;top:").concat(y,"px;z-index:-1;width:1px;height:1px;border:none;font-size:1;"),this._textarea.onkeydown=function(event){myself._bInput?setTimeout(function(){myself._pMmlDoc.updateMtext(ta.value+" "),myself.update(),ta.focus()},50):event.ctrlKey?myself.keyPressEvent(event):setTimeout(function(){myself.keyPressEvent(event)},50)},this._textarea.onpaste=function(event){event=event.clipboardData;null!=event&&(myself.editPaste(event.getData("Text")),myself._pMmlDoc.addSaveData(),myself.update(),ta.focus()),setTimeout(function(){ta.value=""},50)},this._textarea.addEventListener("compositionstart",function(){myself._bInput=!0,myself._pMmlDoc.insertText("  "),setTimeout(function(){myself._pMmlDoc.updateMtext(ta.value+" "),myself.update(),ta.focus()},50)}),this._textarea.addEventListener("compositionend",function(){setTimeout(function(){myself._bInput=!1;myself._pMmlDoc.deleteNode();var str=ta.value;myself.inputMethodEvent(str),ta.value="",myself.update(),myself._textarea.focus()},60)}),!1),flng=(this._canvas.onmousedown=function(event){btdown=!0,myself.mousePressEvent(event)},!0);this._canvas.onmousemove=function(event){btdown&&flng&&(flng=!1,setTimeout(function(){flng=!0},100),1!==event.buttons?(btdown=!1,myself.mouseReleaseEvent(event)):myself.mouseMoveEvent(event))},this._canvas.onmouseup=function(event){btdown=!1,myself.mouseReleaseEvent(event)},this._canvas.ondblclick=function(event){myself.mouseDoubleClickEvent(event)},this._canvas.onkeydown=function(event){myself.keyPressEvent(event),event.shiftKey},this._bInput=!1,this._MtableEnable=!1,this._FontEnable=!1,this._Undo=!1,this._Redo=!1,this._FontBold=!1,this._FontItalic=!1,this._colaligntype=ColAlign.ColAlignLeft,this._FontSize=this._fFontSize,this._topleft=new egPoint(0,0),this._movePoint=new egPoint(0,0),this._rightbtn=!1,this._leftbtn=!1,this._paintflng=!0,this._updatesignal=!1,this._nFlash=-1,this._pTimer=setInterval(function(){_this._nFlash%2==0&&(_this._nFlash=0),_this._nFlash++,_this.update()},500),this._strFormula="",this._rectfSize=new egRect(0,0,0,0),this._pointEditedPos=new egPoint(0,0),this._mouseRect=new egRect(0,0,0,0),this.openNewMml(),-1===this._nFlash&&this._pMmlDoc.mousePress(EDStatic.g_init_mousepoint)&&(this._pointEditedPos=EDStatic.g_init_mousepoint,this._textarea.focus(),uifunc=this._pMmlDoc.hasMtable(parent=["left"]),y=ColAlign.ColAlignLeft,"right"===parent[0]?y=ColAlign.ColAlignRight:"center"===parent[0]&&(y=ColAlign.ColAlignCenter),uifunc===this._MtableEnable&&this._colaligntype===y||(this._MtableEnable=uifunc,this._colaligntype=y))}return Object.defineProperty(EDFormulaView.prototype,"fontSize",{get:function(){return this._fFontSize},set:function(fontSize){fontSize!==this._fFontSize&&(this._fFontSize=fontSize,200<this._fFontSize&&(this._fFontSize=200),this._fFontSize<12&&(this._fFontSize=12),this.update())},enumerable:!1,configurable:!0}),Object.defineProperty(EDFormulaView.prototype,"fontDPI",{set:function(dpi){this._pMmlDoc.fontDPI=dpi,this.update()},enumerable:!1,configurable:!0}),Object.defineProperty(EDFormulaView.prototype,"drawFrames",{set:function(drawFrames){this._bDrawFrames=drawFrames,this.update()},enumerable:!1,configurable:!0}),Object.defineProperty(EDFormulaView.prototype,"selectFontItalic",{set:function(isitalic){new egPoint(0,0)!==this._pointEditedPos&&this._FontEnable&&this._pMmlDoc.setSelectFontItalic(isitalic)&&(this._pMmlDoc.addSaveData(),this._textarea.focus())},enumerable:!1,configurable:!0}),Object.defineProperty(EDFormulaView.prototype,"selectFontBold",{set:function(isbold){new egPoint(0,0)!==this._pointEditedPos&&this._FontEnable&&this._pMmlDoc.setSelectFontBold(isbold)&&(this._pMmlDoc.addSaveData(),this._textarea.focus())},enumerable:!1,configurable:!0}),Object.defineProperty(EDFormulaView.prototype,"clipBoardTextType",{set:function(texttype){this._pMmlDoc.clipBoardTextType=texttype},enumerable:!1,configurable:!0}),EDFormulaView.creatEdFormulaview=function(parent,uifunc){return void 0===uifunc&&(uifunc=null),void 0!==EDFormulaView._view&&null!=EDFormulaView._view||(EDFormulaView._view=new EDFormulaView(parent,uifunc)),EDFormulaView._uifunc!==uifunc&&null!=uifunc&&(EDFormulaView._uifunc=uifunc),EDFormulaView._view},EDFormulaView.prototype.openMml=function(text){var mmlstr=text;if((null==text.match("<math")||null==text.match("</math>"))&&((null!=text.match("\\[")&&null!=text.match("\\]")||null!=text.match("$$"))&&""===(mmlstr=(new EdrawMathDate.EDLatextoMML).latexFromStr(text))))return!1;text=(new DOMParser).parseFromString(mmlstr,"text/xml").firstElementChild.getAttribute("mathcolor");if(text&&(this._bColors=text,this._pMmlDoc.foregroundColor=text),this.clearFormula(),this._strFormula=mmlstr,!this._pMmlDoc.setContent(this._strFormula))return!1;this._pMmlDoc.addSaveData(),this._pMmlDoc.mousePress(EDStatic.g_init_mousepoint)&&(this._pointEditedPos=EDStatic.g_init_mousepoint);var myself=this;return setTimeout(function(){myself._textarea.focus()},500),this.moveEnd(),this.update(),!0},EDFormulaView.prototype.openNewMml=function(){var doc=document.implementation.createDocument("","",null),ele=doc.createElement("math");return ele.setAttribute("display","block"),ele.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),doc.appendChild(ele),this.clearFormula(),this._strFormula=(new XMLSerializer).serializeToString(doc),!!this._pMmlDoc.setContent(this._strFormula)&&(this._pMmlDoc.addSaveData(),this._pMmlDoc.mousePress(EDStatic.g_init_mousepoint)&&(this._pointEditedPos=EDStatic.g_init_mousepoint,this._textarea.focus()),this.update(),!0)},EDFormulaView.prototype.insertStdMml=function(text){return new egPoint(0,0)!==this._pointEditedPos&&(text=text.replace(/\\/g,"/"),!!this._pMmlDoc.insertStdMml(text))&&(this.update(),this._pMmlDoc.addSaveData(),this._textarea.focus(),!0)},EDFormulaView.prototype.setMtableColAlignType=function(colaligntype){return new egPoint(0,0)!==this._pointEditedPos&&!!this._MtableEnable&&(this._pMmlDoc.colAlignType=colaligntype,this._pMmlDoc.addSaveData(),this._textarea.focus(),!0)},EDFormulaView.prototype.focus=function(){this._textarea.focus()},EDFormulaView.prototype.outputPng=function(name){var saveHref=document.createElement("a"),img=document.createElement("img"),img=(saveHref.appendChild(img),null==name.match(".")&&(name+=".png"),saveHref.download=name,this.outputPngURL());saveHref.setAttribute("href",img),saveHref.click()},EDFormulaView.prototype.getEduStr=function(edudata){return this._pMmlDoc.getEduStr(edudata=void 0===edudata?null:edudata)},EDFormulaView.prototype.outputPngURL=function(){var ctx=this._pMmlDoc.ctx,width=ctx.canvas.width,height=ctx.canvas.height,dataURL=(this._pMmlDoc.ctx.clearRect(0,0,ctx.canvas.width,ctx.canvas.height),ctx.canvas.width=this._pMmlDoc.size().width,ctx.canvas.height=this._pMmlDoc.size().height,this._pMmlDoc.ctx.globalAlpha=1,this._pMmlDoc.ctx.save(),this.renderFormula(!0),this._canvas.toDataURL("image/png"));return ctx.canvas.width=width,ctx.canvas.height=height,this.update(),dataURL},EDFormulaView.prototype.outputJpgURL=function(){var ctx=this._pMmlDoc.ctx,width=ctx.canvas.width,height=ctx.canvas.height,dataURL=(this._pMmlDoc.ctx.clearRect(0,0,ctx.canvas.width,ctx.canvas.height),ctx.canvas.width=this._pMmlDoc.size().width,ctx.canvas.height=this._pMmlDoc.size().height,this._pMmlDoc.ctx.globalAlpha=1,this._pMmlDoc.ctx.save(),this.renderFormula(!0,!0),this._canvas.toDataURL("image/jpeg"));return ctx.canvas.width=width,ctx.canvas.height=height,this.update(),dataURL},EDFormulaView.prototype.outputMml=function(){return this._pMmlDoc.outputMml()},EDFormulaView.prototype.outputLatex=function(){var latex=this._pMmlDoc.outputLatex();return latex},EDFormulaView.prototype.setInputMiItalic=function(isitalic){new egPoint(0,0)!==this._pointEditedPos&&(this._pMmlDoc.inputMiItalic=isitalic)},EDFormulaView.prototype.setInputMiBold=function(isbold){new egPoint(0,0)!==this._pointEditedPos&&(this._pMmlDoc.inputMiBold=isbold)},EDFormulaView.prototype.setInputMnItalic=function(isitalic){new egPoint(0,0)!==this._pointEditedPos&&(this._pMmlDoc.inputMnItalic=isitalic)},EDFormulaView.prototype.setInputMnBold=function(isbold){new egPoint(0,0)!==this._pointEditedPos&&(this._pMmlDoc.inputMnBold=isbold)},EDFormulaView.prototype.setClipBoardTextType=function(type){new egPoint(0,0)!==this._pointEditedPos&&(this._pMmlDoc.clipBoardTextType=type)},EDFormulaView.prototype.editCopy=function(){var str;return new egPoint(0,0)!==this._pointEditedPos&&null!=this._textarea&&!!this._pMmlDoc.copyMathmlText(str=["",""])&&(str[1]=this.outputPngURL(),this._textarea.value=str[0],this._textarea.focus(),this._textarea.select(),!!document.execCommand("Copy",!1,null))&&!(this._textarea.value="")},EDFormulaView.prototype.editCut=function(){return this._textarea.focus(),new egPoint(0,0)!==this._pointEditedPos&&!!this.editCopy()&&!!this._pMmlDoc.deleteNode()&&(this._pMmlDoc.addSaveData(),this.update(),!0)},EDFormulaView.prototype.editPaste=function(clipboardDataText){return void 0===clipboardDataText&&(clipboardDataText=""),this._textarea.focus(),new egPoint(0,0)!==this._pointEditedPos&&!!this._pMmlDoc.pasteMathmlText(clipboardDataText)&&(this._pMmlDoc.addSaveData(),this.update(),!0)},EDFormulaView.prototype.editRedo=function(){return this._textarea.focus(),new egPoint(0,0)!==this._pointEditedPos&&(this._pMmlDoc.mmlRedo()?(this._textarea.value="",this.update(),!0):(this._textarea.value="",!1))},EDFormulaView.prototype.editUndo=function(){return this._textarea.focus(),new egPoint(0,0)!==this._pointEditedPos&&(this._pMmlDoc.mmlUndo()?(this._textarea.value="",this.update(),!0):(this._textarea.value="",!1))},EDFormulaView.prototype.insertFormula=function(index){if(this._textarea.focus(),new egPoint(0,0)===this._pointEditedPos)return!1;if(index==EDMmlFormulaIndex.key_left)this._pMmlDoc.moveLeft(),this.moveToMouseNode();else if(index==EDMmlFormulaIndex.key_right)this._pMmlDoc.moveRight(),this.moveToMouseNode();else{if(index==EDMmlFormulaIndex.key_backspace)this._pMmlDoc.deleteNode();else if(index==EDMmlFormulaIndex.key_selectedAll)this._pMmlDoc.selectedAll();else if(index==EDMmlFormulaIndex.key_enter)this._pMmlDoc.insertEnter();else if(index<EDMmlFormulaIndex.symbol_length){if(!this._pMmlDoc.insertSymbol(index))return!1}else if(index>EDMmlFormulaIndex.symbol_length&&!this._pMmlDoc.insertFormula(index))return!1;this._pMmlDoc.addSaveData(),this.update()}return!0},EDFormulaView.prototype.insertMtable=function(row,col,frametype,rowlinestype){return void 0===frametype&&(frametype=0),void 0===rowlinestype&&(rowlinestype=0),this._textarea.focus(),!(row<1||col<1||new egPoint(0,0)===this._pointEditedPos||!this._pMmlDoc.insertMtable(row,col,frametype,rowlinestype)||(this.update(),this._pMmlDoc.addSaveData(),0))},EDFormulaView.prototype.mousePressEvent=function(e){var rect;this._bInput||(this._leftbtn=!0,rect=this._canvas.getBoundingClientRect(),e=new egPoint(e.clientX-rect.left*(this._canvas.width/rect.width),e.clientY-rect.top*(this._canvas.height/rect.height)),this._pMmlDoc.mousePress(e)&&(this._pointEditedPos=e,this.update()))},EDFormulaView.prototype.mouseReleaseEvent=function(e){this._leftbtn=!1,this._textarea.focus()},EDFormulaView.prototype.mouseDoubleClickEvent=function(e){var rect;this._bInput||(rect=this._canvas.getBoundingClientRect(),e=new egPoint(e.clientX-rect.left*(this._canvas.width/rect.width),e.clientY-rect.top*(this._canvas.height/rect.height)),this._pMmlDoc.mouseDoubleClicked(e)&&(this._pointEditedPos=e,this.update()))},EDFormulaView.prototype.mouseMoveEvent=function(e){var rect;this._bInput||this._leftbtn&&!this._rightbtn&&(rect=this._canvas.getBoundingClientRect(),e=new egPoint(e.clientX-rect.left*(this._canvas.width/rect.width),e.clientY-rect.top*(this._canvas.height/rect.height)),this._pMmlDoc.mouseMove(e))&&(this._pointEditedPos=e,this.update())},EDFormulaView.prototype.keyPressEvent=function(event){if(new egPoint(0,0)!==this._pointEditedPos){if(event.ctrlKey||this.osMac()&&event.metaKey)"c"===event.key||"C"===event.key||67===event.keyCode?this.editCopy():"v"===event.key||"V"===event.key||86===event.keyCode?this._textarea.value="":"x"===event.key||"X"===event.key||88===event.keyCode?this.editCut():"z"===event.key||"Z"===event.key||90===event.keyCode?this.osMac()&&event.shiftKey?this.editRedo():this.editUndo():"y"===event.key||"Y"===event.key||89===event.keyCode?this.editRedo():"s"!==event.key&&"S"!==event.key&&"1"!==event.key&&"2"!==event.key&&"3"!==event.key&&"4"!==event.key&&("="===event.key?this._fFontSize<=100&&(this._fFontSize=this._fFontSize+2,200<this._FontSize)&&(this._FontSize=200):"-"===event.key?10<=this._fFontSize&&(this._fFontSize=this._fFontSize-2,this._FontSize<10)&&(this._FontSize=10):"0"===event.key?this._fFontSize=this._defaultFontSize:"n"===event.key||"N"===event.key?this.openNewMml():"a"===event.key||"A"===event.key||65===event.keyCode?this._pMmlDoc.selectedAll():"h"!==event.key&&event.key);else{if(event.shiftKey){if("ArrowLeft"===event.key)return this._pMmlDoc.selectedLeft(),this.keydownTimer(),void this.update();if("ArrowRight"===event.key)return this._pMmlDoc.selectedRight(),this.keydownTimer(),void this.update()}"Backspace"===event.key||"Delete"===event.key&&parseInt(EDFormulaView.getOSX().bver)<70&&EDFormulaView.osMac()?(this._pMmlDoc.deleteNode(),this._pMmlDoc.addSaveData()):"Delete"===event.key?(this._pMmlDoc.deleteNextNode(),this._pMmlDoc.addSaveData()):"Enter"===event.key?(this._textarea.value="",this._pMmlDoc.insertEnter(),this._pMmlDoc.addSaveData()):"ArrowUp"===event.key?(this._pMmlDoc.moveUp(),this.moveToMouseNode(),this.keydownTimer()):"ArrowDown"===event.key?(this._pMmlDoc.moveDowm(),this.moveToMouseNode(),this.keydownTimer()):"ArrowLeft"===event.key?(this._pMmlDoc.moveLeft(),this.moveToMouseNode(),this.keydownTimer()):"ArrowRight"===event.key?(this._pMmlDoc.moveRight(),this.moveToMouseNode(),this.keydownTimer()):this._bInput||(this.inputMethodEvent(this._textarea.value),this._textarea.value="")}this.update(),this._textarea.focus()}},EDFormulaView.prototype.getUiDate=function(enable,fontdate,colaligntype,fontsize){void 0===fontdate&&(fontdate=[]),void 0===colaligntype&&(colaligntype=[ColAlign.ColAlignLeft]),0<(enable=void 0===enable?[]:enable).length&&(enable[0]=this._FontEnable),1<enable.length&&(enable[1]=this._MtableEnable),2<enable.length&&(enable[2]=this._Undo),3<enable.length&&(enable[3]=this._Redo),1<fontdate.length&&(fontdate[0]=this._FontBold,fontdate[1]=this._FontItalic),0<fontsize.length&&(fontsize[0]=this._fFontSize),0<colaligntype.length&&(colaligntype[0]=this._colaligntype)},EDFormulaView.prototype.clearFormula=function(){this._pointEditedPos=new egPoint(0,0),this._mouseRect=new egRect(0,0,0,0),this._pMmlDoc.clear()},EDFormulaView.prototype.setSize=function(width,height){this._background.setAttribute("width",width.toString()+"px"),this._background.setAttribute("height",height.toString()+"px"),this._background.getContext("2d").fillStyle=this._isDark?"#39393b":"#f3f4f5",this._background.getContext("2d").fillRect(0,0,width,height)},EDFormulaView.prototype.renderFormula=function(outputPng,backgroundWhite){void 0===outputPng&&(outputPng=!1),void 0===backgroundWhite&&(backgroundWhite=!1),this._pMmlDoc.baseFontPixelSize=this._fFontSize,this._pMmlDoc.drawFrames=this._bDrawFrames,""!==this._bColors?this._pMmlDoc.foregroundColor=this._bColors:this._pMmlDoc.foregroundColor="rgb(0, 0, 0)";var setsize=!1;this._rectfSize.width!==this._pMmlDoc.size().width&&(this._rectfSize.width=this._pMmlDoc.size().width,setsize=!0),this._rectfSize.height!==this._pMmlDoc.size().height&&(this._rectfSize.height=this._pMmlDoc.size().height,setsize=!0);var p=(p=new egPoint(this._topleft.x,this._topleft.y)).add(this._movePoint);setsize&&this.setSize(this._rectfSize.width,this._rectfSize.height),outputPng?backgroundWhite?this._pMmlDoc.ctx.putImageData(this._pMmlDoc.outPutMmlPixmapWhite(),p.x,p.y):this._pMmlDoc.ctx.putImageData(this._pMmlDoc.outPutMmlPixmap(),p.x,p.y):this._pMmlDoc.ctx.putImageData(this._pMmlDoc.mmlPixmap,p.x,p.y)},EDFormulaView.prototype.update=function(){var ctx,mousenodePos,x1,vline,_this=this;this._paintflng&&(this._paintflng=!1,setTimeout(function(){_this._paintflng=!0},150),ctx=this._pMmlDoc.ctx,this._pMmlDoc.ctx.clearRect(0,0,ctx.canvas.width,ctx.canvas.height),this._pMmlDoc.ctx.save(),this._pMmlDoc.ctx.globalAlpha=1,this.renderFormula(),this._rightbtn||(ctx=new egLine(0,0,0,0),vline=new egLine(0,0,0,0),mousenodePos=new egPoint(0,0),this._pMmlDoc.getCursor(vline,ctx,this._mouseRect,mousenodePos),this._pointEditedPos.x=vline._vx,this._pointEditedPos.y=vline._vy,this._mouseRect.moveTopLeft(this._mouseRect.topLeft().add(this._topleft)),this.updateui(),1===this._nFlash&&0===this._mouseRect.width&&(this._pMmlDoc.ctx.lineWidth=1,this._pMmlDoc.ctx.strokeStyle="rgb(100, 100, 100)",this._pMmlDoc.ctx.beginPath(),this._pMmlDoc.ctx.moveTo(vline._px+1,vline._py+1),this._pMmlDoc.ctx.lineTo(vline._vx+1,vline._vy+1),this._pMmlDoc.ctx.closePath(),this._pMmlDoc.ctx.stroke(),this._pMmlDoc.ctx.beginPath(),this._pMmlDoc.ctx.moveTo(ctx._px+1,ctx._py+1),this._pMmlDoc.ctx.lineTo(ctx._vx+1,ctx._vy+1),this._pMmlDoc.ctx.closePath(),this._pMmlDoc.ctx.stroke(),ctx=mousenodePos.x+this._canvas.offsetLeft,mousenodePos=mousenodePos.y+this._canvas.offsetTop,this._bInput?(x1=parseInt(this._textarea.style.left),40<(vline=vline._vx-x1)&&(this._textarea.style.width=vline+"px")):(this._textarea.style.width="40px",this._textarea.style.left!=="".concat(Math.round(ctx),"px")&&(this._textarea.style.left="".concat(Math.round(ctx),"px"),this._textarea.focus())),this._textarea.style.top!=="".concat(Math.round(mousenodePos),"px"))&&(this._textarea.style.top="".concat(Math.round(mousenodePos),"px"),this._textarea.focus()),this._pMmlDoc.ctx.globalAlpha=.5,this._pMmlDoc.ctx.fillStyle="rgb(150, 150, 150)",this._pMmlDoc.ctx.fillRect(this._mouseRect.left(),this._mouseRect.top(),this._mouseRect.width,this._mouseRect.height),this._pMmlDoc.ctx.restore()))},EDFormulaView.prototype.inputMethodEvent=function(inputtext){if(!(new egPoint(0,0)===this._pointEditedPos||inputtext.length<1)){if(1<inputtext.length)for(var i=0;i<inputtext.length;++i){var onetext=inputtext.charAt(i);inputtext.length,this._pMmlDoc.insertText(onetext)}else 1===inputtext.length&&this._pMmlDoc.insertText(inputtext);this._pMmlDoc.addSaveData(),this._textarea.focus(),this.update()}},EDFormulaView.prototype.updateui=function(){var isbold=[!1],isitalic=[!1],enable=!this._pMmlDoc.emptyNode(isbold,isitalic),uichange=!1,enable=(enable===this._FontEnable&&isbold[0]===this._FontBold&&isitalic[0]===this._FontItalic||(enable!==this._FontEnable&&(this._FontEnable=enable),this._FontBold=isbold[0],this._FontItalic=isitalic[0],uichange=!0),["left"]),isbold=this._pMmlDoc.hasMtable(enable),isitalic=ColAlign.ColAlignLeft,enable=("right"===enable[0]?isitalic=ColAlign.ColAlignRight:"center"===enable[0]&&(isitalic=ColAlign.ColAlignCenter),isbold===this._MtableEnable&&this._colaligntype===isitalic||(this._MtableEnable=isbold,this._colaligntype=isitalic,uichange=!0),this._pMmlDoc.undoEnable),isbold=this._pMmlDoc.redoEnable,isitalic=(enable!==this._Undo&&(this._Undo=enable,uichange=!0),isbold!==this._Redo&&(this._Redo=isbold,uichange=!0),this._fFontSize);isitalic!==this._FontSize&&(this._FontSize=isitalic,uichange=!0),null!=EDFormulaView._uifunc&&uichange&&EDFormulaView._uifunc()},EDFormulaView.prototype.moveEnd=function(){return this._pMmlDoc.moveEnd()},EDFormulaView.prototype.setColor=function(color){return!!color&&(this._bColors=color,this._pMmlDoc.foregroundColor=this._bColors,this._pMmlDoc.updateDocument(),this.openMml(this._pMmlDoc._strDocument),!0)},EDFormulaView.prototype.moveToMouseNode=function(){var hline=new egLine(0,0,0,0),vline=new egLine(0,0,0,0),mousenodePos=new egPoint(0,0),hline=(this._pMmlDoc.getCursor(vline,hline,this._mouseRect,mousenodePos),vline._px),mousenodePos=vline._py;this._parent.scrollLeft,this._parent.clientWidth,hline<this._parent.scrollLeft+20?this._parent.scrollLeft=hline-20:hline>this._parent.scrollLeft+this._parent.clientWidth-60&&(this._parent.scrollLeft=hline-this._parent.clientWidth+60),mousenodePos<this._parent.scrollTop+20?this._parent.scrollTop=mousenodePos-20:mousenodePos>this._parent.scrollLeft+this._parent.clientHeight-60&&(this._parent.scrollTop=mousenodePos-this._parent.clientHeight+60)},EDFormulaView.prototype.keydownTimer=function(){var _this=this;this._pTimer&&(clearInterval(this._pTimer),this._pTimer=null),this._nFlash=1,this._pTimer=setInterval(function(){_this._nFlash%2==0&&(_this._nFlash=0),_this._nFlash++,_this.update()},500)},EDFormulaView.prototype.setDark=function(isDark){isDark!=this._isDark&&(this._isDark=isDark,this.setSize(this._rectfSize.width,this._rectfSize.height),this._isDark?this._bColors||(this.setColor("#FFFFFF"),this._bColors=""):this._bColors||(this.setColor("#000000"),this._bColors=""))},EDFormulaView.getOSX=function(){var fullver,name,off,nameoff,res={browser:"",platform:"",bver:"",pver:"",mobile:!1,pad:!1,phone:!1},agt=navigator.userAgent;return agt?(res.mobile=-1!=agt.indexOf("Mobile"),-1!=(off=agt.indexOf("Edge"))?(name="Edge",fullver=agt.substr(off+5)):-1!=(off=agt.indexOf("Windows Phone"))?(name="IEMobile",res.mobile=!0,fullver=agt.substr(off+17)):-1!=(off=agt.indexOf("IEMobile"))?(name="IEMobile",res.mobile=!0,fullver=agt.substr(off+9)):-1!=(off=agt.indexOf("MSIE"))?(name="IE",fullver=agt.substr(off+5)):-1!=agt.indexOf("Trident")&&-1!=(off=agt.indexOf("rv:"))?(name="IE",(fullver=agt.substr(off+3))&&(off=fullver.indexOf(")"),res.bver=fullver.substr(0,off))):-1!=(off=agt.indexOf("UCWEB"))?(name="UC",res.mobile=!0,fullver=agt.substr(off+6)):-1!=(off=agt.indexOf("Opera"))?(name="Opera",fullver=agt.substr(off+6)):-1!=(off=agt.indexOf("OPR/"))?(name="Opera",fullver=agt.substr(off+4)):-1!=(off=agt.indexOf("Fennec"))?(name="Firefox",res.mobile=!0,fullver=agt.substr(off+7)):-1!=(off=agt.indexOf("Firefox"))?(name="Firefox",fullver=agt.substr(off+8)):-1!=(off=agt.indexOf("Chrome"))?(name="Chrome",fullver=agt.substr(off+7)):-1!=(off=agt.indexOf("CriOS"))?(name="Chrome",fullver=agt.substr(off+6)):-1!=(off=agt.indexOf("Safari"))?(name="Safari",fullver=agt.substr(off+7)):(nameoff=agt.lastIndexOf(" ")+1)<(off=agt.lastIndexOf("/"))&&(name=agt.substring(nameoff,off),fullver=agt.substring(off+1),0==name.length)&&(name=navigator.appName),res.browser=name,!res.bver&&fullver&&(-1!=(off=(res.bver=fullver).indexOf(";"))&&(res.bver=fullver.substring(0,off)),-1!=(off=fullver.indexOf(" ")))&&(res.bver=fullver.substring(0,off)),-1!=agt.indexOf("iPhone")?(res.mobile=res.phone=!0,res.platform="iPhone"):-1!=agt.indexOf("iPad")?(res.mobile=res.pad=!0,res.platform="iPad"):-1!=agt.indexOf("Mac")?res.platform="Mac":-1!=(off=agt.indexOf("Android"))?(res.platform="Android",(fullver=agt.substr(off+8))&&(off=fullver.indexOf(";"))&&(res.pver=fullver.substring(0,off))):-1!=agt.indexOf("Linux")?res.platform="Linux":-1!=(off=agt.indexOf("Win"))&&(-1!=agt.indexOf("WOW64")||-1!=agt.indexOf("Win64")?res.platform="Win64":res.platform="Win32",off=(off=(fullver=agt.substr(off)).indexOf(";"))&&(fullver=fullver.substring(0,off)).lastIndexOf(" "))&&(res.pver=fullver.substr(off+1)),-1!=(off=agt.indexOf("Mac OS"))&&(fullver=agt.substr(off+7))&&(off=fullver.indexOf(")"))&&(res.pver=fullver.substring(0,off))):res.mobile=!0,res},EDFormulaView.osWin=function(){return-1!=EDFormulaView.getOSX().platform.indexOf("Win")},EDFormulaView.prototype.osMac=function(){return-1!=EDFormulaView.getOSX().platform.indexOf("Mac")},EDFormulaView}();EdrawMath.EDFormulaView=EDFormulaView}(EdrawMath=EdrawMath||{});